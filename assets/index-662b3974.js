var Fa=Object.defineProperty;var $a=(E,_,A)=>_ in E?Fa(E,_,{enumerable:!0,configurable:!0,writable:!0,value:A}):E[_]=A;var se=(E,_,A)=>($a(E,typeof _!="symbol"?_+"":_,A),A);function _mergeNamespaces(E,_){for(var A=0;A<_.length;A++){const T=_[A];if(typeof T!="string"&&!Array.isArray(T)){for(const B in T)if(B!=="default"&&!(B in E)){const I=Object.getOwnPropertyDescriptor(T,B);I&&Object.defineProperty(E,B,I.get?I:{enumerable:!0,get:()=>T[B]})}}}return Object.freeze(Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const B of document.querySelectorAll('link[rel="modulepreload"]'))T(B);new MutationObserver(B=>{for(const I of B)if(I.type==="childList")for(const C of I.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&T(C)}).observe(document,{childList:!0,subtree:!0});function A(B){const I={};return B.integrity&&(I.integrity=B.integrity),B.referrerPolicy&&(I.referrerPolicy=B.referrerPolicy),B.crossOrigin==="use-credentials"?I.credentials="include":B.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function T(B){if(B.ep)return;B.ep=!0;const I=A(B);fetch(B.href,I)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}function getAugmentedNamespace(E){if(E.__esModule)return E;var _=E.default;if(typeof _=="function"){var A=function T(){return this instanceof T?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};A.prototype=_.prototype}else A={};return Object.defineProperty(A,"__esModule",{value:!0}),Object.keys(E).forEach(function(T){var B=Object.getOwnPropertyDescriptor(E,T);Object.defineProperty(A,T,B.get?B:{enumerable:!0,get:function(){return E[T]}})}),A}var vconsole_min={exports:{}};/*!
 * vConsole v3.15.1 (https://github.com/Tencent/vConsole)
 *
 * Tencent is pleased to support the open source community by making vConsole available.
 * Copyright (C) 2017 THL A29 Limited, a Tencent company. All rights reserved.
 * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
 * http://opensource.org/licenses/MIT
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
 */(function(module,exports){(function(E,_){module.exports=_()})(commonjsGlobal||self,function(){return function(){var __webpack_modules__={4264:function(E,_,A){E.exports=A(7588)},5036:function(E,_,A){A(1719),A(5677),A(6394),A(5334),A(6969),A(2021),A(8328),A(2129);var T=A(1287);E.exports=T.Promise},2582:function(E,_,A){A(1646),A(6394),A(2004),A(462),A(8407),A(2429),A(1172),A(8288),A(1274),A(8201),A(6626),A(3211),A(9952),A(15),A(9831),A(7521),A(2972),A(6956),A(5222),A(2257);var T=A(1287);E.exports=T.Symbol},8257:function(E,_,A){var T=A(7583),B=A(9212),I=A(5637),C=T.TypeError;E.exports=function(R){if(B(R))return R;throw C(I(R)+" is not a function")}},1186:function(E,_,A){var T=A(7583),B=A(2097),I=A(5637),C=T.TypeError;E.exports=function(R){if(B(R))return R;throw C(I(R)+" is not a constructor")}},9882:function(E,_,A){var T=A(7583),B=A(9212),I=T.String,C=T.TypeError;E.exports=function(R){if(typeof R=="object"||B(R))return R;throw C("Can't set "+I(R)+" as a prototype")}},6288:function(E,_,A){var T=A(3649),B=A(3590),I=A(4615),C=T("unscopables"),R=Array.prototype;R[C]==null&&I.f(R,C,{configurable:!0,value:B(null)}),E.exports=function(L){R[C][L]=!0}},4761:function(E,_,A){var T=A(7583),B=A(2447),I=T.TypeError;E.exports=function(C,R){if(B(R,C))return C;throw I("Incorrect invocation")}},2569:function(E,_,A){var T=A(7583),B=A(794),I=T.String,C=T.TypeError;E.exports=function(R){if(B(R))return R;throw C(I(R)+" is not an object")}},5766:function(E,_,A){var T=A(2977),B=A(6782),I=A(1825),C=function(R){return function(L,D,V){var U,z=T(L),W=I(z),Y=B(V,W);if(R&&D!=D){for(;W>Y;)if((U=z[Y++])!=U)return!0}else for(;W>Y;Y++)if((R||Y in z)&&z[Y]===D)return R||Y||0;return!R&&-1}};E.exports={includes:C(!0),indexOf:C(!1)}},4805:function(E,_,A){var T=A(2938),B=A(7386),I=A(5044),C=A(1324),R=A(1825),L=A(4822),D=B([].push),V=function(U){var z=U==1,W=U==2,Y=U==3,K=U==4,J=U==6,et=U==7,it=U==5||J;return function(rt,st,lt,ct){for(var at,ht,mt=C(rt),yt=I(mt),Tt=T(st,lt),At=R(yt),pt=0,Et=ct||L,Vt=z?Et(rt,At):W||et?Et(rt,0):void 0;At>pt;pt++)if((it||pt in yt)&&(ht=Tt(at=yt[pt],pt,mt),U))if(z)Vt[pt]=ht;else if(ht)switch(U){case 3:return!0;case 5:return at;case 6:return pt;case 2:D(Vt,at)}else switch(U){case 4:return!1;case 7:D(Vt,at)}return J?-1:Y||K?K:Vt}};E.exports={forEach:V(0),map:V(1),filter:V(2),some:V(3),every:V(4),find:V(5),findIndex:V(6),filterReject:V(7)}},9269:function(E,_,A){var T=A(6544),B=A(3649),I=A(4061),C=B("species");E.exports=function(R){return I>=51||!T(function(){var L=[];return(L.constructor={})[C]=function(){return{foo:1}},L[R](Boolean).foo!==1})}},4546:function(E,_,A){var T=A(7583),B=A(6782),I=A(1825),C=A(5999),R=T.Array,L=Math.max;E.exports=function(D,V,U){for(var z=I(D),W=B(V,z),Y=B(U===void 0?z:U,z),K=R(L(Y-W,0)),J=0;W<Y;W++,J++)C(K,J,D[W]);return K.length=J,K}},6917:function(E,_,A){var T=A(7386);E.exports=T([].slice)},5289:function(E,_,A){var T=A(7583),B=A(4521),I=A(2097),C=A(794),R=A(3649)("species"),L=T.Array;E.exports=function(D){var V;return B(D)&&(V=D.constructor,(I(V)&&(V===L||B(V.prototype))||C(V)&&(V=V[R])===null)&&(V=void 0)),V===void 0?L:V}},4822:function(E,_,A){var T=A(5289);E.exports=function(B,I){return new(T(B))(I===0?0:I)}},3616:function(E,_,A){var T=A(3649)("iterator"),B=!1;try{var I=0,C={next:function(){return{done:!!I++}},return:function(){B=!0}};C[T]=function(){return this},Array.from(C,function(){throw 2})}catch{}E.exports=function(R,L){if(!L&&!B)return!1;var D=!1;try{var V={};V[T]=function(){return{next:function(){return{done:D=!0}}}},R(V)}catch{}return D}},9624:function(E,_,A){var T=A(7386),B=T({}.toString),I=T("".slice);E.exports=function(C){return I(B(C),8,-1)}},3058:function(E,_,A){var T=A(7583),B=A(8191),I=A(9212),C=A(9624),R=A(3649)("toStringTag"),L=T.Object,D=C(function(){return arguments}())=="Arguments";E.exports=B?C:function(V){var U,z,W;return V===void 0?"Undefined":V===null?"Null":typeof(z=function(Y,K){try{return Y[K]}catch{}}(U=L(V),R))=="string"?z:D?C(U):(W=C(U))=="Object"&&I(U.callee)?"Arguments":W}},1509:function(E,_,A){var T=A(7386)("".replace),B=String(Error("zxcasd").stack),I=/\n\s*at [^:]*:[^\n]*/,C=I.test(B);E.exports=function(R,L){if(C&&typeof R=="string")for(;L--;)R=T(R,I,"");return R}},3478:function(E,_,A){var T=A(2870),B=A(929),I=A(6683),C=A(4615);E.exports=function(R,L,D){for(var V=B(L),U=C.f,z=I.f,W=0;W<V.length;W++){var Y=V[W];T(R,Y)||D&&T(D,Y)||U(R,Y,z(L,Y))}}},926:function(E,_,A){var T=A(6544);E.exports=!T(function(){function B(){}return B.prototype.constructor=null,Object.getPrototypeOf(new B)!==B.prototype})},4683:function(E,_,A){var T=A(2365).IteratorPrototype,B=A(3590),I=A(4677),C=A(8821),R=A(339),L=function(){return this};E.exports=function(D,V,U,z){var W=V+" Iterator";return D.prototype=B(T,{next:I(+!z,U)}),C(D,W,!1,!0),R[W]=L,D}},57:function(E,_,A){var T=A(8494),B=A(4615),I=A(4677);E.exports=T?function(C,R,L){return B.f(C,R,I(1,L))}:function(C,R,L){return C[R]=L,C}},4677:function(E){E.exports=function(_,A){return{enumerable:!(1&_),configurable:!(2&_),writable:!(4&_),value:A}}},5999:function(E,_,A){var T=A(8734),B=A(4615),I=A(4677);E.exports=function(C,R,L){var D=T(R);D in C?B.f(C,D,I(0,L)):C[D]=L}},9012:function(E,_,A){var T=A(7263),B=A(8262),I=A(6268),C=A(4340),R=A(9212),L=A(4683),D=A(729),V=A(7496),U=A(8821),z=A(57),W=A(1270),Y=A(3649),K=A(339),J=A(2365),et=C.PROPER,it=C.CONFIGURABLE,rt=J.IteratorPrototype,st=J.BUGGY_SAFARI_ITERATORS,lt=Y("iterator"),ct="keys",at="values",ht="entries",mt=function(){return this};E.exports=function(yt,Tt,At,pt,Et,Vt,Ot){L(At,Tt,pt);var gt,bt,$t,Lt=function(Jt){if(Jt===Et&&Mt)return Mt;if(!st&&Jt in _t)return _t[Jt];switch(Jt){case ct:case at:case ht:return function(){return new At(this,Jt)}}return function(){return new At(this)}},St=Tt+" Iterator",Ct=!1,_t=yt.prototype,wt=_t[lt]||_t["@@iterator"]||Et&&_t[Et],Mt=!st&&wt||Lt(Et),Gt=Tt=="Array"&&_t.entries||wt;if(Gt&&(gt=D(Gt.call(new yt)))!==Object.prototype&&gt.next&&(I||D(gt)===rt||(V?V(gt,rt):R(gt[lt])||W(gt,lt,mt)),U(gt,St,!0,!0),I&&(K[St]=mt)),et&&Et==at&&wt&&wt.name!==at&&(!I&&it?z(_t,"name",at):(Ct=!0,Mt=function(){return B(wt,this)})),Et)if(bt={values:Lt(at),keys:Vt?Mt:Lt(ct),entries:Lt(ht)},Ot)for($t in bt)(st||Ct||!($t in _t))&&W(_t,$t,bt[$t]);else T({target:Tt,proto:!0,forced:st||Ct},bt);return I&&!Ot||_t[lt]===Mt||W(_t,lt,Mt,{name:Et}),K[Tt]=Mt,bt}},2219:function(E,_,A){var T=A(1287),B=A(2870),I=A(491),C=A(4615).f;E.exports=function(R){var L=T.Symbol||(T.Symbol={});B(L,R)||C(L,R,{value:I.f(R)})}},8494:function(E,_,A){var T=A(6544);E.exports=!T(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},6668:function(E,_,A){var T=A(7583),B=A(794),I=T.document,C=B(I)&&B(I.createElement);E.exports=function(R){return C?I.createElement(R):{}}},6778:function(E){E.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9307:function(E,_,A){var T=A(6668)("span").classList,B=T&&T.constructor&&T.constructor.prototype;E.exports=B===Object.prototype?void 0:B},2274:function(E){E.exports=typeof window=="object"},3256:function(E,_,A){var T=A(6918),B=A(7583);E.exports=/ipad|iphone|ipod/i.test(T)&&B.Pebble!==void 0},7020:function(E,_,A){var T=A(6918);E.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(T)},5354:function(E,_,A){var T=A(9624),B=A(7583);E.exports=T(B.process)=="process"},6846:function(E,_,A){var T=A(6918);E.exports=/web0s(?!.*chrome)/i.test(T)},6918:function(E,_,A){var T=A(5897);E.exports=T("navigator","userAgent")||""},4061:function(E,_,A){var T,B,I=A(7583),C=A(6918),R=I.process,L=I.Deno,D=R&&R.versions||L&&L.version,V=D&&D.v8;V&&(B=(T=V.split("."))[0]>0&&T[0]<4?1:+(T[0]+T[1])),!B&&C&&(!(T=C.match(/Edge\/(\d+)/))||T[1]>=74)&&(T=C.match(/Chrome\/(\d+)/))&&(B=+T[1]),E.exports=B},5690:function(E){E.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1178:function(E,_,A){var T=A(6544),B=A(4677);E.exports=!T(function(){var I=Error("a");return!("stack"in I)||(Object.defineProperty(I,"stack",B(1,7)),I.stack!==7)})},7263:function(E,_,A){var T=A(7583),B=A(6683).f,I=A(57),C=A(1270),R=A(460),L=A(3478),D=A(4451);E.exports=function(V,U){var z,W,Y,K,J,et=V.target,it=V.global,rt=V.stat;if(z=it?T:rt?T[et]||R(et,{}):(T[et]||{}).prototype)for(W in U){if(K=U[W],Y=V.noTargetGet?(J=B(z,W))&&J.value:z[W],!D(it?W:et+(rt?".":"#")+W,V.forced)&&Y!==void 0){if(typeof K==typeof Y)continue;L(K,Y)}(V.sham||Y&&Y.sham)&&I(K,"sham",!0),C(z,W,K,V)}}},6544:function(E){E.exports=function(_){try{return!!_()}catch{return!0}}},1611:function(E,_,A){var T=A(8987),B=Function.prototype,I=B.apply,C=B.call;E.exports=typeof Reflect=="object"&&Reflect.apply||(T?C.bind(I):function(){return C.apply(I,arguments)})},2938:function(E,_,A){var T=A(7386),B=A(8257),I=A(8987),C=T(T.bind);E.exports=function(R,L){return B(R),L===void 0?R:I?C(R,L):function(){return R.apply(L,arguments)}}},8987:function(E,_,A){var T=A(6544);E.exports=!T(function(){var B=(function(){}).bind();return typeof B!="function"||B.hasOwnProperty("prototype")})},8262:function(E,_,A){var T=A(8987),B=Function.prototype.call;E.exports=T?B.bind(B):function(){return B.apply(B,arguments)}},4340:function(E,_,A){var T=A(8494),B=A(2870),I=Function.prototype,C=T&&Object.getOwnPropertyDescriptor,R=B(I,"name"),L=R&&(function(){}).name==="something",D=R&&(!T||T&&C(I,"name").configurable);E.exports={EXISTS:R,PROPER:L,CONFIGURABLE:D}},7386:function(E,_,A){var T=A(8987),B=Function.prototype,I=B.bind,C=B.call,R=T&&I.bind(C,C);E.exports=T?function(L){return L&&R(L)}:function(L){return L&&function(){return C.apply(L,arguments)}}},5897:function(E,_,A){var T=A(7583),B=A(9212),I=function(C){return B(C)?C:void 0};E.exports=function(C,R){return arguments.length<2?I(T[C]):T[C]&&T[C][R]}},8272:function(E,_,A){var T=A(3058),B=A(911),I=A(339),C=A(3649)("iterator");E.exports=function(R){if(R!=null)return B(R,C)||B(R,"@@iterator")||I[T(R)]}},6307:function(E,_,A){var T=A(7583),B=A(8262),I=A(8257),C=A(2569),R=A(5637),L=A(8272),D=T.TypeError;E.exports=function(V,U){var z=arguments.length<2?L(V):U;if(I(z))return C(B(z,V));throw D(R(V)+" is not iterable")}},911:function(E,_,A){var T=A(8257);E.exports=function(B,I){var C=B[I];return C==null?void 0:T(C)}},7583:function(E,_,A){var T=function(B){return B&&B.Math==Math&&B};E.exports=T(typeof globalThis=="object"&&globalThis)||T(typeof window=="object"&&window)||T(typeof self=="object"&&self)||T(typeof A.g=="object"&&A.g)||function(){return this}()||Function("return this")()},2870:function(E,_,A){var T=A(7386),B=A(1324),I=T({}.hasOwnProperty);E.exports=Object.hasOwn||function(C,R){return I(B(C),R)}},4639:function(E){E.exports={}},2716:function(E,_,A){var T=A(7583);E.exports=function(B,I){var C=T.console;C&&C.error&&(arguments.length==1?C.error(B):C.error(B,I))}},482:function(E,_,A){var T=A(5897);E.exports=T("document","documentElement")},275:function(E,_,A){var T=A(8494),B=A(6544),I=A(6668);E.exports=!T&&!B(function(){return Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a!=7})},5044:function(E,_,A){var T=A(7583),B=A(7386),I=A(6544),C=A(9624),R=T.Object,L=B("".split);E.exports=I(function(){return!R("z").propertyIsEnumerable(0)})?function(D){return C(D)=="String"?L(D,""):R(D)}:R},9734:function(E,_,A){var T=A(7386),B=A(9212),I=A(1314),C=T(Function.toString);B(I.inspectSource)||(I.inspectSource=function(R){return C(R)}),E.exports=I.inspectSource},4402:function(E,_,A){var T=A(794),B=A(57);E.exports=function(I,C){T(C)&&"cause"in C&&B(I,"cause",C.cause)}},2743:function(E,_,A){var T,B,I,C=A(9491),R=A(7583),L=A(7386),D=A(794),V=A(57),U=A(2870),z=A(1314),W=A(9137),Y=A(4639),K="Object already initialized",J=R.TypeError,et=R.WeakMap;if(C||z.state){var it=z.state||(z.state=new et),rt=L(it.get),st=L(it.has),lt=L(it.set);T=function(at,ht){if(st(it,at))throw new J(K);return ht.facade=at,lt(it,at,ht),ht},B=function(at){return rt(it,at)||{}},I=function(at){return st(it,at)}}else{var ct=W("state");Y[ct]=!0,T=function(at,ht){if(U(at,ct))throw new J(K);return ht.facade=at,V(at,ct,ht),ht},B=function(at){return U(at,ct)?at[ct]:{}},I=function(at){return U(at,ct)}}E.exports={set:T,get:B,has:I,enforce:function(at){return I(at)?B(at):T(at,{})},getterFor:function(at){return function(ht){var mt;if(!D(ht)||(mt=B(ht)).type!==at)throw J("Incompatible receiver, "+at+" required");return mt}}}},114:function(E,_,A){var T=A(3649),B=A(339),I=T("iterator"),C=Array.prototype;E.exports=function(R){return R!==void 0&&(B.Array===R||C[I]===R)}},4521:function(E,_,A){var T=A(9624);E.exports=Array.isArray||function(B){return T(B)=="Array"}},9212:function(E){E.exports=function(_){return typeof _=="function"}},2097:function(E,_,A){var T=A(7386),B=A(6544),I=A(9212),C=A(3058),R=A(5897),L=A(9734),D=function(){},V=[],U=R("Reflect","construct"),z=/^\s*(?:class|function)\b/,W=T(z.exec),Y=!z.exec(D),K=function(et){if(!I(et))return!1;try{return U(D,V,et),!0}catch{return!1}},J=function(et){if(!I(et))return!1;switch(C(et)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Y||!!W(z,L(et))}catch{return!0}};J.sham=!0,E.exports=!U||B(function(){var et;return K(K.call)||!K(Object)||!K(function(){et=!0})||et})?J:K},4451:function(E,_,A){var T=A(6544),B=A(9212),I=/#|\.prototype\./,C=function(U,z){var W=L[R(U)];return W==V||W!=D&&(B(z)?T(z):!!z)},R=C.normalize=function(U){return String(U).replace(I,".").toLowerCase()},L=C.data={},D=C.NATIVE="N",V=C.POLYFILL="P";E.exports=C},794:function(E,_,A){var T=A(9212);E.exports=function(B){return typeof B=="object"?B!==null:T(B)}},6268:function(E){E.exports=!1},5871:function(E,_,A){var T=A(7583),B=A(5897),I=A(9212),C=A(2447),R=A(7786),L=T.Object;E.exports=R?function(D){return typeof D=="symbol"}:function(D){var V=B("Symbol");return I(V)&&C(V.prototype,L(D))}},4026:function(E,_,A){var T=A(7583),B=A(2938),I=A(8262),C=A(2569),R=A(5637),L=A(114),D=A(1825),V=A(2447),U=A(6307),z=A(8272),W=A(7093),Y=T.TypeError,K=function(et,it){this.stopped=et,this.result=it},J=K.prototype;E.exports=function(et,it,rt){var st,lt,ct,at,ht,mt,yt,Tt=rt&&rt.that,At=!(!rt||!rt.AS_ENTRIES),pt=!(!rt||!rt.IS_ITERATOR),Et=!(!rt||!rt.INTERRUPTED),Vt=B(it,Tt),Ot=function(bt){return st&&W(st,"normal",bt),new K(!0,bt)},gt=function(bt){return At?(C(bt),Et?Vt(bt[0],bt[1],Ot):Vt(bt[0],bt[1])):Et?Vt(bt,Ot):Vt(bt)};if(pt)st=et;else{if(!(lt=z(et)))throw Y(R(et)+" is not iterable");if(L(lt)){for(ct=0,at=D(et);at>ct;ct++)if((ht=gt(et[ct]))&&V(J,ht))return ht;return new K(!1)}st=U(et,lt)}for(mt=st.next;!(yt=I(mt,st)).done;){try{ht=gt(yt.value)}catch(bt){W(st,"throw",bt)}if(typeof ht=="object"&&ht&&V(J,ht))return ht}return new K(!1)}},7093:function(E,_,A){var T=A(8262),B=A(2569),I=A(911);E.exports=function(C,R,L){var D,V;B(C);try{if(!(D=I(C,"return"))){if(R==="throw")throw L;return L}D=T(D,C)}catch(U){V=!0,D=U}if(R==="throw")throw L;if(V)throw D;return B(D),L}},2365:function(E,_,A){var T,B,I,C=A(6544),R=A(9212),L=A(3590),D=A(729),V=A(1270),U=A(3649),z=A(6268),W=U("iterator"),Y=!1;[].keys&&("next"in(I=[].keys())?(B=D(D(I)))!==Object.prototype&&(T=B):Y=!0),T==null||C(function(){var K={};return T[W].call(K)!==K})?T={}:z&&(T=L(T)),R(T[W])||V(T,W,function(){return this}),E.exports={IteratorPrototype:T,BUGGY_SAFARI_ITERATORS:Y}},339:function(E){E.exports={}},1825:function(E,_,A){var T=A(97);E.exports=function(B){return T(B.length)}},2095:function(E,_,A){var T,B,I,C,R,L,D,V,U=A(7583),z=A(2938),W=A(6683).f,Y=A(8117).set,K=A(7020),J=A(3256),et=A(6846),it=A(5354),rt=U.MutationObserver||U.WebKitMutationObserver,st=U.document,lt=U.process,ct=U.Promise,at=W(U,"queueMicrotask"),ht=at&&at.value;ht||(T=function(){var mt,yt;for(it&&(mt=lt.domain)&&mt.exit();B;){yt=B.fn,B=B.next;try{yt()}catch(Tt){throw B?C():I=void 0,Tt}}I=void 0,mt&&mt.enter()},K||it||et||!rt||!st?!J&&ct&&ct.resolve?((D=ct.resolve(void 0)).constructor=ct,V=z(D.then,D),C=function(){V(T)}):it?C=function(){lt.nextTick(T)}:(Y=z(Y,U),C=function(){Y(T)}):(R=!0,L=st.createTextNode(""),new rt(T).observe(L,{characterData:!0}),C=function(){L.data=R=!R})),E.exports=ht||function(mt){var yt={fn:mt,next:void 0};I&&(I.next=yt),B||(B=yt,C()),I=yt}},783:function(E,_,A){var T=A(7583);E.exports=T.Promise},8640:function(E,_,A){var T=A(4061),B=A(6544);E.exports=!!Object.getOwnPropertySymbols&&!B(function(){var I=Symbol();return!String(I)||!(Object(I)instanceof Symbol)||!Symbol.sham&&T&&T<41})},9491:function(E,_,A){var T=A(7583),B=A(9212),I=A(9734),C=T.WeakMap;E.exports=B(C)&&/native code/.test(I(C))},5084:function(E,_,A){var T=A(8257),B=function(I){var C,R;this.promise=new I(function(L,D){if(C!==void 0||R!==void 0)throw TypeError("Bad Promise constructor");C=L,R=D}),this.resolve=T(C),this.reject=T(R)};E.exports.f=function(I){return new B(I)}},2764:function(E,_,A){var T=A(8320);E.exports=function(B,I){return B===void 0?arguments.length<2?"":I:T(B)}},3590:function(E,_,A){var T,B=A(2569),I=A(8728),C=A(5690),R=A(4639),L=A(482),D=A(6668),V=A(9137),U=V("IE_PROTO"),z=function(){},W=function(J){return"<script>"+J+"<\/script>"},Y=function(J){J.write(W("")),J.close();var et=J.parentWindow.Object;return J=null,et},K=function(){try{T=new ActiveXObject("htmlfile")}catch{}var J,et;K=typeof document<"u"?document.domain&&T?Y(T):((et=D("iframe")).style.display="none",L.appendChild(et),et.src="javascript:",(J=et.contentWindow.document).open(),J.write(W("document.F=Object")),J.close(),J.F):Y(T);for(var it=C.length;it--;)delete K.prototype[C[it]];return K()};R[U]=!0,E.exports=Object.create||function(J,et){var it;return J!==null?(z.prototype=B(J),it=new z,z.prototype=null,it[U]=J):it=K(),et===void 0?it:I.f(it,et)}},8728:function(E,_,A){var T=A(8494),B=A(7670),I=A(4615),C=A(2569),R=A(2977),L=A(5432);_.f=T&&!B?Object.defineProperties:function(D,V){C(D);for(var U,z=R(V),W=L(V),Y=W.length,K=0;Y>K;)I.f(D,U=W[K++],z[U]);return D}},4615:function(E,_,A){var T=A(7583),B=A(8494),I=A(275),C=A(7670),R=A(2569),L=A(8734),D=T.TypeError,V=Object.defineProperty,U=Object.getOwnPropertyDescriptor,z="enumerable",W="configurable",Y="writable";_.f=B?C?function(K,J,et){if(R(K),J=L(J),R(et),typeof K=="function"&&J==="prototype"&&"value"in et&&Y in et&&!et.writable){var it=U(K,J);it&&it.writable&&(K[J]=et.value,et={configurable:W in et?et.configurable:it.configurable,enumerable:z in et?et.enumerable:it.enumerable,writable:!1})}return V(K,J,et)}:V:function(K,J,et){if(R(K),J=L(J),R(et),I)try{return V(K,J,et)}catch{}if("get"in et||"set"in et)throw D("Accessors not supported");return"value"in et&&(K[J]=et.value),K}},6683:function(E,_,A){var T=A(8494),B=A(8262),I=A(112),C=A(4677),R=A(2977),L=A(8734),D=A(2870),V=A(275),U=Object.getOwnPropertyDescriptor;_.f=T?U:function(z,W){if(z=R(z),W=L(W),V)try{return U(z,W)}catch{}if(D(z,W))return C(!B(I.f,z,W),z[W])}},3130:function(E,_,A){var T=A(9624),B=A(2977),I=A(9275).f,C=A(4546),R=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];E.exports.f=function(L){return R&&T(L)=="Window"?function(D){try{return I(D)}catch{return C(R)}}(L):I(B(L))}},9275:function(E,_,A){var T=A(8356),B=A(5690).concat("length","prototype");_.f=Object.getOwnPropertyNames||function(I){return T(I,B)}},4012:function(E,_){_.f=Object.getOwnPropertySymbols},729:function(E,_,A){var T=A(7583),B=A(2870),I=A(9212),C=A(1324),R=A(9137),L=A(926),D=R("IE_PROTO"),V=T.Object,U=V.prototype;E.exports=L?V.getPrototypeOf:function(z){var W=C(z);if(B(W,D))return W[D];var Y=W.constructor;return I(Y)&&W instanceof Y?Y.prototype:W instanceof V?U:null}},2447:function(E,_,A){var T=A(7386);E.exports=T({}.isPrototypeOf)},8356:function(E,_,A){var T=A(7386),B=A(2870),I=A(2977),C=A(5766).indexOf,R=A(4639),L=T([].push);E.exports=function(D,V){var U,z=I(D),W=0,Y=[];for(U in z)!B(R,U)&&B(z,U)&&L(Y,U);for(;V.length>W;)B(z,U=V[W++])&&(~C(Y,U)||L(Y,U));return Y}},5432:function(E,_,A){var T=A(8356),B=A(5690);E.exports=Object.keys||function(I){return T(I,B)}},112:function(E,_){var A={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor,B=T&&!A.call({1:2},1);_.f=B?function(I){var C=T(this,I);return!!C&&C.enumerable}:A},7496:function(E,_,A){var T=A(7386),B=A(2569),I=A(9882);E.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var C,R=!1,L={};try{(C=T(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(L,[]),R=L instanceof Array}catch{}return function(D,V){return B(D),I(V),R?C(D,V):D.__proto__=V,D}}():void 0)},3060:function(E,_,A){var T=A(8191),B=A(3058);E.exports=T?{}.toString:function(){return"[object "+B(this)+"]"}},6252:function(E,_,A){var T=A(7583),B=A(8262),I=A(9212),C=A(794),R=T.TypeError;E.exports=function(L,D){var V,U;if(D==="string"&&I(V=L.toString)&&!C(U=B(V,L))||I(V=L.valueOf)&&!C(U=B(V,L))||D!=="string"&&I(V=L.toString)&&!C(U=B(V,L)))return U;throw R("Can't convert object to primitive value")}},929:function(E,_,A){var T=A(5897),B=A(7386),I=A(9275),C=A(4012),R=A(2569),L=B([].concat);E.exports=T("Reflect","ownKeys")||function(D){var V=I.f(R(D)),U=C.f;return U?L(V,U(D)):V}},1287:function(E,_,A){var T=A(7583);E.exports=T},544:function(E){E.exports=function(_){try{return{error:!1,value:_()}}catch(A){return{error:!0,value:A}}}},5732:function(E,_,A){var T=A(2569),B=A(794),I=A(5084);E.exports=function(C,R){if(T(C),B(R)&&R.constructor===C)return R;var L=I.f(C);return(0,L.resolve)(R),L.promise}},2723:function(E){var _=function(){this.head=null,this.tail=null};_.prototype={add:function(A){var T={item:A,next:null};this.head?this.tail.next=T:this.head=T,this.tail=T},get:function(){var A=this.head;if(A)return this.head=A.next,this.tail===A&&(this.tail=null),A.item}},E.exports=_},6893:function(E,_,A){var T=A(1270);E.exports=function(B,I,C){for(var R in I)T(B,R,I[R],C);return B}},1270:function(E,_,A){var T=A(7583),B=A(9212),I=A(2870),C=A(57),R=A(460),L=A(9734),D=A(2743),V=A(4340).CONFIGURABLE,U=D.get,z=D.enforce,W=String(String).split("String");(E.exports=function(Y,K,J,et){var it,rt=!!et&&!!et.unsafe,st=!!et&&!!et.enumerable,lt=!!et&&!!et.noTargetGet,ct=et&&et.name!==void 0?et.name:K;B(J)&&(String(ct).slice(0,7)==="Symbol("&&(ct="["+String(ct).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!I(J,"name")||V&&J.name!==ct)&&C(J,"name",ct),(it=z(J)).source||(it.source=W.join(typeof ct=="string"?ct:""))),Y!==T?(rt?!lt&&Y[K]&&(st=!0):delete Y[K],st?Y[K]=J:C(Y,K,J)):st?Y[K]=J:R(K,J)})(Function.prototype,"toString",function(){return B(this)&&U(this).source||L(this)})},3955:function(E,_,A){var T=A(7583).TypeError;E.exports=function(B){if(B==null)throw T("Can't call method on "+B);return B}},460:function(E,_,A){var T=A(7583),B=Object.defineProperty;E.exports=function(I,C){try{B(T,I,{value:C,configurable:!0,writable:!0})}catch{T[I]=C}return C}},7730:function(E,_,A){var T=A(5897),B=A(4615),I=A(3649),C=A(8494),R=I("species");E.exports=function(L){var D=T(L),V=B.f;C&&D&&!D[R]&&V(D,R,{configurable:!0,get:function(){return this}})}},8821:function(E,_,A){var T=A(4615).f,B=A(2870),I=A(3649)("toStringTag");E.exports=function(C,R,L){C&&!L&&(C=C.prototype),C&&!B(C,I)&&T(C,I,{configurable:!0,value:R})}},9137:function(E,_,A){var T=A(7836),B=A(8284),I=T("keys");E.exports=function(C){return I[C]||(I[C]=B(C))}},1314:function(E,_,A){var T=A(7583),B=A(460),I="__core-js_shared__",C=T[I]||B(I,{});E.exports=C},7836:function(E,_,A){var T=A(6268),B=A(1314);(E.exports=function(I,C){return B[I]||(B[I]=C!==void 0?C:{})})("versions",[]).push({version:"3.21.1",mode:T?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},564:function(E,_,A){var T=A(2569),B=A(1186),I=A(3649)("species");E.exports=function(C,R){var L,D=T(C).constructor;return D===void 0||(L=T(D)[I])==null?R:B(L)}},6389:function(E,_,A){var T=A(7386),B=A(7486),I=A(8320),C=A(3955),R=T("".charAt),L=T("".charCodeAt),D=T("".slice),V=function(U){return function(z,W){var Y,K,J=I(C(z)),et=B(W),it=J.length;return et<0||et>=it?U?"":void 0:(Y=L(J,et))<55296||Y>56319||et+1===it||(K=L(J,et+1))<56320||K>57343?U?R(J,et):Y:U?D(J,et,et+2):K-56320+(Y-55296<<10)+65536}};E.exports={codeAt:V(!1),charAt:V(!0)}},8117:function(E,_,A){var T,B,I,C,R=A(7583),L=A(1611),D=A(2938),V=A(9212),U=A(2870),z=A(6544),W=A(482),Y=A(6917),K=A(6668),J=A(7520),et=A(7020),it=A(5354),rt=R.setImmediate,st=R.clearImmediate,lt=R.process,ct=R.Dispatch,at=R.Function,ht=R.MessageChannel,mt=R.String,yt=0,Tt={},At="onreadystatechange";try{T=R.location}catch{}var pt=function(gt){if(U(Tt,gt)){var bt=Tt[gt];delete Tt[gt],bt()}},Et=function(gt){return function(){pt(gt)}},Vt=function(gt){pt(gt.data)},Ot=function(gt){R.postMessage(mt(gt),T.protocol+"//"+T.host)};rt&&st||(rt=function(gt){J(arguments.length,1);var bt=V(gt)?gt:at(gt),$t=Y(arguments,1);return Tt[++yt]=function(){L(bt,void 0,$t)},B(yt),yt},st=function(gt){delete Tt[gt]},it?B=function(gt){lt.nextTick(Et(gt))}:ct&&ct.now?B=function(gt){ct.now(Et(gt))}:ht&&!et?(C=(I=new ht).port2,I.port1.onmessage=Vt,B=D(C.postMessage,C)):R.addEventListener&&V(R.postMessage)&&!R.importScripts&&T&&T.protocol!=="file:"&&!z(Ot)?(B=Ot,R.addEventListener("message",Vt,!1)):B=At in K("script")?function(gt){W.appendChild(K("script")).onreadystatechange=function(){W.removeChild(this),pt(gt)}}:function(gt){setTimeout(Et(gt),0)}),E.exports={set:rt,clear:st}},6782:function(E,_,A){var T=A(7486),B=Math.max,I=Math.min;E.exports=function(C,R){var L=T(C);return L<0?B(L+R,0):I(L,R)}},2977:function(E,_,A){var T=A(5044),B=A(3955);E.exports=function(I){return T(B(I))}},7486:function(E){var _=Math.ceil,A=Math.floor;E.exports=function(T){var B=+T;return B!=B||B===0?0:(B>0?A:_)(B)}},97:function(E,_,A){var T=A(7486),B=Math.min;E.exports=function(I){return I>0?B(T(I),9007199254740991):0}},1324:function(E,_,A){var T=A(7583),B=A(3955),I=T.Object;E.exports=function(C){return I(B(C))}},2670:function(E,_,A){var T=A(7583),B=A(8262),I=A(794),C=A(5871),R=A(911),L=A(6252),D=A(3649),V=T.TypeError,U=D("toPrimitive");E.exports=function(z,W){if(!I(z)||C(z))return z;var Y,K=R(z,U);if(K){if(W===void 0&&(W="default"),Y=B(K,z,W),!I(Y)||C(Y))return Y;throw V("Can't convert object to primitive value")}return W===void 0&&(W="number"),L(z,W)}},8734:function(E,_,A){var T=A(2670),B=A(5871);E.exports=function(I){var C=T(I,"string");return B(C)?C:C+""}},8191:function(E,_,A){var T={};T[A(3649)("toStringTag")]="z",E.exports=String(T)==="[object z]"},8320:function(E,_,A){var T=A(7583),B=A(3058),I=T.String;E.exports=function(C){if(B(C)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return I(C)}},5637:function(E,_,A){var T=A(7583).String;E.exports=function(B){try{return T(B)}catch{return"Object"}}},8284:function(E,_,A){var T=A(7386),B=0,I=Math.random(),C=T(1 .toString);E.exports=function(R){return"Symbol("+(R===void 0?"":R)+")_"+C(++B+I,36)}},7786:function(E,_,A){var T=A(8640);E.exports=T&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7670:function(E,_,A){var T=A(8494),B=A(6544);E.exports=T&&B(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},7520:function(E,_,A){var T=A(7583).TypeError;E.exports=function(B,I){if(B<I)throw T("Not enough arguments");return B}},491:function(E,_,A){var T=A(3649);_.f=T},3649:function(E,_,A){var T=A(7583),B=A(7836),I=A(2870),C=A(8284),R=A(8640),L=A(7786),D=B("wks"),V=T.Symbol,U=V&&V.for,z=L?V:V&&V.withoutSetter||C;E.exports=function(W){if(!I(D,W)||!R&&typeof D[W]!="string"){var Y="Symbol."+W;R&&I(V,W)?D[W]=V[W]:D[W]=L&&U?U(Y):z(Y)}return D[W]}},1719:function(E,_,A){var T=A(7263),B=A(7583),I=A(2447),C=A(729),R=A(7496),L=A(3478),D=A(3590),V=A(57),U=A(4677),z=A(1509),W=A(4402),Y=A(4026),K=A(2764),J=A(3649),et=A(1178),it=J("toStringTag"),rt=B.Error,st=[].push,lt=function(at,ht){var mt,yt=arguments.length>2?arguments[2]:void 0,Tt=I(ct,this);R?mt=R(new rt,Tt?C(this):ct):(mt=Tt?this:D(ct),V(mt,it,"Error")),ht!==void 0&&V(mt,"message",K(ht)),et&&V(mt,"stack",z(mt.stack,1)),W(mt,yt);var At=[];return Y(at,st,{that:At}),V(mt,"errors",At),mt};R?R(lt,rt):L(lt,rt,{name:!0});var ct=lt.prototype=D(rt.prototype,{constructor:U(1,lt),message:U(1,""),name:U(1,"AggregateError")});T({global:!0},{AggregateError:lt})},1646:function(E,_,A){var T=A(7263),B=A(7583),I=A(6544),C=A(4521),R=A(794),L=A(1324),D=A(1825),V=A(5999),U=A(4822),z=A(9269),W=A(3649),Y=A(4061),K=W("isConcatSpreadable"),J=9007199254740991,et="Maximum allowed index exceeded",it=B.TypeError,rt=Y>=51||!I(function(){var ct=[];return ct[K]=!1,ct.concat()[0]!==ct}),st=z("concat"),lt=function(ct){if(!R(ct))return!1;var at=ct[K];return at!==void 0?!!at:C(ct)};T({target:"Array",proto:!0,forced:!rt||!st},{concat:function(ct){var at,ht,mt,yt,Tt,At=L(this),pt=U(At,0),Et=0;for(at=-1,mt=arguments.length;at<mt;at++)if(lt(Tt=at===-1?At:arguments[at])){if(Et+(yt=D(Tt))>J)throw it(et);for(ht=0;ht<yt;ht++,Et++)ht in Tt&&V(pt,Et,Tt[ht])}else{if(Et>=J)throw it(et);V(pt,Et++,Tt)}return pt.length=Et,pt}})},5677:function(E,_,A){var T=A(2977),B=A(6288),I=A(339),C=A(2743),R=A(4615).f,L=A(9012),D=A(6268),V=A(8494),U="Array Iterator",z=C.set,W=C.getterFor(U);E.exports=L(Array,"Array",function(K,J){z(this,{type:U,target:T(K),index:0,kind:J})},function(){var K=W(this),J=K.target,et=K.kind,it=K.index++;return!J||it>=J.length?(K.target=void 0,{value:void 0,done:!0}):et=="keys"?{value:it,done:!1}:et=="values"?{value:J[it],done:!1}:{value:[it,J[it]],done:!1}},"values");var Y=I.Arguments=I.Array;if(B("keys"),B("values"),B("entries"),!D&&V&&Y.name!=="values")try{R(Y,"name",{value:"values"})}catch{}},6956:function(E,_,A){var T=A(7583);A(8821)(T.JSON,"JSON",!0)},5222:function(E,_,A){A(8821)(Math,"Math",!0)},6394:function(E,_,A){var T=A(8191),B=A(1270),I=A(3060);T||B(Object.prototype,"toString",I,{unsafe:!0})},6969:function(E,_,A){var T=A(7263),B=A(8262),I=A(8257),C=A(5084),R=A(544),L=A(4026);T({target:"Promise",stat:!0},{allSettled:function(D){var V=this,U=C.f(V),z=U.resolve,W=U.reject,Y=R(function(){var K=I(V.resolve),J=[],et=0,it=1;L(D,function(rt){var st=et++,lt=!1;it++,B(K,V,rt).then(function(ct){lt||(lt=!0,J[st]={status:"fulfilled",value:ct},--it||z(J))},function(ct){lt||(lt=!0,J[st]={status:"rejected",reason:ct},--it||z(J))})}),--it||z(J)});return Y.error&&W(Y.value),U.promise}})},2021:function(E,_,A){var T=A(7263),B=A(8257),I=A(5897),C=A(8262),R=A(5084),L=A(544),D=A(4026),V="No one promise resolved";T({target:"Promise",stat:!0},{any:function(U){var z=this,W=I("AggregateError"),Y=R.f(z),K=Y.resolve,J=Y.reject,et=L(function(){var it=B(z.resolve),rt=[],st=0,lt=1,ct=!1;D(U,function(at){var ht=st++,mt=!1;lt++,C(it,z,at).then(function(yt){mt||ct||(ct=!0,K(yt))},function(yt){mt||ct||(mt=!0,rt[ht]=yt,--lt||J(new W(rt,V)))})}),--lt||J(new W(rt,V))});return et.error&&J(et.value),Y.promise}})},8328:function(E,_,A){var T=A(7263),B=A(6268),I=A(783),C=A(6544),R=A(5897),L=A(9212),D=A(564),V=A(5732),U=A(1270);if(T({target:"Promise",proto:!0,real:!0,forced:!!I&&C(function(){I.prototype.finally.call({then:function(){}},function(){})})},{finally:function(W){var Y=D(this,R("Promise")),K=L(W);return this.then(K?function(J){return V(Y,W()).then(function(){return J})}:W,K?function(J){return V(Y,W()).then(function(){throw J})}:W)}}),!B&&L(I)){var z=R("Promise").prototype.finally;I.prototype.finally!==z&&U(I.prototype,"finally",z,{unsafe:!0})}},5334:function(E,_,A){var T,B,I,C,R=A(7263),L=A(6268),D=A(7583),V=A(5897),U=A(8262),z=A(783),W=A(1270),Y=A(6893),K=A(7496),J=A(8821),et=A(7730),it=A(8257),rt=A(9212),st=A(794),lt=A(4761),ct=A(9734),at=A(4026),ht=A(3616),mt=A(564),yt=A(8117).set,Tt=A(2095),At=A(5732),pt=A(2716),Et=A(5084),Vt=A(544),Ot=A(2723),gt=A(2743),bt=A(4451),$t=A(3649),Lt=A(2274),St=A(5354),Ct=A(4061),_t=$t("species"),wt="Promise",Mt=gt.getterFor(wt),Gt=gt.set,Jt=gt.getterFor(wt),he=z&&z.prototype,me=z,ne=he,Kt=D.TypeError,ue=D.document,_e=D.process,ge=Et.f,pe=ge,ve=!!(ue&&ue.createEvent&&D.dispatchEvent),Ee=rt(D.PromiseRejectionEvent),De="unhandledrejection",ti=!1,ei=bt(wt,function(){var jt=ct(me),Zt=jt!==String(me);if(!Zt&&Ct===66||L&&!ne.finally)return!0;if(Ct>=51&&/native code/.test(jt))return!1;var ce=new me(function(Ve){Ve(1)}),fe=function(Ve){Ve(function(){},function(){})};return(ce.constructor={})[_t]=fe,!(ti=ce.then(function(){})instanceof fe)||!Zt&&Lt&&!Ee}),Li=ei||!ht(function(jt){me.all(jt).catch(function(){})}),hi=function(jt){var Zt;return!(!st(jt)||!rt(Zt=jt.then))&&Zt},ii=function(jt,Zt){var ce,fe,Ve,He=Zt.value,mi=Zt.state==1,Bt=mi?jt.ok:jt.fail,Ft=jt.resolve,Rt=jt.reject,kt=jt.domain;try{Bt?(mi||(Zt.rejection===2&&Di(Zt),Zt.rejection=1),Bt===!0?ce=He:(kt&&kt.enter(),ce=Bt(He),kt&&(kt.exit(),Ve=!0)),ce===jt.promise?Rt(Kt("Promise-chain cycle")):(fe=hi(ce))?U(fe,ce,Ft,Rt):Ft(ce)):Rt(He)}catch(Wt){kt&&!Ve&&kt.exit(),Rt(Wt)}},di=function(jt,Zt){jt.notified||(jt.notified=!0,Tt(function(){for(var ce,fe=jt.reactions;ce=fe.get();)ii(ce,jt);jt.notified=!1,Zt&&!jt.rejection&&Ke(jt)}))},ki=function(jt,Zt,ce){var fe,Ve;ve?((fe=ue.createEvent("Event")).promise=Zt,fe.reason=ce,fe.initEvent(jt,!1,!0),D.dispatchEvent(fe)):fe={promise:Zt,reason:ce},!Ee&&(Ve=D["on"+jt])?Ve(fe):jt===De&&pt("Unhandled promise rejection",ce)},Ke=function(jt){U(yt,D,function(){var Zt,ce=jt.facade,fe=jt.value;if(gi(jt)&&(Zt=Vt(function(){St?_e.emit("unhandledRejection",fe,ce):ki(De,ce,fe)}),jt.rejection=St||gi(jt)?2:1,Zt.error))throw Zt.value})},gi=function(jt){return jt.rejection!==1&&!jt.parent},Di=function(jt){U(yt,D,function(){var Zt=jt.facade;St?_e.emit("rejectionHandled",Zt):ki("rejectionhandled",Zt,jt.value)})},yi=function(jt,Zt,ce){return function(fe){jt(Zt,fe,ce)}},Ze=function(jt,Zt,ce){jt.done||(jt.done=!0,ce&&(jt=ce),jt.value=Zt,jt.state=2,di(jt,!0))},wi=function jt(Zt,ce,fe){if(!Zt.done){Zt.done=!0,fe&&(Zt=fe);try{if(Zt.facade===ce)throw Kt("Promise can't be resolved itself");var Ve=hi(ce);Ve?Tt(function(){var He={done:!1};try{U(Ve,ce,yi(jt,He,Zt),yi(Ze,He,Zt))}catch(mi){Ze(He,mi,Zt)}}):(Zt.value=ce,Zt.state=1,di(Zt,!1))}catch(He){Ze({done:!1},He,Zt)}}};if(ei&&(ne=(me=function(jt){lt(this,ne),it(jt),U(T,this);var Zt=Mt(this);try{jt(yi(wi,Zt),yi(Ze,Zt))}catch(ce){Ze(Zt,ce)}}).prototype,(T=function(jt){Gt(this,{type:wt,done:!1,notified:!1,parent:!1,reactions:new Ot,rejection:!1,state:0,value:void 0})}).prototype=Y(ne,{then:function(jt,Zt){var ce=Jt(this),fe=ge(mt(this,me));return ce.parent=!0,fe.ok=!rt(jt)||jt,fe.fail=rt(Zt)&&Zt,fe.domain=St?_e.domain:void 0,ce.state==0?ce.reactions.add(fe):Tt(function(){ii(fe,ce)}),fe.promise},catch:function(jt){return this.then(void 0,jt)}}),B=function(){var jt=new T,Zt=Mt(jt);this.promise=jt,this.resolve=yi(wi,Zt),this.reject=yi(Ze,Zt)},Et.f=ge=function(jt){return jt===me||jt===I?new B(jt):pe(jt)},!L&&rt(z)&&he!==Object.prototype)){C=he.then,ti||(W(he,"then",function(jt,Zt){var ce=this;return new me(function(fe,Ve){U(C,ce,fe,Ve)}).then(jt,Zt)},{unsafe:!0}),W(he,"catch",ne.catch,{unsafe:!0}));try{delete he.constructor}catch{}K&&K(he,ne)}R({global:!0,wrap:!0,forced:ei},{Promise:me}),J(me,wt,!1,!0),et(wt),I=V(wt),R({target:wt,stat:!0,forced:ei},{reject:function(jt){var Zt=ge(this);return U(Zt.reject,void 0,jt),Zt.promise}}),R({target:wt,stat:!0,forced:L||ei},{resolve:function(jt){return At(L&&this===I?me:this,jt)}}),R({target:wt,stat:!0,forced:Li},{all:function(jt){var Zt=this,ce=ge(Zt),fe=ce.resolve,Ve=ce.reject,He=Vt(function(){var mi=it(Zt.resolve),Bt=[],Ft=0,Rt=1;at(jt,function(kt){var Wt=Ft++,le=!1;Rt++,U(mi,Zt,kt).then(function(be){le||(le=!0,Bt[Wt]=be,--Rt||fe(Bt))},Ve)}),--Rt||fe(Bt)});return He.error&&Ve(He.value),ce.promise},race:function(jt){var Zt=this,ce=ge(Zt),fe=ce.reject,Ve=Vt(function(){var He=it(Zt.resolve);at(jt,function(mi){U(He,Zt,mi).then(ce.resolve,fe)})});return Ve.error&&fe(Ve.value),ce.promise}})},2257:function(E,_,A){var T=A(7263),B=A(7583),I=A(8821);T({global:!0},{Reflect:{}}),I(B.Reflect,"Reflect",!0)},2129:function(E,_,A){var T=A(6389).charAt,B=A(8320),I=A(2743),C=A(9012),R="String Iterator",L=I.set,D=I.getterFor(R);C(String,"String",function(V){L(this,{type:R,string:B(V),index:0})},function(){var V,U=D(this),z=U.string,W=U.index;return W>=z.length?{value:void 0,done:!0}:(V=T(z,W),U.index+=V.length,{value:V,done:!1})})},462:function(E,_,A){A(2219)("asyncIterator")},8407:function(E,_,A){var T=A(7263),B=A(8494),I=A(7583),C=A(7386),R=A(2870),L=A(9212),D=A(2447),V=A(8320),U=A(4615).f,z=A(3478),W=I.Symbol,Y=W&&W.prototype;if(B&&L(W)&&(!("description"in Y)||W().description!==void 0)){var K={},J=function(){var at=arguments.length<1||arguments[0]===void 0?void 0:V(arguments[0]),ht=D(Y,this)?new W(at):at===void 0?W():W(at);return at===""&&(K[ht]=!0),ht};z(J,W),J.prototype=Y,Y.constructor=J;var et=String(W("test"))=="Symbol(test)",it=C(Y.toString),rt=C(Y.valueOf),st=/^Symbol\((.*)\)[^)]+$/,lt=C("".replace),ct=C("".slice);U(Y,"description",{configurable:!0,get:function(){var at=rt(this),ht=it(at);if(R(K,at))return"";var mt=et?ct(ht,7,-1):lt(ht,st,"$1");return mt===""?void 0:mt}}),T({global:!0,forced:!0},{Symbol:J})}},2429:function(E,_,A){A(2219)("hasInstance")},1172:function(E,_,A){A(2219)("isConcatSpreadable")},8288:function(E,_,A){A(2219)("iterator")},2004:function(E,_,A){var T=A(7263),B=A(7583),I=A(5897),C=A(1611),R=A(8262),L=A(7386),D=A(6268),V=A(8494),U=A(8640),z=A(6544),W=A(2870),Y=A(4521),K=A(9212),J=A(794),et=A(2447),it=A(5871),rt=A(2569),st=A(1324),lt=A(2977),ct=A(8734),at=A(8320),ht=A(4677),mt=A(3590),yt=A(5432),Tt=A(9275),At=A(3130),pt=A(4012),Et=A(6683),Vt=A(4615),Ot=A(8728),gt=A(112),bt=A(6917),$t=A(1270),Lt=A(7836),St=A(9137),Ct=A(4639),_t=A(8284),wt=A(3649),Mt=A(491),Gt=A(2219),Jt=A(8821),he=A(2743),me=A(4805).forEach,ne=St("hidden"),Kt="Symbol",ue=wt("toPrimitive"),_e=he.set,ge=he.getterFor(Kt),pe=Object.prototype,ve=B.Symbol,Ee=ve&&ve.prototype,De=B.TypeError,ti=B.QObject,ei=I("JSON","stringify"),Li=Et.f,hi=Vt.f,ii=At.f,di=gt.f,ki=L([].push),Ke=Lt("symbols"),gi=Lt("op-symbols"),Di=Lt("string-to-symbol-registry"),yi=Lt("symbol-to-string-registry"),Ze=Lt("wks"),wi=!ti||!ti.prototype||!ti.prototype.findChild,jt=V&&z(function(){return mt(hi({},"a",{get:function(){return hi(this,"a",{value:7}).a}})).a!=7})?function(Rt,kt,Wt){var le=Li(pe,kt);le&&delete pe[kt],hi(Rt,kt,Wt),le&&Rt!==pe&&hi(pe,kt,le)}:hi,Zt=function(Rt,kt){var Wt=Ke[Rt]=mt(Ee);return _e(Wt,{type:Kt,tag:Rt,description:kt}),V||(Wt.description=kt),Wt},ce=function(Rt,kt,Wt){Rt===pe&&ce(gi,kt,Wt),rt(Rt);var le=ct(kt);return rt(Wt),W(Ke,le)?(Wt.enumerable?(W(Rt,ne)&&Rt[ne][le]&&(Rt[ne][le]=!1),Wt=mt(Wt,{enumerable:ht(0,!1)})):(W(Rt,ne)||hi(Rt,ne,ht(1,{})),Rt[ne][le]=!0),jt(Rt,le,Wt)):hi(Rt,le,Wt)},fe=function(Rt,kt){rt(Rt);var Wt=lt(kt),le=yt(Wt).concat(Bt(Wt));return me(le,function(be){V&&!R(Ve,Wt,be)||ce(Rt,be,Wt[be])}),Rt},Ve=function(Rt){var kt=ct(Rt),Wt=R(di,this,kt);return!(this===pe&&W(Ke,kt)&&!W(gi,kt))&&(!(Wt||!W(this,kt)||!W(Ke,kt)||W(this,ne)&&this[ne][kt])||Wt)},He=function(Rt,kt){var Wt=lt(Rt),le=ct(kt);if(Wt!==pe||!W(Ke,le)||W(gi,le)){var be=Li(Wt,le);return!be||!W(Ke,le)||W(Wt,ne)&&Wt[ne][le]||(be.enumerable=!0),be}},mi=function(Rt){var kt=ii(lt(Rt)),Wt=[];return me(kt,function(le){W(Ke,le)||W(Ct,le)||ki(Wt,le)}),Wt},Bt=function(Rt){var kt=Rt===pe,Wt=ii(kt?gi:lt(Rt)),le=[];return me(Wt,function(be){!W(Ke,be)||kt&&!W(pe,be)||ki(le,Ke[be])}),le};if(U||(ve=function(){if(et(Ee,this))throw De("Symbol is not a constructor");var Rt=arguments.length&&arguments[0]!==void 0?at(arguments[0]):void 0,kt=_t(Rt),Wt=function le(be){this===pe&&R(le,gi,be),W(this,ne)&&W(this[ne],kt)&&(this[ne][kt]=!1),jt(this,kt,ht(1,be))};return V&&wi&&jt(pe,kt,{configurable:!0,set:Wt}),Zt(kt,Rt)},$t(Ee=ve.prototype,"toString",function(){return ge(this).tag}),$t(ve,"withoutSetter",function(Rt){return Zt(_t(Rt),Rt)}),gt.f=Ve,Vt.f=ce,Ot.f=fe,Et.f=He,Tt.f=At.f=mi,pt.f=Bt,Mt.f=function(Rt){return Zt(wt(Rt),Rt)},V&&(hi(Ee,"description",{configurable:!0,get:function(){return ge(this).description}}),D||$t(pe,"propertyIsEnumerable",Ve,{unsafe:!0}))),T({global:!0,wrap:!0,forced:!U,sham:!U},{Symbol:ve}),me(yt(Ze),function(Rt){Gt(Rt)}),T({target:Kt,stat:!0,forced:!U},{for:function(Rt){var kt=at(Rt);if(W(Di,kt))return Di[kt];var Wt=ve(kt);return Di[kt]=Wt,yi[Wt]=kt,Wt},keyFor:function(Rt){if(!it(Rt))throw De(Rt+" is not a symbol");if(W(yi,Rt))return yi[Rt]},useSetter:function(){wi=!0},useSimple:function(){wi=!1}}),T({target:"Object",stat:!0,forced:!U,sham:!V},{create:function(Rt,kt){return kt===void 0?mt(Rt):fe(mt(Rt),kt)},defineProperty:ce,defineProperties:fe,getOwnPropertyDescriptor:He}),T({target:"Object",stat:!0,forced:!U},{getOwnPropertyNames:mi,getOwnPropertySymbols:Bt}),T({target:"Object",stat:!0,forced:z(function(){pt.f(1)})},{getOwnPropertySymbols:function(Rt){return pt.f(st(Rt))}}),ei&&T({target:"JSON",stat:!0,forced:!U||z(function(){var Rt=ve();return ei([Rt])!="[null]"||ei({a:Rt})!="{}"||ei(Object(Rt))!="{}"})},{stringify:function(Rt,kt,Wt){var le=bt(arguments),be=kt;if((J(kt)||Rt!==void 0)&&!it(Rt))return Y(kt)||(kt=function(Ue,ni){if(K(be)&&(ni=R(be,this,Ue,ni)),!it(ni))return ni}),le[1]=kt,C(ei,null,le)}}),!Ee[ue]){var Ft=Ee.valueOf;$t(Ee,ue,function(Rt){return R(Ft,this)})}Jt(ve,Kt),Ct[ne]=!0},8201:function(E,_,A){A(2219)("matchAll")},1274:function(E,_,A){A(2219)("match")},6626:function(E,_,A){A(2219)("replace")},3211:function(E,_,A){A(2219)("search")},9952:function(E,_,A){A(2219)("species")},15:function(E,_,A){A(2219)("split")},9831:function(E,_,A){A(2219)("toPrimitive")},7521:function(E,_,A){A(2219)("toStringTag")},2972:function(E,_,A){A(2219)("unscopables")},4655:function(E,_,A){var T=A(7583),B=A(6778),I=A(9307),C=A(5677),R=A(57),L=A(3649),D=L("iterator"),V=L("toStringTag"),U=C.values,z=function(Y,K){if(Y){if(Y[D]!==U)try{R(Y,D,U)}catch{Y[D]=U}if(Y[V]||R(Y,V,K),B[K]){for(var J in C)if(Y[J]!==C[J])try{R(Y,J,C[J])}catch{Y[J]=C[J]}}}};for(var W in B)z(T[W]&&T[W].prototype,W);z(I,"DOMTokenList")},8765:function(E,_,A){var T=A(5036);A(4655),E.exports=T},5441:function(E,_,A){var T=A(2582);A(4655),E.exports=T},7705:function(E){E.exports=function(_){var A=[];return A.toString=function(){return this.map(function(T){var B="",I=T[5]!==void 0;return T[4]&&(B+="@supports (".concat(T[4],") {")),T[2]&&(B+="@media ".concat(T[2]," {")),I&&(B+="@layer".concat(T[5].length>0?" ".concat(T[5]):""," {")),B+=_(T),I&&(B+="}"),T[2]&&(B+="}"),T[4]&&(B+="}"),B}).join("")},A.i=function(T,B,I,C,R){typeof T=="string"&&(T=[[null,T,void 0]]);var L={};if(I)for(var D=0;D<this.length;D++){var V=this[D][0];V!=null&&(L[V]=!0)}for(var U=0;U<T.length;U++){var z=[].concat(T[U]);I&&L[z[0]]||(R!==void 0&&(z[5]===void 0||(z[1]="@layer".concat(z[5].length>0?" ".concat(z[5]):""," {").concat(z[1],"}")),z[5]=R),B&&(z[2]&&(z[1]="@media ".concat(z[2]," {").concat(z[1],"}")),z[2]=B),C&&(z[4]?(z[1]="@supports (".concat(z[4],") {").concat(z[1],"}"),z[4]=C):z[4]="".concat(C)),A.push(z))}},A}},6738:function(E){E.exports=function(_){return _[1]}},8679:function(E){var _=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,A=window.WeakMap;if(A===void 0){var T=Object.defineProperty,B=Date.now()%1e9;(A=function(){this.name="__st"+(1e9*Math.random()>>>0)+B+++"__"}).prototype={set:function(ct,at){var ht=ct[this.name];return ht&&ht[0]===ct?ht[1]=at:T(ct,this.name,{value:[ct,at],writable:!0}),this},get:function(ct){var at;return(at=ct[this.name])&&at[0]===ct?at[1]:void 0},delete:function(ct){var at=ct[this.name];if(!at)return!1;var ht=at[0]===ct;return at[0]=at[1]=void 0,ht},has:function(ct){var at=ct[this.name];return!!at&&at[0]===ct}}}var I=new A,C=window.msSetImmediate;if(!C){var R=[],L=String(Math.random());window.addEventListener("message",function(ct){if(ct.data===L){var at=R;R=[],at.forEach(function(ht){ht()})}}),C=function(ct){R.push(ct),window.postMessage(L,"*")}}var D=!1,V=[];function U(){D=!1;var ct=V;V=[],ct.sort(function(ht,mt){return ht.uid_-mt.uid_});var at=!1;ct.forEach(function(ht){var mt=ht.takeRecords();(function(yt){yt.nodes_.forEach(function(Tt){var At=I.get(Tt);At&&At.forEach(function(pt){pt.observer===yt&&pt.removeTransientObservers()})})})(ht),mt.length&&(ht.callback_(mt,ht),at=!0)}),at&&U()}function z(ct,at){for(var ht=ct;ht;ht=ht.parentNode){var mt=I.get(ht);if(mt)for(var yt=0;yt<mt.length;yt++){var Tt=mt[yt],At=Tt.options;if(ht===ct||At.subtree){var pt=at(At);pt&&Tt.enqueue(pt)}}}}var W,Y,K=0;function J(ct){this.callback_=ct,this.nodes_=[],this.records_=[],this.uid_=++K}function et(ct,at){this.type=ct,this.target=at,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function it(ct,at){return W=new et(ct,at)}function rt(ct){return Y||((ht=new et((at=W).type,at.target)).addedNodes=at.addedNodes.slice(),ht.removedNodes=at.removedNodes.slice(),ht.previousSibling=at.previousSibling,ht.nextSibling=at.nextSibling,ht.attributeName=at.attributeName,ht.attributeNamespace=at.attributeNamespace,ht.oldValue=at.oldValue,(Y=ht).oldValue=ct,Y);var at,ht}function st(ct,at){return ct===at?ct:Y&&((ht=ct)===Y||ht===W)?Y:null;var ht}function lt(ct,at,ht){this.observer=ct,this.target=at,this.options=ht,this.transientObservedNodes=[]}J.prototype={observe:function(ct,at){var ht;if(ht=ct,ct=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(ht)||ht,!at.childList&&!at.attributes&&!at.characterData||at.attributeOldValue&&!at.attributes||at.attributeFilter&&at.attributeFilter.length&&!at.attributes||at.characterDataOldValue&&!at.characterData)throw new SyntaxError;var mt,yt=I.get(ct);yt||I.set(ct,yt=[]);for(var Tt=0;Tt<yt.length;Tt++)if(yt[Tt].observer===this){(mt=yt[Tt]).removeListeners(),mt.options=at;break}mt||(mt=new lt(this,ct,at),yt.push(mt),this.nodes_.push(ct)),mt.addListeners()},disconnect:function(){this.nodes_.forEach(function(ct){for(var at=I.get(ct),ht=0;ht<at.length;ht++){var mt=at[ht];if(mt.observer===this){mt.removeListeners(),at.splice(ht,1);break}}},this),this.records_=[]},takeRecords:function(){var ct=this.records_;return this.records_=[],ct}},lt.prototype={enqueue:function(ct){var at,ht=this.observer.records_,mt=ht.length;if(ht.length>0){var yt=st(ht[mt-1],ct);if(yt)return void(ht[mt-1]=yt)}else at=this.observer,V.push(at),D||(D=!0,C(U));ht[mt]=ct},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(ct){var at=this.options;at.attributes&&ct.addEventListener("DOMAttrModified",this,!0),at.characterData&&ct.addEventListener("DOMCharacterDataModified",this,!0),at.childList&&ct.addEventListener("DOMNodeInserted",this,!0),(at.childList||at.subtree)&&ct.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(ct){var at=this.options;at.attributes&&ct.removeEventListener("DOMAttrModified",this,!0),at.characterData&&ct.removeEventListener("DOMCharacterDataModified",this,!0),at.childList&&ct.removeEventListener("DOMNodeInserted",this,!0),(at.childList||at.subtree)&&ct.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(ct){if(ct!==this.target){this.addListeners_(ct),this.transientObservedNodes.push(ct);var at=I.get(ct);at||I.set(ct,at=[]),at.push(this)}},removeTransientObservers:function(){var ct=this.transientObservedNodes;this.transientObservedNodes=[],ct.forEach(function(at){this.removeListeners_(at);for(var ht=I.get(at),mt=0;mt<ht.length;mt++)if(ht[mt]===this){ht.splice(mt,1);break}},this)},handleEvent:function(ct){switch(ct.stopImmediatePropagation(),ct.type){case"DOMAttrModified":var at=ct.attrName,ht=ct.relatedNode.namespaceURI,mt=ct.target;(Tt=new it("attributes",mt)).attributeName=at,Tt.attributeNamespace=ht;var yt=null;typeof MutationEvent<"u"&&ct.attrChange===MutationEvent.ADDITION||(yt=ct.prevValue),z(mt,function(gt){if(gt.attributes&&(!gt.attributeFilter||!gt.attributeFilter.length||gt.attributeFilter.indexOf(at)!==-1||gt.attributeFilter.indexOf(ht)!==-1))return gt.attributeOldValue?rt(yt):Tt});break;case"DOMCharacterDataModified":var Tt=it("characterData",mt=ct.target);yt=ct.prevValue,z(mt,function(gt){if(gt.characterData)return gt.characterDataOldValue?rt(yt):Tt});break;case"DOMNodeRemoved":this.addTransientObserver(ct.target);case"DOMNodeInserted":mt=ct.relatedNode;var At,pt,Et=ct.target;ct.type==="DOMNodeInserted"?(At=[Et],pt=[]):(At=[],pt=[Et]);var Vt=Et.previousSibling,Ot=Et.nextSibling;(Tt=it("childList",mt)).addedNodes=At,Tt.removedNodes=pt,Tt.previousSibling=Vt,Tt.nextSibling=Ot,z(mt,function(gt){if(gt.childList)return Tt})}W=Y=void 0}},_||(_=J),E.exports=_},7588:function(E){var _=function(A){var T,B=Object.prototype,I=B.hasOwnProperty,C=typeof Symbol=="function"?Symbol:{},R=C.iterator||"@@iterator",L=C.asyncIterator||"@@asyncIterator",D=C.toStringTag||"@@toStringTag";function V(gt,bt,$t){return Object.defineProperty(gt,bt,{value:$t,enumerable:!0,configurable:!0,writable:!0}),gt[bt]}try{V({},"")}catch{V=function(bt,$t,Lt){return bt[$t]=Lt}}function U(gt,bt,$t,Lt){var St=bt&&bt.prototype instanceof it?bt:it,Ct=Object.create(St.prototype),_t=new Et(Lt||[]);return Ct._invoke=function(wt,Mt,Gt){var Jt=W;return function(he,me){if(Jt===K)throw new Error("Generator is already running");if(Jt===J){if(he==="throw")throw me;return Ot()}for(Gt.method=he,Gt.arg=me;;){var ne=Gt.delegate;if(ne){var Kt=Tt(ne,Gt);if(Kt){if(Kt===et)continue;return Kt}}if(Gt.method==="next")Gt.sent=Gt._sent=Gt.arg;else if(Gt.method==="throw"){if(Jt===W)throw Jt=J,Gt.arg;Gt.dispatchException(Gt.arg)}else Gt.method==="return"&&Gt.abrupt("return",Gt.arg);Jt=K;var ue=z(wt,Mt,Gt);if(ue.type==="normal"){if(Jt=Gt.done?J:Y,ue.arg===et)continue;return{value:ue.arg,done:Gt.done}}ue.type==="throw"&&(Jt=J,Gt.method="throw",Gt.arg=ue.arg)}}}(gt,$t,_t),Ct}function z(gt,bt,$t){try{return{type:"normal",arg:gt.call(bt,$t)}}catch(Lt){return{type:"throw",arg:Lt}}}A.wrap=U;var W="suspendedStart",Y="suspendedYield",K="executing",J="completed",et={};function it(){}function rt(){}function st(){}var lt={};V(lt,R,function(){return this});var ct=Object.getPrototypeOf,at=ct&&ct(ct(Vt([])));at&&at!==B&&I.call(at,R)&&(lt=at);var ht=st.prototype=it.prototype=Object.create(lt);function mt(gt){["next","throw","return"].forEach(function(bt){V(gt,bt,function($t){return this._invoke(bt,$t)})})}function yt(gt,bt){function $t(St,Ct,_t,wt){var Mt=z(gt[St],gt,Ct);if(Mt.type!=="throw"){var Gt=Mt.arg,Jt=Gt.value;return Jt&&typeof Jt=="object"&&I.call(Jt,"__await")?bt.resolve(Jt.__await).then(function(he){$t("next",he,_t,wt)},function(he){$t("throw",he,_t,wt)}):bt.resolve(Jt).then(function(he){Gt.value=he,_t(Gt)},function(he){return $t("throw",he,_t,wt)})}wt(Mt.arg)}var Lt;this._invoke=function(St,Ct){function _t(){return new bt(function(wt,Mt){$t(St,Ct,wt,Mt)})}return Lt=Lt?Lt.then(_t,_t):_t()}}function Tt(gt,bt){var $t=gt.iterator[bt.method];if($t===T){if(bt.delegate=null,bt.method==="throw"){if(gt.iterator.return&&(bt.method="return",bt.arg=T,Tt(gt,bt),bt.method==="throw"))return et;bt.method="throw",bt.arg=new TypeError("The iterator does not provide a 'throw' method")}return et}var Lt=z($t,gt.iterator,bt.arg);if(Lt.type==="throw")return bt.method="throw",bt.arg=Lt.arg,bt.delegate=null,et;var St=Lt.arg;return St?St.done?(bt[gt.resultName]=St.value,bt.next=gt.nextLoc,bt.method!=="return"&&(bt.method="next",bt.arg=T),bt.delegate=null,et):St:(bt.method="throw",bt.arg=new TypeError("iterator result is not an object"),bt.delegate=null,et)}function At(gt){var bt={tryLoc:gt[0]};1 in gt&&(bt.catchLoc=gt[1]),2 in gt&&(bt.finallyLoc=gt[2],bt.afterLoc=gt[3]),this.tryEntries.push(bt)}function pt(gt){var bt=gt.completion||{};bt.type="normal",delete bt.arg,gt.completion=bt}function Et(gt){this.tryEntries=[{tryLoc:"root"}],gt.forEach(At,this),this.reset(!0)}function Vt(gt){if(gt){var bt=gt[R];if(bt)return bt.call(gt);if(typeof gt.next=="function")return gt;if(!isNaN(gt.length)){var $t=-1,Lt=function St(){for(;++$t<gt.length;)if(I.call(gt,$t))return St.value=gt[$t],St.done=!1,St;return St.value=T,St.done=!0,St};return Lt.next=Lt}}return{next:Ot}}function Ot(){return{value:T,done:!0}}return rt.prototype=st,V(ht,"constructor",st),V(st,"constructor",rt),rt.displayName=V(st,D,"GeneratorFunction"),A.isGeneratorFunction=function(gt){var bt=typeof gt=="function"&&gt.constructor;return!!bt&&(bt===rt||(bt.displayName||bt.name)==="GeneratorFunction")},A.mark=function(gt){return Object.setPrototypeOf?Object.setPrototypeOf(gt,st):(gt.__proto__=st,V(gt,D,"GeneratorFunction")),gt.prototype=Object.create(ht),gt},A.awrap=function(gt){return{__await:gt}},mt(yt.prototype),V(yt.prototype,L,function(){return this}),A.AsyncIterator=yt,A.async=function(gt,bt,$t,Lt,St){St===void 0&&(St=Promise);var Ct=new yt(U(gt,bt,$t,Lt),St);return A.isGeneratorFunction(bt)?Ct:Ct.next().then(function(_t){return _t.done?_t.value:Ct.next()})},mt(ht),V(ht,D,"Generator"),V(ht,R,function(){return this}),V(ht,"toString",function(){return"[object Generator]"}),A.keys=function(gt){var bt=[];for(var $t in gt)bt.push($t);return bt.reverse(),function Lt(){for(;bt.length;){var St=bt.pop();if(St in gt)return Lt.value=St,Lt.done=!1,Lt}return Lt.done=!0,Lt}},A.values=Vt,Et.prototype={constructor:Et,reset:function(gt){if(this.prev=0,this.next=0,this.sent=this._sent=T,this.done=!1,this.delegate=null,this.method="next",this.arg=T,this.tryEntries.forEach(pt),!gt)for(var bt in this)bt.charAt(0)==="t"&&I.call(this,bt)&&!isNaN(+bt.slice(1))&&(this[bt]=T)},stop:function(){this.done=!0;var gt=this.tryEntries[0].completion;if(gt.type==="throw")throw gt.arg;return this.rval},dispatchException:function(gt){if(this.done)throw gt;var bt=this;function $t(Mt,Gt){return Ct.type="throw",Ct.arg=gt,bt.next=Mt,Gt&&(bt.method="next",bt.arg=T),!!Gt}for(var Lt=this.tryEntries.length-1;Lt>=0;--Lt){var St=this.tryEntries[Lt],Ct=St.completion;if(St.tryLoc==="root")return $t("end");if(St.tryLoc<=this.prev){var _t=I.call(St,"catchLoc"),wt=I.call(St,"finallyLoc");if(_t&&wt){if(this.prev<St.catchLoc)return $t(St.catchLoc,!0);if(this.prev<St.finallyLoc)return $t(St.finallyLoc)}else if(_t){if(this.prev<St.catchLoc)return $t(St.catchLoc,!0)}else{if(!wt)throw new Error("try statement without catch or finally");if(this.prev<St.finallyLoc)return $t(St.finallyLoc)}}}},abrupt:function(gt,bt){for(var $t=this.tryEntries.length-1;$t>=0;--$t){var Lt=this.tryEntries[$t];if(Lt.tryLoc<=this.prev&&I.call(Lt,"finallyLoc")&&this.prev<Lt.finallyLoc){var St=Lt;break}}St&&(gt==="break"||gt==="continue")&&St.tryLoc<=bt&&bt<=St.finallyLoc&&(St=null);var Ct=St?St.completion:{};return Ct.type=gt,Ct.arg=bt,St?(this.method="next",this.next=St.finallyLoc,et):this.complete(Ct)},complete:function(gt,bt){if(gt.type==="throw")throw gt.arg;return gt.type==="break"||gt.type==="continue"?this.next=gt.arg:gt.type==="return"?(this.rval=this.arg=gt.arg,this.method="return",this.next="end"):gt.type==="normal"&&bt&&(this.next=bt),et},finish:function(gt){for(var bt=this.tryEntries.length-1;bt>=0;--bt){var $t=this.tryEntries[bt];if($t.finallyLoc===gt)return this.complete($t.completion,$t.afterLoc),pt($t),et}},catch:function(gt){for(var bt=this.tryEntries.length-1;bt>=0;--bt){var $t=this.tryEntries[bt];if($t.tryLoc===gt){var Lt=$t.completion;if(Lt.type==="throw"){var St=Lt.arg;pt($t)}return St}}throw new Error("illegal catch attempt")},delegateYield:function(gt,bt,$t){return this.delegate={iterator:Vt(gt),resultName:bt,nextLoc:$t},this.method==="next"&&(this.arg=T),et}},A}(E.exports);try{regeneratorRuntime=_}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=_:Function("r","regeneratorRuntime = r")(_)}},8702:function(E,_,A){A.d(_,{Z:function(){return Lt}});var T=A(4296),B=A(6464),I=A(6881),C=A(2942),R=A(7003),L=A(3379),D=A.n(L),V=A(7795),U=A.n(V),z=A(569),W=A.n(z),Y=A(3565),K=A.n(Y),J=A(9216),et=A.n(J),it=A(4589),rt=A.n(it),st=A(5313),lt={};st.Z&&st.Z.locals&&(lt.locals=st.Z.locals);var ct,at=0,ht={};ht.styleTagTransform=rt(),ht.setAttributes=K(),ht.insert=W().bind(null,"head"),ht.domAPI=U(),ht.insertStyleElement=et(),lt.use=function(St){return ht.options=St||{},at++||(ct=D()(st.Z,ht)),lt},lt.unuse=function(){at>0&&!--at&&(ct(),ct=null)};var mt=lt;function yt(St){var Ct,_t;return{c:function(){Ct=(0,C.bi5)("svg"),_t=(0,C.bi5)("path"),(0,C.Ljt)(_t,"d","M599.99999 832.000004h47.999999a24 24 0 0 0 23.999999-24V376.000013a24 24 0 0 0-23.999999-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24zM927.999983 160.000017h-164.819997l-67.999998-113.399998A95.999998 95.999998 0 0 0 612.819989 0.00002H411.179993a95.999998 95.999998 0 0 0-82.319998 46.599999L260.819996 160.000017H95.999999A31.999999 31.999999 0 0 0 64 192.000016v32a31.999999 31.999999 0 0 0 31.999999 31.999999h32v671.999987a95.999998 95.999998 0 0 0 95.999998 95.999998h575.999989a95.999998 95.999998 0 0 0 95.999998-95.999998V256.000015h31.999999a31.999999 31.999999 0 0 0 32-31.999999V192.000016a31.999999 31.999999 0 0 0-32-31.999999zM407.679993 101.820018A12 12 0 0 1 417.999993 96.000018h187.999996a12 12 0 0 1 10.3 5.82L651.219989 160.000017H372.779994zM799.999986 928.000002H223.999997V256.000015h575.999989z m-423.999992-95.999998h47.999999a24 24 0 0 0 24-24V376.000013a24 24 0 0 0-24-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24z"),(0,C.Ljt)(Ct,"class","vc-icon-delete"),(0,C.Ljt)(Ct,"viewBox","0 0 1024 1024"),(0,C.Ljt)(Ct,"width","200"),(0,C.Ljt)(Ct,"height","200")},m:function(wt,Mt){(0,C.$Tr)(wt,Ct,Mt),(0,C.R3I)(Ct,_t)},d:function(wt){wt&&(0,C.ogt)(Ct)}}}function Tt(St){var Ct,_t,wt;return{c:function(){Ct=(0,C.bi5)("svg"),_t=(0,C.bi5)("path"),wt=(0,C.bi5)("path"),(0,C.Ljt)(_t,"d","M874.154197 150.116875A511.970373 511.970373 0 1 0 1023.993986 511.991687a511.927744 511.927744 0 0 0-149.839789-361.874812z m-75.324866 648.382129A405.398688 405.398688 0 1 1 917.422301 511.991687a405.313431 405.313431 0 0 1-118.59297 286.507317z"),(0,C.Ljt)(wt,"d","M725.039096 299.274605a54.351559 54.351559 0 0 0-76.731613 0l-135.431297 135.431297L377.274375 299.274605a54.436817 54.436817 0 0 0-76.944756 76.987385l135.388668 135.431297-135.388668 135.473925a54.436817 54.436817 0 0 0 76.944756 76.987385l135.388668-135.431297 135.431297 135.473926a54.436817 54.436817 0 0 0 76.731613-76.987385l-135.388668-135.473926 135.388668-135.431296a54.479445 54.479445 0 0 0 0.213143-77.030014z"),(0,C.Ljt)(Ct,"viewBox","0 0 1024 1024"),(0,C.Ljt)(Ct,"width","200"),(0,C.Ljt)(Ct,"height","200")},m:function(Mt,Gt){(0,C.$Tr)(Mt,Ct,Gt),(0,C.R3I)(Ct,_t),(0,C.R3I)(Ct,wt)},d:function(Mt){Mt&&(0,C.ogt)(Ct)}}}function At(St){var Ct,_t;return{c:function(){Ct=(0,C.bi5)("svg"),_t=(0,C.bi5)("path"),(0,C.Ljt)(_t,"fill-rule","evenodd"),(0,C.Ljt)(_t,"d","M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"),(0,C.Ljt)(Ct,"class","vc-icon-copy"),(0,C.Ljt)(Ct,"viewBox","0 0 16 16")},m:function(wt,Mt){(0,C.$Tr)(wt,Ct,Mt),(0,C.R3I)(Ct,_t)},d:function(wt){wt&&(0,C.ogt)(Ct)}}}function pt(St){var Ct,_t;return{c:function(){Ct=(0,C.bi5)("svg"),_t=(0,C.bi5)("path"),(0,C.Ljt)(_t,"fill-rule","evenodd"),(0,C.Ljt)(_t,"d","M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"),(0,C.Ljt)(Ct,"class","vc-icon-suc"),(0,C.Ljt)(Ct,"viewBox","0 0 16 16")},m:function(wt,Mt){(0,C.$Tr)(wt,Ct,Mt),(0,C.R3I)(Ct,_t)},d:function(wt){wt&&(0,C.ogt)(Ct)}}}function Et(St){var Ct,_t,wt;return{c:function(){Ct=(0,C.bi5)("svg"),_t=(0,C.bi5)("path"),wt=(0,C.bi5)("path"),(0,C.Ljt)(_t,"d","M776.533333 1024 162.133333 1024C72.533333 1024 0 951.466667 0 861.866667L0 247.466667C0 157.866667 72.533333 85.333333 162.133333 85.333333L469.333333 85.333333c25.6 0 42.666667 17.066667 42.666667 42.666667s-17.066667 42.666667-42.666667 42.666667L162.133333 170.666667C119.466667 170.666667 85.333333 204.8 85.333333 247.466667l0 610.133333c0 42.666667 34.133333 76.8 76.8 76.8l610.133333 0c42.666667 0 76.8-34.133333 76.8-76.8L849.066667 554.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 307.2C938.666667 951.466667 866.133333 1024 776.533333 1024z"),(0,C.Ljt)(wt,"d","M256 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8C217.6 789.333333 213.333333 772.266667 213.333333 759.466667l42.666667-213.333333c0-8.533333 4.266667-17.066667 12.8-21.333333l512-512c17.066667-17.066667 42.666667-17.066667 59.733333 0l170.666667 170.666667c17.066667 17.066667 17.066667 42.666667 0 59.733333l-512 512c-4.266667 4.266667-12.8 8.533333-21.333333 12.8l-213.333333 42.666667C260.266667 810.666667 260.266667 810.666667 256 810.666667zM337.066667 576l-25.6 136.533333 136.533333-25.6L921.6 213.333333 810.666667 102.4 337.066667 576z"),(0,C.Ljt)(Ct,"class","vc-icon-edit"),(0,C.Ljt)(Ct,"viewBox","0 0 1024 1024"),(0,C.Ljt)(Ct,"width","200"),(0,C.Ljt)(Ct,"height","200")},m:function(Mt,Gt){(0,C.$Tr)(Mt,Ct,Gt),(0,C.R3I)(Ct,_t),(0,C.R3I)(Ct,wt)},d:function(Mt){Mt&&(0,C.ogt)(Ct)}}}function Vt(St){var Ct,_t;return{c:function(){Ct=(0,C.bi5)("svg"),_t=(0,C.bi5)("path"),(0,C.Ljt)(_t,"d","M581.338005 987.646578c-2.867097 4.095853-4.573702 8.669555-8.191705 12.287558a83.214071 83.214071 0 0 1-60.959939 24.029001 83.214071 83.214071 0 0 1-61.028203-24.029001c-3.618003-3.618003-5.324608-8.191705-8.123441-12.15103L24.370323 569.050448a83.418864 83.418864 0 0 1 117.892289-117.89229l369.923749 369.92375L1308.829682 24.438587A83.418864 83.418864 0 0 1 1426.721971 142.194348L581.338005 987.646578z"),(0,C.Ljt)(Ct,"class","vc-icon-don"),(0,C.Ljt)(Ct,"viewBox","0 0 1501 1024"),(0,C.Ljt)(Ct,"width","200"),(0,C.Ljt)(Ct,"height","200")},m:function(wt,Mt){(0,C.$Tr)(wt,Ct,Mt),(0,C.R3I)(Ct,_t)},d:function(wt){wt&&(0,C.ogt)(Ct)}}}function Ot(St){var Ct,_t;return{c:function(){Ct=(0,C.bi5)("svg"),_t=(0,C.bi5)("path"),(0,C.Ljt)(_t,"d","M894.976 574.464q0 78.848-29.696 148.48t-81.408 123.392-121.856 88.064-151.04 41.472q-5.12 1.024-9.216 1.536t-9.216 0.512l-177.152 0q-17.408 0-34.304-6.144t-30.208-16.896-22.016-25.088-8.704-29.696 8.192-29.696 21.504-24.576 29.696-16.384 33.792-6.144l158.72 1.024q54.272 0 102.4-19.968t83.968-53.76 56.32-79.36 20.48-97.792q0-49.152-18.432-92.16t-50.688-76.8-75.264-54.784-93.184-26.112q-2.048 0-2.56 0.512t-2.56 0.512l-162.816 0 0 80.896q0 17.408-13.824 25.6t-44.544-10.24q-8.192-5.12-26.112-17.92t-41.984-30.208-50.688-36.864l-51.2-38.912q-15.36-12.288-26.624-22.016t-11.264-24.064q0-12.288 12.8-25.6t29.184-26.624q18.432-15.36 44.032-35.84t50.688-39.936 45.056-35.328 28.16-22.016q24.576-17.408 39.936-7.168t16.384 30.72l0 81.92 162.816 0q5.12 0 10.752 1.024t10.752 2.048q79.872 8.192 149.504 41.984t121.344 87.552 80.896 123.392 29.184 147.456z"),(0,C.Ljt)(Ct,"class","vc-icon-cancel"),(0,C.Ljt)(Ct,"viewBox","0 0 1024 1024"),(0,C.Ljt)(Ct,"width","200"),(0,C.Ljt)(Ct,"height","200")},m:function(wt,Mt){(0,C.$Tr)(wt,Ct,Mt),(0,C.R3I)(Ct,_t)},d:function(wt){wt&&(0,C.ogt)(Ct)}}}function gt(St){var Ct,_t,wt,Mt,Gt,Jt,he,me,ne,Kt=St[0]==="delete"&&yt(),ue=St[0]==="clear"&&Tt(),_e=St[0]==="copy"&&At(),ge=St[0]==="success"&&pt(),pe=St[0]==="edit"&&Et(),ve=St[0]==="done"&&Vt(),Ee=St[0]==="cancel"&&Ot();return{c:function(){Ct=(0,C.bGB)("i"),Kt&&Kt.c(),_t=(0,C.DhX)(),ue&&ue.c(),wt=(0,C.DhX)(),_e&&_e.c(),Mt=(0,C.DhX)(),ge&&ge.c(),Gt=(0,C.DhX)(),pe&&pe.c(),Jt=(0,C.DhX)(),ve&&ve.c(),he=(0,C.DhX)(),Ee&&Ee.c(),(0,C.Ljt)(Ct,"class","vc-icon")},m:function(De,ti){(0,C.$Tr)(De,Ct,ti),Kt&&Kt.m(Ct,null),(0,C.R3I)(Ct,_t),ue&&ue.m(Ct,null),(0,C.R3I)(Ct,wt),_e&&_e.m(Ct,null),(0,C.R3I)(Ct,Mt),ge&&ge.m(Ct,null),(0,C.R3I)(Ct,Gt),pe&&pe.m(Ct,null),(0,C.R3I)(Ct,Jt),ve&&ve.m(Ct,null),(0,C.R3I)(Ct,he),Ee&&Ee.m(Ct,null),me||(ne=(0,C.oLt)(Ct,"click",St[1]),me=!0)},p:function(De,ti){ti[0],De[0]==="delete"?Kt||((Kt=yt()).c(),Kt.m(Ct,_t)):Kt&&(Kt.d(1),Kt=null),De[0]==="clear"?ue||((ue=Tt()).c(),ue.m(Ct,wt)):ue&&(ue.d(1),ue=null),De[0]==="copy"?_e||((_e=At()).c(),_e.m(Ct,Mt)):_e&&(_e.d(1),_e=null),De[0]==="success"?ge||((ge=pt()).c(),ge.m(Ct,Gt)):ge&&(ge.d(1),ge=null),De[0]==="edit"?pe||((pe=Et()).c(),pe.m(Ct,Jt)):pe&&(pe.d(1),pe=null),De[0]==="done"?ve||((ve=Vt()).c(),ve.m(Ct,he)):ve&&(ve.d(1),ve=null),De[0]==="cancel"?Ee||((Ee=Ot()).c(),Ee.m(Ct,null)):Ee&&(Ee.d(1),Ee=null)},i:C.ZTd,o:C.ZTd,d:function(De){De&&(0,C.ogt)(Ct),Kt&&Kt.d(),ue&&ue.d(),_e&&_e.d(),ge&&ge.d(),pe&&pe.d(),ve&&ve.d(),Ee&&Ee.d(),me=!1,ne()}}}function bt(St,Ct,_t){var wt=Ct.name;return(0,R.H3)(function(){mt.use()}),(0,R.ev)(function(){mt.unuse()}),St.$$set=function(Mt){"name"in Mt&&_t(0,wt=Mt.name)},[wt,function(Mt){C.cKT.call(this,St,Mt)}]}var $t=function(St){function Ct(_t){var wt;return wt=St.call(this)||this,(0,C.S1n)((0,B.Z)(wt),_t,bt,gt,C.N8,{name:0}),wt}return(0,I.Z)(Ct,St),(0,T.Z)(Ct,[{key:"name",get:function(){return this.$$.ctx[0]},set:function(_t){this.$$set({name:_t}),(0,C.yl1)()}}]),Ct}(C.f_C),Lt=$t},3903:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6464),_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6881),svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2942),svelte__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7003),_component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8702),_logTool__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8665),_log_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5629),_logCommand_less__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3411);function get_each_context(E,_,A){var T=E.slice();return T[28]=_[A],T}function create_if_block_2(E){var _,A,T;return{c:function(){(_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li")).textContent="Close",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(_,"class","vc-cmd-prompted-hide")},m:function(B,I){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(B,_,I),A||(T=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(_,"click",E[5]),A=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,d:function(B){B&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(_),A=!1,T()}}}function create_else_block(E){var _;return{c:function(){(_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li")).textContent="No Prompted"},m:function(A,T){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(A,_,T)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,d:function(A){A&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(_)}}}function create_each_block(E){var _,A,T,B,I=E[28].text+"";function C(){return E[14](E[28])}return{c:function(){_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li"),A=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.fLW)(I)},m:function(R,L){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(R,_,L),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(_,A),T||(B=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(_,"click",C),T=!0)},p:function(R,L){E=R,8&L&&I!==(I=E[28].text+"")&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.rTO)(A,I)},d:function(R){R&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(_),T=!1,B()}}}function create_if_block_1(E){var _,A,T,B,I;return A=new _component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(A.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(_,"class","vc-cmd-clear-btn")},m:function(C,R){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(C,_,R),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(A,_,null),T=!0,B||(I=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(_,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(E[17])),B=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,i:function(C){T||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(A.$$.fragment,C),T=!0)},o:function(C){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(A.$$.fragment,C),T=!1},d:function(C){C&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(_),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(A),B=!1,I()}}}function create_if_block(E){var _,A,T,B,I;return A=new _component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(A.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(_,"class","vc-cmd-clear-btn")},m:function(C,R){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(C,_,R),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(A,_,null),T=!0,B||(I=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(_,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(E[19])),B=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,i:function(C){T||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(A.$$.fragment,C),T=!0)},o:function(C){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(A.$$.fragment,C),T=!1},d:function(C){C&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(_),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(A),B=!1,I()}}}function create_fragment(E){for(var _,A,T,B,I,C,R,L,D,V,U,z,W,Y,K,J,et,it,rt,st,lt,ct=E[3].length>0&&create_if_block_2(E),at=E[3],ht=[],mt=0;mt<at.length;mt+=1)ht[mt]=create_each_block(get_each_context(E,at,mt));var yt=null;at.length||(yt=create_else_block());var Tt=E[1].length>0&&create_if_block_1(E),At=E[4].length>0&&create_if_block(E);return{c:function(){_=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("form"),A=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("ul"),ct&&ct.c(),T=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)();for(var pt=0;pt<ht.length;pt+=1)ht[pt].c();yt&&yt.c(),B=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),I=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),C=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("textarea"),R=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),Tt&&Tt.c(),L=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),(D=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("button")).textContent="OK",V=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),U=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("form"),z=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("ul"),W=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),Y=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),K=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("textarea"),J=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),At&&At.c(),et=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),(it=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("button")).textContent="Filter",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(A,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(A,"style",E[2]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(C,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(C,"placeholder","command..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(I,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(D,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(D,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(_,"class","vc-cmd"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(z,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(K,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(K,"placeholder","filter..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(Y,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(it,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(it,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(U,"class","vc-cmd vc-filter")},m:function(pt,Et){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(pt,_,Et),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(_,A),ct&&ct.m(A,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(A,T);for(var Vt=0;Vt<ht.length;Vt+=1)ht[Vt].m(A,null);yt&&yt.m(A,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(_,B),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(_,I),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(I,C),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(C,E[1]),E[16](C),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(I,R),Tt&&Tt.m(I,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(_,L),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(_,D),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(pt,V,Et),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(pt,U,Et),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(U,z),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(U,W),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(U,Y),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Y,K),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(K,E[4]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Y,J),At&&At.m(Y,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(U,et),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(U,it),rt=!0,st||(lt=[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(C,"input",E[15]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(C,"keydown",E[10]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(C,"keyup",E[11]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(C,"focus",E[8]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(C,"blur",E[9]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(_,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(E[12])),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(K,"input",E[18]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(U,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(E[13]))],st=!0)},p:function(pt,Et){var Vt=Et[0];if(pt[3].length>0?ct?ct.p(pt,Vt):((ct=create_if_block_2(pt)).c(),ct.m(A,T)):ct&&(ct.d(1),ct=null),136&Vt){var Ot;for(at=pt[3],Ot=0;Ot<at.length;Ot+=1){var gt=get_each_context(pt,at,Ot);ht[Ot]?ht[Ot].p(gt,Vt):(ht[Ot]=create_each_block(gt),ht[Ot].c(),ht[Ot].m(A,null))}for(;Ot<ht.length;Ot+=1)ht[Ot].d(1);ht.length=at.length,!at.length&&yt?yt.p(pt,Vt):at.length?yt&&(yt.d(1),yt=null):((yt=create_else_block()).c(),yt.m(A,null))}(!rt||4&Vt)&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(A,"style",pt[2]),2&Vt&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(C,pt[1]),pt[1].length>0?Tt?(Tt.p(pt,Vt),2&Vt&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(Tt,1)):((Tt=create_if_block_1(pt)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(Tt,1),Tt.m(I,null)):Tt&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(Tt,1,1,function(){Tt=null}),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)()),16&Vt&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(K,pt[4]),pt[4].length>0?At?(At.p(pt,Vt),16&Vt&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(At,1)):((At=create_if_block(pt)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(At,1),At.m(Y,null)):At&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(At,1,1,function(){At=null}),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)())},i:function(pt){rt||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(Tt),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(At),rt=!0)},o:function(pt){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(Tt),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(At),rt=!1},d:function(pt){pt&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(_),ct&&ct.d(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.RMB)(ht,pt),yt&&yt.d(),E[16](null),Tt&&Tt.d(),pt&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(V),pt&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(U),At&&At.d(),st=!1,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.j7q)(lt)}}}function instance($$self,$$props,$$invalidate){var module=_log_model__WEBPACK_IMPORTED_MODULE_3__.W.getSingleton(_log_model__WEBPACK_IMPORTED_MODULE_3__.W,"VConsoleLogModel"),cachedObjKeys={},dispatch=(0,svelte__WEBPACK_IMPORTED_MODULE_1__.x)(),cmdElement,cmdValue="",promptedStyle="",promptedList=[],filterValue="";(0,svelte__WEBPACK_IMPORTED_MODULE_1__.H3)(function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.use()}),(0,svelte__WEBPACK_IMPORTED_MODULE_1__.ev)(function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.unuse()});var evalCommand=function(E){module.evalCommand(E)},moveCursorToPos=function(E,_){E.setSelectionRange&&setTimeout(function(){E.setSelectionRange(_,_)},1)},clearPromptedList=function(){$$invalidate(2,promptedStyle="display: none;"),$$invalidate(3,promptedList=[])},updatePromptedList=function updatePromptedList(identifier){if(cmdValue!==""){identifier||(identifier=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(cmdValue));var objName="window",keyName=cmdValue;if(identifier.front.text!=="."&&identifier.front.text!=="["||(objName=identifier.front.before,keyName=identifier.back.text!==""?identifier.back.before:identifier.front.after),keyName=keyName.replace(/(^['"]+)|(['"']+$)/g,""),!cachedObjKeys[objName])try{cachedObjKeys[objName]=Object.getOwnPropertyNames(eval("("+objName+")")).sort()}catch(E){}try{if(cachedObjKeys[objName])for(var i=0;i<cachedObjKeys[objName].length&&!(promptedList.length>=100);i++){var key=String(cachedObjKeys[objName][i]),keyPattern=new RegExp("^"+keyName,"i");if(keyPattern.test(key)){var completeCmd=objName;identifier.front.text==="."||identifier.front.text===""?completeCmd+="."+key:identifier.front.text==="["&&(completeCmd+="['"+key+"']"),promptedList.push({text:key,value:completeCmd})}}}catch(E){}if(promptedList.length>0){var m=Math.min(200,31*(promptedList.length+1));$$invalidate(2,promptedStyle="display: block; height: "+m+"px; margin-top: "+(-m-2)+"px;"),$$invalidate(3,promptedList)}else clearPromptedList()}else clearPromptedList()},autoCompleteBrackets=function(E,_){if(!(_===8||_===46)&&E.front.after==="")switch(E.front.text){case"[":return $$invalidate(1,cmdValue+="]"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"(":return $$invalidate(1,cmdValue+=")"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"{":return $$invalidate(1,cmdValue+="}"),void moveCursorToPos(cmdElement,cmdValue.length-1)}},dispatchFilterEvent=function(){dispatch("filterText",{filterText:filterValue})},onTapClearText=function(E){E==="cmd"?($$invalidate(1,cmdValue=""),clearPromptedList()):E==="filter"&&($$invalidate(4,filterValue=""),dispatchFilterEvent())},onTapPromptedItem=function onTapPromptedItem(item){var type="";try{type=eval("typeof "+item.value)}catch(E){}$$invalidate(1,cmdValue=item.value+(type==="function"?"()":"")),clearPromptedList()},onCmdFocus=function(){updatePromptedList()},onCmdBlur=function(){},onCmdKeyDown=function(E){E.keyCode===13&&(E.preventDefault(),onCmdSubmit())},onCmdKeyUp=function(E){$$invalidate(3,promptedList=[]);var _=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(E.target.value);autoCompleteBrackets(_,E.keyCode),updatePromptedList(_)},onCmdSubmit=function(){cmdValue!==""&&evalCommand(cmdValue),clearPromptedList()},onFilterSubmit=function(E){dispatchFilterEvent()},click_handler=function(E){return onTapPromptedItem(E)};function textarea0_input_handler(){cmdValue=this.value,$$invalidate(1,cmdValue)}function textarea0_binding(E){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.VnY[E?"unshift":"push"](function(){$$invalidate(0,cmdElement=E)})}var click_handler_1=function(){return onTapClearText("cmd")};function textarea1_input_handler(){filterValue=this.value,$$invalidate(4,filterValue)}var click_handler_2=function(){return onTapClearText("filter")};return[cmdElement,cmdValue,promptedStyle,promptedList,filterValue,clearPromptedList,onTapClearText,onTapPromptedItem,onCmdFocus,onCmdBlur,onCmdKeyDown,onCmdKeyUp,onCmdSubmit,onFilterSubmit,click_handler,textarea0_input_handler,textarea0_binding,click_handler_1,textarea1_input_handler,click_handler_2]}var LogCommand=function(E){function _(A){var T;return T=E.call(this)||this,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.S1n)((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.Z)(T),A,instance,create_fragment,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.N8,{}),T}return(0,_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_6__.Z)(_,E),_}(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f_C);__webpack_exports__.Z=LogCommand},4687:function(E,_,A){A.d(_,{x:function(){return B}});var T=A(3313),B=function(){var I=(0,T.fZ)({updateTime:0}),C=I.subscribe,R=I.set,L=I.update;return{subscribe:C,set:R,update:L,updateTime:function(){L(function(D){return D.updateTime=Date.now(),D})}}}()},643:function(E,_,A){A.d(_,{N:function(){return T}});var T=function(){function B(){this._onDataUpdateCallbacks=[]}return B.getSingleton=function(I,C){return C||(C=I.toString()),B.singleton[C]||(B.singleton[C]=new I),B.singleton[C]},B}();T.singleton={}},5103:function(E,_,A){function T(_t){var wt=_t>0?new Date(_t):new Date,Mt=wt.getDate()<10?"0"+wt.getDate():wt.getDate(),Gt=wt.getMonth()<9?"0"+(wt.getMonth()+1):wt.getMonth()+1,Jt=wt.getFullYear(),he=wt.getHours()<10?"0"+wt.getHours():wt.getHours(),me=wt.getMinutes()<10?"0"+wt.getMinutes():wt.getMinutes(),ne=wt.getSeconds()<10?"0"+wt.getSeconds():wt.getSeconds(),Kt=wt.getMilliseconds()<10?"0"+wt.getMilliseconds():wt.getMilliseconds();return Kt<100&&(Kt="0"+Kt),{time:+wt,year:Jt,month:Gt,day:Mt,hour:he,minute:me,second:ne,millisecond:Kt}}function B(_t){return Object.prototype.toString.call(_t)==="[object Number]"}function I(_t){return typeof _t=="bigint"}function C(_t){return typeof _t=="string"}function R(_t){return Object.prototype.toString.call(_t)==="[object Array]"}function L(_t){return typeof _t=="boolean"}function D(_t){return _t===void 0}function V(_t){return _t===null}function U(_t){return typeof _t=="symbol"}function z(_t){return!(Object.prototype.toString.call(_t)!=="[object Object]"&&(B(_t)||I(_t)||C(_t)||L(_t)||R(_t)||V(_t)||W(_t)||D(_t)||U(_t)))}function W(_t){return typeof _t=="function"}function Y(_t){return typeof HTMLElement=="object"?_t instanceof HTMLElement:_t&&typeof _t=="object"&&_t!==null&&_t.nodeType===1&&typeof _t.nodeName=="string"}function K(_t){var wt=Object.prototype.toString.call(_t);return wt==="[object Window]"||wt==="[object DOMWindow]"||wt==="[object global]"}function J(_t){return _t!=null&&typeof _t!="string"&&typeof _t!="boolean"&&typeof _t!="number"&&typeof _t!="function"&&typeof _t!="symbol"&&typeof _t!="bigint"&&typeof Symbol<"u"&&typeof _t[Symbol.iterator]=="function"}function et(_t){return Object.prototype.toString.call(_t).replace(/\[object (.*)\]/,"$1")}A.d(_,{C4:function(){return I},DV:function(){return rt},FJ:function(){return K},Ft:function(){return V},HD:function(){return C},H_:function(){return St},KL:function(){return Tt},Kn:function(){return z},MH:function(){return Vt},PO:function(){return st},QI:function(){return Lt},QK:function(){return Ot},TW:function(){return J},_3:function(){return T},_D:function(){return gt},cF:function(){return $t},hZ:function(){return yt},hj:function(){return B},id:function(){return At},jn:function(){return L},kJ:function(){return R},kK:function(){return Y},mf:function(){return W},o8:function(){return D},po:function(){return bt},qr:function(){return Et},qt:function(){return Ct},rE:function(){return at},yk:function(){return U},zl:function(){return et}});var it=/(function|class) ([^ \{\()}]{1,})[\(| ]/;function rt(_t){var wt;if(_t==null)return"";var Mt=it.exec((_t==null||(wt=_t.constructor)==null?void 0:wt.toString())||"");return Mt&&Mt.length>1?Mt[2]:""}function st(_t){var wt,Mt=Object.prototype.hasOwnProperty;if(!_t||typeof _t!="object"||_t.nodeType||K(_t))return!1;try{if(_t.constructor&&!Mt.call(_t,"constructor")&&!Mt.call(_t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}for(wt in _t);return wt===void 0||Mt.call(_t,wt)}var lt=/[\n\t]/g,ct=function(_t){return{"\n":"\\n","	":"\\t"}[_t]};function at(_t){return typeof _t!="string"?_t:String(_t).replace(lt,ct)}var ht=function(_t,wt){wt===void 0&&(wt=0);var Mt="";return C(_t)?(wt>0&&(_t=At(_t,wt)),Mt+='"'+at(_t)+'"'):U(_t)?Mt+=String(_t).replace(/^Symbol\((.*)\)$/i,'Symbol("$1")'):W(_t)?Mt+=(_t.name||"function")+"()":I(_t)?Mt+=String(_t)+"n":Mt+=String(_t),Mt},mt=function _t(wt,Mt,Gt){if(Gt===void 0&&(Gt=0),z(wt)||R(wt))if(Mt.circularFinder(wt)){var Jt="";if(R(wt))Jt="(Circular Array)";else if(z(wt)){var he;Jt="(Circular "+(((he=wt.constructor)==null?void 0:he.name)||"Object")+")"}Mt.ret+=Mt.standardJSON?'"'+Jt+'"':Jt}else{var me="",ne="";if(Mt.pretty){for(var Kt=0;Kt<=Gt;Kt++)me+="  ";ne=`
`}var ue="{",_e="}";R(wt)&&(ue="[",_e="]"),Mt.ret+=ue+ne;for(var ge=Vt(wt),pe=0;pe<ge.length;pe++){var ve=ge[pe];Mt.ret+=me;try{R(wt)||(z(ve)||R(ve)||U(ve)?Mt.ret+=Object.prototype.toString.call(ve):C(ve)&&Mt.standardJSON?Mt.ret+='"'+ve+'"':Mt.ret+=ve,Mt.ret+=": ")}catch{continue}try{var Ee=wt[ve];if(R(Ee))Mt.maxDepth>-1&&Gt>=Mt.maxDepth?Mt.ret+="Array("+Ee.length+")":_t(Ee,Mt,Gt+1);else if(z(Ee)){var De;Mt.maxDepth>-1&&Gt>=Mt.maxDepth?Mt.ret+=(((De=Ee.constructor)==null?void 0:De.name)||"Object")+" {}":_t(Ee,Mt,Gt+1)}else Mt.ret+=ht(Ee,Mt.keyMaxLen)}catch{Mt.ret+=Mt.standardJSON?'"(PARSE_ERROR)"':"(PARSE_ERROR)"}if(Mt.keyMaxLen>0&&Mt.ret.length>=10*Mt.keyMaxLen){Mt.ret+=", (...)";break}pe<ge.length-1&&(Mt.ret+=", "),Mt.ret+=ne}Mt.ret+=me.substring(0,me.length-2)+_e}else Mt.ret+=ht(wt,Mt.keyMaxLen)};function yt(_t,wt){wt===void 0&&(wt={maxDepth:-1,keyMaxLen:-1,pretty:!1,standardJSON:!1});var Mt,Gt=Object.assign({ret:"",maxDepth:-1,keyMaxLen:-1,pretty:!1,standardJSON:!1,circularFinder:(Mt=new WeakSet,function(Jt){if(typeof Jt=="object"&&Jt!==null){if(Mt.has(Jt))return!0;Mt.add(Jt)}return!1})},wt);return mt(_t,Gt),Gt.ret}function Tt(_t){return _t<=0?"":_t>=1e6?(_t/1e3/1e3).toFixed(1)+" MB":_t>=1e3?(_t/1e3).toFixed(1)+" KB":_t+" B"}function At(_t,wt){return _t.length>wt&&(_t=_t.substring(0,wt)+"...("+Tt(function(Mt){try{return encodeURI(Mt).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length-1}catch{return 0}}(_t))+")"),_t}var pt=function(_t,wt){return String(_t).localeCompare(String(wt),void 0,{numeric:!0,sensitivity:"base"})};function Et(_t){return _t.sort(pt)}function Vt(_t){return z(_t)||R(_t)?Object.keys(_t):[]}function Ot(_t){var wt=Vt(_t),Mt=function(Gt){return z(Gt)||R(Gt)?Object.getOwnPropertyNames(Gt):[]}(_t);return Mt.filter(function(Gt){return wt.indexOf(Gt)===-1})}function gt(_t){return z(_t)||R(_t)?Object.getOwnPropertySymbols(_t):[]}function bt(_t,wt){window.localStorage&&(_t="vConsole_"+_t,localStorage.setItem(_t,wt))}function $t(_t){if(window.localStorage)return _t="vConsole_"+_t,localStorage.getItem(_t)}function Lt(_t){return _t===void 0&&(_t=""),"__vc_"+_t+Math.random().toString(36).substring(2,8)}function St(){return typeof window<"u"&&!!window.__wxConfig&&!!window.wx&&!!window.__virtualDOM__}function Ct(_t){if(St()&&typeof window.wx[_t]=="function")try{for(var wt,Mt=arguments.length,Gt=new Array(Mt>1?Mt-1:0),Jt=1;Jt<Mt;Jt++)Gt[Jt-1]=arguments[Jt];var he=(wt=window.wx[_t]).call.apply(wt,[window.wx].concat(Gt));return he}catch(me){return void console.debug("[vConsole] Fail to call wx."+_t+"():",me)}}},5629:function(E,_,A){A.d(_,{W:function(){return Y}});var T=A(8270),B=A(6881),I=A(5103),C=A(643),R=A(4687),L=A(8665),D=A(9923);function V(K,J){var et=Object.keys(K);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(K);J&&(it=it.filter(function(rt){return Object.getOwnPropertyDescriptor(K,rt).enumerable})),et.push.apply(et,it)}return et}function U(K){for(var J=1;J<arguments.length;J++){var et=arguments[J]!=null?arguments[J]:{};J%2?V(Object(et),!0).forEach(function(it){(0,T.Z)(K,it,et[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(et)):V(Object(et)).forEach(function(it){Object.defineProperty(K,it,Object.getOwnPropertyDescriptor(et,it))})}return K}function z(K,J){var et=typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(et)return(et=et.call(K)).next.bind(et);if(Array.isArray(K)||(et=function(rt,st){if(rt){if(typeof rt=="string")return W(rt,st);var lt=Object.prototype.toString.call(rt).slice(8,-1);if(lt==="Object"&&rt.constructor&&(lt=rt.constructor.name),lt==="Map"||lt==="Set")return Array.from(rt);if(lt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lt))return W(rt,st)}}(K))||J&&K&&typeof K.length=="number"){et&&(K=et);var it=0;return function(){return it>=K.length?{done:!0}:{done:!1,value:K[it++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W(K,J){(J==null||J>K.length)&&(J=K.length);for(var et=0,it=new Array(J);et<J;et++)it[et]=K[et];return it}var Y=function(K){function J(){for(var it,rt=arguments.length,st=new Array(rt),lt=0;lt<rt;lt++)st[lt]=arguments[lt];return(it=K.call.apply(K,[this].concat(st))||this).LOG_METHODS=["log","info","warn","debug","error"],it.ADDED_LOG_PLUGIN_ID=[],it.maxLogNumber=1e3,it.logCounter=0,it.groupLevel=0,it.groupLabelCollapsedStack=[],it.pluginPattern=void 0,it.logQueue=[],it.flushLogScheduled=!1,it.origConsole={},it}(0,B.Z)(J,K);var et=J.prototype;return et.bindPlugin=function(it){return!(this.ADDED_LOG_PLUGIN_ID.indexOf(it)>-1)&&(this.ADDED_LOG_PLUGIN_ID.length===0&&this.mockConsole(),D.O.create(it),this.ADDED_LOG_PLUGIN_ID.push(it),this.pluginPattern=new RegExp("^\\[("+this.ADDED_LOG_PLUGIN_ID.join("|")+")\\]$","i"),!0)},et.unbindPlugin=function(it){var rt=this.ADDED_LOG_PLUGIN_ID.indexOf(it);return rt!==-1&&(this.ADDED_LOG_PLUGIN_ID.splice(rt,1),D.O.delete(it),this.ADDED_LOG_PLUGIN_ID.length===0&&this.unmockConsole(),!0)},et.mockConsole=function(){var it=this;typeof this.origConsole.log!="function"&&(window.console?(this.LOG_METHODS.map(function(rt){it.origConsole[rt]=window.console[rt]}),this.origConsole.time=window.console.time,this.origConsole.timeEnd=window.console.timeEnd,this.origConsole.clear=window.console.clear,this.origConsole.group=window.console.group,this.origConsole.groupCollapsed=window.console.groupCollapsed,this.origConsole.groupEnd=window.console.groupEnd):window.console={},this._mockConsoleLog(),this._mockConsoleTime(),this._mockConsoleGroup(),this._mockConsoleClear(),window._vcOrigConsole=this.origConsole)},et._mockConsoleLog=function(){var it=this;this.LOG_METHODS.map(function(rt){window.console[rt]=(function(){for(var st=arguments.length,lt=new Array(st),ct=0;ct<st;ct++)lt[ct]=arguments[ct];it.addLog({type:rt,origData:lt||[]})}).bind(window.console)})},et._mockConsoleTime=function(){var it=this,rt={};window.console.time=(function(st){st===void 0&&(st=""),rt[st]=Date.now()}).bind(window.console),window.console.timeEnd=(function(st){st===void 0&&(st="");var lt=rt[st],ct=0;lt&&(ct=Date.now()-lt,delete rt[st]),it.addLog({type:"log",origData:[st+": "+ct+"ms"]})}).bind(window.console)},et._mockConsoleGroup=function(){var it=this,rt=function(st){return(function(lt){lt===void 0&&(lt="console.group");var ct=Symbol(lt);it.groupLabelCollapsedStack.push({label:ct,collapsed:st}),it.addLog({type:"log",origData:[lt],isGroupHeader:st?2:1,isGroupCollapsed:!1},{noOrig:!0}),it.groupLevel++,st?it.origConsole.groupCollapsed(lt):it.origConsole.group(lt)}).bind(window.console)};window.console.group=rt(!1),window.console.groupCollapsed=rt(!0),window.console.groupEnd=(function(){it.groupLabelCollapsedStack.pop(),it.groupLevel=Math.max(0,it.groupLevel-1),it.origConsole.groupEnd()}).bind(window.console)},et._mockConsoleClear=function(){var it=this;window.console.clear=(function(){it.resetGroup(),it.clearLog();for(var rt=arguments.length,st=new Array(rt),lt=0;lt<rt;lt++)st[lt]=arguments[lt];it.callOriginalConsole.apply(it,["clear"].concat(st))}).bind(window.console)},et.unmockConsole=function(){for(var it in this.origConsole)window.console[it]=this.origConsole[it],delete this.origConsole[it];window._vcOrigConsole&&delete window._vcOrigConsole},et.callOriginalConsole=function(it){if(typeof this.origConsole[it]=="function"){for(var rt=arguments.length,st=new Array(rt>1?rt-1:0),lt=1;lt<rt;lt++)st[lt-1]=arguments[lt];this.origConsole[it].apply(window.console,st)}},et.resetGroup=function(){for(;this.groupLevel>0;)console.groupEnd()},et.clearLog=function(){var it=D.O.getAll();for(var rt in it)this.clearPluginLog(rt)},et.clearPluginLog=function(it){var rt=this.logQueue;this.logQueue=[];for(var st,lt=z(rt);!(st=lt()).done;){var ct=st.value;this._extractPluginIdByLog(ct)!==it&&this.logQueue.push(ct)}D.O.get(it).update(function(at){return at.logList.length=0,at}),R.x.updateTime()},et.addLog=function(it,rt){it===void 0&&(it={type:"log",origData:[],isGroupHeader:0,isGroupCollapsed:!1});var st=this.groupLabelCollapsedStack[this.groupLabelCollapsedStack.length-2],lt=this.groupLabelCollapsedStack[this.groupLabelCollapsedStack.length-1],ct={_id:I.QI(),type:it.type,cmdType:rt==null?void 0:rt.cmdType,toggle:{},date:Date.now(),data:(0,L.b1)(it.origData||[]),repeated:0,groupLabel:lt==null?void 0:lt.label,groupLevel:this.groupLevel,groupHeader:it.isGroupHeader,groupCollapsed:it.isGroupHeader?!(st==null||!st.collapsed):!(lt==null||!lt.collapsed)};this._signalLog(ct),rt!=null&&rt.noOrig||this.callOriginalConsole.apply(this,[it.type].concat(it.origData))},et.evalCommand=function(it){this.addLog({type:"log",origData:[it]},{cmdType:"input"});var rt=void 0;try{rt=eval.call(window,"("+it+")")}catch{try{rt=eval.call(window,it)}catch{}}this.addLog({type:"log",origData:[rt]},{cmdType:"output"})},et._signalLog=function(it){var rt=this;this.flushLogScheduled||(this.flushLogScheduled=!0,window.requestAnimationFrame(function(){rt.flushLogScheduled=!1,rt._flushLogs()})),this.logQueue.push(it)},et._flushLogs=function(){var it=this,rt=this.logQueue;this.logQueue=[];for(var st,lt={},ct=z(rt);!(st=ct()).done;){var at=st.value,ht=this._extractPluginIdByLog(at);(lt[ht]=lt[ht]||[]).push(at)}for(var mt=function(At){var pt=lt[At];D.O.get(At).update(function(Et){for(var Vt,Ot=[].concat(Et.logList),gt=z(pt);!(Vt=gt()).done;){var bt=Vt.value;it._isRepeatedLog(Ot,bt)?it._updateLastLogRepeated(Ot):Ot.push(bt)}return{logList:Ot=it._limitLogListLength(Ot)}})},yt=0,Tt=Object.keys(lt);yt<Tt.length;yt++)mt(Tt[yt]);R.x.updateTime()},et._extractPluginIdByLog=function(it){var rt,st="default",lt=(rt=it.data[0])==null?void 0:rt.origData;if(I.HD(lt)){var ct=lt.match(this.pluginPattern);if(ct!==null&&ct.length>1){var at=ct[1].toLowerCase();this.ADDED_LOG_PLUGIN_ID.indexOf(at)>-1&&(st=at,it.data.shift())}}return st},et._isRepeatedLog=function(it,rt){var st=it[it.length-1];if(!st)return!1;var lt=!1;if(rt.type===st.type&&rt.cmdType===st.cmdType&&rt.data.length===st.data.length){lt=!0;for(var ct=0;ct<rt.data.length;ct++)if(rt.data[ct].origData!==st.data[ct].origData){lt=!1;break}}return lt},et._updateLastLogRepeated=function(it){var rt=it[it.length-1],st=rt.repeated?rt.repeated+1:2;return it[it.length-1]=U(U({},rt),{},{repeated:st}),it},et._limitLogListLength=function(it){var rt=it.length,st=this.maxLogNumber;return rt>st?it.slice(rt-st,rt):it},J}(C.N)},9923:function(E,_,A){A.d(_,{O:function(){return B}});var T=A(3313),B=function(){function I(){}return I.create=function(C){return this.storeMap[C]||(this.storeMap[C]=(0,T.fZ)({logList:[]})),this.storeMap[C]},I.delete=function(C){this.storeMap[C]&&delete this.storeMap[C]},I.get=function(C){return this.storeMap[C]},I.getRaw=function(C){return(0,T.U2)(this.storeMap[C])},I.getAll=function(){return this.storeMap},I}();B.storeMap={}},8665:function(E,_,A){A.d(_,{HX:function(){return V},LH:function(){return I},Tg:function(){return W},b1:function(){return z},oj:function(){return D}});var T=A(5103),B=function(Y){var K=T.hZ(Y,{maxDepth:0}),J=K.substring(0,36),et=T.DV(Y);return K.length>36&&(J+="..."),et=T.rE(et+" "+J)},I=function(Y,K){K===void 0&&(K=!0);var J="undefined",et=Y;return Y instanceof W?(J="uninvocatable",et="(...)"):T.kJ(Y)?(J="array",et=B(Y)):T.Kn(Y)?(J="object",et=B(Y)):T.HD(Y)?(J="string",et=T.rE(Y),K&&(et='"'+et+'"')):T.hj(Y)?(J="number",et=String(Y)):T.C4(Y)?(J="bigint",et=String(Y)+"n"):T.jn(Y)?(J="boolean",et=String(Y)):T.Ft(Y)?(J="null",et="null"):T.o8(Y)?(J="undefined",et="undefined"):T.mf(Y)?(J="function",et=(Y.name||"function")+"()"):T.yk(Y)&&(J="symbol",et=String(Y)),{text:et,valueType:J}},C=[".","[","(","{","}"],R=["]",")","}"],L=function(Y,K,J){J===void 0&&(J=0);for(var et={text:"",pos:-1,before:"",after:""},it=Y.length-1;it>=J;it--){var rt=K.indexOf(Y[it]);if(rt>-1){et.text=K[rt],et.pos=it,et.before=Y.substring(J,it),et.after=Y.substring(it+1,Y.length);break}}return et},D=function(Y){var K=L(Y,C,0);return{front:K,back:L(Y,R,K.pos+1)}},V=function(Y,K){if(K==="")return!0;for(var J=0;J<Y.data.length;J++)if(typeof Y.data[J].origData=="string"&&Y.data[J].origData.indexOf(K)>-1)return!0;return!1},U=/(\%[csdo] )|( \%[csdo])/g,z=function(Y){if(U.lastIndex=0,T.HD(Y[0])&&U.test(Y[0])){for(var K,J=[].concat(Y),et=J.shift().split(U).filter(function(Tt){return Tt!==void 0&&Tt!==""}),it=J,rt=[],st=!1,lt="";et.length>0;){var ct=et.shift();if(/ ?\%c ?/.test(ct)?it.length>0?typeof(lt=it.shift())!="string"&&(lt=""):(K=ct,lt="",st=!0):/ ?\%[sd] ?/.test(ct)?(K=it.length>0?T.Kn(it[0])?T.DV(it.shift()):String(it.shift()):ct,st=!0):/ ?\%o ?/.test(ct)?(K=it.length>0?it.shift():ct,st=!0):(K=ct,st=!0),st){var at={origData:K};lt&&(at.style=lt),rt.push(at),st=!1,K=void 0,lt=""}}for(var ht=0;ht<it.length;ht++)rt.push({origData:it[ht]});return rt}for(var mt=[],yt=0;yt<Y.length;yt++)mt.push({origData:Y[yt]});return mt},W=function(){}},5313:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`.vc-icon {
  word-break: normal;
  white-space: normal;
  overflow: visible;
}
.vc-icon svg {
  fill: var(--VC-FG-2);
  height: 1em;
  width: 1em;
  vertical-align: -0.11em;
}
.vc-icon .vc-icon-delete {
  vertical-align: -0.11em;
}
.vc-icon .vc-icon-copy {
  height: 1.1em;
  width: 1.1em;
  vertical-align: -0.16em;
}
.vc-icon .vc-icon-suc {
  fill: var(--VC-TEXTGREEN);
  height: 1.1em;
  width: 1.1em;
  vertical-align: -0.16em;
}
`,""]),_.Z=C},1142:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`.vc-scroller-viewport {
  position: relative;
  overflow: hidden;
  height: 100%;
}
.vc-scroller-contents {
  min-height: 100%;
  will-change: transform;
}
.vc-scroller-items {
  will-change: height;
  position: relative;
}
.vc-scroller-item {
  display: none;
  position: absolute;
  left: 0;
  right: 0;
}
.vc-scroller-viewport.static .vc-scroller-item {
  display: block;
  position: static;
}
.vc-scroller-scrollbar-track {
  width: 4px;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding: 1px;
}
.vc-scroller-scrollbar-thumb {
  position: relative;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 999px;
}
`,""]),_.Z=C},3283:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`#__vconsole {
  --VC-BG-0: #ededed;
  --VC-BG-1: #f7f7f7;
  --VC-BG-2: #fff;
  --VC-BG-3: #f7f7f7;
  --VC-BG-4: #4c4c4c;
  --VC-BG-5: #fff;
  --VC-BG-6: rgba(0, 0, 0, 0.1);
  --VC-FG-0: rgba(0, 0, 0, 0.9);
  --VC-FG-HALF: rgba(0, 0, 0, 0.9);
  --VC-FG-1: rgba(0, 0, 0, 0.5);
  --VC-FG-2: rgba(0, 0, 0, 0.3);
  --VC-FG-3: rgba(0, 0, 0, 0.1);
  --VC-RED: #fa5151;
  --VC-ORANGE: #fa9d3b;
  --VC-YELLOW: #ffc300;
  --VC-GREEN: #91d300;
  --VC-LIGHTGREEN: #95ec69;
  --VC-BRAND: #07c160;
  --VC-BLUE: #10aeff;
  --VC-INDIGO: #1485ee;
  --VC-PURPLE: #6467f0;
  --VC-LINK: #576b95;
  --VC-TEXTGREEN: #06ae56;
  --VC-FG: black;
  --VC-BG: white;
  --VC-BG-COLOR-ACTIVE: #ececec;
  --VC-WARN-BG: #fff3cc;
  --VC-WARN-BORDER: #ffe799;
  --VC-ERROR-BG: #fedcdc;
  --VC-ERROR-BORDER: #fdb9b9;
  --VC-DOM-TAG-NAME-COLOR: #881280;
  --VC-DOM-ATTRIBUTE-NAME-COLOR: #994500;
  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #1a1aa6;
  --VC-CODE-KEY-FG: #881391;
  --VC-CODE-PRIVATE-KEY-FG: #cfa1d3;
  --VC-CODE-FUNC-FG: #0d22aa;
  --VC-CODE-NUMBER-FG: #1c00cf;
  --VC-CODE-STR-FG: #c41a16;
  --VC-CODE-NULL-FG: #808080;
  color: var(--VC-FG-0);
  font-size: 13px;
  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
  -webkit-user-select: auto;
  /* global */
}
#__vconsole .vc-max-height {
  max-height: 19.23076923em;
}
#__vconsole .vc-max-height-line {
  max-height: 6.30769231em;
}
#__vconsole .vc-min-height {
  min-height: 3.07692308em;
}
#__vconsole dd,
#__vconsole dl,
#__vconsole pre {
  margin: 0;
}
#__vconsole pre {
  white-space: pre-wrap;
}
#__vconsole i {
  font-style: normal;
}
.vc-table {
  height: 100%;
}
.vc-table .vc-table-row {
  line-height: 1.5;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  overflow: hidden;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-table .vc-table-row.vc-left-border {
  border-left: 1px solid var(--VC-FG-3);
}
.vc-table .vc-table-row-icon {
  margin-left: 4px;
}
.vc-table .vc-table-col {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding: 0.23076923em 0.30769231em;
  border-left: 1px solid var(--VC-FG-3);
  overflow: auto;
}
.vc-table .vc-table-col:first-child {
  border: none;
}
.vc-table .vc-table-col-value {
  white-space: pre-wrap;
  word-break: break-word;
  /*white-space: nowrap;
    text-overflow: ellipsis;*/
  -webkit-overflow-scrolling: touch;
}
.vc-table .vc-small .vc-table-col {
  padding: 0 0.30769231em;
  font-size: 0.92307692em;
}
.vc-table .vc-table-col-2 {
  -webkit-box-flex: 2;
  -webkit-flex: 2;
  -moz-box-flex: 2;
  -ms-flex: 2;
  flex: 2;
}
.vc-table .vc-table-col-3 {
  -webkit-box-flex: 3;
  -webkit-flex: 3;
  -moz-box-flex: 3;
  -ms-flex: 3;
  flex: 3;
}
.vc-table .vc-table-col-4 {
  -webkit-box-flex: 4;
  -webkit-flex: 4;
  -moz-box-flex: 4;
  -ms-flex: 4;
  flex: 4;
}
.vc-table .vc-table-col-5 {
  -webkit-box-flex: 5;
  -webkit-flex: 5;
  -moz-box-flex: 5;
  -ms-flex: 5;
  flex: 5;
}
.vc-table .vc-table-col-6 {
  -webkit-box-flex: 6;
  -webkit-flex: 6;
  -moz-box-flex: 6;
  -ms-flex: 6;
  flex: 6;
}
.vc-table .vc-table-row-error {
  border-color: var(--VC-ERROR-BORDER);
  background-color: var(--VC-ERROR-BG);
}
.vc-table .vc-table-row-error .vc-table-col {
  color: var(--VC-RED);
  border-color: var(--VC-ERROR-BORDER);
}
.vc-table .vc-table-col-title {
  font-weight: bold;
}
.vc-table .vc-table-action {
  display: flex;
  justify-content: space-evenly;
}
.vc-table .vc-table-action .vc-icon {
  flex: 1;
  text-align: center;
  display: block;
}
.vc-table .vc-table-action .vc-icon:hover {
  background: var(--VC-BG-3);
}
.vc-table .vc-table-action .vc-icon:active {
  background: var(--VC-BG-1);
}
.vc-table .vc-table-input {
  width: 100%;
  border: none;
  color: var(--VC-FG-0);
  background-color: var(--VC-BG-6);
  height: 3.53846154em;
}
.vc-table .vc-table-input:focus {
  background-color: var(--VC-FG-2);
}
@media (prefers-color-scheme: dark) {
  #__vconsole:not([data-theme="light"]) {
    --VC-BG-0: #191919;
    --VC-BG-1: #1f1f1f;
    --VC-BG-2: #232323;
    --VC-BG-3: #2f2f2f;
    --VC-BG-4: #606060;
    --VC-BG-5: #2c2c2c;
    --VC-BG-6: rgba(255, 255, 255, 0.2);
    --VC-FG-0: rgba(255, 255, 255, 0.8);
    --VC-FG-HALF: rgba(255, 255, 255, 0.6);
    --VC-FG-1: rgba(255, 255, 255, 0.5);
    --VC-FG-2: rgba(255, 255, 255, 0.3);
    --VC-FG-3: rgba(255, 255, 255, 0.05);
    --VC-RED: #fa5151;
    --VC-ORANGE: #c87d2f;
    --VC-YELLOW: #cc9c00;
    --VC-GREEN: #74a800;
    --VC-LIGHTGREEN: #28b561;
    --VC-BRAND: #07c160;
    --VC-BLUE: #10aeff;
    --VC-INDIGO: #1196ff;
    --VC-PURPLE: #8183ff;
    --VC-LINK: #7d90a9;
    --VC-TEXTGREEN: #259c5c;
    --VC-FG: white;
    --VC-BG: black;
    --VC-BG-COLOR-ACTIVE: #282828;
    --VC-WARN-BG: #332700;
    --VC-WARN-BORDER: #664e00;
    --VC-ERROR-BG: #321010;
    --VC-ERROR-BORDER: #642020;
    --VC-DOM-TAG-NAME-COLOR: #5DB0D7;
    --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;
    --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;
    --VC-CODE-KEY-FG: #e36eec;
    --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;
    --VC-CODE-FUNC-FG: #556af2;
    --VC-CODE-NUMBER-FG: #9980ff;
    --VC-CODE-STR-FG: #e93f3b;
    --VC-CODE-NULL-FG: #808080;
  }
}
#__vconsole[data-theme="dark"] {
  --VC-BG-0: #191919;
  --VC-BG-1: #1f1f1f;
  --VC-BG-2: #232323;
  --VC-BG-3: #2f2f2f;
  --VC-BG-4: #606060;
  --VC-BG-5: #2c2c2c;
  --VC-BG-6: rgba(255, 255, 255, 0.2);
  --VC-FG-0: rgba(255, 255, 255, 0.8);
  --VC-FG-HALF: rgba(255, 255, 255, 0.6);
  --VC-FG-1: rgba(255, 255, 255, 0.5);
  --VC-FG-2: rgba(255, 255, 255, 0.3);
  --VC-FG-3: rgba(255, 255, 255, 0.05);
  --VC-RED: #fa5151;
  --VC-ORANGE: #c87d2f;
  --VC-YELLOW: #cc9c00;
  --VC-GREEN: #74a800;
  --VC-LIGHTGREEN: #28b561;
  --VC-BRAND: #07c160;
  --VC-BLUE: #10aeff;
  --VC-INDIGO: #1196ff;
  --VC-PURPLE: #8183ff;
  --VC-LINK: #7d90a9;
  --VC-TEXTGREEN: #259c5c;
  --VC-FG: white;
  --VC-BG: black;
  --VC-BG-COLOR-ACTIVE: #282828;
  --VC-WARN-BG: #332700;
  --VC-WARN-BORDER: #664e00;
  --VC-ERROR-BG: #321010;
  --VC-ERROR-BORDER: #642020;
  --VC-DOM-TAG-NAME-COLOR: #5DB0D7;
  --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;
  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;
  --VC-CODE-KEY-FG: #e36eec;
  --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;
  --VC-CODE-FUNC-FG: #556af2;
  --VC-CODE-NUMBER-FG: #9980ff;
  --VC-CODE-STR-FG: #e93f3b;
  --VC-CODE-NULL-FG: #808080;
}
.vc-tabbar {
  border-bottom: 1px solid var(--VC-FG-3);
  overflow-x: auto;
  height: 3em;
  width: auto;
  white-space: nowrap;
}
.vc-tabbar .vc-tab {
  display: inline-block;
  line-height: 3em;
  padding: 0 1.15384615em;
  border-right: 1px solid var(--VC-FG-3);
  text-decoration: none;
  color: var(--VC-FG-0);
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
.vc-tabbar .vc-tab:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-tabbar .vc-tab.vc-actived {
  background-color: var(--VC-BG-1);
}
.vc-toolbar {
  border-top: 1px solid var(--VC-FG-3);
  line-height: 3em;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
}
.vc-toolbar .vc-tool {
  display: none;
  font-style: normal;
  text-decoration: none;
  color: var(--VC-FG-0);
  width: 50%;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  text-align: center;
  position: relative;
  -webkit-touch-callout: none;
}
.vc-toolbar .vc-tool.vc-toggle,
.vc-toolbar .vc-tool.vc-global-tool {
  display: block;
}
.vc-toolbar .vc-tool:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-toolbar .vc-tool:after {
  content: " ";
  position: absolute;
  top: 0.53846154em;
  bottom: 0.53846154em;
  right: 0;
  border-left: 1px solid var(--VC-FG-3);
}
.vc-toolbar .vc-tool-last:after {
  border: none;
}
.vc-topbar {
  background-color: var(--VC-BG-1);
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  width: 100%;
}
.vc-topbar .vc-toptab {
  display: none;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  line-height: 2.30769231em;
  padding: 0 1.15384615em;
  border-bottom: 1px solid var(--VC-FG-3);
  text-decoration: none;
  text-align: center;
  color: var(--VC-FG-0);
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
.vc-topbar .vc-toptab.vc-toggle {
  display: block;
}
.vc-topbar .vc-toptab:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-topbar .vc-toptab.vc-actived {
  border-bottom: 1px solid var(--VC-INDIGO);
}
.vc-mask {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 10001;
  -webkit-transition: background 0.3s;
  transition: background 0.3s;
  -webkit-tap-highlight-color: transparent;
  overflow-y: scroll;
}
.vc-panel {
  display: none;
  position: fixed;
  min-height: 85%;
  left: 0;
  right: 0;
  bottom: -100%;
  z-index: 10002;
  background-color: var(--VC-BG-0);
  transition: bottom 0.3s;
}
.vc-toggle .vc-switch {
  display: none;
}
.vc-toggle .vc-mask {
  background: rgba(0, 0, 0, 0.6);
  display: block;
}
.vc-toggle .vc-panel {
  bottom: 0;
}
.vc-content {
  background-color: var(--VC-BG-2);
  overflow-x: hidden;
  overflow-y: auto;
  position: absolute;
  top: 3.07692308em;
  left: 0;
  right: 0;
  bottom: 3.07692308em;
  -webkit-overflow-scrolling: touch;
  margin-bottom: constant(safe-area-inset-bottom);
  margin-bottom: env(safe-area-inset-bottom);
}
.vc-content.vc-has-topbar {
  top: 5.46153846em;
}
.vc-plugin-box {
  display: none;
  position: relative;
  min-height: 100%;
}
.vc-plugin-box.vc-fixed-height {
  height: 100%;
}
.vc-plugin-box.vc-actived {
  display: block;
}
.vc-plugin-content {
  display: flex;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  flex-direction: column;
  -webkit-tap-highlight-color: transparent;
}
.vc-plugin-content:empty:before {
  content: "Empty";
  color: var(--VC-FG-1);
  position: absolute;
  top: 45%;
  left: 0;
  right: 0;
  bottom: 0;
  font-size: 1.15384615em;
  text-align: center;
}
.vc-plugin-empty {
  color: var(--VC-FG-1);
  font-size: 1.15384615em;
  height: 100%;
  width: 100%;
  padding: 1.15384615em 0;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {
  .vc-toolbar,
  .vc-switch {
    bottom: constant(safe-area-inset-bottom);
    bottom: env(safe-area-inset-bottom);
  }
}
`,""]),_.Z=C},7558:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`.vc-switch {
  display: block;
  position: fixed;
  right: 0.76923077em;
  bottom: 0.76923077em;
  color: #FFF;
  background-color: var(--VC-BRAND);
  line-height: 1;
  font-size: 1.07692308em;
  padding: 0.61538462em 1.23076923em;
  z-index: 10000;
  border-radius: 0.30769231em;
  box-shadow: 0 0 0.61538462em rgba(0, 0, 0, 0.4);
}
`,""]),_.Z=C},5670:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`/* color */
.vcelm-node {
  color: var(--VC-DOM-TAG-NAME-COLOR);
}
.vcelm-k {
  color: var(--VC-DOM-ATTRIBUTE-NAME-COLOR);
}
.vcelm-v {
  color: var(--VC-DOM-ATTRIBUTE-VALUE-COLOR);
}
.vcelm-l.vc-actived > .vcelm-node {
  background-color: var(--VC-FG-3);
}
/* layout */
.vcelm-l {
  padding-left: 8px;
  position: relative;
  word-wrap: break-word;
  line-height: 1.2;
}
/*.vcelm-l.vcelm-noc {
  padding-left: 0;
}*/
.vcelm-l .vcelm-node:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vcelm-l.vcelm-noc .vcelm-node:active {
  background-color: transparent;
}
.vcelm-t {
  white-space: pre-wrap;
  word-wrap: break-word;
}
/* level */
/* arrow */
.vcelm-l:before {
  content: "";
  display: block;
  position: absolute;
  top: 6px;
  left: 3px;
  width: 0;
  height: 0;
  border: transparent solid 3px;
  border-left-color: var(--VC-FG-1);
}
.vcelm-l.vc-toggle:before {
  display: block;
  top: 6px;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vcelm-l.vcelm-noc:before {
  display: none;
}
`,""]),_.Z=C},3327:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,"",""]),_.Z=C},1130:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`.vc-cmd {
  height: 3.07692308em;
  border-top: 1px solid var(--VC-FG-3);
  display: flex;
  flex-direction: row;
}
.vc-cmd.vc-filter {
  bottom: 0;
}
.vc-cmd-input-wrap {
  display: flex;
  align-items: center;
  flex: 1;
  position: relative;
  height: 2.15384615em;
  padding: 0.46153846em 0.61538462em;
}
.vc-cmd-input {
  width: 100%;
  border: none;
  resize: none;
  outline: none;
  padding: 0;
  font-size: 0.92307692em;
  background-color: transparent;
  color: var(--VC-FG-0);
}
.vc-cmd-input::-webkit-input-placeholder {
  line-height: 2.15384615em;
}
.vc-cmd-btn {
  width: 3.07692308em;
  border: none;
  background-color: var(--VC-BG-0);
  color: var(--VC-FG-0);
  outline: none;
  -webkit-touch-callout: none;
  font-size: 1em;
}
.vc-cmd-clear-btn {
  flex: 1 3.07692308em;
  text-align: center;
  line-height: 3.07692308em;
}
.vc-cmd-btn:active,
.vc-cmd-clear-btn:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-cmd-prompted {
  position: absolute;
  left: 0.46153846em;
  right: 0.46153846em;
  background-color: var(--VC-BG-3);
  border: 1px solid var(--VC-FG-3);
  overflow-x: scroll;
  display: none;
}
.vc-cmd-prompted li {
  list-style: none;
  line-height: 30px;
  padding: 0 0.46153846em;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-cmd-prompted li:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-cmd-prompted-hide {
  text-align: center;
}
`,""]),_.Z=C},7147:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`.vc-log-row {
  margin: 0;
  padding: 0.46153846em 0.61538462em;
  overflow: hidden;
  line-height: 1.3;
  border-bottom: 1px solid var(--VC-FG-3);
  word-break: break-word;
  position: relative;
  display: flex;
}
.vc-log-info {
  color: var(--VC-PURPLE);
}
.vc-log-debug {
  color: var(--VC-YELLOW);
}
.vc-log-warn {
  color: var(--VC-ORANGE);
  border-color: var(--VC-WARN-BORDER);
  background-color: var(--VC-WARN-BG);
}
.vc-log-error {
  color: var(--VC-RED);
  border-color: var(--VC-ERROR-BORDER);
  background-color: var(--VC-ERROR-BG);
}
.vc-logrow-icon {
  margin-left: auto;
}
.vc-log-padding {
  width: 1.53846154em;
  border-left: 1px solid var(--VC-FG-3);
}
.vc-log-group .vc-log-content {
  font-weight: bold;
}
.vc-log-group-toggle {
  padding-left: 0.76923077em;
}
.vc-log-group-toggle {
  display: block;
  font-style: italic;
  padding-left: 0.76923077em;
  position: relative;
}
.vc-log-group-toggle:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-log-group > .vc-log-group-toggle::before {
  content: "";
  position: absolute;
  top: 0.30769231em;
  left: 0.15384615em;
  width: 0;
  height: 0;
  border: transparent solid 0.30769231em;
  border-left-color: var(--VC-FG-1);
}
.vc-log-group.vc-toggle > .vc-log-group-toggle::before {
  top: 0.46153846em;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vc-log-time {
  width: 6.15384615em;
  color: #777;
}
.vc-log-repeat i {
  margin-right: 0.30769231em;
  padding: 0 6.5px;
  color: #D7E0EF;
  background-color: #42597F;
  border-radius: 8.66666667px;
}
.vc-log-error .vc-log-repeat i {
  color: #901818;
  background-color: var(--VC-RED);
}
.vc-log-warn .vc-log-repeat i {
  color: #987D20;
  background-color: #F4BD02;
}
.vc-log-content {
  flex: 1;
}
.vc-log-input,
.vc-log-output {
  padding-left: 0.92307692em;
}
.vc-log-input:before,
.vc-log-output:before {
  content: "âº";
  position: absolute;
  top: 0.15384615em;
  left: 0;
  font-size: 1.23076923em;
  color: #6A5ACD;
}
.vc-log-output:before {
  content: "â¹";
}
`,""]),_.Z=C},1237:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`.vc-log-tree {
  display: block;
  overflow: auto;
  position: relative;
  -webkit-overflow-scrolling: touch;
}
.vc-log-tree-node {
  display: block;
  font-style: italic;
  padding-left: 0.76923077em;
  position: relative;
}
.vc-log-tree.vc-is-tree > .vc-log-tree-node:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-log-tree.vc-is-tree > .vc-log-tree-node::before {
  content: "";
  position: absolute;
  top: 0.30769231em;
  left: 0.15384615em;
  width: 0;
  height: 0;
  border: transparent solid 0.30769231em;
  border-left-color: var(--VC-FG-1);
}
.vc-log-tree.vc-is-tree.vc-toggle > .vc-log-tree-node::before {
  top: 0.46153846em;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vc-log-tree-child {
  margin-left: 0.76923077em;
}
.vc-log-tree-loadmore {
  text-decoration: underline;
  padding-left: 1.84615385em;
  position: relative;
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-tree-loadmore::before {
  content: "âºâº";
  position: absolute;
  top: -0.15384615em;
  left: 0.76923077em;
  font-size: 1.23076923em;
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-tree-loadmore:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
`,""]),_.Z=C},845:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`.vc-log-key {
  color: var(--VC-CODE-KEY-FG);
}
.vc-log-key-private {
  color: var(--VC-CODE-PRIVATE-KEY-FG);
}
.vc-log-val {
  white-space: pre-line;
}
.vc-log-val-function {
  color: var(--VC-CODE-FUNC-FG);
  font-style: italic !important;
}
.vc-log-val-bigint {
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-val-number,
.vc-log-val-boolean {
  color: var(--VC-CODE-NUMBER-FG);
}
.vc-log-val-string {
  white-space: pre-wrap;
}
.vc-log-val-string.vc-log-val-haskey {
  color: var(--VC-CODE-STR-FG);
  white-space: normal;
}
.vc-log-val-null,
.vc-log-val-undefined,
.vc-log-val-uninvocatable {
  color: var(--VC-CODE-NULL-FG);
}
.vc-log-val-symbol {
  color: var(--VC-CODE-STR-FG);
}
`,""]),_.Z=C},8747:function(E,_,A){var T=A(6738),B=A.n(T),I=A(7705),C=A.n(I)()(B());C.push([E.id,`.vc-group .vc-group-preview {
  -webkit-touch-callout: none;
}
.vc-group .vc-group-preview:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-group .vc-group-detail {
  display: none;
  padding: 0 0 0.76923077em 1.53846154em;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-group.vc-actived .vc-group-detail {
  display: block;
  background-color: var(--VC-BG-1);
}
.vc-group.vc-actived .vc-table-row {
  background-color: var(--VC-BG-2);
}
.vc-group.vc-actived .vc-group-preview {
  background-color: var(--VC-BG-1);
}
`,""]),_.Z=C},3411:function(E,_,A){var T=A(3379),B=A.n(T),I=A(7795),C=A.n(I),R=A(569),L=A.n(R),D=A(3565),V=A.n(D),U=A(9216),z=A.n(U),W=A(4589),Y=A.n(W),K=A(1130),J={};K.Z&&K.Z.locals&&(J.locals=K.Z.locals);var et,it=0,rt={};rt.styleTagTransform=Y(),rt.setAttributes=V(),rt.insert=L().bind(null,"head"),rt.domAPI=C(),rt.insertStyleElement=z(),J.use=function(st){return rt.options=st||{},it++||(et=B()(K.Z,rt)),J},J.unuse=function(){it>0&&!--it&&(et(),et=null)},_.Z=J},3379:function(E){var _=[];function A(I){for(var C=-1,R=0;R<_.length;R++)if(_[R].identifier===I){C=R;break}return C}function T(I,C){for(var R={},L=[],D=0;D<I.length;D++){var V=I[D],U=C.base?V[0]+C.base:V[0],z=R[U]||0,W="".concat(U," ").concat(z);R[U]=z+1;var Y=A(W),K={css:V[1],media:V[2],sourceMap:V[3],supports:V[4],layer:V[5]};if(Y!==-1)_[Y].references++,_[Y].updater(K);else{var J=B(K,C);C.byIndex=D,_.splice(D,0,{identifier:W,updater:J,references:1})}L.push(W)}return L}function B(I,C){var R=C.domAPI(C);return R.update(I),function(L){if(L){if(L.css===I.css&&L.media===I.media&&L.sourceMap===I.sourceMap&&L.supports===I.supports&&L.layer===I.layer)return;R.update(I=L)}else R.remove()}}E.exports=function(I,C){var R=T(I=I||[],C=C||{});return function(L){L=L||[];for(var D=0;D<R.length;D++){var V=A(R[D]);_[V].references--}for(var U=T(L,C),z=0;z<R.length;z++){var W=A(R[z]);_[W].references===0&&(_[W].updater(),_.splice(W,1))}R=U}}},569:function(E){var _={};E.exports=function(A,T){var B=function(I){if(_[I]===void 0){var C=document.querySelector(I);if(window.HTMLIFrameElement&&C instanceof window.HTMLIFrameElement)try{C=C.contentDocument.head}catch{C=null}_[I]=C}return _[I]}(A);if(!B)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");B.appendChild(T)}},9216:function(E){E.exports=function(_){var A=document.createElement("style");return _.setAttributes(A,_.attributes),_.insert(A,_.options),A}},3565:function(E,_,A){E.exports=function(T){var B=A.nc;B&&T.setAttribute("nonce",B)}},7795:function(E){E.exports=function(_){var A=_.insertStyleElement(_);return{update:function(T){(function(B,I,C){var R="";C.supports&&(R+="@supports (".concat(C.supports,") {")),C.media&&(R+="@media ".concat(C.media," {"));var L=C.layer!==void 0;L&&(R+="@layer".concat(C.layer.length>0?" ".concat(C.layer):""," {")),R+=C.css,L&&(R+="}"),C.media&&(R+="}"),C.supports&&(R+="}");var D=C.sourceMap;D&&typeof btoa<"u"&&(R+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(D))))," */")),I.styleTagTransform(R,B,I.options)})(A,_,T)},remove:function(){(function(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T)})(A)}}}},4589:function(E){E.exports=function(_,A){if(A.styleSheet)A.styleSheet.cssText=_;else{for(;A.firstChild;)A.removeChild(A.firstChild);A.appendChild(document.createTextNode(_))}}},6464:function(E,_,A){function T(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}A.d(_,{Z:function(){return T}})},4296:function(E,_,A){function T(I,C){for(var R=0;R<C.length;R++){var L=C[R];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(I,L.key,L)}}function B(I,C,R){return C&&T(I.prototype,C),R&&T(I,R),Object.defineProperty(I,"prototype",{writable:!1}),I}A.d(_,{Z:function(){return B}})},8270:function(E,_,A){function T(B,I,C){return I in B?Object.defineProperty(B,I,{value:C,enumerable:!0,configurable:!0,writable:!0}):B[I]=C,B}A.d(_,{Z:function(){return T}})},6881:function(E,_,A){A.d(_,{Z:function(){return B}});var T=A(2717);function B(I,C){I.prototype=Object.create(C.prototype),I.prototype.constructor=I,(0,T.Z)(I,C)}},2717:function(E,_,A){function T(B,I){return T=Object.setPrototypeOf||function(C,R){return C.__proto__=R,C},T(B,I)}A.d(_,{Z:function(){return T}})},7003:function(E,_,A){A.d(_,{H3:function(){return T.H3E},ev:function(){return T.evW},x:function(){return T.xa3}});var T=A(2942)},2942:function(E,_,A){A.d(_,{f_C:function(){return mi},hjT:function(){return De},R3I:function(){return lt},Ljt:function(){return gt},akz:function(){return jt},VnY:function(){return Kt},cKT:function(){return me},gbL:function(){return Ke},FIv:function(){return W},XGm:function(){return rt},xa3:function(){return he},YCL:function(){return Zt},nuO:function(){return Y},vpE:function(){return fe},RMB:function(){return ht},ogt:function(){return at},bGB:function(){return mt},cSb:function(){return pt},yl1:function(){return Li},VOJ:function(){return it},u2N:function(){return J},$XI:function(){return z},lig:function(){return yi},dvw:function(){return ki},S1n:function(){return He},$Tr:function(){return ct},sBU:function(){return R},oLt:function(){return Et},yef:function(){return ce},ZTd:function(){return T},AqN:function(){return D},evW:function(){return Jt},H3E:function(){return Gt},cly:function(){return Ze},AT7:function(){return Vt},j7q:function(){return C},N8:function(){return L},rTO:function(){return bt},BmG:function(){return $t},fxP:function(){return st},czc:function(){return Lt},DhX:function(){return At},XET:function(){return Ot},LdU:function(){return U},bi5:function(){return yt},fLW:function(){return Tt},VHj:function(){return St},Ui:function(){return gi},etI:function(){return Di},GQg:function(){return wi},kmG:function(){return et}}),A(2717),A(6881);function T(){}function B(Bt){return Bt()}function I(){return Object.create(null)}function C(Bt){Bt.forEach(B)}function R(Bt){return typeof Bt=="function"}function L(Bt,Ft){return Bt!=Bt?Ft==Ft:Bt!==Ft||Bt&&typeof Bt=="object"||typeof Bt=="function"}function D(Bt,Ft){return Bt!=Bt?Ft==Ft:Bt!==Ft}function V(Bt){return Object.keys(Bt).length===0}function U(Bt){if(Bt==null)return T;for(var Ft=arguments.length,Rt=new Array(Ft>1?Ft-1:0),kt=1;kt<Ft;kt++)Rt[kt-1]=arguments[kt];var Wt=Bt.subscribe.apply(Bt,Rt);return Wt.unsubscribe?function(){return Wt.unsubscribe()}:Wt}function z(Bt){var Ft;return U(Bt,function(Rt){return Ft=Rt})(),Ft}function W(Bt,Ft,Rt){Bt.$$.on_destroy.push(U(Ft,Rt))}function Y(Bt,Ft,Rt,kt){if(Bt){var Wt=K(Bt,Ft,Rt,kt);return Bt[0](Wt)}}function K(Bt,Ft,Rt,kt){return Bt[1]&&kt?function(Wt,le){for(var be in le)Wt[be]=le[be];return Wt}(Rt.ctx.slice(),Bt[1](kt(Ft))):Rt.ctx}function J(Bt,Ft,Rt,kt){if(Bt[2]&&kt){var Wt=Bt[2](kt(Rt));if(Ft.dirty===void 0)return Wt;if(typeof Wt=="object"){for(var le=[],be=Math.max(Ft.dirty.length,Wt.length),Ue=0;Ue<be;Ue+=1)le[Ue]=Ft.dirty[Ue]|Wt[Ue];return le}return Ft.dirty|Wt}return Ft.dirty}function et(Bt,Ft,Rt,kt,Wt,le){if(Wt){var be=K(Ft,Rt,kt,le);Bt.p(be,Wt)}}function it(Bt){if(Bt.ctx.length>32){for(var Ft=[],Rt=Bt.ctx.length/32,kt=0;kt<Rt;kt++)Ft[kt]=-1;return Ft}return-1}function rt(Bt){var Ft={};for(var Rt in Bt)Ft[Rt]=!0;return Ft}function st(Bt,Ft,Rt){return Bt.set(Rt),Ft}function lt(Bt,Ft){Bt.appendChild(Ft)}function ct(Bt,Ft,Rt){Bt.insertBefore(Ft,Rt||null)}function at(Bt){Bt.parentNode.removeChild(Bt)}function ht(Bt,Ft){for(var Rt=0;Rt<Bt.length;Rt+=1)Bt[Rt]&&Bt[Rt].d(Ft)}function mt(Bt){return document.createElement(Bt)}function yt(Bt){return document.createElementNS("http://www.w3.org/2000/svg",Bt)}function Tt(Bt){return document.createTextNode(Bt)}function At(){return Tt(" ")}function pt(){return Tt("")}function Et(Bt,Ft,Rt,kt){return Bt.addEventListener(Ft,Rt,kt),function(){return Bt.removeEventListener(Ft,Rt,kt)}}function Vt(Bt){return function(Ft){return Ft.preventDefault(),Bt.call(this,Ft)}}function Ot(Bt){return function(Ft){return Ft.stopPropagation(),Bt.call(this,Ft)}}function gt(Bt,Ft,Rt){Rt==null?Bt.removeAttribute(Ft):Bt.getAttribute(Ft)!==Rt&&Bt.setAttribute(Ft,Rt)}function bt(Bt,Ft){Ft=""+Ft,Bt.wholeText!==Ft&&(Bt.data=Ft)}function $t(Bt,Ft){Bt.value=Ft??""}function Lt(Bt,Ft,Rt,kt){Rt===null?Bt.style.removeProperty(Ft):Bt.style.setProperty(Ft,Rt,kt?"important":"")}function St(Bt,Ft,Rt){Bt.classList[Rt?"add":"remove"](Ft)}function Ct(Bt,Ft,Rt){Rt===void 0&&(Rt=!1);var kt=document.createEvent("CustomEvent");return kt.initCustomEvent(Bt,Rt,!1,Ft),kt}var _t;function wt(Bt){_t=Bt}function Mt(){if(!_t)throw new Error("Function called outside component initialization");return _t}function Gt(Bt){Mt().$$.on_mount.push(Bt)}function Jt(Bt){Mt().$$.on_destroy.push(Bt)}function he(){var Bt=Mt();return function(Ft,Rt){var kt=Bt.$$.callbacks[Ft];if(kt){var Wt=Ct(Ft,Rt);kt.slice().forEach(function(le){le.call(Bt,Wt)})}}}function me(Bt,Ft){var Rt=this,kt=Bt.$$.callbacks[Ft.type];kt&&kt.slice().forEach(function(Wt){return Wt.call(Rt,Ft)})}var ne=[],Kt=[],ue=[],_e=[],ge=Promise.resolve(),pe=!1;function ve(){pe||(pe=!0,ge.then(Li))}function Ee(Bt){ue.push(Bt)}function De(Bt){_e.push(Bt)}var ti=new Set,ei=0;function Li(){var Bt=_t;do{for(;ei<ne.length;){var Ft=ne[ei];ei++,wt(Ft),hi(Ft.$$)}for(wt(null),ne.length=0,ei=0;Kt.length;)Kt.pop()();for(var Rt=0;Rt<ue.length;Rt+=1){var kt=ue[Rt];ti.has(kt)||(ti.add(kt),kt())}ue.length=0}while(ne.length);for(;_e.length;)_e.pop()();pe=!1,ti.clear(),wt(Bt)}function hi(Bt){if(Bt.fragment!==null){Bt.update(),C(Bt.before_update);var Ft=Bt.dirty;Bt.dirty=[-1],Bt.fragment&&Bt.fragment.p(Bt.ctx,Ft),Bt.after_update.forEach(Ee)}}var ii,di=new Set;function ki(){ii={r:0,c:[],p:ii}}function Ke(){ii.r||C(ii.c),ii=ii.p}function gi(Bt,Ft){Bt&&Bt.i&&(di.delete(Bt),Bt.i(Ft))}function Di(Bt,Ft,Rt,kt){if(Bt&&Bt.o){if(di.has(Bt))return;di.add(Bt),ii.c.push(function(){di.delete(Bt),kt&&(Rt&&Bt.d(1),kt())}),Bt.o(Ft)}}var yi=typeof window<"u"?window:typeof globalThis<"u"?globalThis:commonjsGlobal;function Ze(Bt,Ft){Di(Bt,1,1,function(){Ft.delete(Bt.key)})}function wi(Bt,Ft,Rt,kt,Wt,le,be,Ue,ni,ze,Ni,Zi){for(var fi=Bt.length,ui=le.length,xi=fi,Ui={};xi--;)Ui[Bt[xi].key]=xi;var Ji=[],nr=new Map,sr=new Map;for(xi=ui;xi--;){var or=Zi(Wt,le,xi),Gi=Rt(or),ar=be.get(Gi);ar?kt&&ar.p(or,Ft):(ar=ze(Gi,or)).c(),nr.set(Gi,Ji[xi]=ar),Gi in Ui&&sr.set(Gi,Math.abs(xi-Ui[Gi]))}var Dr=new Set,Wi=new Set;function br(Yi){gi(Yi,1),Yi.m(Ue,Ni),be.set(Yi.key,Yi),Ni=Yi.first,ui--}for(;fi&&ui;){var Vi=Ji[ui-1],zi=Bt[fi-1],qi=Vi.key,Xi=zi.key;Vi===zi?(Ni=Vi.first,fi--,ui--):nr.has(Xi)?!be.has(qi)||Dr.has(qi)?br(Vi):Wi.has(Xi)?fi--:sr.get(qi)>sr.get(Xi)?(Wi.add(qi),br(Vi)):(Dr.add(Xi),fi--):(ni(zi,be),fi--)}for(;fi--;){var Oi=Bt[fi];nr.has(Oi.key)||ni(Oi,be)}for(;ui;)br(Ji[ui-1]);return Ji}function jt(Bt,Ft,Rt){var kt=Bt.$$.props[Ft];kt!==void 0&&(Bt.$$.bound[kt]=Rt,Rt(Bt.$$.ctx[kt]))}function Zt(Bt){Bt&&Bt.c()}function ce(Bt,Ft,Rt,kt){var Wt=Bt.$$,le=Wt.fragment,be=Wt.on_mount,Ue=Wt.on_destroy,ni=Wt.after_update;le&&le.m(Ft,Rt),kt||Ee(function(){var ze=be.map(B).filter(R);Ue?Ue.push.apply(Ue,ze):C(ze),Bt.$$.on_mount=[]}),ni.forEach(Ee)}function fe(Bt,Ft){var Rt=Bt.$$;Rt.fragment!==null&&(C(Rt.on_destroy),Rt.fragment&&Rt.fragment.d(Ft),Rt.on_destroy=Rt.fragment=null,Rt.ctx=[])}function Ve(Bt,Ft){Bt.$$.dirty[0]===-1&&(ne.push(Bt),ve(),Bt.$$.dirty.fill(0)),Bt.$$.dirty[Ft/31|0]|=1<<Ft%31}function He(Bt,Ft,Rt,kt,Wt,le,be,Ue){Ue===void 0&&(Ue=[-1]);var ni=_t;wt(Bt);var ze=Bt.$$={fragment:null,ctx:null,props:le,update:T,not_equal:Wt,bound:I(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(Ft.context||(ni?ni.$$.context:[])),callbacks:I(),dirty:Ue,skip_bound:!1,root:Ft.target||ni.$$.root};be&&be(ze.root);var Ni,Zi=!1;if(ze.ctx=Rt?Rt(Bt,Ft.props||{},function(ui,xi){var Ui=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:xi;return ze.ctx&&Wt(ze.ctx[ui],ze.ctx[ui]=Ui)&&(!ze.skip_bound&&ze.bound[ui]&&ze.bound[ui](Ui),Zi&&Ve(Bt,ui)),xi}):[],ze.update(),Zi=!0,C(ze.before_update),ze.fragment=!!kt&&kt(ze.ctx),Ft.target){if(Ft.hydrate){var fi=(Ni=Ft.target,Array.from(Ni.childNodes));ze.fragment&&ze.fragment.l(fi),fi.forEach(at)}else ze.fragment&&ze.fragment.c();Ft.intro&&gi(Bt.$$.fragment),ce(Bt,Ft.target,Ft.anchor,Ft.customElement),Li()}wt(ni)}var mi=function(){function Bt(){}var Ft=Bt.prototype;return Ft.$destroy=function(){fe(this,1),this.$destroy=T},Ft.$on=function(Rt,kt){var Wt=this.$$.callbacks[Rt]||(this.$$.callbacks[Rt]=[]);return Wt.push(kt),function(){var le=Wt.indexOf(kt);le!==-1&&Wt.splice(le,1)}},Ft.$set=function(Rt){this.$$set&&!V(Rt)&&(this.$$.skip_bound=!0,this.$$set(Rt),this.$$.skip_bound=!1)},Bt}()},3313:function(E,_,A){A.d(_,{U2:function(){return T.$XI},fZ:function(){return R}});var T=A(2942);function B(L,D){var V=typeof Symbol<"u"&&L[Symbol.iterator]||L["@@iterator"];if(V)return(V=V.call(L)).next.bind(V);if(Array.isArray(L)||(V=function(z,W){if(z){if(typeof z=="string")return I(z,W);var Y=Object.prototype.toString.call(z).slice(8,-1);if(Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set")return Array.from(z);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return I(z,W)}}(L))||D&&L&&typeof L.length=="number"){V&&(L=V);var U=0;return function(){return U>=L.length?{done:!0}:{done:!1,value:L[U++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(L,D){(D==null||D>L.length)&&(D=L.length);for(var V=0,U=new Array(D);V<D;V++)U[V]=L[V];return U}var C=[];function R(L,D){var V;D===void 0&&(D=T.ZTd);var U=new Set;function z(W){if((0,T.N8)(L,W)&&(L=W,V)){for(var Y,K=!C.length,J=B(U);!(Y=J()).done;){var et=Y.value;et[1](),C.push(et,L)}if(K){for(var it=0;it<C.length;it+=2)C[it][0](C[it+1]);C.length=0}}}return{set:z,update:function(W){z(W(L))},subscribe:function(W,Y){Y===void 0&&(Y=T.ZTd);var K=[W,Y];return U.add(K),U.size===1&&(V=D(z)||T.ZTd),W(L),function(){U.delete(K),U.size===0&&(V(),V=null)}}}}}},__webpack_module_cache__={};function __webpack_require__(E){var _=__webpack_module_cache__[E];if(_!==void 0)return _.exports;var A=__webpack_module_cache__[E]={id:E,exports:{}};return __webpack_modules__[E](A,A.exports,__webpack_require__),A.exports}__webpack_require__.n=function(E){var _=E&&E.__esModule?function(){return E.default}:function(){return E};return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=function(E,_){for(var A in _)__webpack_require__.o(_,A)&&!__webpack_require__.o(E,A)&&Object.defineProperty(E,A,{enumerable:!0,get:_[A]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=function(E,_){return Object.prototype.hasOwnProperty.call(E,_)};var __webpack_exports__={};return function(){__webpack_require__.d(__webpack_exports__,{default:function(){return Va}}),__webpack_require__(5441),__webpack_require__(8765);var E=__webpack_require__(4296),_=__webpack_require__(5103),A={one:function(X,G){G===void 0&&(G=document);try{return G.querySelector(X)||void 0}catch{return}},all:function(X,G){G===void 0&&(G=document);try{var O=G.querySelectorAll(X);return[].slice.call(O)}catch{return[]}},addClass:function(X,G){if(X)for(var O=(0,_.kJ)(X)?X:[X],F=0;F<O.length;F++){var q=(O[F].className||"").split(" ");q.indexOf(G)>-1||(q.push(G),O[F].className=q.join(" "))}},removeClass:function(X,G){if(X)for(var O=(0,_.kJ)(X)?X:[X],F=0;F<O.length;F++){for(var q=O[F].className.split(" "),Z=0;Z<q.length;Z++)q[Z]==G&&(q[Z]="");O[F].className=q.join(" ").trim()}},hasClass:function(X,G){return!(!X||!X.classList)&&X.classList.contains(G)},bind:function(X,G,O,F){F===void 0&&(F=!1),X&&((0,_.kJ)(X)?X:[X]).forEach(function(q){q.addEventListener(G,O,!!F)})},delegate:function(X,G,O,F){X&&X.addEventListener(G,function(q){var Z=A.all(O,X);if(Z)t:for(var tt=0;tt<Z.length;tt++)for(var nt=q.target;nt;){if(nt==Z[tt]){F.call(nt,q,nt);break t}if((nt=nt.parentNode)==X)break}},!1)},removeChildren:function(X){for(;X.firstChild;)X.removeChild(X.lastChild);return X}},T=A,B=__webpack_require__(6464),I=__webpack_require__(6881),C=__webpack_require__(2942),R=__webpack_require__(7003),L=__webpack_require__(3379),D=__webpack_require__.n(L),V=__webpack_require__(7795),U=__webpack_require__.n(V),z=__webpack_require__(569),W=__webpack_require__.n(z),Y=__webpack_require__(3565),K=__webpack_require__.n(Y),J=__webpack_require__(9216),et=__webpack_require__.n(J),it=__webpack_require__(4589),rt=__webpack_require__.n(it),st=__webpack_require__(7558),lt={};st.Z&&st.Z.locals&&(lt.locals=st.Z.locals);var ct,at=0,ht={};ht.styleTagTransform=rt(),ht.setAttributes=K(),ht.insert=W().bind(null,"head"),ht.domAPI=U(),ht.insertStyleElement=et(),lt.use=function(X){return ht.options=X||{},at++||(ct=D()(st.Z,ht)),lt},lt.unuse=function(){at>0&&!--at&&(ct(),ct=null)};var mt=lt;function yt(X){var G,O,F,q;return{c:function(){G=(0,C.bGB)("div"),O=(0,C.fLW)("vConsole"),(0,C.Ljt)(G,"class","vc-switch"),(0,C.czc)(G,"right",X[2].x+"px"),(0,C.czc)(G,"bottom",X[2].y+"px"),(0,C.czc)(G,"display",X[0]?"block":"none")},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),(0,C.R3I)(G,O),X[8](G),F||(q=[(0,C.oLt)(G,"touchstart",X[3],{passive:!1}),(0,C.oLt)(G,"touchend",X[4],{passive:!1}),(0,C.oLt)(G,"touchmove",X[5],{passive:!1}),(0,C.oLt)(G,"click",X[7])],F=!0)},p:function(Z,tt){var nt=tt[0];4&nt&&(0,C.czc)(G,"right",Z[2].x+"px"),4&nt&&(0,C.czc)(G,"bottom",Z[2].y+"px"),1&nt&&(0,C.czc)(G,"display",Z[0]?"block":"none")},i:C.ZTd,o:C.ZTd,d:function(Z){Z&&(0,C.ogt)(G),X[8](null),F=!1,(0,C.j7q)(q)}}}function Tt(X,G,O){var F,q=G.show,Z=q===void 0||q,tt=G.position,nt=tt===void 0?{x:0,y:0}:tt,ot={hasMoved:!1,x:0,y:0,startX:0,startY:0,endX:0,endY:0},ut={x:0,y:0};(0,R.H3)(function(){mt.use()}),(0,R.ev)(function(){mt.unuse()});var dt=function(ft,Pt){var xt=vt(ft,Pt);ft=xt[0],Pt=xt[1],ot.x=ft,ot.y=Pt,O(2,ut.x=ft,ut),O(2,ut.y=Pt,ut),_.po("switch_x",ft+""),_.po("switch_y",Pt+"")},vt=function(ft,Pt){var xt=Math.max(document.documentElement.offsetWidth,window.innerWidth),It=Math.max(document.documentElement.offsetHeight,window.innerHeight);return ft+F.offsetWidth>xt&&(ft=xt-F.offsetWidth),Pt+F.offsetHeight>It&&(Pt=It-F.offsetHeight),ft<0&&(ft=0),Pt<20&&(Pt=20),[ft,Pt]};return X.$$set=function(ft){"show"in ft&&O(0,Z=ft.show),"position"in ft&&O(6,nt=ft.position)},X.$$.update=function(){66&X.$$.dirty&&F&&dt(nt.x,nt.y)},[Z,F,ut,function(ft){ot.startX=ft.touches[0].pageX,ot.startY=ft.touches[0].pageY,ot.hasMoved=!1},function(ft){ot.hasMoved&&(ot.startX=0,ot.startY=0,ot.hasMoved=!1,dt(ot.endX,ot.endY))},function(ft){if(!(ft.touches.length<=0)){var Pt=ft.touches[0].pageX-ot.startX,xt=ft.touches[0].pageY-ot.startY,It=Math.floor(ot.x-Pt),Dt=Math.floor(ot.y-xt),Nt=vt(It,Dt);It=Nt[0],Dt=Nt[1],O(2,ut.x=It,ut),O(2,ut.y=Dt,ut),ot.endX=It,ot.endY=Dt,ot.hasMoved=!0,ft.preventDefault()}},nt,function(ft){C.cKT.call(this,X,ft)},function(ft){C.VnY[ft?"unshift":"push"](function(){O(1,F=ft)})}]}var At=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,Tt,yt,C.N8,{show:0,position:6}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"show",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({show:O}),(0,C.yl1)()}},{key:"position",get:function(){return this.$$.ctx[6]},set:function(O){this.$$set({position:O}),(0,C.yl1)()}}]),G}(C.f_C),pt=At;function Et(X){var G,O;return{c:function(){G=(0,C.bGB)("div"),(0,C.Ljt)(G,"id",O="__vc_plug_"+X[0]),(0,C.Ljt)(G,"class","vc-plugin-box"),(0,C.VHj)(G,"vc-fixed-height",X[1]),(0,C.VHj)(G,"vc-actived",X[2])},m:function(F,q){(0,C.$Tr)(F,G,q),X[6](G)},p:function(F,q){var Z=q[0];1&Z&&O!==(O="__vc_plug_"+F[0])&&(0,C.Ljt)(G,"id",O),2&Z&&(0,C.VHj)(G,"vc-fixed-height",F[1]),4&Z&&(0,C.VHj)(G,"vc-actived",F[2])},i:C.ZTd,o:C.ZTd,d:function(F){F&&(0,C.ogt)(G),X[6](null)}}}function Vt(X,G,O){var F=G.pluginId,q=F===void 0?"":F,Z=G.fixedHeight,tt=Z!==void 0&&Z,nt=G.actived,ot=nt!==void 0&&nt,ut=G.content,dt=ut===void 0?void 0:ut,vt=void 0,ft=void 0;return X.$$set=function(Pt){"pluginId"in Pt&&O(0,q=Pt.pluginId),"fixedHeight"in Pt&&O(1,tt=Pt.fixedHeight),"actived"in Pt&&O(2,ot=Pt.actived),"content"in Pt&&O(4,dt=Pt.content)},X.$$.update=function(){57&X.$$.dirty&&ft!==q&&dt&&vt&&(O(5,ft=q),O(3,vt.innerHTML="",vt),(0,_.HD)(dt)?O(3,vt.innerHTML=dt,vt):(0,_.kK)(dt)&&vt.appendChild(dt))},[q,tt,ot,vt,dt,ft,function(Pt){C.VnY[Pt?"unshift":"push"](function(){O(3,vt=Pt),O(5,ft),O(0,q),O(4,dt)})}]}var Ot=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,Vt,Et,C.N8,{pluginId:0,fixedHeight:1,actived:2,content:4}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"pluginId",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({pluginId:O}),(0,C.yl1)()}},{key:"fixedHeight",get:function(){return this.$$.ctx[1]},set:function(O){this.$$set({fixedHeight:O}),(0,C.yl1)()}},{key:"actived",get:function(){return this.$$.ctx[2]},set:function(O){this.$$set({actived:O}),(0,C.yl1)()}},{key:"content",get:function(){return this.$$.ctx[4]},set:function(O){this.$$set({content:O}),(0,C.yl1)()}}]),G}(C.f_C),gt=Ot,bt=__webpack_require__(4687),$t=__webpack_require__(3283),Lt={};$t.Z&&$t.Z.locals&&(Lt.locals=$t.Z.locals);var St,Ct=0,_t={};_t.styleTagTransform=rt(),_t.setAttributes=K(),_t.insert=W().bind(null,"head"),_t.domAPI=U(),_t.insertStyleElement=et(),Lt.use=function(X){return _t.options=X||{},Ct++||(St=D()($t.Z,_t)),Lt},Lt.unuse=function(){Ct>0&&!--Ct&&(St(),St=null)};var wt=Lt;function Mt(X,G,O){var F=X.slice();return F[39]=G[O][0],F[40]=G[O][1],F}function Gt(X,G,O){var F=X.slice();return F[43]=G[O],F[45]=O,F}function Jt(X,G,O){var F=X.slice();return F[39]=G[O][0],F[40]=G[O][1],F}function he(X,G,O){var F=X.slice();return F[39]=G[O][0],F[40]=G[O][1],F}function me(X,G,O){var F=X.slice();return F[43]=G[O],F[45]=O,F}function ne(X,G,O){var F=X.slice();return F[39]=G[O][0],F[40]=G[O][1],F}function Kt(X){var G,O,F,q,Z,tt=X[40].name+"";function nt(){return X[25](X[40])}return{c:function(){G=(0,C.bGB)("a"),O=(0,C.fLW)(tt),(0,C.Ljt)(G,"class","vc-tab"),(0,C.Ljt)(G,"id",F="__vc_tab_"+X[40].id),(0,C.VHj)(G,"vc-actived",X[40].id===X[2])},m:function(ot,ut){(0,C.$Tr)(ot,G,ut),(0,C.R3I)(G,O),q||(Z=(0,C.oLt)(G,"click",nt),q=!0)},p:function(ot,ut){X=ot,8&ut[0]&&tt!==(tt=X[40].name+"")&&(0,C.rTO)(O,tt),8&ut[0]&&F!==(F="__vc_tab_"+X[40].id)&&(0,C.Ljt)(G,"id",F),12&ut[0]&&(0,C.VHj)(G,"vc-actived",X[40].id===X[2])},d:function(ot){ot&&(0,C.ogt)(G),q=!1,Z()}}}function ue(X){var G,O=X[40].hasTabPanel&&Kt(X);return{c:function(){O&&O.c(),G=(0,C.cSb)()},m:function(F,q){O&&O.m(F,q),(0,C.$Tr)(F,G,q)},p:function(F,q){F[40].hasTabPanel?O?O.p(F,q):((O=Kt(F)).c(),O.m(G.parentNode,G)):O&&(O.d(1),O=null)},d:function(F){O&&O.d(F),F&&(0,C.ogt)(G)}}}function _e(X){var G,O,F,q,Z,tt=X[43].name+"";function nt(){for(var ot,ut=arguments.length,dt=new Array(ut),vt=0;vt<ut;vt++)dt[vt]=arguments[vt];return(ot=X)[26].apply(ot,[X[40],X[45]].concat(dt))}return{c:function(){G=(0,C.bGB)("i"),O=(0,C.fLW)(tt),(0,C.Ljt)(G,"class",F="vc-toptab vc-topbar-"+X[40].id+" "+X[43].className),(0,C.VHj)(G,"vc-toggle",X[40].id===X[2]),(0,C.VHj)(G,"vc-actived",X[43].actived)},m:function(ot,ut){(0,C.$Tr)(ot,G,ut),(0,C.R3I)(G,O),q||(Z=(0,C.oLt)(G,"click",nt),q=!0)},p:function(ot,ut){X=ot,8&ut[0]&&tt!==(tt=X[43].name+"")&&(0,C.rTO)(O,tt),8&ut[0]&&F!==(F="vc-toptab vc-topbar-"+X[40].id+" "+X[43].className)&&(0,C.Ljt)(G,"class",F),12&ut[0]&&(0,C.VHj)(G,"vc-toggle",X[40].id===X[2]),8&ut[0]&&(0,C.VHj)(G,"vc-actived",X[43].actived)},d:function(ot){ot&&(0,C.ogt)(G),q=!1,Z()}}}function ge(X){for(var G,O=X[40].topbarList,F=[],q=0;q<O.length;q+=1)F[q]=_e(me(X,O,q));return{c:function(){for(var Z=0;Z<F.length;Z+=1)F[Z].c();G=(0,C.cSb)()},m:function(Z,tt){for(var nt=0;nt<F.length;nt+=1)F[nt].m(Z,tt);(0,C.$Tr)(Z,G,tt)},p:function(Z,tt){if(8204&tt[0]){var nt;for(O=Z[40].topbarList,nt=0;nt<O.length;nt+=1){var ot=me(Z,O,nt);F[nt]?F[nt].p(ot,tt):(F[nt]=_e(ot),F[nt].c(),F[nt].m(G.parentNode,G))}for(;nt<F.length;nt+=1)F[nt].d(1);F.length=O.length}},d:function(Z){(0,C.RMB)(F,Z),Z&&(0,C.ogt)(G)}}}function pe(X){var G,O,F,q=gt;function Z(tt){var nt;return{props:{pluginId:tt[40].id,fixedHeight:(nt=tt[40].tabOptions)==null?void 0:nt.fixedHeight,actived:tt[40].id===tt[2],content:tt[40].content}}}return q&&(G=new q(Z(X))),{c:function(){G&&(0,C.YCL)(G.$$.fragment),O=(0,C.cSb)()},m:function(tt,nt){G&&(0,C.yef)(G,tt,nt),(0,C.$Tr)(tt,O,nt),F=!0},p:function(tt,nt){var ot,ut={};if(8&nt[0]&&(ut.pluginId=tt[40].id),8&nt[0]&&(ut.fixedHeight=(ot=tt[40].tabOptions)==null?void 0:ot.fixedHeight),12&nt[0]&&(ut.actived=tt[40].id===tt[2]),8&nt[0]&&(ut.content=tt[40].content),q!==(q=gt)){if(G){(0,C.dvw)();var dt=G;(0,C.etI)(dt.$$.fragment,1,0,function(){(0,C.vpE)(dt,1)}),(0,C.gbL)()}q?(G=new q(Z(tt)),(0,C.YCL)(G.$$.fragment),(0,C.Ui)(G.$$.fragment,1),(0,C.yef)(G,O.parentNode,O)):G=null}else q&&G.$set(ut)},i:function(tt){F||(G&&(0,C.Ui)(G.$$.fragment,tt),F=!0)},o:function(tt){G&&(0,C.etI)(G.$$.fragment,tt),F=!1},d:function(tt){tt&&(0,C.ogt)(O),G&&(0,C.vpE)(G,tt)}}}function ve(X){var G,O,F,q,Z,tt=X[43].name+"";function nt(){for(var ot,ut=arguments.length,dt=new Array(ut),vt=0;vt<ut;vt++)dt[vt]=arguments[vt];return(ot=X)[28].apply(ot,[X[40],X[45]].concat(dt))}return{c:function(){G=(0,C.bGB)("i"),O=(0,C.fLW)(tt),(0,C.Ljt)(G,"class",F="vc-tool vc-tool-"+X[40].id),(0,C.VHj)(G,"vc-global-tool",X[43].global),(0,C.VHj)(G,"vc-toggle",X[40].id===X[2])},m:function(ot,ut){(0,C.$Tr)(ot,G,ut),(0,C.R3I)(G,O),q||(Z=(0,C.oLt)(G,"click",nt),q=!0)},p:function(ot,ut){X=ot,8&ut[0]&&tt!==(tt=X[43].name+"")&&(0,C.rTO)(O,tt),8&ut[0]&&F!==(F="vc-tool vc-tool-"+X[40].id)&&(0,C.Ljt)(G,"class",F),8&ut[0]&&(0,C.VHj)(G,"vc-global-tool",X[43].global),12&ut[0]&&(0,C.VHj)(G,"vc-toggle",X[40].id===X[2])},d:function(ot){ot&&(0,C.ogt)(G),q=!1,Z()}}}function Ee(X){for(var G,O=X[40].toolbarList,F=[],q=0;q<O.length;q+=1)F[q]=ve(Gt(X,O,q));return{c:function(){for(var Z=0;Z<F.length;Z+=1)F[Z].c();G=(0,C.cSb)()},m:function(Z,tt){for(var nt=0;nt<F.length;nt+=1)F[nt].m(Z,tt);(0,C.$Tr)(Z,G,tt)},p:function(Z,tt){if(16396&tt[0]){var nt;for(O=Z[40].toolbarList,nt=0;nt<O.length;nt+=1){var ot=Gt(Z,O,nt);F[nt]?F[nt].p(ot,tt):(F[nt]=ve(ot),F[nt].c(),F[nt].m(G.parentNode,G))}for(;nt<F.length;nt+=1)F[nt].d(1);F.length=O.length}},d:function(Z){(0,C.RMB)(F,Z),Z&&(0,C.ogt)(G)}}}function De(X){var G,O,F,q,Z,tt,nt,ot,ut,dt,vt,ft,Pt,xt,It,Dt,Nt,Ut,Ht,de,te;function Pe(Qt){X[23](Qt)}function Ce(Qt){X[24](Qt)}var Ie={};X[0]!==void 0&&(Ie.show=X[0]),X[1]!==void 0&&(Ie.position=X[1]),O=new pt({props:Ie}),C.VnY.push(function(){return(0,C.akz)(O,"show",Pe)}),C.VnY.push(function(){return(0,C.akz)(O,"position",Ce)}),O.$on("click",X[10]);for(var re=Object.entries(X[3]),oe=[],Me=0;Me<re.length;Me+=1)oe[Me]=ue(ne(X,re,Me));for(var Xe=Object.entries(X[3]),Re=[],Be=0;Be<Xe.length;Be+=1)Re[Be]=ge(he(X,Xe,Be));for(var ye=Object.entries(X[3]),qt=[],Yt=0;Yt<ye.length;Yt+=1)qt[Yt]=pe(Jt(X,ye,Yt));for(var Oe=function(Qt){return(0,C.etI)(qt[Qt],1,1,function(){qt[Qt]=null})},zt=Object.entries(X[3]),ee=[],we=0;we<zt.length;we+=1)ee[we]=Ee(Mt(X,zt,we));return{c:function(){var Qt,Se;G=(0,C.bGB)("div"),(0,C.YCL)(O.$$.fragment),Z=(0,C.DhX)(),tt=(0,C.bGB)("div"),nt=(0,C.DhX)(),ot=(0,C.bGB)("div"),ut=(0,C.bGB)("div");for(var Ge=0;Ge<oe.length;Ge+=1)oe[Ge].c();dt=(0,C.DhX)(),vt=(0,C.bGB)("div");for(var We=0;We<Re.length;We+=1)Re[We].c();ft=(0,C.DhX)(),Pt=(0,C.bGB)("div");for(var Je=0;Je<qt.length;Je+=1)qt[Je].c();xt=(0,C.DhX)(),It=(0,C.bGB)("div");for(var Fe=0;Fe<ee.length;Fe+=1)ee[Fe].c();Dt=(0,C.DhX)(),(Nt=(0,C.bGB)("i")).textContent="Hide",(0,C.Ljt)(tt,"class","vc-mask"),(0,C.czc)(tt,"display",X[8]?"block":"none"),(0,C.Ljt)(ut,"class","vc-tabbar"),(0,C.Ljt)(vt,"class","vc-topbar"),(0,C.Ljt)(Pt,"class","vc-content"),(0,C.VHj)(Pt,"vc-has-topbar",((Qt=X[3][X[2]])==null||(Se=Qt.topbarList)==null?void 0:Se.length)>0),(0,C.Ljt)(Nt,"class","vc-tool vc-global-tool vc-tool-last vc-hide"),(0,C.Ljt)(It,"class","vc-toolbar"),(0,C.Ljt)(ot,"class","vc-panel"),(0,C.czc)(ot,"display",X[7]?"block":"none"),(0,C.Ljt)(G,"id","__vconsole"),(0,C.Ljt)(G,"style",Ut=X[5]?"font-size:"+X[5]+";":""),(0,C.Ljt)(G,"data-theme",X[4]),(0,C.VHj)(G,"vc-toggle",X[6])},m:function(Qt,Se){(0,C.$Tr)(Qt,G,Se),(0,C.yef)(O,G,null),(0,C.R3I)(G,Z),(0,C.R3I)(G,tt),(0,C.R3I)(G,nt),(0,C.R3I)(G,ot),(0,C.R3I)(ot,ut);for(var Ge=0;Ge<oe.length;Ge+=1)oe[Ge].m(ut,null);(0,C.R3I)(ot,dt),(0,C.R3I)(ot,vt);for(var We=0;We<Re.length;We+=1)Re[We].m(vt,null);(0,C.R3I)(ot,ft),(0,C.R3I)(ot,Pt);for(var Je=0;Je<qt.length;Je+=1)qt[Je].m(Pt,null);X[27](Pt),(0,C.R3I)(ot,xt),(0,C.R3I)(ot,It);for(var Fe=0;Fe<ee.length;Fe+=1)ee[Fe].m(It,null);(0,C.R3I)(It,Dt),(0,C.R3I)(It,Nt),Ht=!0,de||(te=[(0,C.oLt)(tt,"click",X[11]),(0,C.oLt)(Pt,"touchstart",X[15]),(0,C.oLt)(Pt,"touchmove",X[16]),(0,C.oLt)(Pt,"touchend",X[17]),(0,C.oLt)(Pt,"scroll",X[18]),(0,C.oLt)(Nt,"click",X[11]),(0,C.oLt)(G,"touchstart",X[19].touchStart,{passive:!1,capture:!0}),(0,C.oLt)(G,"touchmove",X[19].touchMove,{passive:!1,capture:!0}),(0,C.oLt)(G,"touchend",X[19].touchEnd,{passive:!1,capture:!0})],de=!0)},p:function(Qt,Se){var Ge,We,Je={};if(!F&&1&Se[0]&&(F=!0,Je.show=Qt[0],(0,C.hjT)(function(){return F=!1})),!q&&2&Se[0]&&(q=!0,Je.position=Qt[1],(0,C.hjT)(function(){return q=!1})),O.$set(Je),(!Ht||256&Se[0])&&(0,C.czc)(tt,"display",Qt[8]?"block":"none"),4108&Se[0]){var Fe;for(re=Object.entries(Qt[3]),Fe=0;Fe<re.length;Fe+=1){var bi=ne(Qt,re,Fe);oe[Fe]?oe[Fe].p(bi,Se):(oe[Fe]=ue(bi),oe[Fe].c(),oe[Fe].m(ut,null))}for(;Fe<oe.length;Fe+=1)oe[Fe].d(1);oe.length=re.length}if(8204&Se[0]){var Qe;for(Xe=Object.entries(Qt[3]),Qe=0;Qe<Xe.length;Qe+=1){var Ai=he(Qt,Xe,Qe);Re[Qe]?Re[Qe].p(Ai,Se):(Re[Qe]=ge(Ai),Re[Qe].c(),Re[Qe].m(vt,null))}for(;Qe<Re.length;Qe+=1)Re[Qe].d(1);Re.length=Xe.length}if(12&Se[0]){var je;for(ye=Object.entries(Qt[3]),je=0;je<ye.length;je+=1){var Si=Jt(Qt,ye,je);qt[je]?(qt[je].p(Si,Se),(0,C.Ui)(qt[je],1)):(qt[je]=pe(Si),qt[je].c(),(0,C.Ui)(qt[je],1),qt[je].m(Pt,null))}for((0,C.dvw)(),je=ye.length;je<qt.length;je+=1)Oe(je);(0,C.gbL)()}if(12&Se[0]&&(0,C.VHj)(Pt,"vc-has-topbar",((Ge=Qt[3][Qt[2]])==null||(We=Ge.topbarList)==null?void 0:We.length)>0),16396&Se[0]){var Ye;for(zt=Object.entries(Qt[3]),Ye=0;Ye<zt.length;Ye+=1){var Fi=Mt(Qt,zt,Ye);ee[Ye]?ee[Ye].p(Fi,Se):(ee[Ye]=Ee(Fi),ee[Ye].c(),ee[Ye].m(It,Dt))}for(;Ye<ee.length;Ye+=1)ee[Ye].d(1);ee.length=zt.length}(!Ht||128&Se[0])&&(0,C.czc)(ot,"display",Qt[7]?"block":"none"),(!Ht||32&Se[0]&&Ut!==(Ut=Qt[5]?"font-size:"+Qt[5]+";":""))&&(0,C.Ljt)(G,"style",Ut),(!Ht||16&Se[0])&&(0,C.Ljt)(G,"data-theme",Qt[4]),64&Se[0]&&(0,C.VHj)(G,"vc-toggle",Qt[6])},i:function(Qt){if(!Ht){(0,C.Ui)(O.$$.fragment,Qt);for(var Se=0;Se<ye.length;Se+=1)(0,C.Ui)(qt[Se]);Ht=!0}},o:function(Qt){(0,C.etI)(O.$$.fragment,Qt),qt=qt.filter(Boolean);for(var Se=0;Se<qt.length;Se+=1)(0,C.etI)(qt[Se]);Ht=!1},d:function(Qt){Qt&&(0,C.ogt)(G),(0,C.vpE)(O),(0,C.RMB)(oe,Qt),(0,C.RMB)(Re,Qt),(0,C.RMB)(qt,Qt),X[27](null),(0,C.RMB)(ee,Qt),de=!1,(0,C.j7q)(te)}}}function ti(X,G,O){var F,q,Z=G.theme,tt=Z===void 0?"":Z,nt=G.disableScrolling,ot=nt!==void 0&&nt,ut=G.show,dt=ut!==void 0&&ut,vt=G.showSwitchButton,ft=vt===void 0||vt,Pt=G.switchButtonPosition,xt=Pt===void 0?{x:0,y:0}:Pt,It=G.activedPluginId,Dt=It===void 0?"":It,Nt=G.pluginList,Ut=Nt===void 0?{}:Nt,Ht=(0,R.x)(),de=!1,te="",Pe=!1,Ce=!1,Ie=!1,re=!0,oe=0,Me=null,Xe={};(0,R.H3)(function(){var zt=document.querySelectorAll('[name="viewport"]');if(zt&&zt[0]){var ee=(zt[zt.length-1].getAttribute("content")||"").match(/initial\-scale\=\d+(\.\d+)?/),we=ee?parseFloat(ee[0].split("=")[1]):1;we!==1&&O(5,te=Math.floor(1/we*13)+"px")}wt.use&&wt.use(),F=bt.x.subscribe(function(Qt){dt&&oe!==Qt.updateTime&&(oe=Qt.updateTime,Re())})}),(0,R.ev)(function(){wt.unuse&&wt.unuse(),F&&F()});var Re=function(){!ot&&re&&q&&O(9,q.scrollTop=q.scrollHeight-q.offsetHeight,q)},Be=function(zt){zt!==Dt&&(O(2,Dt=zt),Ht("changePanel",{pluginId:zt}),setTimeout(function(){q&&O(9,q.scrollTop=Xe[Dt]||0,q)},0))},ye=function(zt,ee,we){var Qt=Ut[ee].topbarList[we],Se=!0;if(_.mf(Qt.onClick)&&(Se=Qt.onClick.call(zt.target,zt,Qt.data)),Se!==!1){for(var Ge=0;Ge<Ut[ee].topbarList.length;Ge++)O(3,Ut[ee].topbarList[Ge].actived=we===Ge,Ut);O(3,Ut)}},qt=function(zt,ee,we){var Qt=Ut[ee].toolbarList[we];_.mf(Qt.onClick)&&Qt.onClick.call(zt.target,zt,Qt.data)},Yt={tapTime:700,tapBoundary:10,lastTouchStartTime:0,touchstartX:0,touchstartY:0,touchHasMoved:!1,targetElem:null},Oe={touchStart:function(zt){if(Yt.lastTouchStartTime===0){var ee=zt.targetTouches[0];Yt.touchstartX=ee.pageX,Yt.touchstartY=ee.pageY,Yt.lastTouchStartTime=zt.timeStamp,Yt.targetElem=zt.target.nodeType===Node.TEXT_NODE?zt.target.parentNode:zt.target}},touchMove:function(zt){var ee=zt.changedTouches[0];(Math.abs(ee.pageX-Yt.touchstartX)>Yt.tapBoundary||Math.abs(ee.pageY-Yt.touchstartY)>Yt.tapBoundary)&&(Yt.touchHasMoved=!0)},touchEnd:function(zt){if(Yt.touchHasMoved===!1&&zt.timeStamp-Yt.lastTouchStartTime<Yt.tapTime&&Yt.targetElem!=null){var ee=!1;switch(Yt.targetElem.tagName.toLowerCase()){case"textarea":ee=!0;break;case"select":ee=!Yt.targetElem.disabled&&!Yt.targetElem.readOnly;break;case"input":switch(Yt.targetElem.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":ee=!1;break;default:ee=!Yt.targetElem.disabled&&!Yt.targetElem.readOnly}}ee?Yt.targetElem.focus():zt.preventDefault();var we=zt.changedTouches[0],Qt=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,screenX:we.screenX,screenY:we.screenY,clientX:we.clientX,clientY:we.clientY});Yt.targetElem.dispatchEvent(Qt)}Yt.lastTouchStartTime=0,Yt.touchHasMoved=!1,Yt.targetElem=null}};return X.$$set=function(zt){"theme"in zt&&O(4,tt=zt.theme),"disableScrolling"in zt&&O(20,ot=zt.disableScrolling),"show"in zt&&O(21,dt=zt.show),"showSwitchButton"in zt&&O(0,ft=zt.showSwitchButton),"switchButtonPosition"in zt&&O(1,xt=zt.switchButtonPosition),"activedPluginId"in zt&&O(2,Dt=zt.activedPluginId),"pluginList"in zt&&O(3,Ut=zt.pluginList)},X.$$.update=function(){6291456&X.$$.dirty[0]&&(dt===!0?(O(7,Ce=!0),O(8,Ie=!0),Me&&clearTimeout(Me),O(22,Me=setTimeout(function(){O(6,Pe=!0),Re()},10))):(O(6,Pe=!1),Me&&clearTimeout(Me),O(22,Me=setTimeout(function(){O(7,Ce=!1),O(8,Ie=!1)},330))))},[ft,xt,Dt,Ut,tt,te,Pe,Ce,Ie,q,function(zt){Ht("show",{show:!0})},function(zt){Ht("show",{show:!1})},Be,ye,qt,function(zt){if(!(zt.target.tagName==="INPUT"||zt.target.tagName==="TEXTAREA")){var ee=!1;if(typeof window.getComputedStyle=="function"){var we=window.getComputedStyle(zt.target);we.overflow!=="auto"&&we.overflow!=="initial"&&we.overflow!=="scroll"||(ee=!0)}if(!ee){var Qt=q.scrollTop,Se=q.scrollHeight,Ge=Qt+q.offsetHeight;Qt===0?(O(9,q.scrollTop=1,q),q.scrollTop===0&&(de=!0)):Ge===Se&&(O(9,q.scrollTop=Qt-1,q),q.scrollTop===Qt&&(de=!0))}}},function(zt){de&&zt.preventDefault()},function(zt){de=!1},function(zt){dt&&(re=q.scrollTop+q.offsetHeight>=q.scrollHeight-50,Xe[Dt]=q.scrollTop)},Oe,ot,dt,Me,function(zt){O(0,ft=zt)},function(zt){O(1,xt=zt)},function(zt){return Be(zt.id)},function(zt,ee,we){return ye(we,zt.id,ee)},function(zt){C.VnY[zt?"unshift":"push"](function(){O(9,q=zt)})},function(zt,ee,we){return qt(we,zt.id,ee)}]}var ei=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,ti,De,C.N8,{theme:4,disableScrolling:20,show:21,showSwitchButton:0,switchButtonPosition:1,activedPluginId:2,pluginList:3},null,[-1,-1]),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"theme",get:function(){return this.$$.ctx[4]},set:function(O){this.$$set({theme:O}),(0,C.yl1)()}},{key:"disableScrolling",get:function(){return this.$$.ctx[20]},set:function(O){this.$$set({disableScrolling:O}),(0,C.yl1)()}},{key:"show",get:function(){return this.$$.ctx[21]},set:function(O){this.$$set({show:O}),(0,C.yl1)()}},{key:"showSwitchButton",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({showSwitchButton:O}),(0,C.yl1)()}},{key:"switchButtonPosition",get:function(){return this.$$.ctx[1]},set:function(O){this.$$set({switchButtonPosition:O}),(0,C.yl1)()}},{key:"activedPluginId",get:function(){return this.$$.ctx[2]},set:function(O){this.$$set({activedPluginId:O}),(0,C.yl1)()}},{key:"pluginList",get:function(){return this.$$.ctx[3]},set:function(O){this.$$set({pluginList:O}),(0,C.yl1)()}}]),G}(C.f_C),Li=ei,hi=function(){function X(O,F){F===void 0&&(F="newPlugin"),this.isReady=!1,this.eventMap=new Map,this.exporter=void 0,this._id=void 0,this._name=void 0,this._vConsole=void 0,this.id=O,this.name=F,this.isReady=!1}var G=X.prototype;return G.on=function(O,F){return this.eventMap.set(O,F),this},G.onRemove=function(){this.unbindExporter()},G.trigger=function(O,F){var q=this.eventMap.get(O);if(typeof q=="function")q.call(this,F);else{var Z="on"+O.charAt(0).toUpperCase()+O.slice(1);typeof this[Z]=="function"&&this[Z].call(this,F)}return this},G.bindExporter=function(){if(this._vConsole&&this.exporter){var O=this.id==="default"?"log":this.id;this._vConsole[O]=this.exporter}},G.unbindExporter=function(){var O=this.id==="default"?"log":this.id;this._vConsole&&this._vConsole[O]&&(this._vConsole[O]=void 0)},G.getUniqueID=function(O){return O===void 0&&(O=""),(0,_.QI)(O)},(0,E.Z)(X,[{key:"id",get:function(){return this._id},set:function(O){if(typeof O!="string")throw"[vConsole] Plugin ID must be a string.";if(!O)throw"[vConsole] Plugin ID cannot be empty.";this._id=O.toLowerCase()}},{key:"name",get:function(){return this._name},set:function(O){if(typeof O!="string")throw"[vConsole] Plugin name must be a string.";if(!O)throw"[vConsole] Plugin name cannot be empty.";this._name=O}},{key:"vConsole",get:function(){return this._vConsole||void 0},set:function(O){if(!O)throw"[vConsole] vConsole cannot be empty";this._vConsole=O,this.bindExporter()}}]),X}(),ii=function(X){function G(F,q,Z,tt){var nt;return(nt=X.call(this,F,q)||this).CompClass=void 0,nt.compInstance=void 0,nt.initialProps=void 0,nt.CompClass=Z,nt.initialProps=tt,nt}(0,I.Z)(G,X);var O=G.prototype;return O.onReady=function(){this.isReady=!0},O.onRenderTab=function(F){var q=document.createElement("div"),Z=this.compInstance=new this.CompClass({target:q,props:this.initialProps});F(q.firstElementChild,Z.options)},O.onRemove=function(){X.prototype.onRemove&&X.prototype.onRemove.call(this),this.compInstance&&this.compInstance.$destroy()},G}(hi),di=__webpack_require__(8665),ki=__webpack_require__(9923),Ke=__webpack_require__(8702);function gi(X){var G,O;return(G=new Ke.Z({props:{name:X[0]?"success":"copy"}})).$on("click",X[1]),{c:function(){(0,C.YCL)(G.$$.fragment)},m:function(F,q){(0,C.yef)(G,F,q),O=!0},p:function(F,q){var Z={};1&q[0]&&(Z.name=F[0]?"success":"copy"),G.$set(Z)},i:function(F){O||((0,C.Ui)(G.$$.fragment,F),O=!0)},o:function(F){(0,C.etI)(G.$$.fragment,F),O=!1},d:function(F){(0,C.vpE)(G,F)}}}function Di(X,G,O){var F=G.content,q=F===void 0?"":F,Z=G.handler,tt=Z===void 0?void 0:Z,nt={target:document.documentElement},ot=!1;return X.$$set=function(ut){"content"in ut&&O(2,q=ut.content),"handler"in ut&&O(3,tt=ut.handler)},[ot,function(ut){(function(dt,vt){var ft=(vt===void 0?{}:vt).target,Pt=ft===void 0?document.body:ft,xt=document.createElement("textarea"),It=document.activeElement;xt.value=dt,xt.setAttribute("readonly",""),xt.style.contain="strict",xt.style.position="absolute",xt.style.left="-9999px",xt.style.fontSize="12pt";var Dt=document.getSelection(),Nt=!1;Dt.rangeCount>0&&(Nt=Dt.getRangeAt(0)),Pt.append(xt),xt.select(),xt.selectionStart=0,xt.selectionEnd=dt.length;var Ut=!1;try{Ut=document.execCommand("copy")}catch{}xt.remove(),Nt&&(Dt.removeAllRanges(),Dt.addRange(Nt)),It&&It.focus()})(_.mf(tt)?tt(q)||"":_.Kn(q)||_.kJ(q)?_.hZ(q,{maxDepth:10,keyMaxLen:1e4,pretty:!1,standardJSON:!0}):q,nt),O(0,ot=!0),setTimeout(function(){O(0,ot=!1)},600)},q,tt]}var yi=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,Di,gi,C.N8,{content:2,handler:3}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"content",get:function(){return this.$$.ctx[2]},set:function(O){this.$$set({content:O}),(0,C.yl1)()}},{key:"handler",get:function(){return this.$$.ctx[3]},set:function(O){this.$$set({handler:O}),(0,C.yl1)()}}]),G}(C.f_C),Ze=yi,wi=__webpack_require__(845),jt={};wi.Z&&wi.Z.locals&&(jt.locals=wi.Z.locals);var Zt,ce=0,fe={};fe.styleTagTransform=rt(),fe.setAttributes=K(),fe.insert=W().bind(null,"head"),fe.domAPI=U(),fe.insertStyleElement=et(),jt.use=function(X){return fe.options=X||{},ce++||(Zt=D()(wi.Z,fe)),jt},jt.unuse=function(){ce>0&&!--ce&&(Zt(),Zt=null)};var Ve=jt;function He(X){var G,O,F,q=_.rE(X[1])+"";return{c:function(){G=(0,C.bGB)("i"),O=(0,C.fLW)(q),F=(0,C.fLW)(":"),(0,C.Ljt)(G,"class","vc-log-key"),(0,C.VHj)(G,"vc-log-key-symbol",X[2]==="symbol"),(0,C.VHj)(G,"vc-log-key-private",X[2]==="private")},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),(0,C.R3I)(G,O),(0,C.$Tr)(Z,F,tt)},p:function(Z,tt){2&tt&&q!==(q=_.rE(Z[1])+"")&&(0,C.rTO)(O,q),4&tt&&(0,C.VHj)(G,"vc-log-key-symbol",Z[2]==="symbol"),4&tt&&(0,C.VHj)(G,"vc-log-key-private",Z[2]==="private")},d:function(Z){Z&&(0,C.ogt)(G),Z&&(0,C.ogt)(F)}}}function mi(X){var G,O,F,q,Z=X[1]!==void 0&&He(X);return{c:function(){Z&&Z.c(),G=(0,C.DhX)(),O=(0,C.bGB)("i"),F=(0,C.fLW)(X[3]),(0,C.Ljt)(O,"class",q="vc-log-val vc-log-val-"+X[4]),(0,C.Ljt)(O,"style",X[0]),(0,C.VHj)(O,"vc-log-val-haskey",X[1]!==void 0)},m:function(tt,nt){Z&&Z.m(tt,nt),(0,C.$Tr)(tt,G,nt),(0,C.$Tr)(tt,O,nt),(0,C.R3I)(O,F)},p:function(tt,nt){var ot=nt[0];tt[1]!==void 0?Z?Z.p(tt,ot):((Z=He(tt)).c(),Z.m(G.parentNode,G)):Z&&(Z.d(1),Z=null),8&ot&&(0,C.rTO)(F,tt[3]),16&ot&&q!==(q="vc-log-val vc-log-val-"+tt[4])&&(0,C.Ljt)(O,"class",q),1&ot&&(0,C.Ljt)(O,"style",tt[0]),18&ot&&(0,C.VHj)(O,"vc-log-val-haskey",tt[1]!==void 0)},i:C.ZTd,o:C.ZTd,d:function(tt){Z&&Z.d(tt),tt&&(0,C.ogt)(G),tt&&(0,C.ogt)(O)}}}function Bt(X,G,O){var F=G.origData,q=G.style,Z=q===void 0?"":q,tt=G.dataKey,nt=tt===void 0?void 0:tt,ot=G.keyType,ut=ot===void 0?"":ot,dt="",vt="",ft=!1;return(0,R.H3)(function(){Ve.use()}),(0,R.ev)(function(){Ve.unuse()}),X.$$set=function(Pt){"origData"in Pt&&O(5,F=Pt.origData),"style"in Pt&&O(0,Z=Pt.style),"dataKey"in Pt&&O(1,nt=Pt.dataKey),"keyType"in Pt&&O(2,ut=Pt.keyType)},X.$$.update=function(){if(122&X.$$.dirty){O(6,ft=nt!==void 0);var Pt=(0,di.LH)(F,ft);O(4,vt=Pt.valueType),O(3,dt=Pt.text),ft||vt!=="string"||O(3,dt=dt.replace(/\\n/g,`
`).replace(/\\t/g,"    "))}},[Z,nt,ut,dt,vt,F,ft]}var Ft=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,Bt,mi,C.AqN,{origData:5,style:0,dataKey:1,keyType:2}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"origData",get:function(){return this.$$.ctx[5]},set:function(O){this.$$set({origData:O}),(0,C.yl1)()}},{key:"style",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({style:O}),(0,C.yl1)()}},{key:"dataKey",get:function(){return this.$$.ctx[1]},set:function(O){this.$$set({dataKey:O}),(0,C.yl1)()}},{key:"keyType",get:function(){return this.$$.ctx[2]},set:function(O){this.$$set({keyType:O}),(0,C.yl1)()}}]),G}(C.f_C),Rt=Ft,kt=__webpack_require__(1237),Wt={};kt.Z&&kt.Z.locals&&(Wt.locals=kt.Z.locals);var le,be=0,Ue={};Ue.styleTagTransform=rt(),Ue.setAttributes=K(),Ue.insert=W().bind(null,"head"),Ue.domAPI=U(),Ue.insertStyleElement=et(),Wt.use=function(X){return Ue.options=X||{},be++||(le=D()(kt.Z,Ue)),Wt},Wt.unuse=function(){be>0&&!--be&&(le(),le=null)};var ni=Wt;function ze(X,G,O){var F=X.slice();return F[19]=G[O],F[21]=O,F}function Ni(X,G,O){var F=X.slice();return F[19]=G[O],F}function Zi(X,G,O){var F=X.slice();return F[19]=G[O],F[21]=O,F}function fi(X){for(var G,O,F,q,Z,tt,nt,ot=[],ut=new Map,dt=[],vt=new Map,ft=[],Pt=new Map,xt=X[7],It=function(qt){return qt[19]},Dt=0;Dt<xt.length;Dt+=1){var Nt=Zi(X,xt,Dt),Ut=It(Nt);ut.set(Ut,ot[Dt]=xi(Ut,Nt))}for(var Ht=X[11]<X[7].length&&Ui(X),de=X[9],te=function(qt){return qt[19]},Pe=0;Pe<de.length;Pe+=1){var Ce=Ni(X,de,Pe),Ie=te(Ce);vt.set(Ie,dt[Pe]=Ji(Ie,Ce))}for(var re=X[8],oe=function(qt){return qt[19]},Me=0;Me<re.length;Me+=1){var Xe=ze(X,re,Me),Re=oe(Xe);Pt.set(Re,ft[Me]=sr(Re,Xe))}var Be=X[12]<X[8].length&&or(X),ye=X[10]&&Gi(X);return{c:function(){G=(0,C.bGB)("div");for(var qt=0;qt<ot.length;qt+=1)ot[qt].c();O=(0,C.DhX)(),Ht&&Ht.c(),F=(0,C.DhX)();for(var Yt=0;Yt<dt.length;Yt+=1)dt[Yt].c();q=(0,C.DhX)();for(var Oe=0;Oe<ft.length;Oe+=1)ft[Oe].c();Z=(0,C.DhX)(),Be&&Be.c(),tt=(0,C.DhX)(),ye&&ye.c(),(0,C.Ljt)(G,"class","vc-log-tree-child")},m:function(qt,Yt){(0,C.$Tr)(qt,G,Yt);for(var Oe=0;Oe<ot.length;Oe+=1)ot[Oe].m(G,null);(0,C.R3I)(G,O),Ht&&Ht.m(G,null),(0,C.R3I)(G,F);for(var zt=0;zt<dt.length;zt+=1)dt[zt].m(G,null);(0,C.R3I)(G,q);for(var ee=0;ee<ft.length;ee+=1)ft[ee].m(G,null);(0,C.R3I)(G,Z),Be&&Be.m(G,null),(0,C.R3I)(G,tt),ye&&ye.m(G,null),nt=!0},p:function(qt,Yt){67721&Yt&&(xt=qt[7],(0,C.dvw)(),ot=(0,C.GQg)(ot,Yt,It,1,qt,xt,ut,G,C.cly,xi,O,Zi),(0,C.gbL)()),qt[11]<qt[7].length?Ht?Ht.p(qt,Yt):((Ht=Ui(qt)).c(),Ht.m(G,F)):Ht&&(Ht.d(1),Ht=null),66057&Yt&&(de=qt[9],(0,C.dvw)(),dt=(0,C.GQg)(dt,Yt,te,1,qt,de,vt,G,C.cly,Ji,q,Ni),(0,C.gbL)()),69897&Yt&&(re=qt[8],(0,C.dvw)(),ft=(0,C.GQg)(ft,Yt,oe,1,qt,re,Pt,G,C.cly,sr,Z,ze),(0,C.gbL)()),qt[12]<qt[8].length?Be?Be.p(qt,Yt):((Be=or(qt)).c(),Be.m(G,tt)):Be&&(Be.d(1),Be=null),qt[10]?ye?(ye.p(qt,Yt),1024&Yt&&(0,C.Ui)(ye,1)):((ye=Gi(qt)).c(),(0,C.Ui)(ye,1),ye.m(G,null)):ye&&((0,C.dvw)(),(0,C.etI)(ye,1,1,function(){ye=null}),(0,C.gbL)())},i:function(qt){if(!nt){for(var Yt=0;Yt<xt.length;Yt+=1)(0,C.Ui)(ot[Yt]);for(var Oe=0;Oe<de.length;Oe+=1)(0,C.Ui)(dt[Oe]);for(var zt=0;zt<re.length;zt+=1)(0,C.Ui)(ft[zt]);(0,C.Ui)(ye),nt=!0}},o:function(qt){for(var Yt=0;Yt<ot.length;Yt+=1)(0,C.etI)(ot[Yt]);for(var Oe=0;Oe<dt.length;Oe+=1)(0,C.etI)(dt[Oe]);for(var zt=0;zt<ft.length;zt+=1)(0,C.etI)(ft[zt]);(0,C.etI)(ye),nt=!1},d:function(qt){qt&&(0,C.ogt)(G);for(var Yt=0;Yt<ot.length;Yt+=1)ot[Yt].d();Ht&&Ht.d();for(var Oe=0;Oe<dt.length;Oe+=1)dt[Oe].d();for(var zt=0;zt<ft.length;zt+=1)ft[zt].d();Be&&Be.d(),ye&&ye.d()}}}function ui(X){var G,O;return G=new Wi({props:{origData:X[16](X[19]),dataKey:X[19],keyPath:X[3]+"."+X[19],toggle:X[0]}}),{c:function(){(0,C.YCL)(G.$$.fragment)},m:function(F,q){(0,C.yef)(G,F,q),O=!0},p:function(F,q){var Z={};128&q&&(Z.origData=F[16](F[19])),128&q&&(Z.dataKey=F[19]),136&q&&(Z.keyPath=F[3]+"."+F[19]),1&q&&(Z.toggle=F[0]),G.$set(Z)},i:function(F){O||((0,C.Ui)(G.$$.fragment,F),O=!0)},o:function(F){(0,C.etI)(G.$$.fragment,F),O=!1},d:function(F){(0,C.vpE)(G,F)}}}function xi(X,G){var O,F,q,Z=G[21]<G[11]&&ui(G);return{key:X,first:null,c:function(){O=(0,C.cSb)(),Z&&Z.c(),F=(0,C.cSb)(),this.first=O},m:function(tt,nt){(0,C.$Tr)(tt,O,nt),Z&&Z.m(tt,nt),(0,C.$Tr)(tt,F,nt),q=!0},p:function(tt,nt){(G=tt)[21]<G[11]?Z?(Z.p(G,nt),2176&nt&&(0,C.Ui)(Z,1)):((Z=ui(G)).c(),(0,C.Ui)(Z,1),Z.m(F.parentNode,F)):Z&&((0,C.dvw)(),(0,C.etI)(Z,1,1,function(){Z=null}),(0,C.gbL)())},i:function(tt){q||((0,C.Ui)(Z),q=!0)},o:function(tt){(0,C.etI)(Z),q=!1},d:function(tt){tt&&(0,C.ogt)(O),Z&&Z.d(tt),tt&&(0,C.ogt)(F)}}}function Ui(X){var G,O,F,q,Z=X[14](X[7].length-X[11])+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.fLW)(Z),(0,C.Ljt)(G,"class","vc-log-tree-loadmore")},m:function(tt,nt){(0,C.$Tr)(tt,G,nt),(0,C.R3I)(G,O),F||(q=(0,C.oLt)(G,"click",X[17]),F=!0)},p:function(tt,nt){2176&nt&&Z!==(Z=tt[14](tt[7].length-tt[11])+"")&&(0,C.rTO)(O,Z)},d:function(tt){tt&&(0,C.ogt)(G),F=!1,q()}}}function Ji(X,G){var O,F,q;return F=new Wi({props:{origData:G[16](G[19]),dataKey:String(G[19]),keyType:"symbol",keyPath:G[3]+"["+String(G[19])+"]",toggle:G[0]}}),{key:X,first:null,c:function(){O=(0,C.cSb)(),(0,C.YCL)(F.$$.fragment),this.first=O},m:function(Z,tt){(0,C.$Tr)(Z,O,tt),(0,C.yef)(F,Z,tt),q=!0},p:function(Z,tt){G=Z;var nt={};512&tt&&(nt.origData=G[16](G[19])),512&tt&&(nt.dataKey=String(G[19])),520&tt&&(nt.keyPath=G[3]+"["+String(G[19])+"]"),1&tt&&(nt.toggle=G[0]),F.$set(nt)},i:function(Z){q||((0,C.Ui)(F.$$.fragment,Z),q=!0)},o:function(Z){(0,C.etI)(F.$$.fragment,Z),q=!1},d:function(Z){Z&&(0,C.ogt)(O),(0,C.vpE)(F,Z)}}}function nr(X){var G,O;return G=new Wi({props:{origData:X[16](X[19]),dataKey:X[19],keyType:"private",keyPath:X[3]+"."+X[19],toggle:X[0]}}),{c:function(){(0,C.YCL)(G.$$.fragment)},m:function(F,q){(0,C.yef)(G,F,q),O=!0},p:function(F,q){var Z={};256&q&&(Z.origData=F[16](F[19])),256&q&&(Z.dataKey=F[19]),264&q&&(Z.keyPath=F[3]+"."+F[19]),1&q&&(Z.toggle=F[0]),G.$set(Z)},i:function(F){O||((0,C.Ui)(G.$$.fragment,F),O=!0)},o:function(F){(0,C.etI)(G.$$.fragment,F),O=!1},d:function(F){(0,C.vpE)(G,F)}}}function sr(X,G){var O,F,q,Z=G[21]<G[12]&&nr(G);return{key:X,first:null,c:function(){O=(0,C.cSb)(),Z&&Z.c(),F=(0,C.cSb)(),this.first=O},m:function(tt,nt){(0,C.$Tr)(tt,O,nt),Z&&Z.m(tt,nt),(0,C.$Tr)(tt,F,nt),q=!0},p:function(tt,nt){(G=tt)[21]<G[12]?Z?(Z.p(G,nt),4352&nt&&(0,C.Ui)(Z,1)):((Z=nr(G)).c(),(0,C.Ui)(Z,1),Z.m(F.parentNode,F)):Z&&((0,C.dvw)(),(0,C.etI)(Z,1,1,function(){Z=null}),(0,C.gbL)())},i:function(tt){q||((0,C.Ui)(Z),q=!0)},o:function(tt){(0,C.etI)(Z),q=!1},d:function(tt){tt&&(0,C.ogt)(O),Z&&Z.d(tt),tt&&(0,C.ogt)(F)}}}function or(X){var G,O,F,q,Z=X[14](X[8].length-X[12])+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.fLW)(Z),(0,C.Ljt)(G,"class","vc-log-tree-loadmore")},m:function(tt,nt){(0,C.$Tr)(tt,G,nt),(0,C.R3I)(G,O),F||(q=(0,C.oLt)(G,"click",X[18]),F=!0)},p:function(tt,nt){4352&nt&&Z!==(Z=tt[14](tt[8].length-tt[12])+"")&&(0,C.rTO)(O,Z)},d:function(tt){tt&&(0,C.ogt)(G),F=!1,q()}}}function Gi(X){var G,O;return G=new Wi({props:{origData:X[16]("__proto__"),dataKey:"__proto__",keyType:"private",keyPath:X[3]+".__proto__",toggle:X[0]}}),{c:function(){(0,C.YCL)(G.$$.fragment)},m:function(F,q){(0,C.yef)(G,F,q),O=!0},p:function(F,q){var Z={};8&q&&(Z.keyPath=F[3]+".__proto__"),1&q&&(Z.toggle=F[0]),G.$set(Z)},i:function(F){O||((0,C.Ui)(G.$$.fragment,F),O=!0)},o:function(F){(0,C.etI)(G.$$.fragment,F),O=!1},d:function(F){(0,C.vpE)(G,F)}}}function ar(X){var G,O,F,q,Z,tt,nt;F=new Rt({props:{origData:X[1],dataKey:X[2],keyType:X[4]}});var ot=X[6]&&X[5]&&fi(X);return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("div"),(0,C.YCL)(F.$$.fragment),q=(0,C.DhX)(),ot&&ot.c(),(0,C.Ljt)(O,"class","vc-log-tree-node"),(0,C.Ljt)(G,"class","vc-log-tree"),(0,C.Ljt)(G,"data-keypath",X[3]),(0,C.VHj)(G,"vc-toggle",X[5]),(0,C.VHj)(G,"vc-is-tree",X[6])},m:function(ut,dt){(0,C.$Tr)(ut,G,dt),(0,C.R3I)(G,O),(0,C.yef)(F,O,null),(0,C.R3I)(G,q),ot&&ot.m(G,null),Z=!0,tt||(nt=(0,C.oLt)(O,"click",(0,C.XET)(X[15])),tt=!0)},p:function(ut,dt){var vt=dt[0],ft={};2&vt&&(ft.origData=ut[1]),4&vt&&(ft.dataKey=ut[2]),16&vt&&(ft.keyType=ut[4]),F.$set(ft),ut[6]&&ut[5]?ot?(ot.p(ut,vt),96&vt&&(0,C.Ui)(ot,1)):((ot=fi(ut)).c(),(0,C.Ui)(ot,1),ot.m(G,null)):ot&&((0,C.dvw)(),(0,C.etI)(ot,1,1,function(){ot=null}),(0,C.gbL)()),(!Z||8&vt)&&(0,C.Ljt)(G,"data-keypath",ut[3]),32&vt&&(0,C.VHj)(G,"vc-toggle",ut[5]),64&vt&&(0,C.VHj)(G,"vc-is-tree",ut[6])},i:function(ut){Z||((0,C.Ui)(F.$$.fragment,ut),(0,C.Ui)(ot),Z=!0)},o:function(ut){(0,C.etI)(F.$$.fragment,ut),(0,C.etI)(ot),Z=!1},d:function(ut){ut&&(0,C.ogt)(G),(0,C.vpE)(F),ot&&ot.d(),tt=!1,nt()}}}function Dr(X,G,O){var F,q,Z,tt=G.origData,nt=G.dataKey,ot=nt===void 0?void 0:nt,ut=G.keyPath,dt=ut===void 0?"":ut,vt=G.keyType,ft=vt===void 0?"":vt,Pt=G.toggle,xt=Pt===void 0?{}:Pt,It=!1,Dt=!1,Nt=!1,Ut=50,Ht=50;(0,R.H3)(function(){ni.use()}),(0,R.ev)(function(){ni.unuse()});var de=function(te){te==="enum"?O(11,Ut+=50):te==="nonEnum"&&O(12,Ht+=50)};return X.$$set=function(te){"origData"in te&&O(1,tt=te.origData),"dataKey"in te&&O(2,ot=te.dataKey),"keyPath"in te&&O(3,dt=te.keyPath),"keyType"in te&&O(4,ft=te.keyType),"toggle"in te&&O(0,xt=te.toggle)},X.$$.update=function(){1003&X.$$.dirty&&(O(5,It=xt[dt]||!1),O(6,Dt=!(tt instanceof di.Tg)&&(_.kJ(tt)||_.Kn(tt))),Dt&&It&&(O(7,F=F||_.qr(_.MH(tt))),O(8,q=q||_.qr(_.QK(tt))),O(9,Z=Z||_._D(tt)),O(10,Nt=_.Kn(tt)&&q.indexOf("__proto__")===-1)))},[xt,tt,ot,dt,ft,It,Dt,F,q,Z,Nt,Ut,Ht,de,function(te){return"(..."+te+" Key"+(te>1?"s":"")+" Left)"},function(){O(5,It=!It),O(0,xt[dt]=It,xt)},function(te){try{return tt[te]}catch{return new di.Tg}},function(){return de("enum")},function(){return de("nonEnum")}]}var Wi=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,Dr,ar,C.AqN,{origData:1,dataKey:2,keyPath:3,keyType:4,toggle:0}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"origData",get:function(){return this.$$.ctx[1]},set:function(O){this.$$set({origData:O}),(0,C.yl1)()}},{key:"dataKey",get:function(){return this.$$.ctx[2]},set:function(O){this.$$set({dataKey:O}),(0,C.yl1)()}},{key:"keyPath",get:function(){return this.$$.ctx[3]},set:function(O){this.$$set({keyPath:O}),(0,C.yl1)()}},{key:"keyType",get:function(){return this.$$.ctx[4]},set:function(O){this.$$set({keyType:O}),(0,C.yl1)()}},{key:"toggle",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({toggle:O}),(0,C.yl1)()}}]),G}(C.f_C),br=Wi,Vi=__webpack_require__(7147),zi={};Vi.Z&&Vi.Z.locals&&(zi.locals=Vi.Z.locals);var qi,Xi=0,Oi={};Oi.styleTagTransform=rt(),Oi.setAttributes=K(),Oi.insert=W().bind(null,"head"),Oi.domAPI=U(),Oi.insertStyleElement=et(),zi.use=function(X){return Oi.options=X||{},Xi++||(qi=D()(Vi.Z,Oi)),zi},zi.unuse=function(){Xi>0&&!--Xi&&(qi(),qi=null)};var Yi=zi;function Mn(X,G,O){var F=X.slice();return F[9]=G[O],F[11]=O,F}function Rn(X,G,O){var F=X.slice();return F[12]=G[O],F}function Ln(X){for(var G,O,F,q,Z,tt,nt,ot,ut,dt,vt,ft,Pt,xt=[],It=new Map,Dt=X[0].groupLevel&&Dn(X),Nt=X[2]>0&&On(),Ut=X[1]&&Fn(X),Ht=X[0].repeated&&$n(X),de=X[0].data,te=function(re){return re[11]},Pe=0;Pe<de.length;Pe+=1){var Ce=Mn(X,de,Pe),Ie=te(Ce);It.set(Ie,xt[Pe]=kn(Ie,Ce))}return ut=new Ze({props:{handler:X[6]}}),{c:function(){G=(0,C.bGB)("div"),Dt&&Dt.c(),O=(0,C.DhX)(),Nt&&Nt.c(),F=(0,C.DhX)(),Ut&&Ut.c(),q=(0,C.DhX)(),Ht&&Ht.c(),Z=(0,C.DhX)(),tt=(0,C.bGB)("div");for(var re=0;re<xt.length;re+=1)xt[re].c();nt=(0,C.DhX)(),ot=(0,C.bGB)("div"),(0,C.YCL)(ut.$$.fragment),(0,C.Ljt)(tt,"class","vc-log-content"),(0,C.Ljt)(ot,"class","vc-logrow-icon"),(0,C.Ljt)(G,"class",dt="vc-log-row vc-log-"+X[0].type),(0,C.VHj)(G,"vc-log-input",X[0].cmdType==="input"),(0,C.VHj)(G,"vc-log-output",X[0].cmdType==="output"),(0,C.VHj)(G,"vc-log-group",X[2]>0),(0,C.VHj)(G,"vc-toggle",X[2]===1)},m:function(re,oe){(0,C.$Tr)(re,G,oe),Dt&&Dt.m(G,null),(0,C.R3I)(G,O),Nt&&Nt.m(G,null),(0,C.R3I)(G,F),Ut&&Ut.m(G,null),(0,C.R3I)(G,q),Ht&&Ht.m(G,null),(0,C.R3I)(G,Z),(0,C.R3I)(G,tt);for(var Me=0;Me<xt.length;Me+=1)xt[Me].m(tt,null);(0,C.R3I)(G,nt),(0,C.R3I)(G,ot),(0,C.yef)(ut,ot,null),vt=!0,ft||(Pt=(0,C.oLt)(G,"click",X[5]),ft=!0)},p:function(re,oe){re[0].groupLevel?Dt?Dt.p(re,oe):((Dt=Dn(re)).c(),Dt.m(G,O)):Dt&&(Dt.d(1),Dt=null),re[2]>0?Nt||((Nt=On()).c(),Nt.m(G,F)):Nt&&(Nt.d(1),Nt=null),re[1]?Ut?Ut.p(re,oe):((Ut=Fn(re)).c(),Ut.m(G,q)):Ut&&(Ut.d(1),Ut=null),re[0].repeated?Ht?Ht.p(re,oe):((Ht=$n(re)).c(),Ht.m(G,Z)):Ht&&(Ht.d(1),Ht=null),17&oe&&(de=re[0].data,(0,C.dvw)(),xt=(0,C.GQg)(xt,oe,te,1,re,de,It,tt,C.cly,kn,null,Mn),(0,C.gbL)()),(!vt||1&oe&&dt!==(dt="vc-log-row vc-log-"+re[0].type))&&(0,C.Ljt)(G,"class",dt),1&oe&&(0,C.VHj)(G,"vc-log-input",re[0].cmdType==="input"),1&oe&&(0,C.VHj)(G,"vc-log-output",re[0].cmdType==="output"),5&oe&&(0,C.VHj)(G,"vc-log-group",re[2]>0),5&oe&&(0,C.VHj)(G,"vc-toggle",re[2]===1)},i:function(re){if(!vt){for(var oe=0;oe<de.length;oe+=1)(0,C.Ui)(xt[oe]);(0,C.Ui)(ut.$$.fragment,re),vt=!0}},o:function(re){for(var oe=0;oe<xt.length;oe+=1)(0,C.etI)(xt[oe]);(0,C.etI)(ut.$$.fragment,re),vt=!1},d:function(re){re&&(0,C.ogt)(G),Dt&&Dt.d(),Nt&&Nt.d(),Ut&&Ut.d(),Ht&&Ht.d();for(var oe=0;oe<xt.length;oe+=1)xt[oe].d();(0,C.vpE)(ut),ft=!1,Pt()}}}function Dn(X){for(var G,O=new Array(X[0].groupLevel),F=[],q=0;q<O.length;q+=1)F[q]=Vn(Rn(X,O,q));return{c:function(){for(var Z=0;Z<F.length;Z+=1)F[Z].c();G=(0,C.cSb)()},m:function(Z,tt){for(var nt=0;nt<F.length;nt+=1)F[nt].m(Z,tt);(0,C.$Tr)(Z,G,tt)},p:function(Z,tt){if(1&tt){var nt;for(O=new Array(Z[0].groupLevel),nt=0;nt<O.length;nt+=1){var ot=Rn(Z,O,nt);F[nt]?F[nt].p(ot,tt):(F[nt]=Vn(),F[nt].c(),F[nt].m(G.parentNode,G))}for(;nt<F.length;nt+=1)F[nt].d(1);F.length=O.length}},d:function(Z){(0,C.RMB)(F,Z),Z&&(0,C.ogt)(G)}}}function Vn(X){var G;return{c:function(){G=(0,C.bGB)("i"),(0,C.Ljt)(G,"class","vc-log-padding")},m:function(O,F){(0,C.$Tr)(O,G,F)},p:C.ZTd,d:function(O){O&&(0,C.ogt)(G)}}}function On(X){var G;return{c:function(){G=(0,C.bGB)("div"),(0,C.Ljt)(G,"class","vc-log-group-toggle")},m:function(O,F){(0,C.$Tr)(O,G,F)},d:function(O){O&&(0,C.ogt)(G)}}}function Fn(X){var G,O;return{c:function(){G=(0,C.bGB)("div"),O=(0,C.fLW)(X[3]),(0,C.Ljt)(G,"class","vc-log-time")},m:function(F,q){(0,C.$Tr)(F,G,q),(0,C.R3I)(G,O)},p:function(F,q){8&q&&(0,C.rTO)(O,F[3])},d:function(F){F&&(0,C.ogt)(G)}}}function $n(X){var G,O,F,q=X[0].repeated+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("i"),F=(0,C.fLW)(q),(0,C.Ljt)(G,"class","vc-log-repeat")},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),(0,C.R3I)(G,O),(0,C.R3I)(O,F)},p:function(Z,tt){1&tt&&q!==(q=Z[0].repeated+"")&&(0,C.rTO)(F,q)},d:function(Z){Z&&(0,C.ogt)(G)}}}function oo(X){var G,O;return G=new Rt({props:{origData:X[9].origData,style:X[9].style}}),{c:function(){(0,C.YCL)(G.$$.fragment)},m:function(F,q){(0,C.yef)(G,F,q),O=!0},p:function(F,q){var Z={};1&q&&(Z.origData=F[9].origData),1&q&&(Z.style=F[9].style),G.$set(Z)},i:function(F){O||((0,C.Ui)(G.$$.fragment,F),O=!0)},o:function(F){(0,C.etI)(G.$$.fragment,F),O=!1},d:function(F){(0,C.vpE)(G,F)}}}function ao(X){var G,O;return G=new br({props:{origData:X[9].origData,keyPath:String(X[11]),toggle:X[0].toggle}}),{c:function(){(0,C.YCL)(G.$$.fragment)},m:function(F,q){(0,C.yef)(G,F,q),O=!0},p:function(F,q){var Z={};1&q&&(Z.origData=F[9].origData),1&q&&(Z.keyPath=String(F[11])),1&q&&(Z.toggle=F[0].toggle),G.$set(Z)},i:function(F){O||((0,C.Ui)(G.$$.fragment,F),O=!0)},o:function(F){(0,C.etI)(G.$$.fragment,F),O=!1},d:function(F){(0,C.vpE)(G,F)}}}function kn(X,G){var O,F,q,Z,tt,nt,ot=[ao,oo],ut=[];function dt(vt,ft){return 1&ft&&(F=null),F==null&&(F=!!vt[4](vt[9].origData)),F?0:1}return q=dt(G,-1),Z=ut[q]=ot[q](G),{key:X,first:null,c:function(){O=(0,C.cSb)(),Z.c(),tt=(0,C.cSb)(),this.first=O},m:function(vt,ft){(0,C.$Tr)(vt,O,ft),ut[q].m(vt,ft),(0,C.$Tr)(vt,tt,ft),nt=!0},p:function(vt,ft){var Pt=q;(q=dt(G=vt,ft))===Pt?ut[q].p(G,ft):((0,C.dvw)(),(0,C.etI)(ut[Pt],1,1,function(){ut[Pt]=null}),(0,C.gbL)(),(Z=ut[q])?Z.p(G,ft):(Z=ut[q]=ot[q](G)).c(),(0,C.Ui)(Z,1),Z.m(tt.parentNode,tt))},i:function(vt){nt||((0,C.Ui)(Z),nt=!0)},o:function(vt){(0,C.etI)(Z),nt=!1},d:function(vt){vt&&(0,C.ogt)(O),ut[q].d(vt),vt&&(0,C.ogt)(tt)}}}function co(X){var G,O,F=X[0]&&Ln(X);return{c:function(){F&&F.c(),G=(0,C.cSb)()},m:function(q,Z){F&&F.m(q,Z),(0,C.$Tr)(q,G,Z),O=!0},p:function(q,Z){var tt=Z[0];q[0]?F?(F.p(q,tt),1&tt&&(0,C.Ui)(F,1)):((F=Ln(q)).c(),(0,C.Ui)(F,1),F.m(G.parentNode,G)):F&&((0,C.dvw)(),(0,C.etI)(F,1,1,function(){F=null}),(0,C.gbL)())},i:function(q){O||((0,C.Ui)(F),O=!0)},o:function(q){(0,C.etI)(F),O=!1},d:function(q){F&&F.d(q),q&&(0,C.ogt)(G)}}}function lo(X,G,O){var F=G.log,q=G.showTimestamps,Z=q!==void 0&&q,tt=G.groupHeader,nt=tt===void 0?0:tt,ot=(0,R.x)(),ut="",dt=function(vt,ft){var Pt="000"+vt;return Pt.substring(Pt.length-ft)};return(0,R.H3)(function(){Yi.use()}),(0,R.ev)(function(){Yi.unuse()}),X.$$set=function(vt){"log"in vt&&O(0,F=vt.log),"showTimestamps"in vt&&O(1,Z=vt.showTimestamps),"groupHeader"in vt&&O(2,nt=vt.groupHeader)},X.$$.update=function(){if(3&X.$$.dirty&&Z){var vt=new Date(F.date);O(3,ut=dt(vt.getHours(),2)+":"+dt(vt.getMinutes(),2)+":"+dt(vt.getSeconds(),2)+":"+dt(vt.getMilliseconds(),3))}},[F,Z,nt,ut,function(vt){return!(vt instanceof di.Tg)&&(_.kJ(vt)||_.Kn(vt))},function(){nt>0&&ot("groupCollapsed",{groupLabel:F.groupLabel,groupHeader:nt===1?2:1,isGroupCollapsed:nt===1})},function(){var vt=[];try{for(var ft=0;ft<F.data.length;ft++)_.HD(F.data[ft].origData)||_.hj(F.data[ft].origData)?vt.push(F.data[ft].origData):vt.push(_.hZ(F.data[ft].origData,{maxDepth:10,keyMaxLen:1e4,pretty:!1,standardJSON:!0}))}catch{}return vt.join(" ")}]}var ho=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,lo,co,C.AqN,{log:0,showTimestamps:1,groupHeader:2}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"log",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({log:O}),(0,C.yl1)()}},{key:"showTimestamps",get:function(){return this.$$.ctx[1]},set:function(O){this.$$set({showTimestamps:O}),(0,C.yl1)()}},{key:"groupHeader",get:function(){return this.$$.ctx[2]},set:function(O){this.$$set({groupHeader:O}),(0,C.yl1)()}}]),G}(C.f_C),uo=ho,mo=__webpack_require__(3903),Vr=__webpack_require__(3327),Ar={};Vr.Z&&Vr.Z.locals&&(Ar.locals=Vr.Z.locals);var sn,on=0,Qi={};Qi.styleTagTransform=rt(),Qi.setAttributes=K(),Qi.insert=W().bind(null,"head"),Qi.domAPI=U(),Qi.insertStyleElement=et(),Ar.use=function(X){return Qi.options=X||{},on++||(sn=D()(Vr.Z,Qi)),Ar},Ar.unuse=function(){on>0&&!--on&&(sn(),sn=null)};var Nn=Ar,fo=__webpack_require__(4264),$e=__webpack_require__.n(fo),po=function(){function X(O){console.debug("[vConsole] `ResizeObserver` is not supported in the browser, vConsole cannot render correctly."),O([{contentRect:{height:30}}],this)}var G=X.prototype;return G.disconnect=function(){},G.observe=function(O,F){},G.unobserve=function(O){},X}(),an=function(){return typeof window.ResizeObserver=="function"},Un=function(){return window.ResizeObserver||po};function _o(X){var G,O,F=X[6].default,q=(0,C.nuO)(F,X,X[5],null);return{c:function(){G=(0,C.bGB)("div"),q&&q.c(),(0,C.Ljt)(G,"class","vc-scroller-item"),(0,C.czc)(G,"display",X[0]?"block":"none",!1),(0,C.czc)(G,"top",X[3]?X[1]+"px":"auto",!1)},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),q&&q.m(G,null),X[7](G),O=!0},p:function(Z,tt){var nt=tt[0];q&&q.p&&(!O||32&nt)&&(0,C.kmG)(q,F,Z,Z[5],O?(0,C.u2N)(F,Z[5],nt,null):(0,C.VOJ)(Z[5]),null),1&nt&&(0,C.czc)(G,"display",Z[0]?"block":"none",!1),2&nt&&(0,C.czc)(G,"top",Z[3]?Z[1]+"px":"auto",!1)},i:function(Z){O||((0,C.Ui)(q,Z),O=!0)},o:function(Z){(0,C.etI)(q,Z),O=!1},d:function(Z){Z&&(0,C.ogt)(G),q&&q.d(Z),X[7](null)}}}function vo(X,G,O){var F,q=G.$$slots,Z=q===void 0?{}:q,tt=G.$$scope,nt=G.show,ot=nt===void 0?!an():nt,ut=G.top,dt=G.onResize,vt=dt===void 0?function(){}:dt,ft=null,Pt=an();return(0,R.H3)(function(){if(ot&&vt(F.getBoundingClientRect().height),Pt){var xt=Un();(ft=new xt(function(It){var Dt=It[0];ot&&vt(Dt.contentRect.height)})).observe(F)}}),(0,R.ev)(function(){Pt&&ft.disconnect()}),X.$$set=function(xt){"show"in xt&&O(0,ot=xt.show),"top"in xt&&O(1,ut=xt.top),"onResize"in xt&&O(4,vt=xt.onResize),"$$scope"in xt&&O(5,tt=xt.$$scope)},[ot,ut,F,Pt,vt,tt,Z,function(xt){C.VnY[xt?"unshift":"push"](function(){O(2,F=xt)})}]}var go=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,vo,_o,C.N8,{show:0,top:1,onResize:4}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"show",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({show:O}),(0,C.yl1)()}},{key:"top",get:function(){return this.$$.ctx[1]},set:function(O){this.$$set({top:O}),(0,C.yl1)()}},{key:"onResize",get:function(){return this.$$.ctx[4]},set:function(O){this.$$set({onResize:O}),(0,C.yl1)()}}]),G}(C.f_C),yo=go,xo=function(){function X(){this._x=0,this._endX=0,this._v=0,this._startTime=0,this._endTime=0}var G=X.prototype;return G.set=function(O,F,q,Z){this._x=O,this._endX=F,this._v=(F-O)/q,this._startTime=Z||Date.now(),this._endTime=this._startTime+q},G.x=function(O){if(this.done(O))return this._endX;var F=O-this._startTime;return this._x+this._v*F},G.dx=function(O){return this.done(O)?0:this._v},G.done=function(O){return O>=this._endTime},X}(),bo=function(){function X(O){this._drag=void 0,this._dragLog=void 0,this._x=0,this._v=0,this._startTime=0,this._drag=O,this._dragLog=Math.log(O)}var G=X.prototype;return G.set=function(O,F,q){this._x=O,this._v=F,this._startTime=q||Date.now()},G.x=function(O){var F=(O-this._startTime)/1e3;return this._x+this._v*Math.pow(this._drag,F)/this._dragLog-this._v/this._dragLog},G.dx=function(O){var F=(O-this._startTime)/1e3;return this._v*Math.pow(this._drag,F)},G.done=function(O){return Math.abs(this.dx(O))<3},X}(),Gn=function(X,G){return X>G-.1&&X<G+.1},zn=function(X){return Gn(X,0)},Ao=function(){function X(O,F,q){this._solver=void 0,this._solution=void 0,this._endPosition=void 0,this._startTime=void 0,this._solver=function(Z,tt,nt){var ot=nt,ut=Z,dt=tt,vt=ot*ot-4*ut*dt;if(vt==0){var ft=-ot/(2*ut);return function(Nt,Ut){var Ht=Nt,de=Ut/(ft*Nt);return{x:function(te){return(Ht+de*te)*Math.pow(Math.E,ft*te)},dx:function(te){return(ft*(Ht+de*te)+de)*Math.pow(Math.E,ft*te)}}}}if(vt>0){var Pt=(-ot-Math.sqrt(vt))/(2*ut),xt=(-ot+Math.sqrt(vt))/(2*ut);return function(Nt,Ut){var Ht=(Ut-Pt*Nt)/(xt-Pt),de=Nt-Ht;return{x:function(te){return de*Math.pow(Math.E,Pt*te)+Ht*Math.pow(Math.E,xt*te)},dx:function(te){return de*Pt*Math.pow(Math.E,Pt*te)+Ht*xt*Math.pow(Math.E,xt*te)}}}}var It=Math.sqrt(4*ut*dt-ot*ot)/(2*ut),Dt=-ot/2*ut;return function(Nt,Ut){var Ht=Nt,de=(Ut-Dt*Nt)/It;return{x:function(te){return Math.pow(Math.E,Dt*te)*(Ht*Math.cos(It*te)+de*Math.sin(It*te))},dx:function(te){var Pe=Math.pow(Math.E,Dt*te),Ce=Math.cos(It*te),Ie=Math.sin(It*te);return Pe*(de*It*Ce-Ht*It*Ie)+Dt*Pe*(de*Ie+Ht*Ce)}}}}(O,F,q),this._solution=null,this._endPosition=0,this._startTime=0}var G=X.prototype;return G.x=function(O){if(!this._solution)return 0;var F=(O-this._startTime)/1e3;return this._endPosition+this._solution.x(F)},G.dx=function(O){if(!this._solution)return 0;var F=(O-this._startTime)/1e3;return this._solution.dx(F)},G.set=function(O,F,q,Z){Z||(Z=Date.now()),this._endPosition=O,F==O&&zn(q)||(this._solution=this._solver(F-O,q),this._startTime=Z)},G.done=function(O){return O||(O=Date.now()),Gn(this.x(O),this._endPosition)&&zn(this.dx(O))},X}(),To=function(){function X(O,F){this._enableSpring=F,this._getExtend=void 0,this._friction=new bo(.05),this._spring=new Ao(1,90,20),this._toEdge=!1,this._getExtend=O}var G=X.prototype;return G.set=function(O,F,q){if(q===void 0&&(q=Date.now()),this._friction.set(O,F,q),O>0&&F>=0)this._toEdge=!0,this._enableSpring&&this._spring.set(0,O,F,q);else{var Z=this._getExtend();O<-Z&&F<=0?(this._toEdge=!0,this._enableSpring&&this._spring.set(-Z,O,F,q)):this._toEdge=!1}},G.x=function(O){if(this._enableSpring&&this._toEdge)return this._spring.x(O);var F=this._friction.x(O),q=this._friction.dx(O);if(F>0&&q>=0){if(this._toEdge=!0,!this._enableSpring)return 0;this._spring.set(0,F,q,O)}else{var Z=this._getExtend();if(F<-Z&&q<=0){if(this._toEdge=!0,!this._enableSpring)return-Z;this._spring.set(-Z,F,q,O)}}return F},G.dx=function(O){return this._toEdge?this._enableSpring?this._spring.dx(O):0:this._friction.dx(O)},G.done=function(O){return this._toEdge?!this._enableSpring||this._spring.done(O):this._friction.done(O)},X}();function cn(X,G){var O,F;return function q(){if(!F){var Z=Date.now();G(Z),X.done(Z)||(O=requestAnimationFrame(q))}}(),{cancel:function(){cancelAnimationFrame(O),F=!0}}}var Eo=function(){function X(O,F){this._updatePosition=F,this._scrollModel=void 0,this._linearModel=void 0,this._startPosition=0,this._position=0,this._animate=null,this._getExtent=void 0,this._getExtent=O,this._scrollModel=new To(O,!1),this._linearModel=new xo}var G=X.prototype;return G.onTouchStart=function(){var O=this._position;if(O>0)O*=0;else{var F=this._getExtent();O<-F&&(O=0*(O+F)-F)}this._startPosition=this._position=O,this._animate&&(this._animate.cancel(),this._animate=null),this._updatePosition(-O)},G.onTouchMove=function(O,F){var q=F+this._startPosition;if(q>0)q*=0;else{var Z=this._getExtent();q<-Z&&(q=0*(q+Z)-Z)}this._position=q,this._updatePosition(-q)},G.onTouchEnd=function(O,F,q,Z){var tt=this,nt=F+this._startPosition;if(nt>0)nt*=0;else{var ot=this._getExtent();nt<-ot&&(nt=0*(nt+ot)-ot)}if(this._position=nt,this._updatePosition(-nt),!(Math.abs(F)<=.1&&Math.abs(Z)<=.1)){var ut=this._scrollModel;ut.set(nt,Z),this._animate=cn(ut,function(dt){var vt=tt._position=ut.x(dt);tt._updatePosition(-vt)})}},G.onTouchCancel=function(){var O=this,F=this._position;if(F>0)F*=0;else{var q=this._getExtent();F<-q&&(F=0*(F+q)-q)}this._position=F;var Z=this._scrollModel;Z.set(F,0),this._animate=cn(Z,function(tt){var nt=O._position=Z.x(tt);O._updatePosition(-nt)})},G.onWheel=function(O,F){var q=this._position-F;if(this._animate&&(this._animate.cancel(),this._animate=null),q>0)q=0;else{var Z=this._getExtent();q<-Z&&(q=-Z)}this._position=q,this._updatePosition(-q)},G.getPosition=function(){return-this._position},G.updatePosition=function(O){var F=-O-this._position;this._startPosition+=F,this._position+=F;var q=this._position;this._updatePosition(-q);var Z=this._scrollModel,tt=Date.now();if(!Z.done(tt)){var nt=Z.dx(tt);Z.set(q,nt,tt)}},G.scrollTo=function(O,F){var q=this;if(this._animate&&(this._animate.cancel(),this._animate=null),F>0){var Z=this._linearModel;Z.set(this._position,-O,F),this._animate=cn(this._linearModel,function(tt){var nt=q._position=Z.x(tt);q._updatePosition(-nt)})}else this._updatePosition(O)},X}();function wo(X,G){var O=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(O)return(O=O.call(X)).next.bind(O);if(Array.isArray(X)||(O=function(q,Z){if(q){if(typeof q=="string")return jn(q,Z);var tt=Object.prototype.toString.call(q).slice(8,-1);if(tt==="Object"&&q.constructor&&(tt=q.constructor.name),tt==="Map"||tt==="Set")return Array.from(q);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return jn(q,Z)}}(X))||G&&X&&typeof X.length=="number"){O&&(X=O);var F=0;return function(){return F>=X.length?{done:!0}:{done:!1,value:X[F++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jn(X,G){(G==null||G>X.length)&&(G=X.length);for(var O=0,F=new Array(G);O<G;O++)F[O]=X[O];return F}var So=function(X){var G=null,O=!1,F=function q(){O=!1,X(),G=requestAnimationFrame(function(){G=null,O&&q()})};return{trigger:function(){G===null?F():O=!0},cancel:function(){G&&(cancelAnimationFrame(G),O=!1,G=null)}}},Po=function(){function X(G){var O=this;this._handler=G,this._touchId=null,this._startX=0,this._startY=0,this._historyX=[],this._historyY=[],this._historyTime=[],this._wheelDeltaX=0,this._wheelDeltaY=0,this._onTouchMove=function(){var F=O._historyX[O._historyX.length-1],q=O._historyY[O._historyY.length-1];O._handler.onTouchMove(F,q)},this._onWheel=So(function(){var F=O._wheelDeltaX,q=O._wheelDeltaY;O._wheelDeltaX=0,O._wheelDeltaY=0,O._handler.onWheel(F,q)}),this.handleTouchStart=function(F){var q;if(((q=F.target.dataset)==null?void 0:q.scrollable)!=="1"){F.preventDefault();var Z=F.touches[0];O._touchId=Z.identifier,O._startX=Z.pageX,O._startY=Z.pageY,O._historyX=[0],O._historyY=[0],O._historyTime=[Date.now()],O._handler.onTouchStart()}},this.handleTouchMove=function(F){var q;if(((q=F.target.dataset)==null?void 0:q.scrollable)!=="1"){F.preventDefault();var Z=O._getTouchDelta(F);Z!==null&&(O._historyX.push(Z.x),O._historyY.push(Z.y),O._historyTime.push(Date.now()),O._onTouchMove())}},this.handleTouchEnd=function(F){var q;if(((q=F.target.dataset)==null?void 0:q.scrollable)!=="1"){F.preventDefault();var Z=O._getTouchDelta(F);if(Z!==null){for(var tt=0,nt=0,ot=Date.now(),ut=Z.y,dt=Z.x,vt=O._historyTime,ft=vt.length-1;ft>0;ft-=1){var Pt=ot-vt[ft];if(Pt>30){tt=1e3*(dt-O._historyX[ft])/Pt,nt=1e3*(ut-O._historyY[ft])/Pt;break}}O._touchId=null,O._handler.onTouchEnd(Z.x,Z.y,tt,nt)}}},this.handleTouchCancel=function(F){var q;((q=F.target.dataset)==null?void 0:q.scrollable)!=="1"&&(F.preventDefault(),O._getTouchDelta(F)!==null&&(O._touchId=null,O._handler.onTouchCancel()))},this.handleWheel=function(F){var q;((q=F.target.dataset)==null?void 0:q.scrollable)!=="1"&&(F.preventDefault(),O._wheelDeltaX+=F.deltaX,O._wheelDeltaY+=F.deltaY,O._onWheel.trigger())}}return X.prototype._getTouchDelta=function(G){if(this._touchId===null)return null;for(var O,F=wo(G.changedTouches);!(O=F()).done;){var q=O.value;if(q.identifier===this._touchId)return{x:q.pageX-this._startX,y:q.pageY-this._startY}}return null},X}(),Or=__webpack_require__(1142),Tr={};Or.Z&&Or.Z.locals&&(Tr.locals=Or.Z.locals);var ln,hn=0,tr={};tr.styleTagTransform=rt(),tr.setAttributes=K(),tr.insert=W().bind(null,"head"),tr.domAPI=U(),tr.insertStyleElement=et(),Tr.use=function(X){return tr.options=X||{},hn++||(ln=D()(Or.Z,tr)),Tr},Tr.unuse=function(){hn>0&&!--hn&&(ln(),ln=null)};var Hn=Tr,Co=function(){var X=[],G=[],O=0,F=0,q=0,Z=0,tt=0;return function(nt,ot,ut){if(q===nt&&Z===ot&&tt===ut)return X;var dt=G.length,vt=ot<=F?Math.max(0,Math.min(ot,Math.max(O,Math.min(F-1,ut-dt)))):ot,ft=O<=ut?Math.max(ut,Math.min(nt,Math.max(O+1,Math.min(F,vt+dt)))):ut;if(dt===0||ft-vt<dt){for(var Pt=X.length=G.length=ut-ot,xt=0;xt<Pt;xt+=1)G[xt]=xt,X[xt]={key:xt,index:xt+ot,show:!0};return O=ot,F=ut,q=nt,Z=ot,tt=ut,X}var It=0,Dt=0,Nt=0,Ut=0;F<vt||ft<O?(Nt=vt,Ut=vt+dt):O<vt?(Dt=vt-O,Nt=vt,Ut=vt+dt):ft<F?(Dt=dt-(F-ft),Nt=ft-dt,Ut=ft):vt<=O&&F<=ft&&(Nt=O,Ut=F);for(var Ht=vt;Ht<ot;Ht+=1,It+=1){var de=G[(Dt+It)%dt],te=X[Ht-vt];te.key=de,te.index=Ht,te.show=!1}for(var Pe=ot,Ce=0;Pe<ut;Pe+=1){var Ie=void 0;Nt<=Pe&&Pe<Ut?(Ie=G[(Dt+It)%dt],It+=1):(Ie=dt+Ce,Ce+=1);var re=Pe-vt;if(re<X.length){var oe=X[re];oe.key=Ie,oe.index=Pe,oe.show=!0}else X.push({key:Ie,index:Pe,show:!0})}for(var Me=ut;Me<ft;Me+=1,It+=1){var Xe=G[(Dt+It)%dt],Re=X[Me-vt];Re.key=Xe,Re.index=Me,Re.show=!1}for(var Be=0;Be<X.length;Be+=1)G[Be]=X[Be].key;return X.sort(function(ye,qt){return ye.key-qt.key}),O=vt,F=ft,q=nt,Z=ot,tt=ut,X}},Bo=C.lig.Map,Io=function(X){return{}},Wn=function(X){return{}},Mo=function(X){return{}},qn=function(X){return{}};function Xn(X,G,O){var F=X.slice();return F[53]=G[O],F[55]=O,F}var Ro=function(X){return{item:1025&X[0]}},Yn=function(X){return{item:X[0][X[53].index]}},Lo=function(X){return{}},Kn=function(X){return{}};function Zn(X){var G,O,F=X[24].header,q=(0,C.nuO)(F,X,X[31],Kn);return{c:function(){G=(0,C.bGB)("div"),q&&q.c(),(0,C.Ljt)(G,"class","vc-scroller-header")},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),q&&q.m(G,null),X[25](G),O=!0},p:function(Z,tt){q&&q.p&&(!O||1&tt[1])&&(0,C.kmG)(q,F,Z,Z[31],O?(0,C.u2N)(F,Z[31],tt,Lo):(0,C.VOJ)(Z[31]),Kn)},i:function(Z){O||((0,C.Ui)(q,Z),O=!0)},o:function(Z){(0,C.etI)(q,Z),O=!1},d:function(Z){Z&&(0,C.ogt)(G),q&&q.d(Z),X[25](null)}}}function Do(X){var G,O=X[24].empty,F=(0,C.nuO)(O,X,X[31],qn);return{c:function(){F&&F.c()},m:function(q,Z){F&&F.m(q,Z),G=!0},p:function(q,Z){F&&F.p&&(!G||1&Z[1])&&(0,C.kmG)(F,O,q,q[31],G?(0,C.u2N)(O,q[31],Z,Mo):(0,C.VOJ)(q[31]),qn)},i:function(q){G||((0,C.Ui)(F,q),G=!0)},o:function(q){(0,C.etI)(F,q),G=!1},d:function(q){F&&F.d(q)}}}function Vo(X){for(var G,O,F=[],q=new Bo,Z=X[10],tt=function(dt){return dt[53].key},nt=0;nt<Z.length;nt+=1){var ot=Xn(X,Z,nt),ut=tt(ot);q.set(ut,F[nt]=Jn(ut,ot))}return{c:function(){for(var dt=0;dt<F.length;dt+=1)F[dt].c();G=(0,C.cSb)()},m:function(dt,vt){for(var ft=0;ft<F.length;ft+=1)F[ft].m(dt,vt);(0,C.$Tr)(dt,G,vt),O=!0},p:function(dt,vt){17921&vt[0]|1&vt[1]&&(Z=dt[10],(0,C.dvw)(),F=(0,C.GQg)(F,vt,tt,1,dt,Z,q,G.parentNode,C.cly,Jn,G,Xn),(0,C.gbL)())},i:function(dt){if(!O){for(var vt=0;vt<Z.length;vt+=1)(0,C.Ui)(F[vt]);O=!0}},o:function(dt){for(var vt=0;vt<F.length;vt+=1)(0,C.etI)(F[vt]);O=!1},d:function(dt){for(var vt=0;vt<F.length;vt+=1)F[vt].d(dt);dt&&(0,C.ogt)(G)}}}function Oo(X){var G,O,F=X[24].item,q=(0,C.nuO)(F,X,X[31],Yn),Z=q||function(tt){var nt;return{c:function(){nt=(0,C.fLW)("Missing template")},m:function(ot,ut){(0,C.$Tr)(ot,nt,ut)},d:function(ot){ot&&(0,C.ogt)(nt)}}}();return{c:function(){Z&&Z.c(),G=(0,C.DhX)()},m:function(tt,nt){Z&&Z.m(tt,nt),(0,C.$Tr)(tt,G,nt),O=!0},p:function(tt,nt){q&&q.p&&(!O||1025&nt[0]|1&nt[1])&&(0,C.kmG)(q,F,tt,tt[31],O?(0,C.u2N)(F,tt[31],nt,Ro):(0,C.VOJ)(tt[31]),Yn)},i:function(tt){O||((0,C.Ui)(Z,tt),O=!0)},o:function(tt){(0,C.etI)(Z,tt),O=!1},d:function(tt){Z&&Z.d(tt),tt&&(0,C.ogt)(G)}}}function Jn(X,G){var O,F,q;function Z(){for(var tt,nt=arguments.length,ot=new Array(nt),ut=0;ut<nt;ut++)ot[ut]=arguments[ut];return(tt=G)[26].apply(tt,[G[53]].concat(ot))}return F=new yo({props:{show:G[53].show,top:G[9][G[53].index],onResize:Z,$$slots:{default:[Oo]},$$scope:{ctx:G}}}),{key:X,first:null,c:function(){O=(0,C.cSb)(),(0,C.YCL)(F.$$.fragment),this.first=O},m:function(tt,nt){(0,C.$Tr)(tt,O,nt),(0,C.yef)(F,tt,nt),q=!0},p:function(tt,nt){G=tt;var ot={};1024&nt[0]&&(ot.show=G[53].show),1536&nt[0]&&(ot.top=G[9][G[53].index]),1024&nt[0]&&(ot.onResize=Z),1025&nt[0]|1&nt[1]&&(ot.$$scope={dirty:nt,ctx:G}),F.$set(ot)},i:function(tt){q||((0,C.Ui)(F.$$.fragment,tt),q=!0)},o:function(tt){(0,C.etI)(F.$$.fragment,tt),q=!1},d:function(tt){tt&&(0,C.ogt)(O),(0,C.vpE)(F,tt)}}}function Qn(X){var G,O,F=X[24].footer,q=(0,C.nuO)(F,X,X[31],Wn);return{c:function(){G=(0,C.bGB)("div"),q&&q.c(),(0,C.Ljt)(G,"class","vc-scroller-footer")},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),q&&q.m(G,null),X[28](G),O=!0},p:function(Z,tt){q&&q.p&&(!O||1&tt[1])&&(0,C.kmG)(q,F,Z,Z[31],O?(0,C.u2N)(F,Z[31],tt,Io):(0,C.VOJ)(Z[31]),Wn)},i:function(Z){O||((0,C.Ui)(q,Z),O=!0)},o:function(Z){(0,C.etI)(q,Z),O=!1},d:function(Z){Z&&(0,C.ogt)(G),q&&q.d(Z),X[28](null)}}}function ts(X){var G,O,F=X[7]+"%",q=X[8]+"%";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("div"),(0,C.Ljt)(O,"class","vc-scroller-scrollbar-thumb"),(0,C.czc)(O,"height",F,!1),(0,C.czc)(O,"top",q,!1),(0,C.Ljt)(G,"class","vc-scroller-scrollbar-track"),(0,C.czc)(G,"display",X[7]<100?"block":"none",!1)},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),(0,C.R3I)(G,O)},p:function(Z,tt){128&tt[0]&&F!==(F=Z[7]+"%")&&(0,C.czc)(O,"height",F,!1),256&tt[0]&&q!==(q=Z[8]+"%")&&(0,C.czc)(O,"top",q,!1),128&tt[0]&&(0,C.czc)(G,"display",Z[7]<100?"block":"none",!1)},d:function(Z){Z&&(0,C.ogt)(G)}}}function Fo(X){var G,O,F,q,Z,tt,nt,ot,ut,dt,vt,ft=X[15].header&&Zn(X),Pt=[Vo,Do],xt=[];function It(Ut,Ht){return Ut[0].length?0:1}Z=It(X),tt=xt[Z]=Pt[Z](X);var Dt=X[15].footer&&Qn(X),Nt=X[1]&&ts(X);return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("div"),ft&&ft.c(),F=(0,C.DhX)(),q=(0,C.bGB)("div"),tt.c(),nt=(0,C.DhX)(),Dt&&Dt.c(),ot=(0,C.DhX)(),Nt&&Nt.c(),(0,C.Ljt)(q,"class","vc-scroller-items"),(0,C.Ljt)(O,"class","vc-scroller-contents"),(0,C.Ljt)(G,"class","vc-scroller-viewport"),(0,C.VHj)(G,"static",!X[13])},m:function(Ut,Ht){(0,C.$Tr)(Ut,G,Ht),(0,C.R3I)(G,O),ft&&ft.m(O,null),(0,C.R3I)(O,F),(0,C.R3I)(O,q),xt[Z].m(q,null),X[27](q),(0,C.R3I)(O,nt),Dt&&Dt.m(O,null),X[29](O),(0,C.R3I)(G,ot),Nt&&Nt.m(G,null),X[30](G),ut=!0,dt||(vt=[(0,C.oLt)(G,"touchstart",function(){(0,C.sBU)(X[13]?X[11].handleTouchStart:X[12])&&(X[13]?X[11].handleTouchStart:X[12]).apply(this,arguments)}),(0,C.oLt)(G,"touchmove",function(){(0,C.sBU)(X[13]?X[11].handleTouchMove:X[12])&&(X[13]?X[11].handleTouchMove:X[12]).apply(this,arguments)}),(0,C.oLt)(G,"touchend",function(){(0,C.sBU)(X[13]?X[11].handleTouchEnd:X[12])&&(X[13]?X[11].handleTouchEnd:X[12]).apply(this,arguments)}),(0,C.oLt)(G,"touchcancel",function(){(0,C.sBU)(X[13]?X[11].handleTouchCancel:X[12])&&(X[13]?X[11].handleTouchCancel:X[12]).apply(this,arguments)}),(0,C.oLt)(G,"wheel",function(){(0,C.sBU)(X[13]?X[11].handleWheel:X[12])&&(X[13]?X[11].handleWheel:X[12]).apply(this,arguments)})],dt=!0)},p:function(Ut,Ht){(X=Ut)[15].header?ft?(ft.p(X,Ht),32768&Ht[0]&&(0,C.Ui)(ft,1)):((ft=Zn(X)).c(),(0,C.Ui)(ft,1),ft.m(O,F)):ft&&((0,C.dvw)(),(0,C.etI)(ft,1,1,function(){ft=null}),(0,C.gbL)());var de=Z;(Z=It(X))===de?xt[Z].p(X,Ht):((0,C.dvw)(),(0,C.etI)(xt[de],1,1,function(){xt[de]=null}),(0,C.gbL)(),(tt=xt[Z])?tt.p(X,Ht):(tt=xt[Z]=Pt[Z](X)).c(),(0,C.Ui)(tt,1),tt.m(q,null)),X[15].footer?Dt?(Dt.p(X,Ht),32768&Ht[0]&&(0,C.Ui)(Dt,1)):((Dt=Qn(X)).c(),(0,C.Ui)(Dt,1),Dt.m(O,null)):Dt&&((0,C.dvw)(),(0,C.etI)(Dt,1,1,function(){Dt=null}),(0,C.gbL)()),X[1]?Nt?Nt.p(X,Ht):((Nt=ts(X)).c(),Nt.m(G,null)):Nt&&(Nt.d(1),Nt=null)},i:function(Ut){ut||((0,C.Ui)(ft),(0,C.Ui)(tt),(0,C.Ui)(Dt),ut=!0)},o:function(Ut){(0,C.etI)(ft),(0,C.etI)(tt),(0,C.etI)(Dt),ut=!1},d:function(Ut){Ut&&(0,C.ogt)(G),ft&&ft.d(),xt[Z].d(),X[27](null),Dt&&Dt.d(),X[29](null),Nt&&Nt.d(),X[30](null),dt=!1,(0,C.j7q)(vt)}}}function $o(X,G,O){var F,q,Z,tt,nt,ot,ut,dt=G.$$slots,vt=dt===void 0?{}:dt,ft=G.$$scope,Pt=(0,C.XGm)(vt),xt=this&&this.__awaiter||function(Xt,Ae,xe,Te){return new(xe||(xe=Promise))(function(Le,ke){function Pi(qe){try{Ei(Te.next(qe))}catch(_i){ke(_i)}}function Ti(qe){try{Ei(Te.throw(qe))}catch(_i){ke(_i)}}function Ei(qe){var _i;qe.done?Le(qe.value):(_i=qe.value,_i instanceof xe?_i:new xe(function(Hi){Hi(_i)})).then(Pi,Ti)}Ei((Te=Te.apply(Xt,Ae||[])).next())})},It=G.items,Dt=G.itemKey,Nt=Dt===void 0?void 0:Dt,Ut=G.itemHeight,Ht=Ut===void 0?void 0:Ut,de=G.buffer,te=de===void 0?200:de,Pe=G.stickToBottom,Ce=Pe!==void 0&&Pe,Ie=G.scrollbar,re=Ie!==void 0&&Ie,oe=G.start,Me=oe===void 0?0:oe,Xe=G.end,Re=Xe===void 0?0:Xe,Be=0,ye=0,qt=0,Yt=0,Oe=100,zt=0,ee=[],we=[],Qt=[],Se=Co(),Ge=function(){return Math.max(0,Yt+Be+ye-qt)},We=!0,Je=!1,Fe=[],bi=!1,Qe=!1,Ai=an(),je=function(Xt,Ae){var xe;(0,R.H3)(function(){var Te=Xt();if(Te){Ae(Te.getBoundingClientRect().height),xe&&xe.disconnect();var Le=Un();(xe=new Le(function(ke){var Pi=ke[0];Ae(Pi.contentRect.height)})).observe(Te)}else Ae(0),xe&&(xe.disconnect(),xe=null)}),(0,R.ev)(function(){xe&&(xe.disconnect(),xe=null)})},Si=function(){var Xt=ot.getPosition(),Ae=100/(Yt+Be+ye);O(8,zt=Xt*Ae),O(7,Oe=qt*Ae)},Ye=function(Xt){var Ae=Ge();(Xt||ot.getPosition()>Ae)&&ot.updatePosition(Ae)},Fi=function(Xt){(function(Ae,xe,Te){for(var Le=new Map,ke=0;ke<Fe.length;ke+=1){var Pi=Fe[ke],Ti=Nt===void 0?Pi:Pi[Nt];Le.set(Ti,ee[ke])}O(9,we.length=ee.length=Ae.length,we);for(var Ei=0,qe=0;qe<Ae.length;qe+=1){var _i=Ae[qe],Hi=Nt===void 0?_i:_i[Nt];Le.has(Hi)?ee[qe]=Le.get(Hi):ee[qe]=Te,O(9,we[qe]=Ei,we),Ei+=ee[qe]}Yt=Math.max(Ei,xe-Be-ye),Fe=Ae,Ai?(ji(Ae,ot.getPosition(),xe),O(6,nt.style.height=Yt+"px",nt),Ye(We&&Ce),Si()):ji(Ae,0,9e6)})(Xt,qt,Ht)};function ji(Xt,Ae,xe){for(var Te=0,Le=0;Te<Xt.length&&Le+ee[Te]<Ae-te;)Le+=ee[Te],Te+=1;for(O(16,Me=Te);Te<Xt.length&&xe&&Le<Ae+xe+te;)Le+=ee[Te],Te+=1;O(17,Re=Te),O(10,Qt=Se(Xt.length,Me,Re))}var hr=function(Xt,Ae){return xt(void 0,void 0,void 0,$e().mark(function xe(){var Te,Le,ke,Pi;return $e().wrap(function(Ti){for(;;)switch(Ti.prev=Ti.next){case 0:if(ee[Xt]!==Ae&&qt!==0){Ti.next=2;break}return Ti.abrupt("return");case 2:for(Te=ee[Xt],ee[Xt]=Ae,Le=It.length,ke=Xt;ke<Le-1;ke+=1)O(9,we[ke+1]=we[ke]+ee[ke],we);return Yt=Math.max(we[Le-1]+ee[Le-1],qt-Be-ye),Pi=ot.getPosition(),Je=!0,we[Xt]+Te<Pi?ot.updatePosition(Pi+Ae-Te):Ye(We&&Ce),Ti.next=12,new Promise(function(Ei){return setTimeout(Ei,0)});case 12:ji(It,ot.getPosition(),qt),O(6,nt.style.height=Yt+"px",nt),Si();case 15:case"end":return Ti.stop()}},xe)}))};(0,R.H3)(function(){O(23,bi=!0),Hn.use()}),(0,R.ev)(function(){Hn.unuse()}),Ai&&(Ai&&(ot=ot||new Eo(Ge,function(Xt){return xt(void 0,void 0,void 0,$e().mark(function Ae(){var xe;return $e().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(xe=Ge(),We=Math.abs(Xt-xe)<=1,O(5,tt.style.transform="translateY("+-Xt+"px) translateZ(0)",tt),Si(),!Je){Te.next=8;break}Je=!1,Te.next=11;break;case 8:return Te.next=10,new Promise(function(Le){return setTimeout(Le,0)});case 10:ji(It,Xt,qt);case 11:case"end":return Te.stop()}},Ae)}))}),O(11,ut=ut||new Po(ot))),!Qe&&Ai&&(je(function(){return Z},function(Xt){return xt(void 0,void 0,void 0,$e().mark(function Ae(){var xe,Te;return $e().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(qt!==Xt){Le.next=2;break}return Le.abrupt("return");case 2:for(qt=Xt,xe=0,Te=0;Te<It.length;Te+=1)xe+=ee[Te];return Yt=Math.max(xe,qt-ye),O(6,nt.style.height=Yt+"px",nt),Le.next=9,new Promise(function(ke){return setTimeout(ke,0)});case 9:Fi(It),ji(It,ot.getPosition(),qt),qt!==0&&Ye(We&&Ce),Si();case 13:case"end":return Le.stop()}},Ae)}))}),je(function(){return q},function(Xt){if(ye!==Xt){ye=Xt;for(var Ae=0,xe=0;xe<It.length;xe+=1)Ae+=ee[xe];Yt=Math.max(Ae,qt-Be-ye),O(6,nt.style.height=Yt+"px",nt),qt!==0&&Ye(We&&Ce),Si()}}),je(function(){return F},function(Xt){Be!==Xt&&(Be=Xt,Fi(It),Si())})));var Cr={scrollTo:function(Xt){if(Ai){var Ae=we[Math.max(0,Math.min(It.length-1,Xt))],xe=Math.min(Ge(),Ae),Te=Math.min(Math.floor(500*Math.abs(ot.getPosition()-xe)/2e3),500);ot.scrollTo(xe,Te)}}};return X.$$set=function(Xt){"items"in Xt&&O(0,It=Xt.items),"itemKey"in Xt&&O(18,Nt=Xt.itemKey),"itemHeight"in Xt&&O(19,Ht=Xt.itemHeight),"buffer"in Xt&&O(20,te=Xt.buffer),"stickToBottom"in Xt&&O(21,Ce=Xt.stickToBottom),"scrollbar"in Xt&&O(1,re=Xt.scrollbar),"start"in Xt&&O(16,Me=Xt.start),"end"in Xt&&O(17,Re=Xt.end),"$$scope"in Xt&&O(31,ft=Xt.$$scope)},X.$$.update=function(){8388609&X.$$.dirty[0]&&bi&&(Ai||O(4,Z.parentElement.style.height="auto",Z),Fi(It),Qe=!0)},[It,re,F,q,Z,tt,nt,Oe,zt,we,Qt,ut,function(){},Ai,hr,Pt,Me,Re,Nt,Ht,te,Ce,Cr,bi,vt,function(Xt){C.VnY[Xt?"unshift":"push"](function(){O(2,F=Xt)})},function(Xt,Ae){return hr(Xt.index,Ae)},function(Xt){C.VnY[Xt?"unshift":"push"](function(){O(6,nt=Xt)})},function(Xt){C.VnY[Xt?"unshift":"push"](function(){O(3,q=Xt)})},function(Xt){C.VnY[Xt?"unshift":"push"](function(){O(5,tt=Xt)})},function(Xt){C.VnY[Xt?"unshift":"push"](function(){O(4,Z=Xt),O(23,bi),O(13,Ai),O(0,It)})},ft]}var ko=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,$o,Fo,C.N8,{items:0,itemKey:18,itemHeight:19,buffer:20,stickToBottom:21,scrollbar:1,start:16,end:17,handler:22},null,[-1,-1]),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"items",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({items:O}),(0,C.yl1)()}},{key:"itemKey",get:function(){return this.$$.ctx[18]},set:function(O){this.$$set({itemKey:O}),(0,C.yl1)()}},{key:"itemHeight",get:function(){return this.$$.ctx[19]},set:function(O){this.$$set({itemHeight:O}),(0,C.yl1)()}},{key:"buffer",get:function(){return this.$$.ctx[20]},set:function(O){this.$$set({buffer:O}),(0,C.yl1)()}},{key:"stickToBottom",get:function(){return this.$$.ctx[21]},set:function(O){this.$$set({stickToBottom:O}),(0,C.yl1)()}},{key:"scrollbar",get:function(){return this.$$.ctx[1]},set:function(O){this.$$set({scrollbar:O}),(0,C.yl1)()}},{key:"start",get:function(){return this.$$.ctx[16]},set:function(O){this.$$set({start:O}),(0,C.yl1)()}},{key:"end",get:function(){return this.$$.ctx[17]},set:function(O){this.$$set({end:O}),(0,C.yl1)()}},{key:"handler",get:function(){return this.$$.ctx[22]}}]),G}(C.f_C),es=ko;function No(X){var G;return{c:function(){(G=(0,C.bGB)("div")).textContent="Empty",(0,C.Ljt)(G,"slot","empty"),(0,C.Ljt)(G,"class","vc-plugin-empty")},m:function(O,F){(0,C.$Tr)(O,G,F)},p:C.ZTd,d:function(O){O&&(0,C.ogt)(G)}}}function Uo(X){var G,O;return(G=new uo({props:{slot:"item",log:X[16],showTimestamps:X[1],groupHeader:X[16].groupHeader}})).$on("groupCollapsed",X[6]),{c:function(){(0,C.YCL)(G.$$.fragment)},m:function(F,q){(0,C.yef)(G,F,q),O=!0},p:function(F,q){var Z={};65536&q&&(Z.log=F[16]),2&q&&(Z.showTimestamps=F[1]),65536&q&&(Z.groupHeader=F[16].groupHeader),G.$set(Z)},i:function(F){O||((0,C.Ui)(G.$$.fragment,F),O=!0)},o:function(F){(0,C.etI)(G.$$.fragment,F),O=!1},d:function(F){(0,C.vpE)(G,F)}}}function is(X){var G,O;return(G=new mo.Z({})).$on("filterText",X[5]),{c:function(){(0,C.YCL)(G.$$.fragment)},m:function(F,q){(0,C.yef)(G,F,q),O=!0},p:C.ZTd,i:function(F){O||((0,C.Ui)(G.$$.fragment,F),O=!0)},o:function(F){(0,C.etI)(G.$$.fragment,F),O=!1},d:function(F){(0,C.vpE)(G,F)}}}function Go(X){var G,O,F=X[0]&&is(X);return{c:function(){F&&F.c(),G=(0,C.cSb)()},m:function(q,Z){F&&F.m(q,Z),(0,C.$Tr)(q,G,Z),O=!0},p:function(q,Z){q[0]?F?(F.p(q,Z),1&Z&&(0,C.Ui)(F,1)):((F=is(q)).c(),(0,C.Ui)(F,1),F.m(G.parentNode,G)):F&&((0,C.dvw)(),(0,C.etI)(F,1,1,function(){F=null}),(0,C.gbL)())},i:function(q){O||((0,C.Ui)(F),O=!0)},o:function(q){(0,C.etI)(F),O=!1},d:function(q){F&&F.d(q),q&&(0,C.ogt)(G)}}}function zo(X){var G,O,F,q;function Z(nt){X[15](nt)}var tt={items:X[4],itemKey:"_id",itemHeight:30,buffer:100,stickToBottom:!0,scrollbar:!0,$$slots:{footer:[Go],item:[Uo,function(nt){return{16:nt.item}},function(nt){return nt.item?65536:0}],empty:[No]},$$scope:{ctx:X}};return X[3]!==void 0&&(tt.handler=X[3]),O=new es({props:tt}),C.VnY.push(function(){return(0,C.akz)(O,"handler",Z)}),{c:function(){G=(0,C.bGB)("div"),(0,C.YCL)(O.$$.fragment),(0,C.Ljt)(G,"class","vc-plugin-content"),(0,C.VHj)(G,"vc-logs-has-cmd",X[0])},m:function(nt,ot){(0,C.$Tr)(nt,G,ot),(0,C.yef)(O,G,null),q=!0},p:function(nt,ot){var ut=ot[0],dt={};16&ut&&(dt.items=nt[4]),196611&ut&&(dt.$$scope={dirty:ut,ctx:nt}),!F&&8&ut&&(F=!0,dt.handler=nt[3],(0,C.hjT)(function(){return F=!1})),O.$set(dt),1&ut&&(0,C.VHj)(G,"vc-logs-has-cmd",nt[0])},i:function(nt){q||((0,C.Ui)(O.$$.fragment,nt),q=!0)},o:function(nt){(0,C.etI)(O.$$.fragment,nt),q=!1},d:function(nt){nt&&(0,C.ogt)(G),(0,C.vpE)(O)}}}function jo(X,G,O){var F,q=C.ZTd;X.$$.on_destroy.push(function(){return q()});var Z,tt,nt=G.pluginId,ot=nt===void 0?"default":nt,ut=G.showCmd,dt=ut!==void 0&&ut,vt=G.filterType,ft=vt===void 0?"all":vt,Pt=G.showTimestamps,xt=Pt!==void 0&&Pt,It=!1,Dt="",Nt=[];return(0,R.H3)(function(){Nn.use()}),(0,R.ev)(function(){Nn.unuse()}),X.$$set=function(Ut){"pluginId"in Ut&&O(7,ot=Ut.pluginId),"showCmd"in Ut&&O(0,dt=Ut.showCmd),"filterType"in Ut&&O(8,ft=Ut.filterType),"showTimestamps"in Ut&&O(1,xt=Ut.showTimestamps)},X.$$.update=function(){29056&X.$$.dirty&&(It||(O(2,Z=ki.O.get(ot)),q(),q=(0,C.LdU)(Z,function(Ut){return O(14,F=Ut)}),O(12,It=!0)),O(4,Nt=F.logList.filter(function(Ut){return(ft==="all"||ft===Ut.type)&&(Dt===""||(0,di.HX)(Ut,Dt))&&!Ut.groupCollapsed})))},[dt,xt,Z,tt,Nt,function(Ut){O(13,Dt=Ut.detail.filterText||"")},function(Ut){var Ht=Ut.detail.groupLabel,de=Ut.detail.groupHeader,te=Ut.detail.isGroupCollapsed;Z.update(function(Pe){return Pe.logList.forEach(function(Ce){Ce.groupLabel===Ht&&(Ce.groupHeader>0?Ce.groupHeader=de:Ce.groupCollapsed=te)}),Pe})},ot,ft,function(){tt.scrollTo(0)},function(){tt.scrollTo(Nt.length-1)},{fixedHeight:!0},It,Dt,F,function(Ut){O(3,tt=Ut)}]}var Ho=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,jo,zo,C.N8,{pluginId:7,showCmd:0,filterType:8,showTimestamps:1,scrollToTop:9,scrollToBottom:10,options:11}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"pluginId",get:function(){return this.$$.ctx[7]},set:function(O){this.$$set({pluginId:O}),(0,C.yl1)()}},{key:"showCmd",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({showCmd:O}),(0,C.yl1)()}},{key:"filterType",get:function(){return this.$$.ctx[8]},set:function(O){this.$$set({filterType:O}),(0,C.yl1)()}},{key:"showTimestamps",get:function(){return this.$$.ctx[1]},set:function(O){this.$$set({showTimestamps:O}),(0,C.yl1)()}},{key:"scrollToTop",get:function(){return this.$$.ctx[9]}},{key:"scrollToBottom",get:function(){return this.$$.ctx[10]}},{key:"options",get:function(){return this.$$.ctx[11]}}]),G}(C.f_C),Wo=Ho,Fr=__webpack_require__(5629),rs=function(){function X(G){this.model=void 0,this.pluginId=void 0,this.pluginId=G}return X.prototype.destroy=function(){this.model=void 0},X}(),qo=function(X){function G(){for(var F,q=arguments.length,Z=new Array(q),tt=0;tt<q;tt++)Z[tt]=arguments[tt];return(F=X.call.apply(X,[this].concat(Z))||this).model=Fr.W.getSingleton(Fr.W,"VConsoleLogModel"),F}(0,I.Z)(G,X);var O=G.prototype;return O.log=function(){for(var F=arguments.length,q=new Array(F),Z=0;Z<F;Z++)q[Z]=arguments[Z];this.addLog.apply(this,["log"].concat(q))},O.info=function(){for(var F=arguments.length,q=new Array(F),Z=0;Z<F;Z++)q[Z]=arguments[Z];this.addLog.apply(this,["info"].concat(q))},O.debug=function(){for(var F=arguments.length,q=new Array(F),Z=0;Z<F;Z++)q[Z]=arguments[Z];this.addLog.apply(this,["debug"].concat(q))},O.warn=function(){for(var F=arguments.length,q=new Array(F),Z=0;Z<F;Z++)q[Z]=arguments[Z];this.addLog.apply(this,["warn"].concat(q))},O.error=function(){for(var F=arguments.length,q=new Array(F),Z=0;Z<F;Z++)q[Z]=arguments[Z];this.addLog.apply(this,["error"].concat(q))},O.clear=function(){this.model&&this.model.clearPluginLog(this.pluginId)},O.addLog=function(F){if(this.model){for(var q=arguments.length,Z=new Array(q>1?q-1:0),tt=1;tt<q;tt++)Z[tt-1]=arguments[tt];Z.unshift("["+this.pluginId+"]"),this.model.addLog({type:F,origData:Z},{noOrig:!0})}},G}(rs),un=function(X){function G(F,q){var Z;return(Z=X.call(this,F,q,Wo,{pluginId:F,filterType:"all"})||this).model=Fr.W.getSingleton(Fr.W,"VConsoleLogModel"),Z.isReady=!1,Z.isShow=!1,Z.isInBottom=!0,Z.model.bindPlugin(F),Z.exporter=new qo(F),Z}(0,I.Z)(G,X);var O=G.prototype;return O.onReady=function(){var F,q;X.prototype.onReady.call(this),this.model.maxLogNumber=Number((F=this.vConsole.option.log)==null?void 0:F.maxLogNumber)||1e3,this.compInstance.showTimestamps=!((q=this.vConsole.option.log)==null||!q.showTimestamps)},O.onRemove=function(){X.prototype.onRemove.call(this),this.model.unbindPlugin(this.id)},O.onAddTopBar=function(F){for(var q=this,Z=["All","Log","Info","Warn","Error"],tt=[],nt=0;nt<Z.length;nt++)tt.push({name:Z[nt],data:{type:Z[nt].toLowerCase()},actived:nt===0,className:"",onClick:function(ot,ut){if(ut.type===q.compInstance.filterType)return!1;q.compInstance.filterType=ut.type}});tt[0].className="vc-actived",F(tt)},O.onAddTool=function(F){var q=this;F([{name:"Clear",global:!1,onClick:function(Z){q.model.clearPluginLog(q.id),q.vConsole.triggerEvent("clearLog")}},{name:"Top",global:!1,onClick:function(Z){q.compInstance.scrollToTop()}},{name:"Bottom",global:!1,onClick:function(Z){q.compInstance.scrollToBottom()}}])},O.onUpdateOption=function(){var F,q,Z,tt;((F=this.vConsole.option.log)==null?void 0:F.maxLogNumber)!==this.model.maxLogNumber&&(this.model.maxLogNumber=Number((Z=this.vConsole.option.log)==null?void 0:Z.maxLogNumber)||1e3),!((q=this.vConsole.option.log)==null||!q.showTimestamps)!==this.compInstance.showTimestamps&&(this.compInstance.showTimestamps=!((tt=this.vConsole.option.log)==null||!tt.showTimestamps))},G}(ii),ns=function(X){function G(){for(var F,q=arguments.length,Z=new Array(q),tt=0;tt<q;tt++)Z[tt]=arguments[tt];return(F=X.call.apply(X,[this].concat(Z))||this).onErrorHandler=void 0,F.resourceErrorHandler=void 0,F.rejectionHandler=void 0,F}(0,I.Z)(G,X);var O=G.prototype;return O.onReady=function(){X.prototype.onReady.call(this),this.bindErrors(),this.compInstance.showCmd=!0},O.onRemove=function(){X.prototype.onRemove.call(this),this.unbindErrors()},O.bindErrors=function(){_.FJ(window)&&_.mf(window.addEventListener)&&(this.catchWindowOnError(),this.catchResourceError(),this.catchUnhandledRejection())},O.unbindErrors=function(){_.FJ(window)&&_.mf(window.addEventListener)&&(window.removeEventListener("error",this.onErrorHandler),window.removeEventListener("error",this.resourceErrorHandler),window.removeEventListener("unhandledrejection",this.rejectionHandler))},O.catchWindowOnError=function(){var F=this;this.onErrorHandler=this.onErrorHandler?this.onErrorHandler:function(q){var Z=q.message;q.filename&&(Z+="\\n\\t"+q.filename.replace(location.origin,""),(q.lineno||q.colno)&&(Z+=":"+q.lineno+":"+q.colno)),Z+="\\n"+(!!q.error&&!!q.error.stack&&q.error.stack.toString()||""),F.model.addLog({type:"error",origData:[Z]},{noOrig:!0})},window.removeEventListener("error",this.onErrorHandler),window.addEventListener("error",this.onErrorHandler)},O.catchResourceError=function(){var F=this;this.resourceErrorHandler=this.resourceErrorHandler?this.resourceErrorHandler:function(q){var Z=q.target;if(["link","video","script","img","audio"].indexOf(Z.localName)>-1){var tt=Z.href||Z.src||Z.currentSrc;F.model.addLog({type:"error",origData:["GET <"+Z.localName+"> error: "+tt]},{noOrig:!0})}},window.removeEventListener("error",this.resourceErrorHandler),window.addEventListener("error",this.resourceErrorHandler,!0)},O.catchUnhandledRejection=function(){var F=this;this.rejectionHandler=this.rejectionHandler?this.rejectionHandler:function(q){var Z=q&&q.reason,tt="Uncaught (in promise) ",nt=[tt,Z];Z instanceof Error&&(nt=[tt,{name:Z.name,message:Z.message,stack:Z.stack}]),F.model.addLog({type:"error",origData:nt},{noOrig:!0})},window.removeEventListener("unhandledrejection",this.rejectionHandler),window.addEventListener("unhandledrejection",this.rejectionHandler)},G}(un),ss=function(X){function G(){return X.apply(this,arguments)||this}(0,I.Z)(G,X);var O=G.prototype;return O.onReady=function(){X.prototype.onReady.call(this),this.printSystemInfo()},O.printSystemInfo=function(){var F=navigator.userAgent,q=[],Z=F.match(/MicroMessenger\/([\d\.]+)/i),tt=Z&&Z[1]?Z[1]:null;location.host==="servicewechat.com"||console.info("[system]","Location:",location.href);var nt=F.match(/(ipod).*\s([\d_]+)/i),ot=F.match(/(ipad).*\s([\d_]+)/i),ut=F.match(/(iphone)\sos\s([\d_]+)/i),dt=F.match(/(android)\s([\d\.]+)/i),vt=F.match(/(Mac OS X)\s([\d_]+)/i);q=[],dt?q.push("Android "+dt[2]):ut?q.push("iPhone, iOS "+ut[2].replace(/_/g,".")):ot?q.push("iPad, iOS "+ot[2].replace(/_/g,".")):nt?q.push("iPod, iOS "+nt[2].replace(/_/g,".")):vt&&q.push("Mac, MacOS "+vt[2].replace(/_/g,".")),tt&&q.push("WeChat "+tt),console.info("[system]","Client:",q.length?q.join(", "):"Unknown");var ft=F.toLowerCase().match(/ nettype\/([^ ]+)/g);ft&&ft[0]&&(q=[(ft=ft[0].split("/"))[1]],console.info("[system]","Network:",q.length?q.join(", "):"Unknown")),console.info("[system]","UA:",F),setTimeout(function(){var Pt=window.performance||window.msPerformance||window.webkitPerformance;if(Pt&&Pt.timing){var xt=Pt.timing;xt.navigationStart&&console.info("[system]","navigationStart:",xt.navigationStart),xt.navigationStart&&xt.domainLookupStart&&console.info("[system]","navigation:",xt.domainLookupStart-xt.navigationStart+"ms"),xt.domainLookupEnd&&xt.domainLookupStart&&console.info("[system]","dns:",xt.domainLookupEnd-xt.domainLookupStart+"ms"),xt.connectEnd&&xt.connectStart&&(xt.connectEnd&&xt.secureConnectionStart?console.info("[system]","tcp (ssl):",xt.connectEnd-xt.connectStart+"ms ("+(xt.connectEnd-xt.secureConnectionStart)+"ms)"):console.info("[system]","tcp:",xt.connectEnd-xt.connectStart+"ms")),xt.responseStart&&xt.requestStart&&console.info("[system]","request:",xt.responseStart-xt.requestStart+"ms"),xt.responseEnd&&xt.responseStart&&console.info("[system]","response:",xt.responseEnd-xt.responseStart+"ms"),xt.domComplete&&xt.domLoading&&(xt.domContentLoadedEventStart&&xt.domLoading?console.info("[system]","domComplete (domLoaded):",xt.domComplete-xt.domLoading+"ms ("+(xt.domContentLoadedEventStart-xt.domLoading)+"ms)"):console.info("[system]","domComplete:",xt.domComplete-xt.domLoading+"ms")),xt.loadEventEnd&&xt.loadEventStart&&console.info("[system]","loadEvent:",xt.loadEventEnd-xt.loadEventStart+"ms"),xt.navigationStart&&xt.loadEventEnd&&console.info("[system]","total (DOM):",xt.loadEventEnd-xt.navigationStart+"ms ("+(xt.domComplete-xt.navigationStart)+"ms)")}},0)},G}(un),ri=__webpack_require__(3313),os=__webpack_require__(643);function dn(X,G){var O=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(O)return(O=O.call(X)).next.bind(O);if(Array.isArray(X)||(O=function(q,Z){if(q){if(typeof q=="string")return as(q,Z);var tt=Object.prototype.toString.call(q).slice(8,-1);if(tt==="Object"&&q.constructor&&(tt=q.constructor.name),tt==="Map"||tt==="Set")return Array.from(q);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return as(q,Z)}}(X))||G&&X&&typeof X.length=="number"){O&&(X=O);var F=0;return function(){return F>=X.length?{done:!0}:{done:!1,value:X[F++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function as(X,G){(G==null||G>X.length)&&(G=X.length);for(var O=0,F=new Array(G);O<G;O++)F[O]=X[O];return F}var cs=function(X,G){G===void 0&&(G={}),_.Kn(G)||(G={});var O=X?X.split("?"):[];if(O.shift(),O.length>0)for(var F,q=dn(O=O.join("?").split("&"));!(F=q()).done;){var Z=F.value.split("=");try{G[Z[0]]=decodeURIComponent(Z[1])}catch{G[Z[0]]=Z[1]}}return G},cr=function(X,G){var O="";switch(X){case"":case"text":case"json":if(_.HD(G))try{O=JSON.parse(G),O=_.hZ(O,{maxDepth:10,keyMaxLen:1e4,pretty:!0,standardJSON:!0})}catch{O=_.id(String(G),1e4)}else _.Kn(G)||_.kJ(G)?O=_.hZ(G,{maxDepth:10,keyMaxLen:1e4,pretty:!0,standardJSON:!0}):G!==void 0&&(O=Object.prototype.toString.call(G));break;default:G!==void 0&&(O=Object.prototype.toString.call(G))}return O},mn=function(X){if(!X)return null;var G=null;if(typeof X=="string")try{G=JSON.parse(X)}catch{var O=X.split("&");if(O.length===1)G=X;else{G={};for(var F,q=dn(O);!(F=q()).done;){var Z=F.value.split("=");G[Z[0]]=Z[1]===void 0?"undefined":Z[1]}}}else if(_.TW(X)){G={};for(var tt,nt=dn(X);!(tt=nt()).done;){var ot=tt.value,ut=ot[0],dt=ot[1];G[ut]=typeof dt=="string"?dt:"[object Object]"}}else _.PO(X)?G=X:G="[object "+_.zl(X)+"]";return G},fn=function(X){return X===void 0&&(X=""),X.startsWith("//")&&(X=""+new URL(window.location.href).protocol+X),X.startsWith("http")?new URL(X):new URL(X,window.location.href)},Er=function(){this.id="",this.name="",this.method="",this.url="",this.status=0,this.statusText="",this.cancelState=0,this.readyState=0,this.header=null,this.responseType="",this.requestType=void 0,this.requestHeader=null,this.response=void 0,this.responseSize=0,this.responseSizeText="",this.startTime=0,this.startTimeText="",this.endTime=0,this.costTime=0,this.getData=null,this.postData=null,this.actived=!1,this.noVConsole=!1,this.id=(0,_.QI)()},ls=function(X){function G(O){var F;return(F=X.call(this)||this)._response=void 0,new Proxy(O,G.Handler)||(0,B.Z)(F)}return(0,I.Z)(G,X),G}(Er);ls.Handler={get:function(X,G){return G==="response"?X._response:Reflect.get(X,G)},set:function(X,G,O){var F;switch(G){case"response":return X._response=cr(X.responseType,O),!0;case"url":var q=((F=O=String(O))==null?void 0:F.replace(new RegExp("[/]*$"),"").split("/").pop())||"Unknown";Reflect.set(X,"name",q);var Z=cs(O,X.getData);Reflect.set(X,"getData",Z);break;case"status":var tt=String(O)||"Unknown";Reflect.set(X,"statusText",tt);break;case"startTime":if(O&&X.endTime){var nt=X.endTime-O;Reflect.set(X,"costTime",nt)}break;case"endTime":if(O&&X.startTime){var ot=O-X.startTime;Reflect.set(X,"costTime",ot)}}return Reflect.set(X,G,O)}};var Xo=function(){function X(O,F){var q=this;this.XMLReq=void 0,this.item=void 0,this.onUpdateCallback=void 0,this.XMLReq=O,this.XMLReq.onreadystatechange=function(){q.onReadyStateChange()},this.XMLReq.onabort=function(){q.onAbort()},this.XMLReq.ontimeout=function(){q.onTimeout()},this.item=new Er,this.item.requestType="xhr",this.onUpdateCallback=F}var G=X.prototype;return G.get=function(O,F){switch(F){case"_noVConsole":return this.item.noVConsole;case"open":return this.getOpen(O);case"send":return this.getSend(O);case"setRequestHeader":return this.getSetRequestHeader(O);default:var q=Reflect.get(O,F);return typeof q=="function"?q.bind(O):q}},G.set=function(O,F,q){switch(F){case"_noVConsole":return void(this.item.noVConsole=!!q);case"onreadystatechange":return this.setOnReadyStateChange(O,F,q);case"onabort":return this.setOnAbort(O,F,q);case"ontimeout":return this.setOnTimeout(O,F,q)}return Reflect.set(O,F,q)},G.onReadyStateChange=function(){this.item.readyState=this.XMLReq.readyState,this.item.responseType=this.XMLReq.responseType,this.item.endTime=Date.now(),this.item.costTime=this.item.endTime-this.item.startTime,this.updateItemByReadyState(),this.item.response=cr(this.item.responseType,this.item.response),this.triggerUpdate()},G.onAbort=function(){this.item.cancelState=1,this.item.statusText="Abort",this.triggerUpdate()},G.onTimeout=function(){this.item.cancelState=3,this.item.statusText="Timeout",this.triggerUpdate()},G.triggerUpdate=function(){this.item.noVConsole||this.onUpdateCallback(this.item)},G.getOpen=function(O){var F=this,q=Reflect.get(O,"open");return function(){for(var Z=arguments.length,tt=new Array(Z),nt=0;nt<Z;nt++)tt[nt]=arguments[nt];var ot=tt[0],ut=tt[1];return F.item.method=ot?ot.toUpperCase():"GET",F.item.url=ut||"",F.item.name=F.item.url.replace(new RegExp("[/]*$"),"").split("/").pop()||"",F.item.getData=cs(F.item.url,{}),F.triggerUpdate(),q.apply(O,tt)}},G.getSend=function(O){var F=this,q=Reflect.get(O,"send");return function(){for(var Z=arguments.length,tt=new Array(Z),nt=0;nt<Z;nt++)tt[nt]=arguments[nt];var ot=tt[0];return F.item.postData=mn(ot),F.triggerUpdate(),q.apply(O,tt)}},G.getSetRequestHeader=function(O){var F=this,q=Reflect.get(O,"setRequestHeader");return function(){F.item.requestHeader||(F.item.requestHeader={});for(var Z=arguments.length,tt=new Array(Z),nt=0;nt<Z;nt++)tt[nt]=arguments[nt];return F.item.requestHeader[tt[0]]=tt[1],F.triggerUpdate(),q.apply(O,tt)}},G.setOnReadyStateChange=function(O,F,q){var Z=this;return Reflect.set(O,F,function(){Z.onReadyStateChange();for(var tt=arguments.length,nt=new Array(tt),ot=0;ot<tt;ot++)nt[ot]=arguments[ot];q.apply(O,nt)})},G.setOnAbort=function(O,F,q){var Z=this;return Reflect.set(O,F,function(){Z.onAbort();for(var tt=arguments.length,nt=new Array(tt),ot=0;ot<tt;ot++)nt[ot]=arguments[ot];q.apply(O,nt)})},G.setOnTimeout=function(O,F,q){var Z=this;return Reflect.set(O,F,function(){Z.onTimeout();for(var tt=arguments.length,nt=new Array(tt),ot=0;ot<tt;ot++)nt[ot]=arguments[ot];q.apply(O,nt)})},G.updateItemByReadyState=function(){switch(this.XMLReq.readyState){case 0:case 1:if(this.item.status=0,this.item.statusText="Pending",!this.item.startTime){this.item.startTime=Date.now();var O=(0,_._3)(this.item.startTime);this.item.startTimeText=O.year+"-"+O.month+"-"+O.day+" "+O.hour+":"+O.minute+":"+O.second+"."+O.millisecond}break;case 2:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.item.header={};for(var F=(this.XMLReq.getAllResponseHeaders()||"").split(`
`),q=0;q<F.length;q++){var Z=F[q];if(Z){var tt=Z.split(": "),nt=tt[0],ot=tt.slice(1).join(": ");this.item.header[nt]=ot}}break;case 3:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=(0,_.KL)(this.item.responseSize));break;case 4:this.item.status=this.XMLReq.status||this.item.status||0,this.item.statusText=String(this.item.status),this.item.endTime=Date.now(),this.item.costTime=this.item.endTime-(this.item.startTime||this.item.endTime),this.item.response=this.XMLReq.response,this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=(0,_.KL)(this.item.responseSize));break;default:this.item.status=this.XMLReq.status,this.item.statusText="Unknown"}},X}(),pn=function(){function X(){}return X.create=function(G){return new Proxy(XMLHttpRequest,{construct:function(O){var F=new O;return new Proxy(F,new Xo(F,G))}})},X}();function _n(X,G){var O=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(O)return(O=O.call(X)).next.bind(O);if(Array.isArray(X)||(O=function(q,Z){if(q){if(typeof q=="string")return hs(q,Z);var tt=Object.prototype.toString.call(q).slice(8,-1);if(tt==="Object"&&q.constructor&&(tt=q.constructor.name),tt==="Map"||tt==="Set")return Array.from(q);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return hs(q,Z)}}(X))||G&&X&&typeof X.length=="number"){O&&(X=O);var F=0;return function(){return F>=X.length?{done:!0}:{done:!1,value:X[F++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(X,G){(G==null||G>X.length)&&(G=X.length);for(var O=0,F=new Array(G);O<G;O++)F[O]=X[O];return F}pn.origXMLHttpRequest=XMLHttpRequest;var Yo=function(){function X(O,F,q){this.resp=void 0,this.item=void 0,this.onUpdateCallback=void 0,this.resp=O,this.item=F,this.onUpdateCallback=q,this.mockReader()}var G=X.prototype;return G.set=function(O,F,q){return Reflect.set(O,F,q)},G.get=function(O,F){var q=this,Z=Reflect.get(O,F);switch(F){case"arrayBuffer":case"blob":case"formData":case"json":case"text":return function(){return q.item.responseType=F.toLowerCase(),Z.apply(O).then(function(tt){return q.item.response=cr(q.item.responseType,tt),q.onUpdateCallback(q.item),tt})}}return typeof Z=="function"?Z.bind(O):Z},G.mockReader=function(){var O,F=this;if(this.resp.body&&typeof this.resp.body.getReader=="function"){var q=this.resp.body.getReader;this.resp.body.getReader=function(){var Z=q.apply(F.resp.body);if(F.item.readyState===4)return Z;var tt=Z.read,nt=Z.cancel;return F.item.responseType="arraybuffer",Z.read=function(){return tt.apply(Z).then(function(ot){if(O){var ut=new Uint8Array(O.length+ot.value.length);ut.set(O),ut.set(ot.value,O.length),O=ut}else O=new Uint8Array(ot.value);return F.item.endTime=Date.now(),F.item.costTime=F.item.endTime-(F.item.startTime||F.item.endTime),F.item.readyState=ot.done?4:3,F.item.statusText=ot.done?String(F.item.status):"Loading",F.item.responseSize=O.length,F.item.responseSizeText=_.KL(F.item.responseSize),ot.done&&(F.item.response=cr(F.item.responseType,O)),F.onUpdateCallback(F.item),ot})},Z.cancel=function(){F.item.cancelState=2,F.item.statusText="Cancel",F.item.endTime=Date.now(),F.item.costTime=F.item.endTime-(F.item.startTime||F.item.endTime),F.item.response=cr(F.item.responseType,O),F.onUpdateCallback(F.item);for(var ot=arguments.length,ut=new Array(ot),dt=0;dt<ot;dt++)ut[dt]=arguments[dt];return nt.apply(Z,ut)},Z}}},X}(),Ko=function(){function X(O){this.onUpdateCallback=void 0,this.onUpdateCallback=O}var G=X.prototype;return G.apply=function(O,F,q){var Z=this,tt=q[0],nt=q[1],ot=new Er;return this.beforeFetch(ot,tt,nt),O.apply(window,q).then(this.afterFetch(ot)).catch(function(ut){throw ot.endTime=Date.now(),ot.costTime=ot.endTime-(ot.startTime||ot.endTime),Z.onUpdateCallback(ot),ut})},G.beforeFetch=function(O,F,q){var Z,tt="GET",nt=null;if(_.HD(F)?(tt=(q==null?void 0:q.method)||"GET",Z=fn(F),nt=(q==null?void 0:q.headers)||null):(tt=F.method||"GET",Z=fn(F.url),nt=F.headers),O.method=tt,O.requestType="fetch",O.requestHeader=nt,O.url=Z.toString(),O.name=(Z.pathname.split("/").pop()||"")+Z.search,O.status=0,O.statusText="Pending",O.readyState=1,!O.startTime){O.startTime=Date.now();var ot=_._3(O.startTime);O.startTimeText=ot.year+"-"+ot.month+"-"+ot.day+" "+ot.hour+":"+ot.minute+":"+ot.second+"."+ot.millisecond}if(Object.prototype.toString.call(nt)==="[object Headers]"){O.requestHeader={};for(var ut,dt=_n(nt);!(ut=dt()).done;){var vt=ut.value,ft=vt[0],Pt=vt[1];O.requestHeader[ft]=Pt}}else O.requestHeader=nt;if(Z.search&&Z.searchParams){O.getData={};for(var xt,It=_n(Z.searchParams);!(xt=It()).done;){var Dt=xt.value,Nt=Dt[0],Ut=Dt[1];O.getData[Nt]=Ut}}q!=null&&q.body&&(O.postData=mn(q.body)),this.onUpdateCallback(O)},G.afterFetch=function(O){var F=this;return function(q){O.endTime=Date.now(),O.costTime=O.endTime-(O.startTime||O.endTime),O.status=q.status,O.statusText=String(q.status);var Z=!1;O.header={};for(var tt,nt=_n(q.headers);!(tt=nt()).done;){var ot=tt.value,ut=ot[0],dt=ot[1];O.header[ut]=dt,Z=dt.toLowerCase().indexOf("chunked")>-1||Z}return Z?O.readyState=3:(O.readyState=4,F.handleResponseBody(q.clone(),O).then(function(vt){O.responseSize=typeof vt=="string"?vt.length:vt.byteLength,O.responseSizeText=_.KL(O.responseSize),O.response=cr(O.responseType,vt),F.onUpdateCallback(O)})),F.onUpdateCallback(O),new Proxy(q,new Yo(q,O,F.onUpdateCallback))}},G.handleResponseBody=function(O,F){var q=O.headers.get("content-type");return q&&q.includes("application/json")?(F.responseType="json",O.text()):q&&(q.includes("text/html")||q.includes("text/plain"))?(F.responseType="text",O.text()):(F.responseType="arraybuffer",O.arrayBuffer())},X}(),vn=function(){function X(){}return X.create=function(G){return new Proxy(fetch,new Ko(G))},X}();function Zo(X,G){var O=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(O)return(O=O.call(X)).next.bind(O);if(Array.isArray(X)||(O=function(q,Z){if(q){if(typeof q=="string")return us(q,Z);var tt=Object.prototype.toString.call(q).slice(8,-1);if(tt==="Object"&&q.constructor&&(tt=q.constructor.name),tt==="Map"||tt==="Set")return Array.from(q);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return us(q,Z)}}(X))||G&&X&&typeof X.length=="number"){O&&(X=O);var F=0;return function(){return F>=X.length?{done:!0}:{done:!1,value:X[F++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function us(X,G){(G==null||G>X.length)&&(G=X.length);for(var O=0,F=new Array(G);O<G;O++)F[O]=X[O];return F}vn.origFetch=fetch;var Jo=function(X){return X instanceof Blob?X.type:X instanceof FormData?"multipart/form-data":X instanceof URLSearchParams?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8"},Qo=function(){function X(G){this.onUpdateCallback=void 0,this.onUpdateCallback=G}return X.prototype.apply=function(G,O,F){var q=F[0],Z=F[1],tt=new Er,nt=fn(q);if(tt.method="POST",tt.url=q,tt.name=(nt.pathname.split("/").pop()||"")+nt.search,tt.requestType="ping",tt.requestHeader={"Content-Type":Jo(Z)},tt.status=0,tt.statusText="Pending",nt.search&&nt.searchParams){tt.getData={};for(var ot,ut=Zo(nt.searchParams);!(ot=ut()).done;){var dt=ot.value,vt=dt[0],ft=dt[1];tt.getData[vt]=ft}}tt.postData=mn(Z),tt.startTime||(tt.startTime=Date.now()),this.onUpdateCallback(tt);var Pt=G.apply(O,F);return Pt?(tt.endTime=Date.now(),tt.costTime=tt.endTime-(tt.startTime||tt.endTime),tt.status=0,tt.statusText="Sent",tt.readyState=4):(tt.status=500,tt.statusText="Unknown"),this.onUpdateCallback(tt),Pt},X}(),gn=function(){function X(){}return X.create=function(G){return new Proxy(navigator.sendBeacon,new Qo(G))},X}();gn.origSendBeacon=navigator.sendBeacon;var Ki=(0,ri.fZ)({}),$r=function(X){function G(){var F;return(F=X.call(this)||this).maxNetworkNumber=1e3,F.ignoreUrlRegExp=void 0,F.itemCounter=0,F.mockXHR(),F.mockFetch(),F.mockSendBeacon(),F}(0,I.Z)(G,X);var O=G.prototype;return O.unMock=function(){window.hasOwnProperty("XMLHttpRequest")&&(window.XMLHttpRequest=pn.origXMLHttpRequest),window.hasOwnProperty("fetch")&&(window.fetch=vn.origFetch),window.navigator.sendBeacon&&(window.navigator.sendBeacon=gn.origSendBeacon)},O.clearLog=function(){Ki.set({})},O.updateRequest=function(F,q){var Z,tt=q.url;if(!tt||(Z=this.ignoreUrlRegExp)==null||!Z.test(tt)){var nt=(0,ri.U2)(Ki),ot=!!nt[F];if(ot){var ut=nt[F];for(var dt in q)ut[dt]=q[dt];q=ut}Ki.update(function(vt){return vt[F]=q,vt}),ot||(bt.x.updateTime(),this.limitListLength())}},O.mockXHR=function(){var F=this;window.hasOwnProperty("XMLHttpRequest")&&(window.XMLHttpRequest=pn.create(function(q){F.updateRequest(q.id,q)}))},O.mockFetch=function(){var F=this;window.hasOwnProperty("fetch")&&(window.fetch=vn.create(function(q){F.updateRequest(q.id,q)}))},O.mockSendBeacon=function(){var F,q,Z=this;(F=window)!=null&&(q=F.navigator)!=null&&q.sendBeacon&&(window.navigator.sendBeacon=gn.create(function(tt){Z.updateRequest(tt.id,tt)}))},O.limitListLength=function(){var F=this;if(this.itemCounter++,this.itemCounter%10==0){this.itemCounter=0;var q=(0,ri.U2)(Ki),Z=Object.keys(q);Z.length>this.maxNetworkNumber-10&&Ki.update(function(tt){for(var nt=Z.splice(0,Z.length-F.maxNetworkNumber+10),ot=0;ot<nt.length;ot++)tt[nt[ot]]=void 0,delete tt[nt[ot]];return tt})}},G}(os.N),kr=__webpack_require__(8747),wr={};kr.Z&&kr.Z.locals&&(wr.locals=kr.Z.locals);var yn,xn=0,er={};er.styleTagTransform=rt(),er.setAttributes=K(),er.insert=W().bind(null,"head"),er.domAPI=U(),er.insertStyleElement=et(),wr.use=function(X){return er.options=X||{},xn++||(yn=D()(kr.Z,er)),wr},wr.unuse=function(){xn>0&&!--xn&&(yn(),yn=null)};var ds=wr;function ms(X,G,O){var F=X.slice();return F[11]=G[O][0],F[12]=G[O][1],F}function fs(X,G,O){var F=X.slice();return F[11]=G[O][0],F[12]=G[O][1],F}function ps(X,G,O){var F=X.slice();return F[11]=G[O][0],F[12]=G[O][1],F}function _s(X,G,O){var F=X.slice();return F[11]=G[O][0],F[12]=G[O][1],F}function vs(X){var G,O,F;return{c:function(){G=(0,C.fLW)("("),O=(0,C.fLW)(X[0]),F=(0,C.fLW)(")")},m:function(q,Z){(0,C.$Tr)(q,G,Z),(0,C.$Tr)(q,O,Z),(0,C.$Tr)(q,F,Z)},p:function(q,Z){1&Z&&(0,C.rTO)(O,q[0])},d:function(q){q&&(0,C.ogt)(G),q&&(0,C.ogt)(O),q&&(0,C.ogt)(F)}}}function ta(X){var G,O,F,q,Z,tt,nt=X[0]>0&&vs(X);return{c:function(){G=(0,C.bGB)("dl"),O=(0,C.bGB)("dd"),F=(0,C.fLW)("Name "),nt&&nt.c(),(q=(0,C.bGB)("dd")).textContent="Method",(Z=(0,C.bGB)("dd")).textContent="Status",(tt=(0,C.bGB)("dd")).textContent="Time",(0,C.Ljt)(O,"class","vc-table-col vc-table-col-4"),(0,C.Ljt)(q,"class","vc-table-col"),(0,C.Ljt)(Z,"class","vc-table-col"),(0,C.Ljt)(tt,"class","vc-table-col"),(0,C.Ljt)(G,"class","vc-table-row")},m:function(ot,ut){(0,C.$Tr)(ot,G,ut),(0,C.R3I)(G,O),(0,C.R3I)(O,F),nt&&nt.m(O,null),(0,C.R3I)(G,q),(0,C.R3I)(G,Z),(0,C.R3I)(G,tt)},p:function(ot,ut){ot[0]>0?nt?nt.p(ot,ut):((nt=vs(ot)).c(),nt.m(O,null)):nt&&(nt.d(1),nt=null)},d:function(ot){ot&&(0,C.ogt)(G),nt&&nt.d()}}}function ea(X){var G;return{c:function(){(G=(0,C.bGB)("div")).textContent="Empty",(0,C.Ljt)(G,"slot","empty"),(0,C.Ljt)(G,"class","vc-plugin-empty")},m:function(O,F){(0,C.$Tr)(O,G,F)},p:C.ZTd,d:function(O){O&&(0,C.ogt)(G)}}}function gs(X){var G,O,F,q,Z,tt,nt,ot;tt=new Ze({props:{content:X[10].requestHeader}});for(var ut=Object.entries(X[10].requestHeader),dt=[],vt=0;vt<ut.length;vt+=1)dt[vt]=ys(_s(X,ut,vt));return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("dl"),F=(0,C.bGB)("dt"),q=(0,C.fLW)(`Request Headers
                `),Z=(0,C.bGB)("i"),(0,C.YCL)(tt.$$.fragment),nt=(0,C.DhX)();for(var ft=0;ft<dt.length;ft+=1)dt[ft].c();(0,C.Ljt)(Z,"class","vc-table-row-icon"),(0,C.Ljt)(F,"class","vc-table-col vc-table-col-title"),(0,C.Ljt)(O,"class","vc-table-row vc-left-border")},m:function(ft,Pt){(0,C.$Tr)(ft,G,Pt),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(F,q),(0,C.R3I)(F,Z),(0,C.yef)(tt,Z,null),(0,C.R3I)(G,nt);for(var xt=0;xt<dt.length;xt+=1)dt[xt].m(G,null);ot=!0},p:function(ft,Pt){var xt={};if(1024&Pt&&(xt.content=ft[10].requestHeader),tt.$set(xt),1040&Pt){var It;for(ut=Object.entries(ft[10].requestHeader),It=0;It<ut.length;It+=1){var Dt=_s(ft,ut,It);dt[It]?dt[It].p(Dt,Pt):(dt[It]=ys(Dt),dt[It].c(),dt[It].m(G,null))}for(;It<dt.length;It+=1)dt[It].d(1);dt.length=ut.length}},i:function(ft){ot||((0,C.Ui)(tt.$$.fragment,ft),ot=!0)},o:function(ft){(0,C.etI)(tt.$$.fragment,ft),ot=!1},d:function(ft){ft&&(0,C.ogt)(G),(0,C.vpE)(tt),(0,C.RMB)(dt,ft)}}}function ys(X){var G,O,F,q,Z,tt,nt,ot=X[11]+"",ut=X[4](X[12])+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("div"),F=(0,C.fLW)(ot),q=(0,C.DhX)(),Z=(0,C.bGB)("div"),tt=(0,C.fLW)(ut),nt=(0,C.DhX)(),(0,C.Ljt)(O,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(Z,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(G,"class","vc-table-row vc-left-border vc-small")},m:function(dt,vt){(0,C.$Tr)(dt,G,vt),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(G,q),(0,C.R3I)(G,Z),(0,C.R3I)(Z,tt),(0,C.R3I)(G,nt)},p:function(dt,vt){1024&vt&&ot!==(ot=dt[11]+"")&&(0,C.rTO)(F,ot),1024&vt&&ut!==(ut=dt[4](dt[12])+"")&&(0,C.rTO)(tt,ut)},d:function(dt){dt&&(0,C.ogt)(G)}}}function xs(X){var G,O,F,q,Z,tt,nt,ot;tt=new Ze({props:{content:X[10].getData}});for(var ut=Object.entries(X[10].getData),dt=[],vt=0;vt<ut.length;vt+=1)dt[vt]=bs(ps(X,ut,vt));return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("dl"),F=(0,C.bGB)("dt"),q=(0,C.fLW)(`Query String Parameters
                `),Z=(0,C.bGB)("i"),(0,C.YCL)(tt.$$.fragment),nt=(0,C.DhX)();for(var ft=0;ft<dt.length;ft+=1)dt[ft].c();(0,C.Ljt)(Z,"class","vc-table-row-icon"),(0,C.Ljt)(F,"class","vc-table-col vc-table-col-title"),(0,C.Ljt)(O,"class","vc-table-row vc-left-border")},m:function(ft,Pt){(0,C.$Tr)(ft,G,Pt),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(F,q),(0,C.R3I)(F,Z),(0,C.yef)(tt,Z,null),(0,C.R3I)(G,nt);for(var xt=0;xt<dt.length;xt+=1)dt[xt].m(G,null);ot=!0},p:function(ft,Pt){var xt={};if(1024&Pt&&(xt.content=ft[10].getData),tt.$set(xt),1040&Pt){var It;for(ut=Object.entries(ft[10].getData),It=0;It<ut.length;It+=1){var Dt=ps(ft,ut,It);dt[It]?dt[It].p(Dt,Pt):(dt[It]=bs(Dt),dt[It].c(),dt[It].m(G,null))}for(;It<dt.length;It+=1)dt[It].d(1);dt.length=ut.length}},i:function(ft){ot||((0,C.Ui)(tt.$$.fragment,ft),ot=!0)},o:function(ft){(0,C.etI)(tt.$$.fragment,ft),ot=!1},d:function(ft){ft&&(0,C.ogt)(G),(0,C.vpE)(tt),(0,C.RMB)(dt,ft)}}}function bs(X){var G,O,F,q,Z,tt,nt,ot=X[11]+"",ut=X[4](X[12])+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("div"),F=(0,C.fLW)(ot),q=(0,C.DhX)(),Z=(0,C.bGB)("div"),tt=(0,C.fLW)(ut),nt=(0,C.DhX)(),(0,C.Ljt)(O,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(Z,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(G,"class","vc-table-row vc-left-border vc-small")},m:function(dt,vt){(0,C.$Tr)(dt,G,vt),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(G,q),(0,C.R3I)(G,Z),(0,C.R3I)(Z,tt),(0,C.R3I)(G,nt)},p:function(dt,vt){1024&vt&&ot!==(ot=dt[11]+"")&&(0,C.rTO)(F,ot),1024&vt&&ut!==(ut=dt[4](dt[12])+"")&&(0,C.rTO)(tt,ut)},d:function(dt){dt&&(0,C.ogt)(G)}}}function As(X){var G,O,F,q,Z,tt,nt,ot;function ut(ft,Pt){return typeof ft[10].postData=="string"?ra:ia}tt=new Ze({props:{content:X[10].postData}});var dt=ut(X),vt=dt(X);return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("dl"),F=(0,C.bGB)("dt"),q=(0,C.fLW)(`Request Payload
                `),Z=(0,C.bGB)("i"),(0,C.YCL)(tt.$$.fragment),nt=(0,C.DhX)(),vt.c(),(0,C.Ljt)(Z,"class","vc-table-row-icon"),(0,C.Ljt)(F,"class","vc-table-col vc-table-col-title"),(0,C.Ljt)(O,"class","vc-table-row vc-left-border")},m:function(ft,Pt){(0,C.$Tr)(ft,G,Pt),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(F,q),(0,C.R3I)(F,Z),(0,C.yef)(tt,Z,null),(0,C.R3I)(G,nt),vt.m(G,null),ot=!0},p:function(ft,Pt){var xt={};1024&Pt&&(xt.content=ft[10].postData),tt.$set(xt),dt===(dt=ut(ft))&&vt?vt.p(ft,Pt):(vt.d(1),(vt=dt(ft))&&(vt.c(),vt.m(G,null)))},i:function(ft){ot||((0,C.Ui)(tt.$$.fragment,ft),ot=!0)},o:function(ft){(0,C.etI)(tt.$$.fragment,ft),ot=!1},d:function(ft){ft&&(0,C.ogt)(G),(0,C.vpE)(tt),vt.d()}}}function ia(X){for(var G,O=Object.entries(X[10].postData),F=[],q=0;q<O.length;q+=1)F[q]=Ts(fs(X,O,q));return{c:function(){for(var Z=0;Z<F.length;Z+=1)F[Z].c();G=(0,C.cSb)()},m:function(Z,tt){for(var nt=0;nt<F.length;nt+=1)F[nt].m(Z,tt);(0,C.$Tr)(Z,G,tt)},p:function(Z,tt){if(1040&tt){var nt;for(O=Object.entries(Z[10].postData),nt=0;nt<O.length;nt+=1){var ot=fs(Z,O,nt);F[nt]?F[nt].p(ot,tt):(F[nt]=Ts(ot),F[nt].c(),F[nt].m(G.parentNode,G))}for(;nt<F.length;nt+=1)F[nt].d(1);F.length=O.length}},d:function(Z){(0,C.RMB)(F,Z),Z&&(0,C.ogt)(G)}}}function ra(X){var G,O,F,q=X[10].postData+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("pre"),F=(0,C.fLW)(q),(0,C.Ljt)(O,"class","vc-table-col vc-table-col-value vc-max-height-line"),(0,C.Ljt)(O,"data-scrollable","1"),(0,C.Ljt)(G,"class","vc-table-row vc-left-border vc-small")},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),(0,C.R3I)(G,O),(0,C.R3I)(O,F)},p:function(Z,tt){1024&tt&&q!==(q=Z[10].postData+"")&&(0,C.rTO)(F,q)},d:function(Z){Z&&(0,C.ogt)(G)}}}function Ts(X){var G,O,F,q,Z,tt,nt,ot=X[11]+"",ut=X[4](X[12])+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("div"),F=(0,C.fLW)(ot),q=(0,C.DhX)(),Z=(0,C.bGB)("div"),tt=(0,C.fLW)(ut),nt=(0,C.DhX)(),(0,C.Ljt)(O,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(Z,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(Z,"data-scrollable","1"),(0,C.Ljt)(G,"class","vc-table-row vc-left-border vc-small")},m:function(dt,vt){(0,C.$Tr)(dt,G,vt),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(G,q),(0,C.R3I)(G,Z),(0,C.R3I)(Z,tt),(0,C.R3I)(G,nt)},p:function(dt,vt){1024&vt&&ot!==(ot=dt[11]+"")&&(0,C.rTO)(F,ot),1024&vt&&ut!==(ut=dt[4](dt[12])+"")&&(0,C.rTO)(tt,ut)},d:function(dt){dt&&(0,C.ogt)(G)}}}function Es(X){var G,O,F,q,Z,tt,nt,ot;tt=new Ze({props:{content:X[10].header}});for(var ut=Object.entries(X[10].header),dt=[],vt=0;vt<ut.length;vt+=1)dt[vt]=ws(ms(X,ut,vt));return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("dl"),F=(0,C.bGB)("dt"),q=(0,C.fLW)(`Response Headers
                `),Z=(0,C.bGB)("i"),(0,C.YCL)(tt.$$.fragment),nt=(0,C.DhX)();for(var ft=0;ft<dt.length;ft+=1)dt[ft].c();(0,C.Ljt)(Z,"class","vc-table-row-icon"),(0,C.Ljt)(F,"class","vc-table-col vc-table-col-title"),(0,C.Ljt)(O,"class","vc-table-row vc-left-border")},m:function(ft,Pt){(0,C.$Tr)(ft,G,Pt),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(F,q),(0,C.R3I)(F,Z),(0,C.yef)(tt,Z,null),(0,C.R3I)(G,nt);for(var xt=0;xt<dt.length;xt+=1)dt[xt].m(G,null);ot=!0},p:function(ft,Pt){var xt={};if(1024&Pt&&(xt.content=ft[10].header),tt.$set(xt),1040&Pt){var It;for(ut=Object.entries(ft[10].header),It=0;It<ut.length;It+=1){var Dt=ms(ft,ut,It);dt[It]?dt[It].p(Dt,Pt):(dt[It]=ws(Dt),dt[It].c(),dt[It].m(G,null))}for(;It<dt.length;It+=1)dt[It].d(1);dt.length=ut.length}},i:function(ft){ot||((0,C.Ui)(tt.$$.fragment,ft),ot=!0)},o:function(ft){(0,C.etI)(tt.$$.fragment,ft),ot=!1},d:function(ft){ft&&(0,C.ogt)(G),(0,C.vpE)(tt),(0,C.RMB)(dt,ft)}}}function ws(X){var G,O,F,q,Z,tt,nt,ot=X[11]+"",ut=X[4](X[12])+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("div"),F=(0,C.fLW)(ot),q=(0,C.DhX)(),Z=(0,C.bGB)("div"),tt=(0,C.fLW)(ut),nt=(0,C.DhX)(),(0,C.Ljt)(O,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(Z,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(G,"class","vc-table-row vc-left-border vc-small")},m:function(dt,vt){(0,C.$Tr)(dt,G,vt),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(G,q),(0,C.R3I)(G,Z),(0,C.R3I)(Z,tt),(0,C.R3I)(G,nt)},p:function(dt,vt){1024&vt&&ot!==(ot=dt[11]+"")&&(0,C.rTO)(F,ot),1024&vt&&ut!==(ut=dt[4](dt[12])+"")&&(0,C.rTO)(tt,ut)},d:function(dt){dt&&(0,C.ogt)(G)}}}function Ss(X){var G,O,F,q,Z,tt=X[10].responseSizeText+"";return{c:function(){G=(0,C.bGB)("div"),(O=(0,C.bGB)("div")).textContent="Size",F=(0,C.DhX)(),q=(0,C.bGB)("div"),Z=(0,C.fLW)(tt),(0,C.Ljt)(O,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(q,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(G,"class","vc-table-row vc-left-border vc-small")},m:function(nt,ot){(0,C.$Tr)(nt,G,ot),(0,C.R3I)(G,O),(0,C.R3I)(G,F),(0,C.R3I)(G,q),(0,C.R3I)(q,Z)},p:function(nt,ot){1024&ot&&tt!==(tt=nt[10].responseSizeText+"")&&(0,C.rTO)(Z,tt)},d:function(nt){nt&&(0,C.ogt)(G)}}}function na(X){var G,O,F,q,Z,tt,nt,ot,ut,dt,vt,ft,Pt,xt,It,Dt,Nt,Ut,Ht,de,te,Pe,Ce,Ie,re,oe,Me,Xe,Re,Be,ye,qt,Yt,Oe,zt,ee,we,Qt,Se,Ge,We,Je,Fe,bi,Qe,Ai,je,Si,Ye,Fi,ji,hr,Cr,Xt,Ae,xe,Te,Le,ke,Pi,Ti,Ei,qe,_i,Hi,vi,Tn,Js,zr=X[10].name+"",jr=X[10].method+"",Hr=X[10].statusText+"",Wr=X[10].costTime+"",qr=X[10].url+"",Xr=X[10].method+"",Yr=X[10].requestType+"",Kr=X[10].status+"",Zr=X[10].startTimeText+"",Jr=(X[10].response||"")+"";function Oa(){return X[7](X[10])}Ut=new Ze({props:{handler:X[3],content:X[10]}});var oi=X[10].requestHeader!==null&&gs(X),ai=X[10].getData!==null&&xs(X),ci=X[10].postData!==null&&As(X),li=X[10].header!==null&&Es(X);ke=new Ze({props:{content:X[10].response}});var Ci=X[10].responseSize>0&&Ss(X);return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("dl"),F=(0,C.bGB)("dd"),q=(0,C.fLW)(zr),Z=(0,C.bGB)("dd"),tt=(0,C.fLW)(jr),nt=(0,C.bGB)("dd"),ot=(0,C.fLW)(Hr),ut=(0,C.bGB)("dd"),dt=(0,C.fLW)(Wr),vt=(0,C.DhX)(),ft=(0,C.bGB)("div"),Pt=(0,C.bGB)("div"),xt=(0,C.bGB)("dl"),It=(0,C.bGB)("dt"),Dt=(0,C.fLW)(`General
                `),Nt=(0,C.bGB)("i"),(0,C.YCL)(Ut.$$.fragment),Ht=(0,C.DhX)(),de=(0,C.bGB)("div"),(te=(0,C.bGB)("div")).textContent="URL",Pe=(0,C.DhX)(),Ce=(0,C.bGB)("div"),Ie=(0,C.fLW)(qr),re=(0,C.DhX)(),oe=(0,C.bGB)("div"),(Me=(0,C.bGB)("div")).textContent="Method",Xe=(0,C.DhX)(),Re=(0,C.bGB)("div"),Be=(0,C.fLW)(Xr),ye=(0,C.DhX)(),qt=(0,C.bGB)("div"),(Yt=(0,C.bGB)("div")).textContent="Request Type",Oe=(0,C.DhX)(),zt=(0,C.bGB)("div"),ee=(0,C.fLW)(Yr),we=(0,C.DhX)(),Qt=(0,C.bGB)("div"),(Se=(0,C.bGB)("div")).textContent="HTTP Status",Ge=(0,C.DhX)(),We=(0,C.bGB)("div"),Je=(0,C.fLW)(Kr),Fe=(0,C.DhX)(),bi=(0,C.bGB)("div"),(Qe=(0,C.bGB)("div")).textContent="Start Time",Ai=(0,C.DhX)(),je=(0,C.bGB)("div"),Si=(0,C.fLW)(Zr),Ye=(0,C.DhX)(),oi&&oi.c(),Fi=(0,C.DhX)(),ai&&ai.c(),ji=(0,C.DhX)(),ci&&ci.c(),hr=(0,C.DhX)(),li&&li.c(),Cr=(0,C.DhX)(),Xt=(0,C.bGB)("div"),Ae=(0,C.bGB)("dl"),xe=(0,C.bGB)("dt"),Te=(0,C.fLW)(`Response
                `),Le=(0,C.bGB)("i"),(0,C.YCL)(ke.$$.fragment),Pi=(0,C.DhX)(),Ci&&Ci.c(),Ti=(0,C.DhX)(),Ei=(0,C.bGB)("div"),qe=(0,C.bGB)("pre"),_i=(0,C.fLW)(Jr),(0,C.Ljt)(F,"class","vc-table-col vc-table-col-4"),(0,C.Ljt)(Z,"class","vc-table-col"),(0,C.Ljt)(nt,"class","vc-table-col"),(0,C.Ljt)(ut,"class","vc-table-col"),(0,C.Ljt)(O,"class","vc-table-row vc-group-preview"),(0,C.VHj)(O,"vc-table-row-error",X[10].status>=400),(0,C.Ljt)(Nt,"class","vc-table-row-icon"),(0,C.Ljt)(It,"class","vc-table-col vc-table-col-title"),(0,C.Ljt)(xt,"class","vc-table-row vc-left-border"),(0,C.Ljt)(te,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(Ce,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(de,"class","vc-table-row vc-left-border vc-small"),(0,C.Ljt)(Me,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(Re,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(oe,"class","vc-table-row vc-left-border vc-small"),(0,C.Ljt)(Yt,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(zt,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(qt,"class","vc-table-row vc-left-border vc-small"),(0,C.Ljt)(Se,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(We,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(Qt,"class","vc-table-row vc-left-border vc-small"),(0,C.Ljt)(Qe,"class","vc-table-col vc-table-col-2"),(0,C.Ljt)(je,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,C.Ljt)(bi,"class","vc-table-row vc-left-border vc-small"),(0,C.Ljt)(Le,"class","vc-table-row-icon"),(0,C.Ljt)(xe,"class","vc-table-col vc-table-col-title"),(0,C.Ljt)(Ae,"class","vc-table-row vc-left-border"),(0,C.Ljt)(qe,"class","vc-table-col vc-max-height vc-min-height"),(0,C.Ljt)(qe,"data-scrollable","1"),(0,C.Ljt)(Ei,"class","vc-table-row vc-left-border vc-small"),(0,C.Ljt)(ft,"class","vc-group-detail"),(0,C.Ljt)(G,"slot","item"),(0,C.Ljt)(G,"class","vc-group"),(0,C.Ljt)(G,"id",Hi=X[10].id),(0,C.VHj)(G,"vc-actived",X[10].actived)},m:function(Mi,Ne){(0,C.$Tr)(Mi,G,Ne),(0,C.R3I)(G,O),(0,C.R3I)(O,F),(0,C.R3I)(F,q),(0,C.R3I)(O,Z),(0,C.R3I)(Z,tt),(0,C.R3I)(O,nt),(0,C.R3I)(nt,ot),(0,C.R3I)(O,ut),(0,C.R3I)(ut,dt),(0,C.R3I)(G,vt),(0,C.R3I)(G,ft),(0,C.R3I)(ft,Pt),(0,C.R3I)(Pt,xt),(0,C.R3I)(xt,It),(0,C.R3I)(It,Dt),(0,C.R3I)(It,Nt),(0,C.yef)(Ut,Nt,null),(0,C.R3I)(Pt,Ht),(0,C.R3I)(Pt,de),(0,C.R3I)(de,te),(0,C.R3I)(de,Pe),(0,C.R3I)(de,Ce),(0,C.R3I)(Ce,Ie),(0,C.R3I)(Pt,re),(0,C.R3I)(Pt,oe),(0,C.R3I)(oe,Me),(0,C.R3I)(oe,Xe),(0,C.R3I)(oe,Re),(0,C.R3I)(Re,Be),(0,C.R3I)(Pt,ye),(0,C.R3I)(Pt,qt),(0,C.R3I)(qt,Yt),(0,C.R3I)(qt,Oe),(0,C.R3I)(qt,zt),(0,C.R3I)(zt,ee),(0,C.R3I)(Pt,we),(0,C.R3I)(Pt,Qt),(0,C.R3I)(Qt,Se),(0,C.R3I)(Qt,Ge),(0,C.R3I)(Qt,We),(0,C.R3I)(We,Je),(0,C.R3I)(Pt,Fe),(0,C.R3I)(Pt,bi),(0,C.R3I)(bi,Qe),(0,C.R3I)(bi,Ai),(0,C.R3I)(bi,je),(0,C.R3I)(je,Si),(0,C.R3I)(ft,Ye),oi&&oi.m(ft,null),(0,C.R3I)(ft,Fi),ai&&ai.m(ft,null),(0,C.R3I)(ft,ji),ci&&ci.m(ft,null),(0,C.R3I)(ft,hr),li&&li.m(ft,null),(0,C.R3I)(ft,Cr),(0,C.R3I)(ft,Xt),(0,C.R3I)(Xt,Ae),(0,C.R3I)(Ae,xe),(0,C.R3I)(xe,Te),(0,C.R3I)(xe,Le),(0,C.yef)(ke,Le,null),(0,C.R3I)(Xt,Pi),Ci&&Ci.m(Xt,null),(0,C.R3I)(Xt,Ti),(0,C.R3I)(Xt,Ei),(0,C.R3I)(Ei,qe),(0,C.R3I)(qe,_i),vi=!0,Tn||(Js=(0,C.oLt)(O,"click",Oa),Tn=!0)},p:function(Mi,Ne){X=Mi,(!vi||1024&Ne)&&zr!==(zr=X[10].name+"")&&(0,C.rTO)(q,zr),(!vi||1024&Ne)&&jr!==(jr=X[10].method+"")&&(0,C.rTO)(tt,jr),(!vi||1024&Ne)&&Hr!==(Hr=X[10].statusText+"")&&(0,C.rTO)(ot,Hr),(!vi||1024&Ne)&&Wr!==(Wr=X[10].costTime+"")&&(0,C.rTO)(dt,Wr),1024&Ne&&(0,C.VHj)(O,"vc-table-row-error",X[10].status>=400);var Qs={};1024&Ne&&(Qs.content=X[10]),Ut.$set(Qs),(!vi||1024&Ne)&&qr!==(qr=X[10].url+"")&&(0,C.rTO)(Ie,qr),(!vi||1024&Ne)&&Xr!==(Xr=X[10].method+"")&&(0,C.rTO)(Be,Xr),(!vi||1024&Ne)&&Yr!==(Yr=X[10].requestType+"")&&(0,C.rTO)(ee,Yr),(!vi||1024&Ne)&&Kr!==(Kr=X[10].status+"")&&(0,C.rTO)(Je,Kr),(!vi||1024&Ne)&&Zr!==(Zr=X[10].startTimeText+"")&&(0,C.rTO)(Si,Zr),X[10].requestHeader!==null?oi?(oi.p(X,Ne),1024&Ne&&(0,C.Ui)(oi,1)):((oi=gs(X)).c(),(0,C.Ui)(oi,1),oi.m(ft,Fi)):oi&&((0,C.dvw)(),(0,C.etI)(oi,1,1,function(){oi=null}),(0,C.gbL)()),X[10].getData!==null?ai?(ai.p(X,Ne),1024&Ne&&(0,C.Ui)(ai,1)):((ai=xs(X)).c(),(0,C.Ui)(ai,1),ai.m(ft,ji)):ai&&((0,C.dvw)(),(0,C.etI)(ai,1,1,function(){ai=null}),(0,C.gbL)()),X[10].postData!==null?ci?(ci.p(X,Ne),1024&Ne&&(0,C.Ui)(ci,1)):((ci=As(X)).c(),(0,C.Ui)(ci,1),ci.m(ft,hr)):ci&&((0,C.dvw)(),(0,C.etI)(ci,1,1,function(){ci=null}),(0,C.gbL)()),X[10].header!==null?li?(li.p(X,Ne),1024&Ne&&(0,C.Ui)(li,1)):((li=Es(X)).c(),(0,C.Ui)(li,1),li.m(ft,Cr)):li&&((0,C.dvw)(),(0,C.etI)(li,1,1,function(){li=null}),(0,C.gbL)());var to={};1024&Ne&&(to.content=X[10].response),ke.$set(to),X[10].responseSize>0?Ci?Ci.p(X,Ne):((Ci=Ss(X)).c(),Ci.m(Xt,Ti)):Ci&&(Ci.d(1),Ci=null),(!vi||1024&Ne)&&Jr!==(Jr=(X[10].response||"")+"")&&(0,C.rTO)(_i,Jr),(!vi||1024&Ne&&Hi!==(Hi=X[10].id))&&(0,C.Ljt)(G,"id",Hi),1024&Ne&&(0,C.VHj)(G,"vc-actived",X[10].actived)},i:function(Mi){vi||((0,C.Ui)(Ut.$$.fragment,Mi),(0,C.Ui)(oi),(0,C.Ui)(ai),(0,C.Ui)(ci),(0,C.Ui)(li),(0,C.Ui)(ke.$$.fragment,Mi),vi=!0)},o:function(Mi){(0,C.etI)(Ut.$$.fragment,Mi),(0,C.etI)(oi),(0,C.etI)(ai),(0,C.etI)(ci),(0,C.etI)(li),(0,C.etI)(ke.$$.fragment,Mi),vi=!1},d:function(Mi){Mi&&(0,C.ogt)(G),(0,C.vpE)(Ut),oi&&oi.d(),ai&&ai.d(),ci&&ci.d(),li&&li.d(),(0,C.vpE)(ke),Ci&&Ci.d(),Tn=!1,Js()}}}function sa(X){var G,O,F,q;return F=new es({props:{items:X[1],itemKey:"id",itemHeight:30,buffer:100,stickToBottom:!0,scrollbar:!0,$$slots:{item:[na,function(Z){return{10:Z.item}},function(Z){return Z.item?1024:0}],empty:[ea],header:[ta]},$$scope:{ctx:X}}}),{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("div"),(0,C.YCL)(F.$$.fragment),(0,C.Ljt)(O,"class","vc-plugin-content"),(0,C.Ljt)(G,"class","vc-table")},m:function(Z,tt){(0,C.$Tr)(Z,G,tt),(0,C.R3I)(G,O),(0,C.yef)(F,O,null),q=!0},p:function(Z,tt){var nt=tt[0],ot={};2&nt&&(ot.items=Z[1]),2098177&nt&&(ot.$$scope={dirty:nt,ctx:Z}),F.$set(ot)},i:function(Z){q||((0,C.Ui)(F.$$.fragment,Z),q=!0)},o:function(Z){(0,C.etI)(F.$$.fragment,Z),q=!1},d:function(Z){Z&&(0,C.ogt)(G),(0,C.vpE)(F)}}}function oa(X,G,O){var F;(0,C.FIv)(X,Ki,function(ut){return O(6,F=ut)});var q=0,Z=function(ut){O(0,q=Object.keys(ut).length)},tt=Ki.subscribe(Z);Z(F);var nt=[],ot=function(ut){(0,C.fxP)(Ki,F[ut].actived=!F[ut].actived,F)};return(0,R.H3)(function(){ds.use()}),(0,R.ev)(function(){tt(),ds.unuse()}),X.$$.update=function(){64&X.$$.dirty&&O(1,nt=Object.values(F))},[q,nt,ot,function(ut){var dt="curl -X "+ut.method;return typeof ut.postData=="string"?dt+=" -d '"+ut.postData+"'":typeof ut.postData=="object"&&ut.postData!==null&&(dt+=" -d '"+_.hZ(ut.postData)+"'"),dt+" '"+ut.url+"'"},function(ut){return _.Kn(ut)||_.kJ(ut)?_.hZ(ut,{maxDepth:10,keyMaxLen:1e4,pretty:!0}):ut},{fixedHeight:!0},F,function(ut){return ot(ut.id)}]}var aa=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,oa,sa,C.N8,{options:5}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"options",get:function(){return this.$$.ctx[5]}}]),G}(C.f_C),ca=aa,la=function(X){function G(){for(var F,q=arguments.length,Z=new Array(q),tt=0;tt<q;tt++)Z[tt]=arguments[tt];return(F=X.call.apply(X,[this].concat(Z))||this).model=$r.getSingleton($r,"VConsoleNetworkModel"),F}(0,I.Z)(G,X);var O=G.prototype;return O.add=function(F){var q=new ls(new Er);for(var Z in F)q[Z]=F[Z];return q.startTime=q.startTime||Date.now(),q.requestType=q.requestType||"custom",this.model.updateRequest(q.id,q),q},O.update=function(F,q){this.model.updateRequest(F,q)},O.clear=function(){this.model.clearLog()},G}(rs),Ps=function(X){function G(F,q,Z){var tt;return Z===void 0&&(Z={}),(tt=X.call(this,F,q,ca,Z)||this).model=$r.getSingleton($r,"VConsoleNetworkModel"),tt.exporter=void 0,tt.exporter=new la(F),tt}(0,I.Z)(G,X);var O=G.prototype;return O.onReady=function(){X.prototype.onReady.call(this),this.onUpdateOption()},O.onAddTool=function(F){var q=this;F([{name:"Clear",global:!1,onClick:function(Z){q.model.clearLog()}}])},O.onRemove=function(){X.prototype.onRemove.call(this),this.model&&this.model.unMock()},O.onUpdateOption=function(){var F,q,Z;((F=this.vConsole.option.network)==null?void 0:F.maxNetworkNumber)!==this.model.maxNetworkNumber&&(this.model.maxNetworkNumber=Number((Z=this.vConsole.option.network)==null?void 0:Z.maxNetworkNumber)||1e3),(q=this.vConsole.option.network)!=null&&q.ignoreUrlRegExp&&(this.model.ignoreUrlRegExp=this.vConsole.option.network.ignoreUrlRegExp)},G}(ii),ha=__webpack_require__(8679),ua=__webpack_require__.n(ha),Nr=(0,ri.fZ)(),Sr=(0,ri.fZ)(),Ur=__webpack_require__(5670),Pr={};Ur.Z&&Ur.Z.locals&&(Pr.locals=Ur.Z.locals);var bn,An=0,ir={};ir.styleTagTransform=rt(),ir.setAttributes=K(),ir.insert=W().bind(null,"head"),ir.domAPI=U(),ir.insertStyleElement=et(),Pr.use=function(X){return ir.options=X||{},An++||(bn=D()(Ur.Z,ir)),Pr},Pr.unuse=function(){An>0&&!--An&&(bn(),bn=null)};var Cs=Pr;function Bs(X,G,O){var F=X.slice();return F[8]=G[O],F}function Is(X,G,O){var F=X.slice();return F[11]=G[O],F}function Ms(X){var G,O,F,q=X[0].nodeType===Node.ELEMENT_NODE&&Rs(X),Z=X[0].nodeType===Node.TEXT_NODE&&ks(X);return{c:function(){G=(0,C.bGB)("div"),q&&q.c(),O=(0,C.DhX)(),Z&&Z.c(),(0,C.Ljt)(G,"class","vcelm-l"),(0,C.VHj)(G,"vc-actived",X[0]._isActived),(0,C.VHj)(G,"vc-toggle",X[0]._isExpand),(0,C.VHj)(G,"vcelm-noc",X[0]._isSingleLine)},m:function(tt,nt){(0,C.$Tr)(tt,G,nt),q&&q.m(G,null),(0,C.R3I)(G,O),Z&&Z.m(G,null),F=!0},p:function(tt,nt){tt[0].nodeType===Node.ELEMENT_NODE?q?(q.p(tt,nt),1&nt&&(0,C.Ui)(q,1)):((q=Rs(tt)).c(),(0,C.Ui)(q,1),q.m(G,O)):q&&((0,C.dvw)(),(0,C.etI)(q,1,1,function(){q=null}),(0,C.gbL)()),tt[0].nodeType===Node.TEXT_NODE?Z?Z.p(tt,nt):((Z=ks(tt)).c(),Z.m(G,null)):Z&&(Z.d(1),Z=null),1&nt&&(0,C.VHj)(G,"vc-actived",tt[0]._isActived),1&nt&&(0,C.VHj)(G,"vc-toggle",tt[0]._isExpand),1&nt&&(0,C.VHj)(G,"vcelm-noc",tt[0]._isSingleLine)},i:function(tt){F||((0,C.Ui)(q),F=!0)},o:function(tt){(0,C.etI)(q),F=!1},d:function(tt){tt&&(0,C.ogt)(G),q&&q.d(),Z&&Z.d()}}}function Rs(X){var G,O,F,q,Z,tt,nt,ot,ut,dt,vt=X[0].nodeName+"",ft=(X[0].className||X[0].attributes.length)&&Ls(X),Pt=X[0]._isNullEndTag&&Vs(),xt=X[0].childNodes.length>0&&Os(X),It=!X[0]._isNullEndTag&&$s(X);return{c:function(){G=(0,C.bGB)("span"),O=(0,C.fLW)("<"),F=(0,C.fLW)(vt),ft&&ft.c(),q=(0,C.cSb)(),Pt&&Pt.c(),Z=(0,C.fLW)(">"),xt&&xt.c(),tt=(0,C.cSb)(),It&&It.c(),nt=(0,C.cSb)(),(0,C.Ljt)(G,"class","vcelm-node")},m:function(Dt,Nt){(0,C.$Tr)(Dt,G,Nt),(0,C.R3I)(G,O),(0,C.R3I)(G,F),ft&&ft.m(G,null),(0,C.R3I)(G,q),Pt&&Pt.m(G,null),(0,C.R3I)(G,Z),xt&&xt.m(Dt,Nt),(0,C.$Tr)(Dt,tt,Nt),It&&It.m(Dt,Nt),(0,C.$Tr)(Dt,nt,Nt),ot=!0,ut||(dt=(0,C.oLt)(G,"click",X[2]),ut=!0)},p:function(Dt,Nt){(!ot||1&Nt)&&vt!==(vt=Dt[0].nodeName+"")&&(0,C.rTO)(F,vt),Dt[0].className||Dt[0].attributes.length?ft?ft.p(Dt,Nt):((ft=Ls(Dt)).c(),ft.m(G,q)):ft&&(ft.d(1),ft=null),Dt[0]._isNullEndTag?Pt||((Pt=Vs()).c(),Pt.m(G,Z)):Pt&&(Pt.d(1),Pt=null),Dt[0].childNodes.length>0?xt?(xt.p(Dt,Nt),1&Nt&&(0,C.Ui)(xt,1)):((xt=Os(Dt)).c(),(0,C.Ui)(xt,1),xt.m(tt.parentNode,tt)):xt&&((0,C.dvw)(),(0,C.etI)(xt,1,1,function(){xt=null}),(0,C.gbL)()),Dt[0]._isNullEndTag?It&&(It.d(1),It=null):It?It.p(Dt,Nt):((It=$s(Dt)).c(),It.m(nt.parentNode,nt))},i:function(Dt){ot||((0,C.Ui)(xt),ot=!0)},o:function(Dt){(0,C.etI)(xt),ot=!1},d:function(Dt){Dt&&(0,C.ogt)(G),ft&&ft.d(),Pt&&Pt.d(),xt&&xt.d(Dt),Dt&&(0,C.ogt)(tt),It&&It.d(Dt),Dt&&(0,C.ogt)(nt),ut=!1,dt()}}}function Ls(X){for(var G,O=X[0].attributes,F=[],q=0;q<O.length;q+=1)F[q]=Ds(Is(X,O,q));return{c:function(){G=(0,C.bGB)("i");for(var Z=0;Z<F.length;Z+=1)F[Z].c();(0,C.Ljt)(G,"class","vcelm-k")},m:function(Z,tt){(0,C.$Tr)(Z,G,tt);for(var nt=0;nt<F.length;nt+=1)F[nt].m(G,null)},p:function(Z,tt){if(1&tt){var nt;for(O=Z[0].attributes,nt=0;nt<O.length;nt+=1){var ot=Is(Z,O,nt);F[nt]?F[nt].p(ot,tt):(F[nt]=Ds(ot),F[nt].c(),F[nt].m(G,null))}for(;nt<F.length;nt+=1)F[nt].d(1);F.length=O.length}},d:function(Z){Z&&(0,C.ogt)(G),(0,C.RMB)(F,Z)}}}function da(X){var G,O=X[11].name+"";return{c:function(){G=(0,C.fLW)(O)},m:function(F,q){(0,C.$Tr)(F,G,q)},p:function(F,q){1&q&&O!==(O=F[11].name+"")&&(0,C.rTO)(G,O)},d:function(F){F&&(0,C.ogt)(G)}}}function ma(X){var G,O,F,q,Z,tt=X[11].name+"",nt=X[11].value+"";return{c:function(){G=(0,C.fLW)(tt),O=(0,C.fLW)('="'),F=(0,C.bGB)("i"),q=(0,C.fLW)(nt),Z=(0,C.fLW)('"'),(0,C.Ljt)(F,"class","vcelm-v")},m:function(ot,ut){(0,C.$Tr)(ot,G,ut),(0,C.$Tr)(ot,O,ut),(0,C.$Tr)(ot,F,ut),(0,C.R3I)(F,q),(0,C.$Tr)(ot,Z,ut)},p:function(ot,ut){1&ut&&tt!==(tt=ot[11].name+"")&&(0,C.rTO)(G,tt),1&ut&&nt!==(nt=ot[11].value+"")&&(0,C.rTO)(q,nt)},d:function(ot){ot&&(0,C.ogt)(G),ot&&(0,C.ogt)(O),ot&&(0,C.ogt)(F),ot&&(0,C.ogt)(Z)}}}function Ds(X){var G,O;function F(tt,nt){return tt[11].value!==""?ma:da}var q=F(X),Z=q(X);return{c:function(){G=(0,C.fLW)(`Â 
            `),Z.c(),O=(0,C.cSb)()},m:function(tt,nt){(0,C.$Tr)(tt,G,nt),Z.m(tt,nt),(0,C.$Tr)(tt,O,nt)},p:function(tt,nt){q===(q=F(tt))&&Z?Z.p(tt,nt):(Z.d(1),(Z=q(tt))&&(Z.c(),Z.m(O.parentNode,O)))},d:function(tt){tt&&(0,C.ogt)(G),Z.d(tt),tt&&(0,C.ogt)(O)}}}function Vs(X){var G;return{c:function(){G=(0,C.fLW)("/")},m:function(O,F){(0,C.$Tr)(O,G,F)},d:function(O){O&&(0,C.ogt)(G)}}}function Os(X){var G,O,F,q,Z=[pa,fa],tt=[];function nt(ot,ut){return ot[0]._isExpand?1:0}return G=nt(X),O=tt[G]=Z[G](X),{c:function(){O.c(),F=(0,C.cSb)()},m:function(ot,ut){tt[G].m(ot,ut),(0,C.$Tr)(ot,F,ut),q=!0},p:function(ot,ut){var dt=G;(G=nt(ot))===dt?tt[G].p(ot,ut):((0,C.dvw)(),(0,C.etI)(tt[dt],1,1,function(){tt[dt]=null}),(0,C.gbL)(),(O=tt[G])?O.p(ot,ut):(O=tt[G]=Z[G](ot)).c(),(0,C.Ui)(O,1),O.m(F.parentNode,F))},i:function(ot){q||((0,C.Ui)(O),q=!0)},o:function(ot){(0,C.etI)(O),q=!1},d:function(ot){tt[G].d(ot),ot&&(0,C.ogt)(F)}}}function fa(X){for(var G,O,F=X[0].childNodes,q=[],Z=0;Z<F.length;Z+=1)q[Z]=Fs(Bs(X,F,Z));var tt=function(nt){return(0,C.etI)(q[nt],1,1,function(){q[nt]=null})};return{c:function(){for(var nt=0;nt<q.length;nt+=1)q[nt].c();G=(0,C.cSb)()},m:function(nt,ot){for(var ut=0;ut<q.length;ut+=1)q[ut].m(nt,ot);(0,C.$Tr)(nt,G,ot),O=!0},p:function(nt,ot){if(1&ot){var ut;for(F=nt[0].childNodes,ut=0;ut<F.length;ut+=1){var dt=Bs(nt,F,ut);q[ut]?(q[ut].p(dt,ot),(0,C.Ui)(q[ut],1)):(q[ut]=Fs(dt),q[ut].c(),(0,C.Ui)(q[ut],1),q[ut].m(G.parentNode,G))}for((0,C.dvw)(),ut=F.length;ut<q.length;ut+=1)tt(ut);(0,C.gbL)()}},i:function(nt){if(!O){for(var ot=0;ot<F.length;ot+=1)(0,C.Ui)(q[ot]);O=!0}},o:function(nt){q=q.filter(Boolean);for(var ot=0;ot<q.length;ot+=1)(0,C.etI)(q[ot]);O=!1},d:function(nt){(0,C.RMB)(q,nt),nt&&(0,C.ogt)(G)}}}function pa(X){var G;return{c:function(){G=(0,C.fLW)("...")},m:function(O,F){(0,C.$Tr)(O,G,F)},p:C.ZTd,i:C.ZTd,o:C.ZTd,d:function(O){O&&(0,C.ogt)(G)}}}function Fs(X){var G,O,F;return(G=new Ns({props:{node:X[8]}})).$on("toggleNode",X[4]),{c:function(){(0,C.YCL)(G.$$.fragment),O=(0,C.DhX)()},m:function(q,Z){(0,C.yef)(G,q,Z),(0,C.$Tr)(q,O,Z),F=!0},p:function(q,Z){var tt={};1&Z&&(tt.node=q[8]),G.$set(tt)},i:function(q){F||((0,C.Ui)(G.$$.fragment,q),F=!0)},o:function(q){(0,C.etI)(G.$$.fragment,q),F=!1},d:function(q){(0,C.vpE)(G,q),q&&(0,C.ogt)(O)}}}function $s(X){var G,O,F,q,Z=X[0].nodeName+"";return{c:function(){G=(0,C.bGB)("span"),O=(0,C.fLW)("</"),F=(0,C.fLW)(Z),q=(0,C.fLW)(">"),(0,C.Ljt)(G,"class","vcelm-node")},m:function(tt,nt){(0,C.$Tr)(tt,G,nt),(0,C.R3I)(G,O),(0,C.R3I)(G,F),(0,C.R3I)(G,q)},p:function(tt,nt){1&nt&&Z!==(Z=tt[0].nodeName+"")&&(0,C.rTO)(F,Z)},d:function(tt){tt&&(0,C.ogt)(G)}}}function ks(X){var G,O,F=X[1](X[0].textContent)+"";return{c:function(){G=(0,C.bGB)("span"),O=(0,C.fLW)(F),(0,C.Ljt)(G,"class","vcelm-t vcelm-noc")},m:function(q,Z){(0,C.$Tr)(q,G,Z),(0,C.R3I)(G,O)},p:function(q,Z){1&Z&&F!==(F=q[1](q[0].textContent)+"")&&(0,C.rTO)(O,F)},d:function(q){q&&(0,C.ogt)(G)}}}function va(X){var G,O,F=X[0]&&Ms(X);return{c:function(){F&&F.c(),G=(0,C.cSb)()},m:function(q,Z){F&&F.m(q,Z),(0,C.$Tr)(q,G,Z),O=!0},p:function(q,Z){var tt=Z[0];q[0]?F?(F.p(q,tt),1&tt&&(0,C.Ui)(F,1)):((F=Ms(q)).c(),(0,C.Ui)(F,1),F.m(G.parentNode,G)):F&&((0,C.dvw)(),(0,C.etI)(F,1,1,function(){F=null}),(0,C.gbL)())},i:function(q){O||((0,C.Ui)(F),O=!0)},o:function(q){(0,C.etI)(F),O=!1},d:function(q){F&&F.d(q),q&&(0,C.ogt)(G)}}}function ga(X,G,O){var F;(0,C.FIv)(X,Sr,function(nt){return O(3,F=nt)});var q=G.node,Z=(0,R.x)(),tt=["br","hr","img","input","link","meta"];return(0,R.H3)(function(){Cs.use()}),(0,R.ev)(function(){Cs.unuse()}),X.$$set=function(nt){"node"in nt&&O(0,q=nt.node)},X.$$.update=function(){9&X.$$.dirty&&q&&(O(0,q._isActived=q===F,q),O(0,q._isNullEndTag=function(nt){return tt.indexOf(nt.nodeName)>-1}(q),q),O(0,q._isSingleLine=q.childNodes.length===0||q._isNullEndTag,q))},[q,function(nt){return nt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},function(){q._isNullEndTag||(O(0,q._isExpand=!q._isExpand,q),Z("toggleNode",{node:q}))},F,function(nt){C.cKT.call(this,X,nt)}]}var Ns=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,ga,va,C.N8,{node:0}),F}return(0,I.Z)(G,X),(0,E.Z)(G,[{key:"node",get:function(){return this.$$.ctx[0]},set:function(O){this.$$set({node:O}),(0,C.yl1)()}}]),G}(C.f_C),ya=Ns;function xa(X){var G,O,F;return(O=new ya({props:{node:X[0]}})).$on("toggleNode",X[1]),{c:function(){G=(0,C.bGB)("div"),(0,C.YCL)(O.$$.fragment),(0,C.Ljt)(G,"class","vc-plugin-content")},m:function(q,Z){(0,C.$Tr)(q,G,Z),(0,C.yef)(O,G,null),F=!0},p:function(q,Z){var tt={};1&Z[0]&&(tt.node=q[0]),O.$set(tt)},i:function(q){F||((0,C.Ui)(O.$$.fragment,q),F=!0)},o:function(q){(0,C.etI)(O.$$.fragment,q),F=!1},d:function(q){q&&(0,C.ogt)(G),(0,C.vpE)(O)}}}function ba(X,G,O){var F;return(0,C.FIv)(X,Nr,function(q){return O(0,F=q)}),[F,function(q){C.cKT.call(this,X,q)}]}var Aa=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,ba,xa,C.N8,{}),F}return(0,I.Z)(G,X),G}(C.f_C),Ta=Aa,Us=function(X){function G(F,q,Z){var tt;return Z===void 0&&(Z={}),(tt=X.call(this,F,q,Ta,Z)||this).isInited=!1,tt.observer=void 0,tt.nodeMap=void 0,tt}(0,I.Z)(G,X);var O=G.prototype;return O.onShow=function(){this.isInited||this._init()},O.onRemove=function(){X.prototype.onRemove.call(this),this.isInited&&(this.observer.disconnect(),this.isInited=!1,this.nodeMap=void 0,Nr.set(void 0))},O.onAddTool=function(F){var q=this;F([{name:"Expand",global:!1,onClick:function(Z){q._expandActivedNode()}},{name:"Collapse",global:!1,onClick:function(Z){q._collapseActivedNode()}}])},O._init=function(){var F=this;this.isInited=!0,this.nodeMap=new WeakMap;var q=this._generateVNode(document.documentElement);q._isExpand=!0,Sr.set(q),Nr.set(q),this.compInstance.$on("toggleNode",function(Z){Sr.set(Z.detail.node)}),this.observer=new(ua())(function(Z){for(var tt=0;tt<Z.length;tt++){var nt=Z[tt];F._isInVConsole(nt.target)||F._handleMutation(nt)}}),this.observer.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},O._handleMutation=function(F){switch(F.type){case"childList":F.removedNodes.length>0&&this._onChildRemove(F),F.addedNodes.length>0&&this._onChildAdd(F);break;case"attributes":this._onAttributesChange(F);break;case"characterData":this._onCharacterDataChange(F)}},O._onChildRemove=function(F){var q=this.nodeMap.get(F.target);if(q){for(var Z=0;Z<F.removedNodes.length;Z++){var tt=this.nodeMap.get(F.removedNodes[Z]);if(tt){for(var nt=0;nt<q.childNodes.length;nt++)if(q.childNodes[nt]===tt){q.childNodes.splice(nt,1);break}this.nodeMap.delete(F.removedNodes[Z])}}this._refreshStore()}},O._onChildAdd=function(F){var q=this.nodeMap.get(F.target);if(q){for(var Z=0;Z<F.addedNodes.length;Z++){var tt=F.addedNodes[Z],nt=this._generateVNode(tt);if(nt){var ot=void 0,ut=tt;do{if(ut.nextSibling===null)break;ut.nodeType===Node.ELEMENT_NODE&&(ot=this.nodeMap.get(ut.nextSibling)||void 0),ut=ut.nextSibling}while(ot===void 0);if(ot===void 0)q.childNodes.push(nt);else for(var dt=0;dt<q.childNodes.length;dt++)if(q.childNodes[dt]===ot){q.childNodes.splice(dt,0,nt);break}}}this._refreshStore()}},O._onAttributesChange=function(F){this._updateVNodeAttributes(F.target),this._refreshStore()},O._onCharacterDataChange=function(F){var q=this.nodeMap.get(F.target);q&&(q.textContent=F.target.textContent,this._refreshStore())},O._generateVNode=function(F){if(!this._isIgnoredNode(F)){var q={nodeType:F.nodeType,nodeName:F.nodeName.toLowerCase(),textContent:"",id:"",className:"",attributes:[],childNodes:[]};if(this.nodeMap.set(F,q),q.nodeType!=F.TEXT_NODE&&q.nodeType!=F.DOCUMENT_TYPE_NODE||(q.textContent=F.textContent),F.childNodes.length>0){q.childNodes=[];for(var Z=0;Z<F.childNodes.length;Z++){var tt=this._generateVNode(F.childNodes[Z]);tt&&q.childNodes.push(tt)}}return this._updateVNodeAttributes(F),q}},O._updateVNodeAttributes=function(F){var q=this.nodeMap.get(F);if(q&&F instanceof Element&&(q.id=F.id||"",q.className=F.className||"",F.hasAttributes&&F.hasAttributes())){q.attributes=[];for(var Z=0;Z<F.attributes.length;Z++)q.attributes.push({name:F.attributes[Z].name,value:F.attributes[Z].value||""})}},O._expandActivedNode=function(){var F=(0,ri.U2)(Sr);if(F._isExpand)for(var q=0;q<F.childNodes.length;q++)F.childNodes[q]._isExpand=!0;else F._isExpand=!0;this._refreshStore()},O._collapseActivedNode=function(){var F=(0,ri.U2)(Sr);if(F._isExpand){for(var q=!1,Z=0;Z<F.childNodes.length;Z++)F.childNodes[Z]._isExpand&&(q=!0,F.childNodes[Z]._isExpand=!1);q||(F._isExpand=!1),this._refreshStore()}},O._isIgnoredNode=function(F){if(F.nodeType===F.TEXT_NODE){if(F.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$|\n+/g,"")==="")return!0}else if(F.nodeType===F.COMMENT_NODE)return!0;return!1},O._isInVConsole=function(F){for(var q=F;q!==void 0;){if(q.id=="__vconsole")return!0;q=q.parentElement||void 0}return!1},O._refreshStore=function(){Nr.update(function(F){return F})},G}(ii);function Gs(X,G,O,F,q,Z,tt){try{var nt=X[Z](tt),ot=nt.value}catch(ut){return void O(ut)}nt.done?G(ot):Promise.resolve(ot).then(F,q)}function lr(X){return function(){var G=this,O=arguments;return new Promise(function(F,q){var Z=X.apply(G,O);function tt(ot){Gs(Z,F,q,tt,nt,"next",ot)}function nt(ot){Gs(Z,F,q,tt,nt,"throw",ot)}tt(void 0)})}}var Ea=__webpack_require__(8270);function zs(X,G){var O=Object.keys(X);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(X);G&&(F=F.filter(function(q){return Object.getOwnPropertyDescriptor(X,q).enumerable})),O.push.apply(O,F)}return O}function js(X){for(var G=1;G<arguments.length;G++){var O=arguments[G]!=null?arguments[G]:{};G%2?zs(Object(O),!0).forEach(function(F){(0,Ea.Z)(X,F,O[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(O)):zs(Object(O)).forEach(function(F){Object.defineProperty(X,F,Object.getOwnPropertyDescriptor(O,F))})}return X}var Hs=function(X){if(!X||X.length===0)return{};for(var G={},O=X.split(";"),F=0;F<O.length;F++){var q=O[F].indexOf("=");if(!(q<0)){var Z=O[F].substring(0,q).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),tt=O[F].substring(q+1,O[F].length);try{Z=decodeURIComponent(Z)}catch{}try{tt=decodeURIComponent(tt)}catch{}G[Z]=tt}}return G},Ws=function(X,G,O){typeof document<"u"&&document.cookie!==void 0&&(document.cookie=encodeURIComponent(X)+"="+encodeURIComponent(G)+function(F){F===void 0&&(F={});var q=F,Z=q.path,tt=q.domain,nt=q.expires,ot=q.secure,ut=q.sameSite,dt=["none","lax","strict"].indexOf((ut||"").toLowerCase())>-1?ut:null;return[Z==null?"":";path="+Z,tt==null?"":";domain="+tt,nt==null?"":";expires="+nt.toUTCString(),ot===void 0||ot===!1?"":";secure",dt===null?"":";SameSite="+dt].join("")}(O))},qs=function(){return typeof document>"u"||document.cookie===void 0?"":document.cookie},wa=function(){function X(){}var G=X.prototype;return G.key=function(O){return O<this.keys.length?this.keys[O]:null},G.setItem=function(O,F,q){Ws(O,F,q)},G.getItem=function(O){var F=Hs(qs());return Object.prototype.hasOwnProperty.call(F,O)?F[O]:null},G.removeItem=function(O,F){for(var q,Z,tt=["","/"],nt=((q=location)==null||(Z=q.hostname)==null?void 0:Z.split("."))||[];nt.length>1;)tt.push(nt.join(".")),nt.shift();for(var ot=0;ot<tt.length;ot++)for(var ut,dt,vt=((ut=location)==null||(dt=ut.pathname)==null?void 0:dt.split("/"))||[],ft="";vt.length>0;){ft+=(ft==="/"?"":"/")+vt.shift();var Pt=js(js({},F),{},{path:ft,domain:tt[ot],expires:new Date(0)});Ws(O,"",Pt)}},G.clear=function(){for(var O=[].concat(this.keys),F=0;F<O.length;F++)this.removeItem(O[F])},(0,E.Z)(X,[{key:"length",get:function(){return this.keys.length}},{key:"keys",get:function(){var O=Hs(qs());return Object.keys(O).sort()}}]),X}(),Sa=function(){function X(){this.keys=[],this.currentSize=0,this.limitSize=0}var G=X.prototype;return G.key=function(O){return O<this.keys.length?this.keys[O]:null},G.prepare=function(){var O=lr($e().mark(function F(){var q=this;return $e().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",new Promise(function(tt,nt){(0,_.qt)("getStorageInfo",{success:function(ot){q.keys=ot?ot.keys.sort():[],q.currentSize=ot?ot.currentSize:0,q.limitSize=ot?ot.limitSize:0,tt(!0)},fail:function(){nt(!1)}})}));case 1:case"end":return Z.stop()}},F)}));return function(){return O.apply(this,arguments)}}(),G.getItem=function(O){return new Promise(function(F,q){(0,_.qt)("getStorage",{key:O,success:function(Z){var tt=Z.data;if(typeof Z.data=="object")try{tt=JSON.stringify(Z.data)}catch{}F(tt)},fail:function(Z){q(Z)}})})},G.setItem=function(O,F){return new Promise(function(q,Z){(0,_.qt)("setStorage",{key:O,data:F,success:function(tt){q(tt)},fail:function(tt){Z(tt)}})})},G.removeItem=function(O){return new Promise(function(F,q){(0,_.qt)("removeStorage",{key:O,success:function(Z){F(Z)},fail:function(Z){q(Z)}})})},G.clear=function(){return new Promise(function(O,F){(0,_.qt)("clearStorage",{success:function(q){O(q)},fail:function(q){F(q)}})})},(0,E.Z)(X,[{key:"length",get:function(){return this.keys.length}}]),X}(),si={updateTime:(0,ri.fZ)(0),activedName:(0,ri.fZ)(null),defaultStorages:(0,ri.fZ)(["cookies","localStorage","sessionStorage"])},Gr=function(X){function G(){var F;return(F=X.call(this)||this).storage=new Map,si.activedName.subscribe(function(q){var Z=(0,ri.U2)(si.defaultStorages);Z.length>0&&Z.indexOf(q)===-1&&si.activedName.set(Z[0])}),si.defaultStorages.subscribe(function(q){q.indexOf((0,ri.U2)(si.activedName))===-1&&si.activedName.set(q[0]),F.updateEnabledStorages()}),F}(0,I.Z)(G,X);var O=G.prototype;return O.getItem=function(){var F=lr($e().mark(function q(Z){return $e().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(this.activedStorage){tt.next=2;break}return tt.abrupt("return","");case 2:return tt.next=4,this.promisify(this.activedStorage.getItem(Z));case 4:return tt.abrupt("return",tt.sent);case 5:case"end":return tt.stop()}},q,this)}));return function(q){return F.apply(this,arguments)}}(),O.setItem=function(){var F=lr($e().mark(function q(Z,tt){var nt;return $e().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(this.activedStorage){ot.next=2;break}return ot.abrupt("return");case 2:return ot.next=4,this.promisify(this.activedStorage.setItem(Z,tt));case 4:return nt=ot.sent,this.refresh(),ot.abrupt("return",nt);case 7:case"end":return ot.stop()}},q,this)}));return function(q,Z){return F.apply(this,arguments)}}(),O.removeItem=function(){var F=lr($e().mark(function q(Z){var tt;return $e().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(this.activedStorage){nt.next=2;break}return nt.abrupt("return");case 2:return nt.next=4,this.promisify(this.activedStorage.removeItem(Z));case 4:return tt=nt.sent,this.refresh(),nt.abrupt("return",tt);case 7:case"end":return nt.stop()}},q,this)}));return function(q){return F.apply(this,arguments)}}(),O.clear=function(){var F=lr($e().mark(function q(){var Z;return $e().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(this.activedStorage){tt.next=2;break}return tt.abrupt("return");case 2:return tt.next=4,this.promisify(this.activedStorage.clear());case 4:return Z=tt.sent,this.refresh(),tt.abrupt("return",Z);case 7:case"end":return tt.stop()}},q,this)}));return function(){return F.apply(this,arguments)}}(),O.refresh=function(){si.updateTime.set(Date.now())},O.getEntries=function(){var F=lr($e().mark(function q(){var Z,tt,nt,ot,ut;return $e().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(Z=this.activedStorage){dt.next=3;break}return dt.abrupt("return",[]);case 3:if(typeof Z.prepare!="function"){dt.next=6;break}return dt.next=6,Z.prepare();case 6:tt=[],nt=0;case 8:if(!(nt<Z.length)){dt.next=17;break}return ot=Z.key(nt),dt.next=12,this.getItem(ot);case 12:ut=dt.sent,tt.push([ot,ut]);case 14:nt++,dt.next=8;break;case 17:return dt.abrupt("return",tt);case 18:case"end":return dt.stop()}},q,this)}));return function(){return F.apply(this,arguments)}}(),O.updateEnabledStorages=function(){var F=(0,ri.U2)(si.defaultStorages);F.indexOf("cookies")>-1?document.cookie!==void 0&&this.storage.set("cookies",new wa):this.deleteStorage("cookies"),F.indexOf("localStorage")>-1?window.localStorage&&this.storage.set("localStorage",window.localStorage):this.deleteStorage("localStorage"),F.indexOf("sessionStorage")>-1?window.sessionStorage&&this.storage.set("sessionStorage",window.sessionStorage):this.deleteStorage("sessionStorage"),F.indexOf("wxStorage")>-1?(0,_.H_)()&&this.storage.set("wxStorage",new Sa):this.deleteStorage("wxStorage")},O.promisify=function(F){return typeof F=="string"||F==null?Promise.resolve(F):F},O.deleteStorage=function(F){this.storage.has(F)&&this.storage.delete(F)},(0,E.Z)(G,[{key:"activedStorage",get:function(){return this.storage.get((0,ri.U2)(si.activedName))}}]),G}(os.N);function Xs(X,G,O){var F=X.slice();return F[20]=G[O][0],F[21]=G[O][1],F[23]=O,F}function Ys(X){var G;return{c:function(){(G=(0,C.bGB)("div")).textContent="Empty",(0,C.Ljt)(G,"class","vc-plugin-empty")},m:function(O,F){(0,C.$Tr)(O,G,F)},p:C.ZTd,d:function(O){O&&(0,C.ogt)(G)}}}function Pa(X){var G,O,F,q,Z,tt=X[20]+"",nt=X[5](X[21])+"";return{c:function(){G=(0,C.bGB)("div"),O=(0,C.fLW)(tt),F=(0,C.DhX)(),q=(0,C.bGB)("div"),Z=(0,C.fLW)(nt),(0,C.Ljt)(G,"class","vc-table-col"),(0,C.Ljt)(q,"class","vc-table-col vc-table-col-2")},m:function(ot,ut){(0,C.$Tr)(ot,G,ut),(0,C.R3I)(G,O),(0,C.$Tr)(ot,F,ut),(0,C.$Tr)(ot,q,ut),(0,C.R3I)(q,Z)},p:function(ot,ut){1&ut&&tt!==(tt=ot[20]+"")&&(0,C.rTO)(O,tt),1&ut&&nt!==(nt=ot[5](ot[21])+"")&&(0,C.rTO)(Z,nt)},d:function(ot){ot&&(0,C.ogt)(G),ot&&(0,C.ogt)(F),ot&&(0,C.ogt)(q)}}}function Ca(X){var G,O,F,q,Z,tt,nt;return{c:function(){G=(0,C.bGB)("div"),O=(0,C.bGB)("textarea"),F=(0,C.DhX)(),q=(0,C.bGB)("div"),Z=(0,C.bGB)("textarea"),(0,C.Ljt)(O,"class","vc-table-input"),(0,C.Ljt)(G,"class","vc-table-col"),(0,C.Ljt)(Z,"class","vc-table-input"),(0,C.Ljt)(q,"class","vc-table-col vc-table-col-2")},m:function(ot,ut){(0,C.$Tr)(ot,G,ut),(0,C.R3I)(G,O),(0,C.BmG)(O,X[2]),(0,C.$Tr)(ot,F,ut),(0,C.$Tr)(ot,q,ut),(0,C.R3I)(q,Z),(0,C.BmG)(Z,X[3]),tt||(nt=[(0,C.oLt)(O,"input",X[11]),(0,C.oLt)(Z,"input",X[12])],tt=!0)},p:function(ot,ut){4&ut&&(0,C.BmG)(O,ot[2]),8&ut&&(0,C.BmG)(Z,ot[3])},d:function(ot){ot&&(0,C.ogt)(G),ot&&(0,C.ogt)(F),ot&&(0,C.ogt)(q),tt=!1,(0,C.j7q)(nt)}}}function Ba(X){var G,O,F,q,Z,tt;return(G=new Ke.Z({props:{name:"delete"}})).$on("click",function(){return X[14](X[20])}),F=new Ze({props:{content:[X[20],X[21]].join("=")}}),(Z=new Ke.Z({props:{name:"edit"}})).$on("click",function(){return X[15](X[20],X[21],X[23])}),{c:function(){(0,C.YCL)(G.$$.fragment),O=(0,C.DhX)(),(0,C.YCL)(F.$$.fragment),q=(0,C.DhX)(),(0,C.YCL)(Z.$$.fragment)},m:function(nt,ot){(0,C.yef)(G,nt,ot),(0,C.$Tr)(nt,O,ot),(0,C.yef)(F,nt,ot),(0,C.$Tr)(nt,q,ot),(0,C.yef)(Z,nt,ot),tt=!0},p:function(nt,ot){X=nt;var ut={};1&ot&&(ut.content=[X[20],X[21]].join("=")),F.$set(ut)},i:function(nt){tt||((0,C.Ui)(G.$$.fragment,nt),(0,C.Ui)(F.$$.fragment,nt),(0,C.Ui)(Z.$$.fragment,nt),tt=!0)},o:function(nt){(0,C.etI)(G.$$.fragment,nt),(0,C.etI)(F.$$.fragment,nt),(0,C.etI)(Z.$$.fragment,nt),tt=!1},d:function(nt){(0,C.vpE)(G,nt),nt&&(0,C.ogt)(O),(0,C.vpE)(F,nt),nt&&(0,C.ogt)(q),(0,C.vpE)(Z,nt)}}}function Ia(X){var G,O,F,q;return(G=new Ke.Z({props:{name:"cancel"}})).$on("click",X[9]),(F=new Ke.Z({props:{name:"done"}})).$on("click",function(){return X[13](X[20])}),{c:function(){(0,C.YCL)(G.$$.fragment),O=(0,C.DhX)(),(0,C.YCL)(F.$$.fragment)},m:function(Z,tt){(0,C.yef)(G,Z,tt),(0,C.$Tr)(Z,O,tt),(0,C.yef)(F,Z,tt),q=!0},p:function(Z,tt){X=Z},i:function(Z){q||((0,C.Ui)(G.$$.fragment,Z),(0,C.Ui)(F.$$.fragment,Z),q=!0)},o:function(Z){(0,C.etI)(G.$$.fragment,Z),(0,C.etI)(F.$$.fragment,Z),q=!1},d:function(Z){(0,C.vpE)(G,Z),Z&&(0,C.ogt)(O),(0,C.vpE)(F,Z)}}}function Ks(X){var G,O,F,q,Z,tt,nt;function ot(xt,It){return xt[1]===xt[23]?Ca:Pa}var ut=ot(X),dt=ut(X),vt=[Ia,Ba],ft=[];function Pt(xt,It){return xt[1]===xt[23]?0:1}return q=Pt(X),Z=ft[q]=vt[q](X),{c:function(){G=(0,C.bGB)("div"),dt.c(),O=(0,C.DhX)(),F=(0,C.bGB)("div"),Z.c(),tt=(0,C.DhX)(),(0,C.Ljt)(F,"class","vc-table-col vc-table-col-1 vc-table-action"),(0,C.Ljt)(G,"class","vc-table-row")},m:function(xt,It){(0,C.$Tr)(xt,G,It),dt.m(G,null),(0,C.R3I)(G,O),(0,C.R3I)(G,F),ft[q].m(F,null),(0,C.R3I)(G,tt),nt=!0},p:function(xt,It){ut===(ut=ot(xt))&&dt?dt.p(xt,It):(dt.d(1),(dt=ut(xt))&&(dt.c(),dt.m(G,O)));var Dt=q;(q=Pt(xt))===Dt?ft[q].p(xt,It):((0,C.dvw)(),(0,C.etI)(ft[Dt],1,1,function(){ft[Dt]=null}),(0,C.gbL)(),(Z=ft[q])?Z.p(xt,It):(Z=ft[q]=vt[q](xt)).c(),(0,C.Ui)(Z,1),Z.m(F,null))},i:function(xt){nt||((0,C.Ui)(Z),nt=!0)},o:function(xt){(0,C.etI)(Z),nt=!1},d:function(xt){xt&&(0,C.ogt)(G),dt.d(),ft[q].d()}}}function Ma(X){for(var G,O,F,q,Z=X[0],tt=[],nt=0;nt<Z.length;nt+=1)tt[nt]=Ks(Xs(X,Z,nt));var ot=function(dt){return(0,C.etI)(tt[dt],1,1,function(){tt[dt]=null})},ut=null;return Z.length||(ut=Ys()),{c:function(){G=(0,C.bGB)("div"),(O=(0,C.bGB)("div")).innerHTML=`<div class="vc-table-col">Key</div> 
    <div class="vc-table-col vc-table-col-2">Value</div> 
    <div class="vc-table-col vc-table-col-1 vc-table-action"></div>`,F=(0,C.DhX)();for(var dt=0;dt<tt.length;dt+=1)tt[dt].c();ut&&ut.c(),(0,C.Ljt)(O,"class","vc-table-row"),(0,C.Ljt)(G,"class","vc-table")},m:function(dt,vt){(0,C.$Tr)(dt,G,vt),(0,C.R3I)(G,O),(0,C.R3I)(G,F);for(var ft=0;ft<tt.length;ft+=1)tt[ft].m(G,null);ut&&ut.m(G,null),q=!0},p:function(dt,vt){var ft=vt[0];if(1007&ft){var Pt;for(Z=dt[0],Pt=0;Pt<Z.length;Pt+=1){var xt=Xs(dt,Z,Pt);tt[Pt]?(tt[Pt].p(xt,ft),(0,C.Ui)(tt[Pt],1)):(tt[Pt]=Ks(xt),tt[Pt].c(),(0,C.Ui)(tt[Pt],1),tt[Pt].m(G,null))}for((0,C.dvw)(),Pt=Z.length;Pt<tt.length;Pt+=1)ot(Pt);(0,C.gbL)(),!Z.length&&ut?ut.p(dt,ft):Z.length?ut&&(ut.d(1),ut=null):((ut=Ys()).c(),ut.m(G,null))}},i:function(dt){if(!q){for(var vt=0;vt<Z.length;vt+=1)(0,C.Ui)(tt[vt]);q=!0}},o:function(dt){tt=tt.filter(Boolean);for(var vt=0;vt<tt.length;vt+=1)(0,C.etI)(tt[vt]);q=!1},d:function(dt){dt&&(0,C.ogt)(G),(0,C.RMB)(tt,dt),ut&&ut.d()}}}function Ra(X,G,O){var F,q=this&&this.__awaiter||function(It,Dt,Nt,Ut){return new(Nt||(Nt=Promise))(function(Ht,de){function te(Ie){try{Ce(Ut.next(Ie))}catch(re){de(re)}}function Pe(Ie){try{Ce(Ut.throw(Ie))}catch(re){de(re)}}function Ce(Ie){var re;Ie.done?Ht(Ie.value):(re=Ie.value,re instanceof Nt?re:new Nt(function(oe){oe(re)})).then(te,Pe)}Ce((Ut=Ut.apply(It,Dt||[])).next())})},Z=Gr.getSingleton(Gr,"VConsoleStorageModel"),tt=si.updateTime;(0,C.FIv)(X,tt,function(It){return O(10,F=It)});var nt=[],ot=-1,ut="",dt="",vt=function(){O(1,ot=-1),O(2,ut=""),O(3,dt="")},ft=function(It){return q(void 0,void 0,void 0,$e().mark(function Dt(){return $e().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.next=2,Z.removeItem(It);case 2:case"end":return Nt.stop()}},Dt)}))},Pt=function(It){return q(void 0,void 0,void 0,$e().mark(function Dt(){return $e().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(ut===It){Nt.next=3;break}return Nt.next=3,Z.removeItem(It);case 3:Z.setItem(ut,dt),vt();case 5:case"end":return Nt.stop()}},Dt)}))},xt=function(It,Dt,Nt){return q(void 0,void 0,void 0,$e().mark(function Ut(){return $e().wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:O(2,ut=It),O(3,dt=Dt),O(1,ot=Nt);case 3:case"end":return Ht.stop()}},Ut)}))};return X.$$.update=function(){1024&X.$$.dirty&&F&&q(void 0,void 0,void 0,$e().mark(function It(){return $e().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return vt(),Dt.t0=O,Dt.next=4,Z.getEntries();case 4:Dt.t1=nt=Dt.sent,(0,Dt.t0)(0,Dt.t1);case 6:case"end":return Dt.stop()}},It)}))},[nt,ot,ut,dt,tt,function(It){return(0,_.id)(It,1024)},ft,Pt,xt,function(){vt()},F,function(){ut=this.value,O(2,ut)},function(){dt=this.value,O(3,dt)},function(It){return Pt(It)},function(It){return ft(It)},function(It,Dt,Nt){return xt(It,Dt,Nt)}]}var La=function(X){function G(O){var F;return F=X.call(this)||this,(0,C.S1n)((0,B.Z)(F),O,Ra,Ma,C.N8,{}),F}return(0,I.Z)(G,X),G}(C.f_C),Da=La,Zs=function(X){function G(F,q,Z){var tt;return Z===void 0&&(Z={}),(tt=X.call(this,F,q,Da,Z)||this).model=Gr.getSingleton(Gr,"VConsoleStorageModel"),tt.onAddTopBarCallback=void 0,tt}(0,I.Z)(G,X);var O=G.prototype;return O.onReady=function(){X.prototype.onReady.call(this),this.onUpdateOption()},O.onShow=function(){this.model.refresh()},O.onAddTopBar=function(F){this.onAddTopBarCallback=F,this.updateTopBar()},O.onAddTool=function(F){var q=this;F([{name:"Add",global:!1,onClick:function(){q.model.setItem("new_"+Date.now(),"new_value")}},{name:"Refresh",global:!1,onClick:function(){q.model.refresh()}},{name:"Clear",global:!1,onClick:function(){q.model.clear()}}])},O.onUpdateOption=function(){var F,q=(F=this.vConsole.option.storage)==null?void 0:F.defaultStorages;(0,_.kJ)(q)&&(q=q.length>0?q:["cookies"])!==(0,ri.U2)(si.defaultStorages)&&(si.defaultStorages.set(q),si.activedName.set(q[0]),this.updateTopBar())},O.updateTopBar=function(){var F=this;if(typeof this.onAddTopBarCallback=="function"){for(var q=(0,ri.U2)(si.defaultStorages),Z=[],tt=0;tt<q.length;tt++){var nt=q[tt];Z.push({name:nt[0].toUpperCase()+nt.substring(1),data:{name:nt},actived:nt===(0,ri.U2)(si.activedName),onClick:function(ot,ut){var dt=(0,ri.U2)(si.activedName);if(ut.name===dt)return!1;si.activedName.set(ut.name),F.model.refresh()}})}this.onAddTopBarCallback(Z)}},G}(ii),pi=function(){function X(O){var F=this;if(this.version="3.15.1",this.isInited=!1,this.option={},this.compInstance=void 0,this.pluginList={},this.log=void 0,this.system=void 0,this.network=void 0,X.instance&&X.instance instanceof X)return console.debug("[vConsole] vConsole is already exists."),X.instance;if(X.instance=this,this.isInited=!1,this.option={defaultPlugins:["system","network","element","storage"],log:{},network:{},storage:{}},_.Kn(O))for(var q in O)this.option[q]=O[q];this.option.maxLogNumber!==void 0&&(this.option.log.maxLogNumber=this.option.maxLogNumber,console.debug("[vConsole] Deprecated option: `maxLogNumber`, use `log.maxLogNumber` instead.")),this.option.onClearLog!==void 0&&console.debug("[vConsole] Deprecated option: `onClearLog`."),this.option.maxNetworkNumber!==void 0&&(this.option.network.maxNetworkNumber=this.option.maxNetworkNumber,console.debug("[vConsole] Deprecated option: `maxNetworkNumber`, use `network.maxNetworkNumber` instead.")),this._addBuiltInPlugins();var Z=function(){F.isInited||(F._initComponent(),F._autoRun())};if(document!==void 0)document.readyState==="loading"?T.bind(window,"DOMContentLoaded",Z):Z();else{var tt;tt=setTimeout(function nt(){document&&document.readyState=="complete"?(tt&&clearTimeout(tt),Z()):tt=setTimeout(nt,1)},1)}}var G=X.prototype;return G._addBuiltInPlugins=function(){this.addPlugin(new ns("default","Log"));var O=this.option.defaultPlugins,F={system:{proto:ss,name:"System"}};if(F.network={proto:Ps,name:"Network"},F.element={proto:Us,name:"Element"},F.storage={proto:Zs,name:"Storage"},O&&_.kJ(O))for(var q=0;q<O.length;q++){var Z=F[O[q]];Z?this.addPlugin(new Z.proto(O[q],Z.name)):console.debug("[vConsole] Unrecognized default plugin ID:",O[q])}},G._initComponent=function(){var O=this;if(!T.one("#__vconsole")){var F,q=1*_.cF("switch_x"),Z=1*_.cF("switch_y");typeof this.option.target=="string"?F=document.querySelector(this.option.target):this.option.target instanceof HTMLElement&&(F=this.option.target),F instanceof HTMLElement||(F=document.documentElement),this.compInstance=new Li({target:F,props:{switchButtonPosition:{x:q,y:Z}}}),this.compInstance.$on("show",function(tt){tt.detail.show?O.show():O.hide()}),this.compInstance.$on("changePanel",function(tt){var nt=tt.detail.pluginId;O.showPlugin(nt)})}this._updateComponentByOptions()},G._updateComponentByOptions=function(){if(this.compInstance){if(this.compInstance.theme!==this.option.theme){var O=this.option.theme;O=O!=="light"&&O!=="dark"?"":O,this.compInstance.theme=O}this.compInstance.disableScrolling!==this.option.disableLogScrolling&&(this.compInstance.disableScrolling=!!this.option.disableLogScrolling)}},G.setSwitchPosition=function(O,F){this.compInstance.switchButtonPosition={x:O,y:F}},G._autoRun=function(){for(var O in this.isInited=!0,this.pluginList)this._initPlugin(this.pluginList[O]);this._showFirstPluginWhenEmpty(),this.triggerEvent("ready")},G._showFirstPluginWhenEmpty=function(){var O=Object.keys(this.pluginList);this.compInstance.activedPluginId===""&&O.length>0&&this.showPlugin(O[0])},G.triggerEvent=function(O,F){var q=this;O="on"+O.charAt(0).toUpperCase()+O.slice(1),_.mf(this.option[O])&&setTimeout(function(){q.option[O].apply(q,F)},0)},G._initPlugin=function(O){var F=this;O.vConsole=this,this.compInstance.pluginList[O.id]={id:O.id,name:O.name,hasTabPanel:!1,tabOptions:void 0,topbarList:[],toolbarList:[],content:void 0,contentContainer:void 0},this.compInstance.pluginList=this._reorderPluginList(this.compInstance.pluginList),O.trigger("init"),O.trigger("renderTab",function(q,Z){Z===void 0&&(Z={});var tt=F.compInstance.pluginList[O.id];tt.hasTabPanel=!0,tt.tabOptions=Z,q&&(F.compInstance.pluginList[O.id].content=q),F.compInstance.pluginList=F.compInstance.pluginList}),O.trigger("addTopBar",function(q){if(q){for(var Z=[],tt=0;tt<q.length;tt++){var nt=q[tt];Z.push({name:nt.name||"Undefined",className:nt.className||"",actived:!!nt.actived,data:nt.data,onClick:nt.onClick})}F.compInstance.pluginList[O.id].topbarList=Z,F.compInstance.pluginList=F.compInstance.pluginList}}),O.trigger("addTool",function(q){if(q){for(var Z=[],tt=0;tt<q.length;tt++){var nt=q[tt];Z.push({name:nt.name||"Undefined",global:!!nt.global,data:nt.data,onClick:nt.onClick})}F.compInstance.pluginList[O.id].toolbarList=Z,F.compInstance.pluginList=F.compInstance.pluginList}}),O.isReady=!0,O.trigger("ready")},G._triggerPluginsEvent=function(O){for(var F in this.pluginList)this.pluginList[F].isReady&&this.pluginList[F].trigger(O)},G._triggerPluginEvent=function(O,F){var q=this.pluginList[O];q&&q.isReady&&q.trigger(F)},G._reorderPluginList=function(O){var F=this;if(!_.kJ(this.option.pluginOrder))return O;for(var q=Object.keys(O).sort(function(nt,ot){var ut=F.option.pluginOrder.indexOf(nt),dt=F.option.pluginOrder.indexOf(ot);return ut===dt?0:ut===-1?1:dt===-1?-1:ut-dt}),Z={},tt=0;tt<q.length;tt++)Z[q[tt]]=O[q[tt]];return Z},G.addPlugin=function(O){return this.pluginList[O.id]!==void 0?(console.debug("[vConsole] Plugin `"+O.id+"` has already been added."),!1):(this.pluginList[O.id]=O,this.isInited&&(this._initPlugin(O),this._showFirstPluginWhenEmpty()),!0)},G.removePlugin=function(O){O=(O+"").toLowerCase();var F=this.pluginList[O];if(F===void 0)return console.debug("[vConsole] Plugin `"+O+"` does not exist."),!1;F.trigger("remove");try{delete this.pluginList[O],delete this.compInstance.pluginList[O]}catch{this.pluginList[O]=void 0,this.compInstance.pluginList[O]=void 0}return this.compInstance.pluginList=this.compInstance.pluginList,this.compInstance.activedPluginId==O&&(this.compInstance.activedPluginId="",this._showFirstPluginWhenEmpty()),!0},G.show=function(){this.isInited&&(this.compInstance.show=!0,this._triggerPluginsEvent("showConsole"))},G.hide=function(){this.isInited&&(this.compInstance.show=!1,this._triggerPluginsEvent("hideConsole"))},G.showSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!0)},G.hideSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!1)},G.showPlugin=function(O){this.isInited&&(this.pluginList[O]||console.debug("[vConsole] Plugin `"+O+"` does not exist."),this.compInstance.activedPluginId&&this._triggerPluginEvent(this.compInstance.activedPluginId,"hide"),this.compInstance.activedPluginId=O,this._triggerPluginEvent(this.compInstance.activedPluginId,"show"))},G.setOption=function(O,F){if(typeof O=="string"){for(var q=O.split("."),Z=this.option,tt=0;tt<q.length;tt++){if(q[tt]==="__proto__"||q[tt]==="constructor"||q[tt]==="prototype")return void console.debug("[vConsole] Cannot set `"+q[tt]+"` in `vConsole.setOption()`.");Z[q[tt]]===void 0&&(Z[q[tt]]={}),tt===q.length-1&&(Z[q[tt]]=F),Z=Z[q[tt]]}this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else if(_.Kn(O)){for(var nt in O)nt!=="__proto__"&&nt!=="constructor"&&nt!=="prototype"?this.option[nt]=O[nt]:console.debug("[vConsole] Cannot set `"+nt+"` in `vConsole.setOption()`.");this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else console.debug("[vConsole] The first parameter of `vConsole.setOption()` must be a string or an object.")},G.destroy=function(){if(this.isInited){this.isInited=!1,X.instance=void 0;for(var O=Object.keys(this.pluginList),F=O.length-1;F>=0;F--)this.removePlugin(O[F]);this.compInstance.$destroy()}},(0,E.Z)(X,null,[{key:"instance",get:function(){return window.__VCONSOLE_INSTANCE},set:function(O){O===void 0||O instanceof X?window.__VCONSOLE_INSTANCE=O:console.debug("[vConsole] Cannot set `VConsole.instance` because the value is not the instance of VConsole.")}}]),X}();pi.VConsolePlugin=void 0,pi.VConsoleLogPlugin=void 0,pi.VConsoleDefaultPlugin=void 0,pi.VConsoleSystemPlugin=void 0,pi.VConsoleNetworkPlugin=void 0,pi.VConsoleElementPlugin=void 0,pi.VConsoleStoragePlugin=void 0,pi.VConsolePlugin=hi,pi.VConsoleLogPlugin=un,pi.VConsoleDefaultPlugin=ns,pi.VConsoleSystemPlugin=ss,pi.VConsoleNetworkPlugin=Ps,pi.VConsoleElementPlugin=Us,pi.VConsoleStoragePlugin=Zs;var Va=pi}(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__}()})})(vconsole_min);var vconsole_minExports=vconsole_min.exports;const VConsole=getDefaultExportFromCjs(vconsole_minExports);var ENV=(E=>(E[E.WEBGL_LEGACY=0]="WEBGL_LEGACY",E[E.WEBGL=1]="WEBGL",E[E.WEBGL2=2]="WEBGL2",E))(ENV||{}),RENDERER_TYPE=(E=>(E[E.UNKNOWN=0]="UNKNOWN",E[E.WEBGL=1]="WEBGL",E[E.CANVAS=2]="CANVAS",E))(RENDERER_TYPE||{}),BUFFER_BITS=(E=>(E[E.COLOR=16384]="COLOR",E[E.DEPTH=256]="DEPTH",E[E.STENCIL=1024]="STENCIL",E))(BUFFER_BITS||{}),BLEND_MODES=(E=>(E[E.NORMAL=0]="NORMAL",E[E.ADD=1]="ADD",E[E.MULTIPLY=2]="MULTIPLY",E[E.SCREEN=3]="SCREEN",E[E.OVERLAY=4]="OVERLAY",E[E.DARKEN=5]="DARKEN",E[E.LIGHTEN=6]="LIGHTEN",E[E.COLOR_DODGE=7]="COLOR_DODGE",E[E.COLOR_BURN=8]="COLOR_BURN",E[E.HARD_LIGHT=9]="HARD_LIGHT",E[E.SOFT_LIGHT=10]="SOFT_LIGHT",E[E.DIFFERENCE=11]="DIFFERENCE",E[E.EXCLUSION=12]="EXCLUSION",E[E.HUE=13]="HUE",E[E.SATURATION=14]="SATURATION",E[E.COLOR=15]="COLOR",E[E.LUMINOSITY=16]="LUMINOSITY",E[E.NORMAL_NPM=17]="NORMAL_NPM",E[E.ADD_NPM=18]="ADD_NPM",E[E.SCREEN_NPM=19]="SCREEN_NPM",E[E.NONE=20]="NONE",E[E.SRC_OVER=0]="SRC_OVER",E[E.SRC_IN=21]="SRC_IN",E[E.SRC_OUT=22]="SRC_OUT",E[E.SRC_ATOP=23]="SRC_ATOP",E[E.DST_OVER=24]="DST_OVER",E[E.DST_IN=25]="DST_IN",E[E.DST_OUT=26]="DST_OUT",E[E.DST_ATOP=27]="DST_ATOP",E[E.ERASE=26]="ERASE",E[E.SUBTRACT=28]="SUBTRACT",E[E.XOR=29]="XOR",E))(BLEND_MODES||{}),DRAW_MODES=(E=>(E[E.POINTS=0]="POINTS",E[E.LINES=1]="LINES",E[E.LINE_LOOP=2]="LINE_LOOP",E[E.LINE_STRIP=3]="LINE_STRIP",E[E.TRIANGLES=4]="TRIANGLES",E[E.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",E[E.TRIANGLE_FAN=6]="TRIANGLE_FAN",E))(DRAW_MODES||{}),FORMATS=(E=>(E[E.RGBA=6408]="RGBA",E[E.RGB=6407]="RGB",E[E.RG=33319]="RG",E[E.RED=6403]="RED",E[E.RGBA_INTEGER=36249]="RGBA_INTEGER",E[E.RGB_INTEGER=36248]="RGB_INTEGER",E[E.RG_INTEGER=33320]="RG_INTEGER",E[E.RED_INTEGER=36244]="RED_INTEGER",E[E.ALPHA=6406]="ALPHA",E[E.LUMINANCE=6409]="LUMINANCE",E[E.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",E[E.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",E[E.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E))(FORMATS||{}),TARGETS=(E=>(E[E.TEXTURE_2D=3553]="TEXTURE_2D",E[E.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",E[E.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",E[E.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",E[E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",E[E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",E[E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",E))(TARGETS||{}),TYPES=(E=>(E[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",E[E.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",E[E.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",E[E.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",E[E.BYTE=5120]="BYTE",E[E.SHORT=5122]="SHORT",E[E.INT=5124]="INT",E[E.FLOAT=5126]="FLOAT",E[E.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",E[E.HALF_FLOAT=36193]="HALF_FLOAT",E))(TYPES||{}),SAMPLER_TYPES=(E=>(E[E.FLOAT=0]="FLOAT",E[E.INT=1]="INT",E[E.UINT=2]="UINT",E))(SAMPLER_TYPES||{}),SCALE_MODES=(E=>(E[E.NEAREST=0]="NEAREST",E[E.LINEAR=1]="LINEAR",E))(SCALE_MODES||{}),WRAP_MODES=(E=>(E[E.CLAMP=33071]="CLAMP",E[E.REPEAT=10497]="REPEAT",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",E))(WRAP_MODES||{}),MIPMAP_MODES=(E=>(E[E.OFF=0]="OFF",E[E.POW2=1]="POW2",E[E.ON=2]="ON",E[E.ON_MANUAL=3]="ON_MANUAL",E))(MIPMAP_MODES||{}),ALPHA_MODES=(E=>(E[E.NPM=0]="NPM",E[E.UNPACK=1]="UNPACK",E[E.PMA=2]="PMA",E[E.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",E[E.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",E[E.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",E))(ALPHA_MODES||{}),CLEAR_MODES=(E=>(E[E.NO=0]="NO",E[E.YES=1]="YES",E[E.AUTO=2]="AUTO",E[E.BLEND=0]="BLEND",E[E.CLEAR=1]="CLEAR",E[E.BLIT=2]="BLIT",E))(CLEAR_MODES||{}),GC_MODES=(E=>(E[E.AUTO=0]="AUTO",E[E.MANUAL=1]="MANUAL",E))(GC_MODES||{}),PRECISION=(E=>(E.LOW="lowp",E.MEDIUM="mediump",E.HIGH="highp",E))(PRECISION||{}),MASK_TYPES=(E=>(E[E.NONE=0]="NONE",E[E.SCISSOR=1]="SCISSOR",E[E.STENCIL=2]="STENCIL",E[E.SPRITE=3]="SPRITE",E[E.COLOR=4]="COLOR",E))(MASK_TYPES||{}),MSAA_QUALITY=(E=>(E[E.NONE=0]="NONE",E[E.LOW=2]="LOW",E[E.MEDIUM=4]="MEDIUM",E[E.HIGH=8]="HIGH",E))(MSAA_QUALITY||{}),BUFFER_TYPE=(E=>(E[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",E))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(E,_)=>{const A=document.createElement("canvas");return A.width=E,A.height=_,A},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(E,_)=>fetch(E,_),parseXML:E=>new DOMParser().parseFromString(E,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(E){return typeof E<"u"&&E.platform==="MacIntel"&&typeof E.maxTouchPoints=="number"&&E.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(E){return function(_){return _.test(E)}}function isMobile$1(E){var _={userAgent:"",platform:"",maxTouchPoints:0};!E&&typeof navigator<"u"?_={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof E=="string"?_.userAgent=E:E&&E.userAgent&&(_={userAgent:E.userAgent,platform:E.platform,maxTouchPoints:E.maxTouchPoints||0});var A=_.userAgent,T=A.split("[FBAN");typeof T[1]<"u"&&(A=T[0]),T=A.split("Twitter"),typeof T[1]<"u"&&(A=T[0]);var B=createMatch(A),I={apple:{phone:B(appleIphone)&&!B(windowsPhone),ipod:B(appleIpod),tablet:!B(appleIphone)&&(B(appleTablet)||isAppleTabletOnIos13(_))&&!B(windowsPhone),universal:B(appleUniversal),device:(B(appleIphone)||B(appleIpod)||B(appleTablet)||B(appleUniversal)||isAppleTabletOnIos13(_))&&!B(windowsPhone)},amazon:{phone:B(amazonPhone),tablet:!B(amazonPhone)&&B(amazonTablet),device:B(amazonPhone)||B(amazonTablet)},android:{phone:!B(windowsPhone)&&B(amazonPhone)||!B(windowsPhone)&&B(androidPhone),tablet:!B(windowsPhone)&&!B(amazonPhone)&&!B(androidPhone)&&(B(amazonTablet)||B(androidTablet)),device:!B(windowsPhone)&&(B(amazonPhone)||B(amazonTablet)||B(androidPhone)||B(androidTablet))||B(/\bokhttp\b/i)},windows:{phone:B(windowsPhone),tablet:B(windowsTablet),device:B(windowsPhone)||B(windowsTablet)},other:{blackberry:B(otherBlackBerry),blackberry10:B(otherBlackBerry10),opera:B(otherOpera),firefox:B(otherFirefox),chrome:B(otherChrome),device:B(otherBlackBerry)||B(otherBlackBerry10)||B(otherOpera)||B(otherFirefox)||B(otherChrome)},any:!1,phone:!1,tablet:!1};return I.any=I.apple.device||I.android.device||I.windows.device||I.other.device,I.phone=I.apple.phone||I.android.phone||I.windows.phone,I.tablet=I.apple.tablet||I.android.tablet||I.windows.tablet,I}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}};(function(E){var _=Object.prototype.hasOwnProperty,A="~";function T(){}Object.create&&(T.prototype=Object.create(null),new T().__proto__||(A=!1));function B(L,D,V){this.fn=L,this.context=D,this.once=V||!1}function I(L,D,V,U,z){if(typeof V!="function")throw new TypeError("The listener must be a function");var W=new B(V,U||L,z),Y=A?A+D:D;return L._events[Y]?L._events[Y].fn?L._events[Y]=[L._events[Y],W]:L._events[Y].push(W):(L._events[Y]=W,L._eventsCount++),L}function C(L,D){--L._eventsCount===0?L._events=new T:delete L._events[D]}function R(){this._events=new T,this._eventsCount=0}R.prototype.eventNames=function(){var D=[],V,U;if(this._eventsCount===0)return D;for(U in V=this._events)_.call(V,U)&&D.push(A?U.slice(1):U);return Object.getOwnPropertySymbols?D.concat(Object.getOwnPropertySymbols(V)):D},R.prototype.listeners=function(D){var V=A?A+D:D,U=this._events[V];if(!U)return[];if(U.fn)return[U.fn];for(var z=0,W=U.length,Y=new Array(W);z<W;z++)Y[z]=U[z].fn;return Y},R.prototype.listenerCount=function(D){var V=A?A+D:D,U=this._events[V];return U?U.fn?1:U.length:0},R.prototype.emit=function(D,V,U,z,W,Y){var K=A?A+D:D;if(!this._events[K])return!1;var J=this._events[K],et=arguments.length,it,rt;if(J.fn){switch(J.once&&this.removeListener(D,J.fn,void 0,!0),et){case 1:return J.fn.call(J.context),!0;case 2:return J.fn.call(J.context,V),!0;case 3:return J.fn.call(J.context,V,U),!0;case 4:return J.fn.call(J.context,V,U,z),!0;case 5:return J.fn.call(J.context,V,U,z,W),!0;case 6:return J.fn.call(J.context,V,U,z,W,Y),!0}for(rt=1,it=new Array(et-1);rt<et;rt++)it[rt-1]=arguments[rt];J.fn.apply(J.context,it)}else{var st=J.length,lt;for(rt=0;rt<st;rt++)switch(J[rt].once&&this.removeListener(D,J[rt].fn,void 0,!0),et){case 1:J[rt].fn.call(J[rt].context);break;case 2:J[rt].fn.call(J[rt].context,V);break;case 3:J[rt].fn.call(J[rt].context,V,U);break;case 4:J[rt].fn.call(J[rt].context,V,U,z);break;default:if(!it)for(lt=1,it=new Array(et-1);lt<et;lt++)it[lt-1]=arguments[lt];J[rt].fn.apply(J[rt].context,it)}}return!0},R.prototype.on=function(D,V,U){return I(this,D,V,U,!1)},R.prototype.once=function(D,V,U){return I(this,D,V,U,!0)},R.prototype.removeListener=function(D,V,U,z){var W=A?A+D:D;if(!this._events[W])return this;if(!V)return C(this,W),this;var Y=this._events[W];if(Y.fn)Y.fn===V&&(!z||Y.once)&&(!U||Y.context===U)&&C(this,W);else{for(var K=0,J=[],et=Y.length;K<et;K++)(Y[K].fn!==V||z&&!Y[K].once||U&&Y[K].context!==U)&&J.push(Y[K]);J.length?this._events[W]=J.length===1?J[0]:J:C(this,W)}return this},R.prototype.removeAllListeners=function(D){var V;return D?(V=A?A+D:D,this._events[V]&&C(this,V)):(this._events=new T,this._eventsCount=0),this},R.prototype.off=R.prototype.removeListener,R.prototype.addListener=R.prototype.on,R.prefixed=A,R.EventEmitter=R,E.exports=R})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(E,_,A){A=A||2;var T=_&&_.length,B=T?_[0]*A:E.length,I=linkedList(E,0,B,A,!0),C=[];if(!I||I.next===I.prev)return C;var R,L,D,V,U,z,W;if(T&&(I=eliminateHoles(E,_,I,A)),E.length>80*A){R=D=E[0],L=V=E[1];for(var Y=A;Y<B;Y+=A)U=E[Y],z=E[Y+1],U<R&&(R=U),z<L&&(L=z),U>D&&(D=U),z>V&&(V=z);W=Math.max(D-R,V-L),W=W!==0?32767/W:0}return earcutLinked(I,C,A,R,L,W,0),C}function linkedList(E,_,A,T,B){var I,C;if(B===signedArea(E,_,A,T)>0)for(I=_;I<A;I+=T)C=insertNode(I,E[I],E[I+1],C);else for(I=A-T;I>=_;I-=T)C=insertNode(I,E[I],E[I+1],C);return C&&equals(C,C.next)&&(removeNode(C),C=C.next),C}function filterPoints(E,_){if(!E)return E;_||(_=E);var A=E,T;do if(T=!1,!A.steiner&&(equals(A,A.next)||area(A.prev,A,A.next)===0)){if(removeNode(A),A=_=A.prev,A===A.next)break;T=!0}else A=A.next;while(T||A!==_);return _}function earcutLinked(E,_,A,T,B,I,C){if(E){!C&&I&&indexCurve(E,T,B,I);for(var R=E,L,D;E.prev!==E.next;){if(L=E.prev,D=E.next,I?isEarHashed(E,T,B,I):isEar(E)){_.push(L.i/A|0),_.push(E.i/A|0),_.push(D.i/A|0),removeNode(E),E=D.next,R=D.next;continue}if(E=D,E===R){C?C===1?(E=cureLocalIntersections(filterPoints(E),_,A),earcutLinked(E,_,A,T,B,I,2)):C===2&&splitEarcut(E,_,A,T,B,I):earcutLinked(filterPoints(E),_,A,T,B,I,1);break}}}}function isEar(E){var _=E.prev,A=E,T=E.next;if(area(_,A,T)>=0)return!1;for(var B=_.x,I=A.x,C=T.x,R=_.y,L=A.y,D=T.y,V=B<I?B<C?B:C:I<C?I:C,U=R<L?R<D?R:D:L<D?L:D,z=B>I?B>C?B:C:I>C?I:C,W=R>L?R>D?R:D:L>D?L:D,Y=T.next;Y!==_;){if(Y.x>=V&&Y.x<=z&&Y.y>=U&&Y.y<=W&&pointInTriangle(B,R,I,L,C,D,Y.x,Y.y)&&area(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function isEarHashed(E,_,A,T){var B=E.prev,I=E,C=E.next;if(area(B,I,C)>=0)return!1;for(var R=B.x,L=I.x,D=C.x,V=B.y,U=I.y,z=C.y,W=R<L?R<D?R:D:L<D?L:D,Y=V<U?V<z?V:z:U<z?U:z,K=R>L?R>D?R:D:L>D?L:D,J=V>U?V>z?V:z:U>z?U:z,et=zOrder(W,Y,_,A,T),it=zOrder(K,J,_,A,T),rt=E.prevZ,st=E.nextZ;rt&&rt.z>=et&&st&&st.z<=it;){if(rt.x>=W&&rt.x<=K&&rt.y>=Y&&rt.y<=J&&rt!==B&&rt!==C&&pointInTriangle(R,V,L,U,D,z,rt.x,rt.y)&&area(rt.prev,rt,rt.next)>=0||(rt=rt.prevZ,st.x>=W&&st.x<=K&&st.y>=Y&&st.y<=J&&st!==B&&st!==C&&pointInTriangle(R,V,L,U,D,z,st.x,st.y)&&area(st.prev,st,st.next)>=0))return!1;st=st.nextZ}for(;rt&&rt.z>=et;){if(rt.x>=W&&rt.x<=K&&rt.y>=Y&&rt.y<=J&&rt!==B&&rt!==C&&pointInTriangle(R,V,L,U,D,z,rt.x,rt.y)&&area(rt.prev,rt,rt.next)>=0)return!1;rt=rt.prevZ}for(;st&&st.z<=it;){if(st.x>=W&&st.x<=K&&st.y>=Y&&st.y<=J&&st!==B&&st!==C&&pointInTriangle(R,V,L,U,D,z,st.x,st.y)&&area(st.prev,st,st.next)>=0)return!1;st=st.nextZ}return!0}function cureLocalIntersections(E,_,A){var T=E;do{var B=T.prev,I=T.next.next;!equals(B,I)&&intersects(B,T,T.next,I)&&locallyInside(B,I)&&locallyInside(I,B)&&(_.push(B.i/A|0),_.push(T.i/A|0),_.push(I.i/A|0),removeNode(T),removeNode(T.next),T=E=I),T=T.next}while(T!==E);return filterPoints(T)}function splitEarcut(E,_,A,T,B,I){var C=E;do{for(var R=C.next.next;R!==C.prev;){if(C.i!==R.i&&isValidDiagonal(C,R)){var L=splitPolygon(C,R);C=filterPoints(C,C.next),L=filterPoints(L,L.next),earcutLinked(C,_,A,T,B,I,0),earcutLinked(L,_,A,T,B,I,0);return}R=R.next}C=C.next}while(C!==E)}function eliminateHoles(E,_,A,T){var B=[],I,C,R,L,D;for(I=0,C=_.length;I<C;I++)R=_[I]*T,L=I<C-1?_[I+1]*T:E.length,D=linkedList(E,R,L,T,!1),D===D.next&&(D.steiner=!0),B.push(getLeftmost(D));for(B.sort(compareX),I=0;I<B.length;I++)A=eliminateHole(B[I],A);return A}function compareX(E,_){return E.x-_.x}function eliminateHole(E,_){var A=findHoleBridge(E,_);if(!A)return _;var T=splitPolygon(A,E);return filterPoints(T,T.next),filterPoints(A,A.next)}function findHoleBridge(E,_){var A=_,T=E.x,B=E.y,I=-1/0,C;do{if(B<=A.y&&B>=A.next.y&&A.next.y!==A.y){var R=A.x+(B-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(R<=T&&R>I&&(I=R,C=A.x<A.next.x?A:A.next,R===T))return C}A=A.next}while(A!==_);if(!C)return null;var L=C,D=C.x,V=C.y,U=1/0,z;A=C;do T>=A.x&&A.x>=D&&T!==A.x&&pointInTriangle(B<V?T:I,B,D,V,B<V?I:T,B,A.x,A.y)&&(z=Math.abs(B-A.y)/(T-A.x),locallyInside(A,E)&&(z<U||z===U&&(A.x>C.x||A.x===C.x&&sectorContainsSector(C,A)))&&(C=A,U=z)),A=A.next;while(A!==L);return C}function sectorContainsSector(E,_){return area(E.prev,E,_.prev)<0&&area(_.next,E,E.next)<0}function indexCurve(E,_,A,T){var B=E;do B.z===0&&(B.z=zOrder(B.x,B.y,_,A,T)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==E);B.prevZ.nextZ=null,B.prevZ=null,sortLinked(B)}function sortLinked(E){var _,A,T,B,I,C,R,L,D=1;do{for(A=E,E=null,I=null,C=0;A;){for(C++,T=A,R=0,_=0;_<D&&(R++,T=T.nextZ,!!T);_++);for(L=D;R>0||L>0&&T;)R!==0&&(L===0||!T||A.z<=T.z)?(B=A,A=A.nextZ,R--):(B=T,T=T.nextZ,L--),I?I.nextZ=B:E=B,B.prevZ=I,I=B;A=T}I.nextZ=null,D*=2}while(C>1);return E}function zOrder(E,_,A,T,B){return E=(E-A)*B|0,_=(_-T)*B|0,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,E|_<<1}function getLeftmost(E){var _=E,A=E;do(_.x<A.x||_.x===A.x&&_.y<A.y)&&(A=_),_=_.next;while(_!==E);return A}function pointInTriangle(E,_,A,T,B,I,C,R){return(B-C)*(_-R)>=(E-C)*(I-R)&&(E-C)*(T-R)>=(A-C)*(_-R)&&(A-C)*(I-R)>=(B-C)*(T-R)}function isValidDiagonal(E,_){return E.next.i!==_.i&&E.prev.i!==_.i&&!intersectsPolygon(E,_)&&(locallyInside(E,_)&&locallyInside(_,E)&&middleInside(E,_)&&(area(E.prev,E,_.prev)||area(E,_.prev,_))||equals(E,_)&&area(E.prev,E,E.next)>0&&area(_.prev,_,_.next)>0)}function area(E,_,A){return(_.y-E.y)*(A.x-_.x)-(_.x-E.x)*(A.y-_.y)}function equals(E,_){return E.x===_.x&&E.y===_.y}function intersects(E,_,A,T){var B=sign$1(area(E,_,A)),I=sign$1(area(E,_,T)),C=sign$1(area(A,T,E)),R=sign$1(area(A,T,_));return!!(B!==I&&C!==R||B===0&&onSegment(E,A,_)||I===0&&onSegment(E,T,_)||C===0&&onSegment(A,E,T)||R===0&&onSegment(A,_,T))}function onSegment(E,_,A){return _.x<=Math.max(E.x,A.x)&&_.x>=Math.min(E.x,A.x)&&_.y<=Math.max(E.y,A.y)&&_.y>=Math.min(E.y,A.y)}function sign$1(E){return E>0?1:E<0?-1:0}function intersectsPolygon(E,_){var A=E;do{if(A.i!==E.i&&A.next.i!==E.i&&A.i!==_.i&&A.next.i!==_.i&&intersects(A,A.next,E,_))return!0;A=A.next}while(A!==E);return!1}function locallyInside(E,_){return area(E.prev,E,E.next)<0?area(E,_,E.next)>=0&&area(E,E.prev,_)>=0:area(E,_,E.prev)<0||area(E,E.next,_)<0}function middleInside(E,_){var A=E,T=!1,B=(E.x+_.x)/2,I=(E.y+_.y)/2;do A.y>I!=A.next.y>I&&A.next.y!==A.y&&B<(A.next.x-A.x)*(I-A.y)/(A.next.y-A.y)+A.x&&(T=!T),A=A.next;while(A!==E);return T}function splitPolygon(E,_){var A=new Node$1(E.i,E.x,E.y),T=new Node$1(_.i,_.x,_.y),B=E.next,I=_.prev;return E.next=_,_.prev=E,A.next=B,B.prev=A,T.next=A,A.prev=T,I.next=T,T.prev=I,T}function insertNode(E,_,A,T){var B=new Node$1(E,_,A);return T?(B.next=T.next,B.prev=T,T.next.prev=B,T.next=B):(B.prev=B,B.next=B),B}function removeNode(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function Node$1(E,_,A){this.i=E,this.x=_,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(E,_,A,T){var B=_&&_.length,I=B?_[0]*A:E.length,C=Math.abs(signedArea(E,0,I,A));if(B)for(var R=0,L=_.length;R<L;R++){var D=_[R]*A,V=R<L-1?_[R+1]*A:E.length;C-=Math.abs(signedArea(E,D,V,A))}var U=0;for(R=0;R<T.length;R+=3){var z=T[R]*A,W=T[R+1]*A,Y=T[R+2]*A;U+=Math.abs((E[z]-E[Y])*(E[W+1]-E[z+1])-(E[z]-E[W])*(E[Y+1]-E[z+1]))}return C===0&&U===0?0:Math.abs((U-C)/C)};function signedArea(E,_,A,T){for(var B=0,I=_,C=A-T;I<A;I+=T)B+=(E[C]-E[I])*(E[I+1]+E[C+1]),C=I;return B}earcut.flatten=function(E){for(var _=E[0][0].length,A={vertices:[],holes:[],dimensions:_},T=0,B=0;B<E.length;B++){for(var I=0;I<E[B].length;I++)for(var C=0;C<_;C++)A.vertices.push(E[B][I][C]);B>0&&(T+=E[B-1].length,A.holes.push(T))}return A};var earcutExports=earcut$2.exports;const earcut$1=getDefaultExportFromCjs(earcutExports);var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */punycode$1.exports;(function(E,_){(function(A){var T=_&&!_.nodeType&&_,B=E&&!E.nodeType&&E,I=typeof commonjsGlobal=="object"&&commonjsGlobal;(I.global===I||I.window===I||I.self===I)&&(A=I);var C,R=2147483647,L=36,D=1,V=26,U=38,z=700,W=72,Y=128,K="-",J=/^xn--/,et=/[^\x20-\x7E]/,it=/[\x2E\u3002\uFF0E\uFF61]/g,rt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},st=L-D,lt=Math.floor,ct=String.fromCharCode,at;function ht(Lt){throw new RangeError(rt[Lt])}function mt(Lt,St){for(var Ct=Lt.length,_t=[];Ct--;)_t[Ct]=St(Lt[Ct]);return _t}function yt(Lt,St){var Ct=Lt.split("@"),_t="";Ct.length>1&&(_t=Ct[0]+"@",Lt=Ct[1]),Lt=Lt.replace(it,".");var wt=Lt.split("."),Mt=mt(wt,St).join(".");return _t+Mt}function Tt(Lt){for(var St=[],Ct=0,_t=Lt.length,wt,Mt;Ct<_t;)wt=Lt.charCodeAt(Ct++),wt>=55296&&wt<=56319&&Ct<_t?(Mt=Lt.charCodeAt(Ct++),(Mt&64512)==56320?St.push(((wt&1023)<<10)+(Mt&1023)+65536):(St.push(wt),Ct--)):St.push(wt);return St}function At(Lt){return mt(Lt,function(St){var Ct="";return St>65535&&(St-=65536,Ct+=ct(St>>>10&1023|55296),St=56320|St&1023),Ct+=ct(St),Ct}).join("")}function pt(Lt){return Lt-48<10?Lt-22:Lt-65<26?Lt-65:Lt-97<26?Lt-97:L}function Et(Lt,St){return Lt+22+75*(Lt<26)-((St!=0)<<5)}function Vt(Lt,St,Ct){var _t=0;for(Lt=Ct?lt(Lt/z):Lt>>1,Lt+=lt(Lt/St);Lt>st*V>>1;_t+=L)Lt=lt(Lt/st);return lt(_t+(st+1)*Lt/(Lt+U))}function Ot(Lt){var St=[],Ct=Lt.length,_t,wt=0,Mt=Y,Gt=W,Jt,he,me,ne,Kt,ue,_e,ge,pe;for(Jt=Lt.lastIndexOf(K),Jt<0&&(Jt=0),he=0;he<Jt;++he)Lt.charCodeAt(he)>=128&&ht("not-basic"),St.push(Lt.charCodeAt(he));for(me=Jt>0?Jt+1:0;me<Ct;){for(ne=wt,Kt=1,ue=L;me>=Ct&&ht("invalid-input"),_e=pt(Lt.charCodeAt(me++)),(_e>=L||_e>lt((R-wt)/Kt))&&ht("overflow"),wt+=_e*Kt,ge=ue<=Gt?D:ue>=Gt+V?V:ue-Gt,!(_e<ge);ue+=L)pe=L-ge,Kt>lt(R/pe)&&ht("overflow"),Kt*=pe;_t=St.length+1,Gt=Vt(wt-ne,_t,ne==0),lt(wt/_t)>R-Mt&&ht("overflow"),Mt+=lt(wt/_t),wt%=_t,St.splice(wt++,0,Mt)}return At(St)}function gt(Lt){var St,Ct,_t,wt,Mt,Gt,Jt,he,me,ne,Kt,ue=[],_e,ge,pe,ve;for(Lt=Tt(Lt),_e=Lt.length,St=Y,Ct=0,Mt=W,Gt=0;Gt<_e;++Gt)Kt=Lt[Gt],Kt<128&&ue.push(ct(Kt));for(_t=wt=ue.length,wt&&ue.push(K);_t<_e;){for(Jt=R,Gt=0;Gt<_e;++Gt)Kt=Lt[Gt],Kt>=St&&Kt<Jt&&(Jt=Kt);for(ge=_t+1,Jt-St>lt((R-Ct)/ge)&&ht("overflow"),Ct+=(Jt-St)*ge,St=Jt,Gt=0;Gt<_e;++Gt)if(Kt=Lt[Gt],Kt<St&&++Ct>R&&ht("overflow"),Kt==St){for(he=Ct,me=L;ne=me<=Mt?D:me>=Mt+V?V:me-Mt,!(he<ne);me+=L)ve=he-ne,pe=L-ne,ue.push(ct(Et(ne+ve%pe,0))),he=lt(ve/pe);ue.push(ct(Et(he,0))),Mt=Vt(Ct,ge,_t==wt),Ct=0,++_t}++Ct,++St}return ue.join("")}function bt(Lt){return yt(Lt,function(St){return J.test(St)?Ot(St.slice(4).toLowerCase()):St})}function $t(Lt){return yt(Lt,function(St){return et.test(St)?"xn--"+gt(St):St})}if(C={version:"1.4.1",ucs2:{decode:Tt,encode:At},decode:Ot,encode:gt,toASCII:$t,toUnicode:bt},T&&B)if(E.exports==T)B.exports=C;else for(at in C)C.hasOwnProperty(at)&&(T[at]=C[at]);else A.punycode=C})(commonjsGlobal)})(punycode$1,punycode$1.exports);var punycodeExports=punycode$1.exports,shams=function E(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},A=Symbol("test"),T=Object(A);if(typeof A=="string"||Object.prototype.toString.call(A)!=="[object Symbol]"||Object.prototype.toString.call(T)!=="[object Symbol]")return!1;var B=42;_[A]=B;for(A in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var I=Object.getOwnPropertySymbols(_);if(I.length!==1||I[0]!==A||!Object.prototype.propertyIsEnumerable.call(_,A))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var C=Object.getOwnPropertyDescriptor(_,A);if(C.value!==B||C.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function E(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function E(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$1=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function E(_,A){for(var T=[],B=0;B<_.length;B+=1)T[B]=_[B];for(var I=0;I<A.length;I+=1)T[I+_.length]=A[I];return T},slicy=function E(_,A){for(var T=[],B=A||0,I=0;B<_.length;B+=1,I+=1)T[I]=_[B];return T},joiny=function(E,_){for(var A="",T=0;T<E.length;T+=1)A+=E[T],T+1<E.length&&(A+=_);return A},implementation$1=function E(_){var A=this;if(typeof A!="function"||toStr$1.apply(A)!==funcType)throw new TypeError(ERROR_MESSAGE+A);for(var T=slicy(arguments,1),B,I=function(){if(this instanceof B){var V=A.apply(this,concatty(T,arguments));return Object(V)===V?V:this}return A.apply(_,concatty(T,arguments))},C=max(0,A.length-T.length),R=[],L=0;L<C;L++)R[L]="$"+L;if(B=Function("binder","return function ("+joiny(R,",")+"){ return binder.apply(this,arguments); }")(I),A.prototype){var D=function(){};D.prototype=A.prototype,B.prototype=new D,D.prototype=null}return B},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call,$hasOwn),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$3=TypeError,getEvalledConstructor=function(E){try{return $Function('"use strict"; return ('+E+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto=Object.getPrototypeOf||(hasProto?function(E){return E.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto)try{null.error}catch(E){var errorProto=getProto(getProto(E));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function E(_){var A;if(_==="%AsyncFunction%")A=getEvalledConstructor("async function () {}");else if(_==="%GeneratorFunction%")A=getEvalledConstructor("function* () {}");else if(_==="%AsyncGeneratorFunction%")A=getEvalledConstructor("async function* () {}");else if(_==="%AsyncGenerator%"){var T=E("%AsyncGeneratorFunction%");T&&(A=T.prototype)}else if(_==="%AsyncIteratorPrototype%"){var B=E("%AsyncGenerator%");B&&getProto&&(A=getProto(B.prototype))}return INTRINSICS[_]=A,A},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=hasown,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function E(_){var A=$strSlice(_,0,1),T=$strSlice(_,-1);if(A==="%"&&T!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(T==="%"&&A!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var B=[];return $replace$1(_,rePropName,function(I,C,R,L){B[B.length]=R?$replace$1(L,reEscapeChar,"$1"):C||I}),B},getBaseIntrinsic=function E(_,A){var T=_,B;if(hasOwn$1(LEGACY_ALIASES,T)&&(B=LEGACY_ALIASES[T],T="%"+B[0]+"%"),hasOwn$1(INTRINSICS,T)){var I=INTRINSICS[T];if(I===needsEval&&(I=doEval(T)),typeof I>"u"&&!A)throw new $TypeError$3("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:B,name:T,value:I}}throw new $SyntaxError$1("intrinsic "+_+" does not exist!")},getIntrinsic=function E(_,A){if(typeof _!="string"||_.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof A!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,_)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var T=stringToPath(_),B=T.length>0?T[0]:"",I=getBaseIntrinsic("%"+B+"%",A),C=I.name,R=I.value,L=!1,D=I.alias;D&&(B=D[0],$spliceApply(T,$concat$1([0,1],D)));for(var V=1,U=!0;V<T.length;V+=1){var z=T[V],W=$strSlice(z,0,1),Y=$strSlice(z,-1);if((W==='"'||W==="'"||W==="`"||Y==='"'||Y==="'"||Y==="`")&&W!==Y)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((z==="constructor"||!U)&&(L=!0),B+="."+z,C="%"+B+"%",hasOwn$1(INTRINSICS,C))R=INTRINSICS[C];else if(R!=null){if(!(z in R)){if(!A)throw new $TypeError$3("base intrinsic for "+_+" exists, but the property is not available.");return}if($gOPD$1&&V+1>=T.length){var K=$gOPD$1(R,z);U=!!K,U&&"get"in K&&!("originalValue"in K.get)?R=K.get:R=R[z]}else U=hasOwn$1(R,z),R=R[z];U&&!L&&(INTRINSICS[C]=R)}}return R},callBind$1={exports:{}},GetIntrinsic$5=getIntrinsic,$defineProperty$1=GetIntrinsic$5("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function E(){if($defineProperty$1)try{return $defineProperty$1({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function E(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty$1([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,GetIntrinsic$4=getIntrinsic,$gOPD=GetIntrinsic$4("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,hasPropertyDescriptors=hasPropertyDescriptors_1(),GetIntrinsic$3=getIntrinsic,$defineProperty=hasPropertyDescriptors&&GetIntrinsic$3("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch{$defineProperty=!1}var $SyntaxError=GetIntrinsic$3("%SyntaxError%"),$TypeError$2=GetIntrinsic$3("%TypeError%"),gopd=gopd$1,defineDataProperty=function E(_,A,T){if(!_||typeof _!="object"&&typeof _!="function")throw new $TypeError$2("`obj` must be an object or a function`");if(typeof A!="string"&&typeof A!="symbol")throw new $TypeError$2("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$2("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$2("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$2("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$2("`loose`, if provided, must be a boolean");var B=arguments.length>3?arguments[3]:null,I=arguments.length>4?arguments[4]:null,C=arguments.length>5?arguments[5]:null,R=arguments.length>6?arguments[6]:!1,L=!!gopd&&gopd(_,A);if($defineProperty)$defineProperty(_,A,{configurable:C===null&&L?L.configurable:!C,enumerable:B===null&&L?L.enumerable:!B,value:T,writable:I===null&&L?L.writable:!I});else if(R||!B&&!I&&!C)_[A]=T;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},GetIntrinsic$2=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD=gopd$1,$TypeError$1=GetIntrinsic$2("%TypeError%"),$floor$1=GetIntrinsic$2("%Math.floor%"),setFunctionLength=function E(_,A){if(typeof _!="function")throw new $TypeError$1("`fn` is not a function");if(typeof A!="number"||A<0||A>4294967295||$floor$1(A)!==A)throw new $TypeError$1("`length` must be a positive 32-bit integer");var T=arguments.length>2&&!!arguments[2],B=!0,I=!0;if("length"in _&&gOPD){var C=gOPD(_,"length");C&&!C.configurable&&(B=!1),C&&!C.writable&&(I=!1)}return(B||I||!T)&&(hasDescriptors?define(_,"length",A,!0,!0):define(_,"length",A)),_};(function(E){var _=functionBind,A=getIntrinsic,T=setFunctionLength,B=A("%TypeError%"),I=A("%Function.prototype.apply%"),C=A("%Function.prototype.call%"),R=A("%Reflect.apply%",!0)||_.call(C,I),L=A("%Object.defineProperty%",!0),D=A("%Math.max%");if(L)try{L({},"a",{value:1})}catch{L=null}E.exports=function(z){if(typeof z!="function")throw new B("a function is required");var W=R(_,C,arguments);return T(W,1+D(0,z.length-(arguments.length-1)),!0)};var V=function(){return R(_,I,arguments)};L?L(E.exports,"apply",{value:V}):E.exports.apply=V})(callBind$1);var callBindExports=callBind$1.exports,GetIntrinsic$1=getIntrinsic,callBind=callBindExports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function E(_,A){var T=GetIntrinsic$1(_,!!A);return typeof T=="function"&&$indexOf(_,".prototype.")>-1?callBind(T):T};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize$1=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(E){return E.__proto__}:null);function addNumericSeparator(E,_){if(E===1/0||E===-1/0||E!==E||E&&E>-1e3&&E<1e3||$test.call(/e/,_))return _;var A=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof E=="number"){var T=E<0?-$floor(-E):$floor(E);if(T!==E){var B=String(T),I=$slice.call(_,B.length+1);return $replace.call(B,A,"$&_")+"."+$replace.call($replace.call(I,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(_,A,"$&_")}var utilInspect=require$$0,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function E(_,A,T,B){var I=A||{};if(has$3(I,"quoteStyle")&&I.quoteStyle!=="single"&&I.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(I,"maxStringLength")&&(typeof I.maxStringLength=="number"?I.maxStringLength<0&&I.maxStringLength!==1/0:I.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var C=has$3(I,"customInspect")?I.customInspect:!0;if(typeof C!="boolean"&&C!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(I,"indent")&&I.indent!==null&&I.indent!=="	"&&!(parseInt(I.indent,10)===I.indent&&I.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(I,"numericSeparator")&&typeof I.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var R=I.numericSeparator;if(typeof _>"u")return"undefined";if(_===null)return"null";if(typeof _=="boolean")return _?"true":"false";if(typeof _=="string")return inspectString(_,I);if(typeof _=="number"){if(_===0)return 1/0/_>0?"0":"-0";var L=String(_);return R?addNumericSeparator(_,L):L}if(typeof _=="bigint"){var D=String(_)+"n";return R?addNumericSeparator(_,D):D}var V=typeof I.depth>"u"?5:I.depth;if(typeof T>"u"&&(T=0),T>=V&&V>0&&typeof _=="object")return isArray$3(_)?"[Array]":"[Object]";var U=getIndent(I,T);if(typeof B>"u")B=[];else if(indexOf(B,_)>=0)return"[Circular]";function z(pt,Et,Vt){if(Et&&(B=$arrSlice.call(B),B.push(Et)),Vt){var Ot={depth:I.depth};return has$3(I,"quoteStyle")&&(Ot.quoteStyle=I.quoteStyle),E(pt,Ot,T+1,B)}return E(pt,I,T+1,B)}if(typeof _=="function"&&!isRegExp$1(_)){var W=nameOf(_),Y=arrObjKeys(_,z);return"[Function"+(W?": "+W:" (anonymous)")+"]"+(Y.length>0?" { "+$join.call(Y,", ")+" }":"")}if(isSymbol(_)){var K=hasShammedSymbols?$replace.call(String(_),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(_);return typeof _=="object"&&!hasShammedSymbols?markBoxed(K):K}if(isElement(_)){for(var J="<"+$toLowerCase.call(String(_.nodeName)),et=_.attributes||[],it=0;it<et.length;it++)J+=" "+et[it].name+"="+wrapQuotes(quote(et[it].value),"double",I);return J+=">",_.childNodes&&_.childNodes.length&&(J+="..."),J+="</"+$toLowerCase.call(String(_.nodeName))+">",J}if(isArray$3(_)){if(_.length===0)return"[]";var rt=arrObjKeys(_,z);return U&&!singleLineValues(rt)?"["+indentedJoin(rt,U)+"]":"[ "+$join.call(rt,", ")+" ]"}if(isError(_)){var st=arrObjKeys(_,z);return!("cause"in Error.prototype)&&"cause"in _&&!isEnumerable.call(_,"cause")?"{ ["+String(_)+"] "+$join.call($concat.call("[cause]: "+z(_.cause),st),", ")+" }":st.length===0?"["+String(_)+"]":"{ ["+String(_)+"] "+$join.call(st,", ")+" }"}if(typeof _=="object"&&C){if(inspectSymbol&&typeof _[inspectSymbol]=="function"&&utilInspect)return utilInspect(_,{depth:V-T});if(C!=="symbol"&&typeof _.inspect=="function")return _.inspect()}if(isMap(_)){var lt=[];return mapForEach&&mapForEach.call(_,function(pt,Et){lt.push(z(Et,_,!0)+" => "+z(pt,_))}),collectionOf("Map",mapSize$1.call(_),lt,U)}if(isSet(_)){var ct=[];return setForEach&&setForEach.call(_,function(pt){ct.push(z(pt,_))}),collectionOf("Set",setSize.call(_),ct,U)}if(isWeakMap(_))return weakCollectionOf("WeakMap");if(isWeakSet(_))return weakCollectionOf("WeakSet");if(isWeakRef(_))return weakCollectionOf("WeakRef");if(isNumber(_))return markBoxed(z(Number(_)));if(isBigInt(_))return markBoxed(z(bigIntValueOf.call(_)));if(isBoolean(_))return markBoxed(booleanValueOf.call(_));if(isString(_))return markBoxed(z(String(_)));if(typeof window<"u"&&_===window)return"{ [object Window] }";if(_===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(_)&&!isRegExp$1(_)){var at=arrObjKeys(_,z),ht=gPO?gPO(_)===Object.prototype:_ instanceof Object||_.constructor===Object,mt=_ instanceof Object?"":"null prototype",yt=!ht&&toStringTag&&Object(_)===_&&toStringTag in _?$slice.call(toStr(_),8,-1):mt?"Object":"",Tt=ht||typeof _.constructor!="function"?"":_.constructor.name?_.constructor.name+" ":"",At=Tt+(yt||mt?"["+$join.call($concat.call([],yt||[],mt||[]),": ")+"] ":"");return at.length===0?At+"{}":U?At+"{"+indentedJoin(at,U)+"}":At+"{ "+$join.call(at,", ")+" }"}return String(_)};function wrapQuotes(E,_,A){var T=(A.quoteStyle||_)==="double"?'"':"'";return T+E+T}function quote(E){return $replace.call(String(E),/"/g,"&quot;")}function isArray$3(E){return toStr(E)==="[object Array]"&&(!toStringTag||!(typeof E=="object"&&toStringTag in E))}function isDate(E){return toStr(E)==="[object Date]"&&(!toStringTag||!(typeof E=="object"&&toStringTag in E))}function isRegExp$1(E){return toStr(E)==="[object RegExp]"&&(!toStringTag||!(typeof E=="object"&&toStringTag in E))}function isError(E){return toStr(E)==="[object Error]"&&(!toStringTag||!(typeof E=="object"&&toStringTag in E))}function isString(E){return toStr(E)==="[object String]"&&(!toStringTag||!(typeof E=="object"&&toStringTag in E))}function isNumber(E){return toStr(E)==="[object Number]"&&(!toStringTag||!(typeof E=="object"&&toStringTag in E))}function isBoolean(E){return toStr(E)==="[object Boolean]"&&(!toStringTag||!(typeof E=="object"&&toStringTag in E))}function isSymbol(E){if(hasShammedSymbols)return E&&typeof E=="object"&&E instanceof Symbol;if(typeof E=="symbol")return!0;if(!E||typeof E!="object"||!symToString)return!1;try{return symToString.call(E),!0}catch{}return!1}function isBigInt(E){if(!E||typeof E!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(E),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(E){return E in this};function has$3(E,_){return hasOwn.call(E,_)}function toStr(E){return objectToString.call(E)}function nameOf(E){if(E.name)return E.name;var _=$match.call(functionToString.call(E),/^function\s*([\w$]+)/);return _?_[1]:null}function indexOf(E,_){if(E.indexOf)return E.indexOf(_);for(var A=0,T=E.length;A<T;A++)if(E[A]===_)return A;return-1}function isMap(E){if(!mapSize$1||!E||typeof E!="object")return!1;try{mapSize$1.call(E);try{setSize.call(E)}catch{return!0}return E instanceof Map}catch{}return!1}function isWeakMap(E){if(!weakMapHas||!E||typeof E!="object")return!1;try{weakMapHas.call(E,weakMapHas);try{weakSetHas.call(E,weakSetHas)}catch{return!0}return E instanceof WeakMap}catch{}return!1}function isWeakRef(E){if(!weakRefDeref||!E||typeof E!="object")return!1;try{return weakRefDeref.call(E),!0}catch{}return!1}function isSet(E){if(!setSize||!E||typeof E!="object")return!1;try{setSize.call(E);try{mapSize$1.call(E)}catch{return!0}return E instanceof Set}catch{}return!1}function isWeakSet(E){if(!weakSetHas||!E||typeof E!="object")return!1;try{weakSetHas.call(E,weakSetHas);try{weakMapHas.call(E,weakMapHas)}catch{return!0}return E instanceof WeakSet}catch{}return!1}function isElement(E){return!E||typeof E!="object"?!1:typeof HTMLElement<"u"&&E instanceof HTMLElement?!0:typeof E.nodeName=="string"&&typeof E.getAttribute=="function"}function inspectString(E,_){if(E.length>_.maxStringLength){var A=E.length-_.maxStringLength,T="... "+A+" more character"+(A>1?"s":"");return inspectString($slice.call(E,0,_.maxStringLength),_)+T}var B=$replace.call($replace.call(E,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(B,"single",_)}function lowbyte(E){var _=E.charCodeAt(0),A={8:"b",9:"t",10:"n",12:"f",13:"r"}[_];return A?"\\"+A:"\\x"+(_<16?"0":"")+$toUpperCase.call(_.toString(16))}function markBoxed(E){return"Object("+E+")"}function weakCollectionOf(E){return E+" { ? }"}function collectionOf(E,_,A,T){var B=T?indentedJoin(A,T):$join.call(A,", ");return E+" ("+_+") {"+B+"}"}function singleLineValues(E){for(var _=0;_<E.length;_++)if(indexOf(E[_],`
`)>=0)return!1;return!0}function getIndent(E,_){var A;if(E.indent==="	")A="	";else if(typeof E.indent=="number"&&E.indent>0)A=$join.call(Array(E.indent+1)," ");else return null;return{base:A,prev:$join.call(Array(_+1),A)}}function indentedJoin(E,_){if(E.length===0)return"";var A=`
`+_.prev+_.base;return A+$join.call(E,","+A)+`
`+_.prev}function arrObjKeys(E,_){var A=isArray$3(E),T=[];if(A){T.length=E.length;for(var B=0;B<E.length;B++)T[B]=has$3(E,B)?_(E[B],E):""}var I=typeof gOPS=="function"?gOPS(E):[],C;if(hasShammedSymbols){C={};for(var R=0;R<I.length;R++)C["$"+I[R]]=I[R]}for(var L in E)has$3(E,L)&&(A&&String(Number(L))===L&&L<E.length||hasShammedSymbols&&C["$"+L]instanceof Symbol||($test.call(/[^\w$]/,L)?T.push(_(L,E)+": "+_(E[L],E)):T.push(L+": "+_(E[L],E))));if(typeof gOPS=="function")for(var D=0;D<I.length;D++)isEnumerable.call(E,I[D])&&T.push("["+_(I[D])+"]: "+_(E[I[D]],E));return T}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(E,_){for(var A=E,T;(T=A.next)!==null;A=T)if(T.key===_)return A.next=T.next,T.next=E.next,E.next=T,T},listGet=function(E,_){var A=listGetNode(E,_);return A&&A.value},listSet=function(E,_,A){var T=listGetNode(E,_);T?T.value=A:E.next={key:_,next:E.next,value:A}},listHas=function(E,_){return!!listGetNode(E,_)},sideChannel=function E(){var _,A,T,B={assert:function(I){if(!B.has(I))throw new $TypeError("Side channel does not contain "+inspect(I))},get:function(I){if($WeakMap&&I&&(typeof I=="object"||typeof I=="function")){if(_)return $weakMapGet(_,I)}else if($Map){if(A)return $mapGet(A,I)}else if(T)return listGet(T,I)},has:function(I){if($WeakMap&&I&&(typeof I=="object"||typeof I=="function")){if(_)return $weakMapHas(_,I)}else if($Map){if(A)return $mapHas(A,I)}else if(T)return listHas(T,I);return!1},set:function(I,C){$WeakMap&&I&&(typeof I=="object"||typeof I=="function")?(_||(_=new $WeakMap),$weakMapSet(_,I,C)):$Map?(A||(A=new $Map),$mapSet(A,I,C)):(T||(T={key:{},next:null}),listSet(T,I,C))}};return B},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$4={default:Format.RFC3986,formatters:{RFC1738:function(E){return replace.call(E,percentTwenties,"+")},RFC3986:function(E){return String(E)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$3=formats$4,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,hexTable=function(){for(var E=[],_=0;_<256;++_)E.push("%"+((_<16?"0":"")+_.toString(16)).toUpperCase());return E}(),compactQueue=function E(_){for(;_.length>1;){var A=_.pop(),T=A.obj[A.prop];if(isArray$2(T)){for(var B=[],I=0;I<T.length;++I)typeof T[I]<"u"&&B.push(T[I]);A.obj[A.prop]=B}}},arrayToObject=function E(_,A){for(var T=A&&A.plainObjects?Object.create(null):{},B=0;B<_.length;++B)typeof _[B]<"u"&&(T[B]=_[B]);return T},merge=function E(_,A,T){if(!A)return _;if(typeof A!="object"){if(isArray$2(_))_.push(A);else if(_&&typeof _=="object")(T&&(T.plainObjects||T.allowPrototypes)||!has$2.call(Object.prototype,A))&&(_[A]=!0);else return[_,A];return _}if(!_||typeof _!="object")return[_].concat(A);var B=_;return isArray$2(_)&&!isArray$2(A)&&(B=arrayToObject(_,T)),isArray$2(_)&&isArray$2(A)?(A.forEach(function(I,C){if(has$2.call(_,C)){var R=_[C];R&&typeof R=="object"&&I&&typeof I=="object"?_[C]=E(R,I,T):_.push(I)}else _[C]=I}),_):Object.keys(A).reduce(function(I,C){var R=A[C];return has$2.call(I,C)?I[C]=E(I[C],R,T):I[C]=R,I},B)},assign=function E(_,A){return Object.keys(A).reduce(function(T,B){return T[B]=A[B],T},_)},decode=function(E,_,A){var T=E.replace(/\+/g," ");if(A==="iso-8859-1")return T.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(T)}catch{return T}},encode=function E(_,A,T,B,I){if(_.length===0)return _;var C=_;if(typeof _=="symbol"?C=Symbol.prototype.toString.call(_):typeof _!="string"&&(C=String(_)),T==="iso-8859-1")return escape(C).replace(/%u[0-9a-f]{4}/gi,function(V){return"%26%23"+parseInt(V.slice(2),16)+"%3B"});for(var R="",L=0;L<C.length;++L){var D=C.charCodeAt(L);if(D===45||D===46||D===95||D===126||D>=48&&D<=57||D>=65&&D<=90||D>=97&&D<=122||I===formats$3.RFC1738&&(D===40||D===41)){R+=C.charAt(L);continue}if(D<128){R=R+hexTable[D];continue}if(D<2048){R=R+(hexTable[192|D>>6]+hexTable[128|D&63]);continue}if(D<55296||D>=57344){R=R+(hexTable[224|D>>12]+hexTable[128|D>>6&63]+hexTable[128|D&63]);continue}L+=1,D=65536+((D&1023)<<10|C.charCodeAt(L)&1023),R+=hexTable[240|D>>18]+hexTable[128|D>>12&63]+hexTable[128|D>>6&63]+hexTable[128|D&63]}return R},compact=function E(_){for(var A=[{obj:{o:_},prop:"o"}],T=[],B=0;B<A.length;++B)for(var I=A[B],C=I.obj[I.prop],R=Object.keys(C),L=0;L<R.length;++L){var D=R[L],V=C[D];typeof V=="object"&&V!==null&&T.indexOf(V)===-1&&(A.push({obj:C,prop:D}),T.push(V))}return compactQueue(A),_},isRegExp=function E(_){return Object.prototype.toString.call(_)==="[object RegExp]"},isBuffer=function E(_){return!_||typeof _!="object"?!1:!!(_.constructor&&_.constructor.isBuffer&&_.constructor.isBuffer(_))},combine=function E(_,A){return[].concat(_,A)},maybeMap=function E(_,A){if(isArray$2(_)){for(var T=[],B=0;B<_.length;B+=1)T.push(A(_[B]));return T}return A(_)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$2=formats$4,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function E(_){return _+"[]"},comma:"comma",indices:function E(_,A){return _+"["+A+"]"},repeat:function E(_){return _}},isArray$1=Array.isArray,push=Array.prototype.push,pushToArray=function(E,_){push.apply(E,isArray$1(_)?_:[_])},toISO=Date.prototype.toISOString,defaultFormat=formats$2.default,defaults$1={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils$1.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$2.formatters[defaultFormat],indices:!1,serializeDate:function E(_){return toISO.call(_)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function E(_){return typeof _=="string"||typeof _=="number"||typeof _=="boolean"||typeof _=="symbol"||typeof _=="bigint"},sentinel={},stringify$1=function E(_,A,T,B,I,C,R,L,D,V,U,z,W,Y,K,J){for(var et=_,it=J,rt=0,st=!1;(it=it.get(sentinel))!==void 0&&!st;){var lt=it.get(_);if(rt+=1,typeof lt<"u"){if(lt===rt)throw new RangeError("Cyclic object value");st=!0}typeof it.get(sentinel)>"u"&&(rt=0)}if(typeof L=="function"?et=L(A,et):et instanceof Date?et=U(et):T==="comma"&&isArray$1(et)&&(et=utils$1.maybeMap(et,function(Ot){return Ot instanceof Date?U(Ot):Ot})),et===null){if(I)return R&&!Y?R(A,defaults$1.encoder,K,"key",z):A;et=""}if(isNonNullishPrimitive(et)||utils$1.isBuffer(et)){if(R){var ct=Y?A:R(A,defaults$1.encoder,K,"key",z);return[W(ct)+"="+W(R(et,defaults$1.encoder,K,"value",z))]}return[W(A)+"="+W(String(et))]}var at=[];if(typeof et>"u")return at;var ht;if(T==="comma"&&isArray$1(et))Y&&R&&(et=utils$1.maybeMap(et,R)),ht=[{value:et.length>0?et.join(",")||null:void 0}];else if(isArray$1(L))ht=L;else{var mt=Object.keys(et);ht=D?mt.sort(D):mt}for(var yt=B&&isArray$1(et)&&et.length===1?A+"[]":A,Tt=0;Tt<ht.length;++Tt){var At=ht[Tt],pt=typeof At=="object"&&typeof At.value<"u"?At.value:et[At];if(!(C&&pt===null)){var Et=isArray$1(et)?typeof T=="function"?T(yt,At):yt:yt+(V?"."+At:"["+At+"]");J.set(_,rt);var Vt=getSideChannel();Vt.set(sentinel,J),pushToArray(at,E(pt,Et,T,B,I,C,T==="comma"&&Y&&isArray$1(et)?null:R,L,D,V,U,z,W,Y,K,Vt))}}return at},normalizeStringifyOptions=function E(_){if(!_)return defaults$1;if(_.encoder!==null&&typeof _.encoder<"u"&&typeof _.encoder!="function")throw new TypeError("Encoder has to be a function.");var A=_.charset||defaults$1.charset;if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var T=formats$2.default;if(typeof _.format<"u"){if(!has$1.call(formats$2.formatters,_.format))throw new TypeError("Unknown format option provided.");T=_.format}var B=formats$2.formatters[T],I=defaults$1.filter;return(typeof _.filter=="function"||isArray$1(_.filter))&&(I=_.filter),{addQueryPrefix:typeof _.addQueryPrefix=="boolean"?_.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:typeof _.allowDots>"u"?defaults$1.allowDots:!!_.allowDots,charset:A,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults$1.charsetSentinel,delimiter:typeof _.delimiter>"u"?defaults$1.delimiter:_.delimiter,encode:typeof _.encode=="boolean"?_.encode:defaults$1.encode,encoder:typeof _.encoder=="function"?_.encoder:defaults$1.encoder,encodeValuesOnly:typeof _.encodeValuesOnly=="boolean"?_.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:I,format:T,formatter:B,serializeDate:typeof _.serializeDate=="function"?_.serializeDate:defaults$1.serializeDate,skipNulls:typeof _.skipNulls=="boolean"?_.skipNulls:defaults$1.skipNulls,sort:typeof _.sort=="function"?_.sort:null,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(E,_){var A=E,T=normalizeStringifyOptions(_),B,I;typeof T.filter=="function"?(I=T.filter,A=I("",A)):isArray$1(T.filter)&&(I=T.filter,B=I);var C=[];if(typeof A!="object"||A===null)return"";var R;_&&_.arrayFormat in arrayPrefixGenerators?R=_.arrayFormat:_&&"indices"in _?R=_.indices?"indices":"repeat":R="indices";var L=arrayPrefixGenerators[R];if(_&&"commaRoundTrip"in _&&typeof _.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var D=L==="comma"&&_&&_.commaRoundTrip;B||(B=Object.keys(A)),T.sort&&B.sort(T.sort);for(var V=getSideChannel(),U=0;U<B.length;++U){var z=B[U];T.skipNulls&&A[z]===null||pushToArray(C,stringify$1(A[z],z,L,D,T.strictNullHandling,T.skipNulls,T.encode?T.encoder:null,T.filter,T.sort,T.allowDots,T.serializeDate,T.format,T.formatter,T.encodeValuesOnly,T.charset,V))}var W=C.join(T.delimiter),Y=T.addQueryPrefix===!0?"?":"";return T.charsetSentinel&&(T.charset==="iso-8859-1"?Y+="utf8=%26%2310003%3B&":Y+="utf8=%E2%9C%93&"),W.length>0?Y+W:""},utils=utils$2,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(E){return E.replace(/&#(\d+);/g,function(_,A){return String.fromCharCode(parseInt(A,10))})},parseArrayValue=function(E,_){return E&&typeof E=="string"&&_.comma&&E.indexOf(",")>-1?E.split(","):E},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function E(_,A){var T={__proto__:null},B=A.ignoreQueryPrefix?_.replace(/^\?/,""):_,I=A.parameterLimit===1/0?void 0:A.parameterLimit,C=B.split(A.delimiter,I),R=-1,L,D=A.charset;if(A.charsetSentinel)for(L=0;L<C.length;++L)C[L].indexOf("utf8=")===0&&(C[L]===charsetSentinel?D="utf-8":C[L]===isoSentinel&&(D="iso-8859-1"),R=L,L=C.length);for(L=0;L<C.length;++L)if(L!==R){var V=C[L],U=V.indexOf("]="),z=U===-1?V.indexOf("="):U+1,W,Y;z===-1?(W=A.decoder(V,defaults.decoder,D,"key"),Y=A.strictNullHandling?null:""):(W=A.decoder(V.slice(0,z),defaults.decoder,D,"key"),Y=utils.maybeMap(parseArrayValue(V.slice(z+1),A),function(K){return A.decoder(K,defaults.decoder,D,"value")})),Y&&A.interpretNumericEntities&&D==="iso-8859-1"&&(Y=interpretNumericEntities(Y)),V.indexOf("[]=")>-1&&(Y=isArray(Y)?[Y]:Y),has.call(T,W)?T[W]=utils.combine(T[W],Y):T[W]=Y}return T},parseObject=function(E,_,A,T){for(var B=T?_:parseArrayValue(_,A),I=E.length-1;I>=0;--I){var C,R=E[I];if(R==="[]"&&A.parseArrays)C=[].concat(B);else{C=A.plainObjects?Object.create(null):{};var L=R.charAt(0)==="["&&R.charAt(R.length-1)==="]"?R.slice(1,-1):R,D=parseInt(L,10);!A.parseArrays&&L===""?C={0:B}:!isNaN(D)&&R!==L&&String(D)===L&&D>=0&&A.parseArrays&&D<=A.arrayLimit?(C=[],C[D]=B):L!=="__proto__"&&(C[L]=B)}B=C}return B},parseKeys=function E(_,A,T,B){if(_){var I=T.allowDots?_.replace(/\.([^.[]+)/g,"[$1]"):_,C=/(\[[^[\]]*])/,R=/(\[[^[\]]*])/g,L=T.depth>0&&C.exec(I),D=L?I.slice(0,L.index):I,V=[];if(D){if(!T.plainObjects&&has.call(Object.prototype,D)&&!T.allowPrototypes)return;V.push(D)}for(var U=0;T.depth>0&&(L=R.exec(I))!==null&&U<T.depth;){if(U+=1,!T.plainObjects&&has.call(Object.prototype,L[1].slice(1,-1))&&!T.allowPrototypes)return;V.push(L[1])}return L&&V.push("["+I.slice(L.index)+"]"),parseObject(V,A,T,B)}},normalizeParseOptions=function E(_){if(!_)return defaults;if(_.decoder!==null&&_.decoder!==void 0&&typeof _.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var A=typeof _.charset>"u"?defaults.charset:_.charset;return{allowDots:typeof _.allowDots>"u"?defaults.allowDots:!!_.allowDots,allowPrototypes:typeof _.allowPrototypes=="boolean"?_.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof _.allowSparse=="boolean"?_.allowSparse:defaults.allowSparse,arrayLimit:typeof _.arrayLimit=="number"?_.arrayLimit:defaults.arrayLimit,charset:A,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults.charsetSentinel,comma:typeof _.comma=="boolean"?_.comma:defaults.comma,decoder:typeof _.decoder=="function"?_.decoder:defaults.decoder,delimiter:typeof _.delimiter=="string"||utils.isRegExp(_.delimiter)?_.delimiter:defaults.delimiter,depth:typeof _.depth=="number"||_.depth===!1?+_.depth:defaults.depth,ignoreQueryPrefix:_.ignoreQueryPrefix===!0,interpretNumericEntities:typeof _.interpretNumericEntities=="boolean"?_.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof _.parameterLimit=="number"?_.parameterLimit:defaults.parameterLimit,parseArrays:_.parseArrays!==!1,plainObjects:typeof _.plainObjects=="boolean"?_.plainObjects:defaults.plainObjects,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults.strictNullHandling}},parse$1=function(E,_){var A=normalizeParseOptions(_);if(E===""||E===null||typeof E>"u")return A.plainObjects?Object.create(null):{};for(var T=typeof E=="string"?parseValues(E,A):E,B=A.plainObjects?Object.create(null):{},I=Object.keys(T),C=0;C<I.length;++C){var R=I[C],L=parseKeys(R,T[R],A,typeof E=="string");B=utils.merge(B,L,A)}return A.allowSparse===!0?B:utils.compact(B)},stringify=stringify_1,parse=parse$1,formats$1=formats$4,lib={formats:formats$1,parse,stringify},punycode=punycodeExports;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=lib;function urlParse(E,_,A){if(E&&typeof E=="object"&&E instanceof Url)return E;var T=new Url;return T.parse(E,_,A),T}Url.prototype.parse=function(E,_,A){if(typeof E!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof E);var T=E.indexOf("?"),B=T!==-1&&T<E.indexOf("#")?"?":"#",I=E.split(B),C=/\\/g;I[0]=I[0].replace(C,"/"),E=I.join(B);var R=E;if(R=R.trim(),!A&&E.split("#").length===1){var L=simplePathPattern.exec(R);if(L)return this.path=R,this.href=R,this.pathname=L[1],L[2]?(this.search=L[2],_?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):_&&(this.search="",this.query={}),this}var D=protocolPattern.exec(R);if(D){D=D[0];var V=D.toLowerCase();this.protocol=V,R=R.substr(D.length)}if(A||D||R.match(/^\/\/[^@/]+@[^@/]+/)){var U=R.substr(0,2)==="//";U&&!(D&&hostlessProtocol[D])&&(R=R.substr(2),this.slashes=!0)}if(!hostlessProtocol[D]&&(U||D&&!slashedProtocol[D])){for(var z=-1,W=0;W<hostEndingChars.length;W++){var Y=R.indexOf(hostEndingChars[W]);Y!==-1&&(z===-1||Y<z)&&(z=Y)}var K,J;z===-1?J=R.lastIndexOf("@"):J=R.lastIndexOf("@",z),J!==-1&&(K=R.slice(0,J),R=R.slice(J+1),this.auth=decodeURIComponent(K)),z=-1;for(var W=0;W<nonHostChars.length;W++){var Y=R.indexOf(nonHostChars[W]);Y!==-1&&(z===-1||Y<z)&&(z=Y)}z===-1&&(z=R.length),this.host=R.slice(0,z),R=R.slice(z),this.parseHost(),this.hostname=this.hostname||"";var et=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!et)for(var it=this.hostname.split(/\./),W=0,rt=it.length;W<rt;W++){var st=it[W];if(st&&!st.match(hostnamePartPattern)){for(var lt="",ct=0,at=st.length;ct<at;ct++)st.charCodeAt(ct)>127?lt+="x":lt+=st[ct];if(!lt.match(hostnamePartPattern)){var ht=it.slice(0,W),mt=it.slice(W+1),yt=st.match(hostnamePartStart);yt&&(ht.push(yt[1]),mt.unshift(yt[2])),mt.length&&(R="/"+mt.join(".")+R),this.hostname=ht.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),et||(this.hostname=punycode.toASCII(this.hostname));var Tt=this.port?":"+this.port:"",At=this.hostname||"";this.host=At+Tt,this.href+=this.host,et&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),R[0]!=="/"&&(R="/"+R))}if(!unsafeProtocol[V])for(var W=0,rt=autoEscape.length;W<rt;W++){var pt=autoEscape[W];if(R.indexOf(pt)!==-1){var Et=encodeURIComponent(pt);Et===pt&&(Et=escape(pt)),R=R.split(pt).join(Et)}}var Vt=R.indexOf("#");Vt!==-1&&(this.hash=R.substr(Vt),R=R.slice(0,Vt));var Ot=R.indexOf("?");if(Ot!==-1?(this.search=R.substr(Ot),this.query=R.substr(Ot+1),_&&(this.query=querystring.parse(this.query)),R=R.slice(0,Ot)):_&&(this.search="",this.query={}),R&&(this.pathname=R),slashedProtocol[V]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Tt=this.pathname||"",gt=this.search||"";this.path=Tt+gt}return this.href=this.format(),this};Url.prototype.format=function(){var E=this.auth||"";E&&(E=encodeURIComponent(E),E=E.replace(/%3A/i,":"),E+="@");var _=this.protocol||"",A=this.pathname||"",T=this.hash||"",B=!1,I="";this.host?B=E+this.host:this.hostname&&(B=E+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(B+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(I=querystring.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var C=this.search||I&&"?"+I||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||slashedProtocol[_])&&B!==!1?(B="//"+(B||""),A&&A.charAt(0)!=="/"&&(A="/"+A)):B||(B=""),T&&T.charAt(0)!=="#"&&(T="#"+T),C&&C.charAt(0)!=="?"&&(C="?"+C),A=A.replace(/[?#]/g,function(R){return encodeURIComponent(R)}),C=C.replace("#","%23"),_+B+A+C+T};Url.prototype.resolve=function(E){return this.resolveObject(urlParse(E,!1,!0)).format()};Url.prototype.resolveObject=function(E){if(typeof E=="string"){var _=new Url;_.parse(E,!1,!0),E=_}for(var A=new Url,T=Object.keys(this),B=0;B<T.length;B++){var I=T[B];A[I]=this[I]}if(A.hash=E.hash,E.href==="")return A.href=A.format(),A;if(E.slashes&&!E.protocol){for(var C=Object.keys(E),R=0;R<C.length;R++){var L=C[R];L!=="protocol"&&(A[L]=E[L])}return slashedProtocol[A.protocol]&&A.hostname&&!A.pathname&&(A.pathname="/",A.path=A.pathname),A.href=A.format(),A}if(E.protocol&&E.protocol!==A.protocol){if(!slashedProtocol[E.protocol]){for(var D=Object.keys(E),V=0;V<D.length;V++){var U=D[V];A[U]=E[U]}return A.href=A.format(),A}if(A.protocol=E.protocol,!E.host&&!hostlessProtocol[E.protocol]){for(var rt=(E.pathname||"").split("/");rt.length&&!(E.host=rt.shift()););E.host||(E.host=""),E.hostname||(E.hostname=""),rt[0]!==""&&rt.unshift(""),rt.length<2&&rt.unshift(""),A.pathname=rt.join("/")}else A.pathname=E.pathname;if(A.search=E.search,A.query=E.query,A.host=E.host||"",A.auth=E.auth,A.hostname=E.hostname||E.host,A.port=E.port,A.pathname||A.search){var z=A.pathname||"",W=A.search||"";A.path=z+W}return A.slashes=A.slashes||E.slashes,A.href=A.format(),A}var Y=A.pathname&&A.pathname.charAt(0)==="/",K=E.host||E.pathname&&E.pathname.charAt(0)==="/",J=K||Y||A.host&&E.pathname,et=J,it=A.pathname&&A.pathname.split("/")||[],rt=E.pathname&&E.pathname.split("/")||[],st=A.protocol&&!slashedProtocol[A.protocol];if(st&&(A.hostname="",A.port=null,A.host&&(it[0]===""?it[0]=A.host:it.unshift(A.host)),A.host="",E.protocol&&(E.hostname=null,E.port=null,E.host&&(rt[0]===""?rt[0]=E.host:rt.unshift(E.host)),E.host=null),J=J&&(rt[0]===""||it[0]==="")),K)A.host=E.host||E.host===""?E.host:A.host,A.hostname=E.hostname||E.hostname===""?E.hostname:A.hostname,A.search=E.search,A.query=E.query,it=rt;else if(rt.length)it||(it=[]),it.pop(),it=it.concat(rt),A.search=E.search,A.query=E.query;else if(E.search!=null){if(st){A.host=it.shift(),A.hostname=A.host;var lt=A.host&&A.host.indexOf("@")>0?A.host.split("@"):!1;lt&&(A.auth=lt.shift(),A.hostname=lt.shift(),A.host=A.hostname)}return A.search=E.search,A.query=E.query,(A.pathname!==null||A.search!==null)&&(A.path=(A.pathname?A.pathname:"")+(A.search?A.search:"")),A.href=A.format(),A}if(!it.length)return A.pathname=null,A.search?A.path="/"+A.search:A.path=null,A.href=A.format(),A;for(var ct=it.slice(-1)[0],at=(A.host||E.host||it.length>1)&&(ct==="."||ct==="..")||ct==="",ht=0,mt=it.length;mt>=0;mt--)ct=it[mt],ct==="."?it.splice(mt,1):ct===".."?(it.splice(mt,1),ht++):ht&&(it.splice(mt,1),ht--);if(!J&&!et)for(;ht--;ht)it.unshift("..");J&&it[0]!==""&&(!it[0]||it[0].charAt(0)!=="/")&&it.unshift(""),at&&it.join("/").substr(-1)!=="/"&&it.push("");var yt=it[0]===""||it[0]&&it[0].charAt(0)==="/";if(st){A.hostname=yt?"":it.length?it.shift():"",A.host=A.hostname;var lt=A.host&&A.host.indexOf("@")>0?A.host.split("@"):!1;lt&&(A.auth=lt.shift(),A.hostname=lt.shift(),A.host=A.hostname)}return J=J||A.host&&it.length,J&&!yt&&it.unshift(""),it.length>0?A.pathname=it.join("/"):(A.pathname=null,A.path=null),(A.pathname!==null||A.search!==null)&&(A.path=(A.pathname?A.pathname:"")+(A.search?A.search:"")),A.auth=E.auth||A.auth,A.slashes=A.slashes||E.slashes,A.href=A.format(),A};Url.prototype.parseHost=function(){var E=this.host,_=portPattern.exec(E);_&&(_=_[0],_!==":"&&(this.port=_.substr(1)),E=E.substr(0,E.length-_.length)),E&&(this.hostname=E)};const warnings={};function deprecation(E,_,A=3){if(warnings[_])return;let T=new Error().stack;typeof T>"u"?console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${E}`):(T=T.split(`
`).splice(A).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${_}
Deprecated since v${E}`),console.warn(T),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${E}`),console.warn(T))),warnings[_]=!0}function assertPath(E){if(typeof E!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(E)}`)}function removeUrlParams(E){return E.split("?")[0].split("#")[0]}function escapeRegExp(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(E,_,A){return E.replace(new RegExp(escapeRegExp(_),"g"),A)}function normalizeStringPosix(E,_){let A="",T=0,B=-1,I=0,C=-1;for(let R=0;R<=E.length;++R){if(R<E.length)C=E.charCodeAt(R);else{if(C===47)break;C=47}if(C===47){if(!(B===R-1||I===1))if(B!==R-1&&I===2){if(A.length<2||T!==2||A.charCodeAt(A.length-1)!==46||A.charCodeAt(A.length-2)!==46){if(A.length>2){const L=A.lastIndexOf("/");if(L!==A.length-1){L===-1?(A="",T=0):(A=A.slice(0,L),T=A.length-1-A.lastIndexOf("/")),B=R,I=0;continue}}else if(A.length===2||A.length===1){A="",T=0,B=R,I=0;continue}}_&&(A.length>0?A+="/..":A="..",T=2)}else A.length>0?A+=`/${E.slice(B+1,R)}`:A=E.slice(B+1,R),T=R-B-1;B=R,I=0}else C===46&&I!==-1?++I:I=-1}return A}const path={toPosix(E){return replaceAll(E,"\\","/")},isUrl(E){return/^https?:/.test(this.toPosix(E))},isDataUrl(E){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(E)},isBlobUrl(E){return E.startsWith("blob:")},hasProtocol(E){return/^[^/:]+:/.test(this.toPosix(E))},getProtocol(E){assertPath(E),E=this.toPosix(E);const _=/^file:\/\/\//.exec(E);if(_)return _[0];const A=/^[^/:]+:\/{0,2}/.exec(E);return A?A[0]:""},toAbsolute(E,_,A){if(assertPath(E),this.isDataUrl(E)||this.isBlobUrl(E))return E;const T=removeUrlParams(this.toPosix(_??settings.ADAPTER.getBaseUrl())),B=removeUrlParams(this.toPosix(A??this.rootname(T)));return E=this.toPosix(E),E.startsWith("/")?path.join(B,E.slice(1)):this.isAbsolute(E)?E:this.join(T,E)},normalize(E){if(assertPath(E),E.length===0)return".";if(this.isDataUrl(E)||this.isBlobUrl(E))return E;E=this.toPosix(E);let _="";const A=E.startsWith("/");this.hasProtocol(E)&&(_=this.rootname(E),E=E.slice(_.length));const T=E.endsWith("/");return E=normalizeStringPosix(E,!1),E.length>0&&T&&(E+="/"),A?`/${E}`:_+E},isAbsolute(E){return assertPath(E),E=this.toPosix(E),this.hasProtocol(E)?!0:E.startsWith("/")},join(...E){if(E.length===0)return".";let _;for(let A=0;A<E.length;++A){const T=E[A];if(assertPath(T),T.length>0)if(_===void 0)_=T;else{const B=E[A-1]??"";this.extname(B)?_+=`/../${T}`:_+=`/${T}`}}return _===void 0?".":this.normalize(_)},dirname(E){if(assertPath(E),E.length===0)return".";E=this.toPosix(E);let _=E.charCodeAt(0);const A=_===47;let T=-1,B=!0;const I=this.getProtocol(E),C=E;E=E.slice(I.length);for(let R=E.length-1;R>=1;--R)if(_=E.charCodeAt(R),_===47){if(!B){T=R;break}}else B=!1;return T===-1?A?"/":this.isUrl(C)?I+E:I:A&&T===1?"//":I+E.slice(0,T)},rootname(E){assertPath(E),E=this.toPosix(E);let _="";if(E.startsWith("/")?_="/":_=this.getProtocol(E),this.isUrl(E)){const A=E.indexOf("/",_.length);A!==-1?_=E.slice(0,A):_=E,_.endsWith("/")||(_+="/")}return _},basename(E,_){assertPath(E),_&&assertPath(_),E=removeUrlParams(this.toPosix(E));let A=0,T=-1,B=!0,I;if(_!==void 0&&_.length>0&&_.length<=E.length){if(_.length===E.length&&_===E)return"";let C=_.length-1,R=-1;for(I=E.length-1;I>=0;--I){const L=E.charCodeAt(I);if(L===47){if(!B){A=I+1;break}}else R===-1&&(B=!1,R=I+1),C>=0&&(L===_.charCodeAt(C)?--C===-1&&(T=I):(C=-1,T=R))}return A===T?T=R:T===-1&&(T=E.length),E.slice(A,T)}for(I=E.length-1;I>=0;--I)if(E.charCodeAt(I)===47){if(!B){A=I+1;break}}else T===-1&&(B=!1,T=I+1);return T===-1?"":E.slice(A,T)},extname(E){assertPath(E),E=removeUrlParams(this.toPosix(E));let _=-1,A=0,T=-1,B=!0,I=0;for(let C=E.length-1;C>=0;--C){const R=E.charCodeAt(C);if(R===47){if(!B){A=C+1;break}continue}T===-1&&(B=!1,T=C+1),R===46?_===-1?_=C:I!==1&&(I=1):_!==-1&&(I=-1)}return _===-1||T===-1||I===0||I===1&&_===T-1&&_===A+1?"":E.slice(_,T)},parse(E){assertPath(E);const _={root:"",dir:"",base:"",ext:"",name:""};if(E.length===0)return _;E=removeUrlParams(this.toPosix(E));let A=E.charCodeAt(0);const T=this.isAbsolute(E);let B;_.root=this.rootname(E),T||this.hasProtocol(E)?B=1:B=0;let I=-1,C=0,R=-1,L=!0,D=E.length-1,V=0;for(;D>=B;--D){if(A=E.charCodeAt(D),A===47){if(!L){C=D+1;break}continue}R===-1&&(L=!1,R=D+1),A===46?I===-1?I=D:V!==1&&(V=1):I!==-1&&(V=-1)}return I===-1||R===-1||V===0||V===1&&I===R-1&&I===C+1?R!==-1&&(C===0&&T?_.base=_.name=E.slice(1,R):_.base=_.name=E.slice(C,R)):(C===0&&T?(_.name=E.slice(1,I),_.base=E.slice(1,R)):(_.name=E.slice(C,I),_.base=E.slice(C,R)),_.ext=E.slice(I,R)),_.dir=this.dirname(E),_},sep:"/",delimiter:":"};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var I;const E=document.createElement("canvas").getContext("webgl");if(!E)return ALPHA_MODES.UNPACK;const _=await new Promise(C=>{const R=document.createElement("video");R.onloadeddata=()=>C(R),R.onerror=()=>C(null),R.autoplay=!1,R.crossOrigin="anonymous",R.preload="auto",R.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",R.load()});if(!_)return ALPHA_MODES.UNPACK;const A=E.createTexture();E.bindTexture(E.TEXTURE_2D,A);const T=E.createFramebuffer();E.bindFramebuffer(E.FRAMEBUFFER,T),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,A,0),E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),E.pixelStorei(E.UNPACK_COLORSPACE_CONVERSION_WEBGL,E.NONE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,_);const B=new Uint8Array(4);return E.readPixels(0,0,1,1,E.RGBA,E.UNSIGNED_BYTE,B),E.deleteFramebuffer(T),E.deleteTexture(A),(I=E.getExtension("WEBGL_lose_context"))==null||I.loseContext(),B[0]<=B[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var _;const E={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const A=settings.ADAPTER.createCanvas();let T=A.getContext("webgl",E)||A.getContext("experimental-webgl",E);const B=!!((_=T==null?void 0:T.getContextAttributes())!=null&&_.stencil);if(T){const I=T.getExtension("WEBGL_lose_context");I&&I.loseContext()}return T=null,B}catch{return!1}}()),supported}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(E){return typeof E=="string"?E.length>0:typeof E=="number"},n$3=function(E,_,A){return _===void 0&&(_=0),A===void 0&&(A=Math.pow(10,_)),Math.round(A*E)/A+0},e$2=function(E,_,A){return _===void 0&&(_=0),A===void 0&&(A=1),E>A?A:E>_?E:_},u=function(E){return(E=isFinite(E)?E%360:0)>0?E:E+360},a$1=function(E){return{r:e$2(E.r,0,255),g:e$2(E.g,0,255),b:e$2(E.b,0,255),a:e$2(E.a)}},o=function(E){return{r:n$3(E.r),g:n$3(E.g),b:n$3(E.b),a:n$3(E.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s$1=function(E){var _=E.toString(16);return _.length<2?"0"+_:_},h=function(E){var _=E.r,A=E.g,T=E.b,B=E.a,I=Math.max(_,A,T),C=I-Math.min(_,A,T),R=C?I===_?(A-T)/C:I===A?2+(T-_)/C:4+(_-A)/C:0;return{h:60*(R<0?R+6:R),s:I?C/I*100:0,v:I/255*100,a:B}},b$1=function(E){var _=E.h,A=E.s,T=E.v,B=E.a;_=_/360*6,A/=100,T/=100;var I=Math.floor(_),C=T*(1-A),R=T*(1-(_-I)*A),L=T*(1-(1-_+I)*A),D=I%6;return{r:255*[T,R,C,C,L,T][D],g:255*[L,T,T,R,C,C][D],b:255*[C,C,L,T,T,R][D],a:B}},g=function(E){return{h:u(E.h),s:e$2(E.s,0,100),l:e$2(E.l,0,100),a:e$2(E.a)}},d$1=function(E){return{h:n$3(E.h),s:n$3(E.s),l:n$3(E.l),a:n$3(E.a,3)}},f=function(E){return b$1((A=(_=E).s,{h:_.h,s:(A*=((T=_.l)<50?T:100-T)/100)>0?2*A/(T+A)*100:0,v:T+A,a:_.a}));var _,A,T},c$1=function(E){return{h:(_=h(E)).h,s:(B=(200-(A=_.s))*(T=_.v)/100)>0&&B<200?A*T/100/(B<=100?B:200-B)*100:0,l:B/2,a:_.a};var _,A,T,B},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(E){var _=i.exec(E);return _?(E=_[1]).length<=4?{r:parseInt(E[0]+E[0],16),g:parseInt(E[1]+E[1],16),b:parseInt(E[2]+E[2],16),a:E.length===4?n$3(parseInt(E[3]+E[3],16)/255,2):1}:E.length===6||E.length===8?{r:parseInt(E.substr(0,2),16),g:parseInt(E.substr(2,2),16),b:parseInt(E.substr(4,2),16),a:E.length===8?n$3(parseInt(E.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(E){var _=v$1.exec(E)||m.exec(E);return _?_[2]!==_[4]||_[4]!==_[6]?null:a$1({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(E){var _=l.exec(E)||p.exec(E);if(!_)return null;var A,T,B=g({h:(A=_[1],T=_[2],T===void 0&&(T="deg"),Number(A)*(r[T]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f(B)},"hsl"]],object:[[function(E){var _=E.r,A=E.g,T=E.b,B=E.a,I=B===void 0?1:B;return t(_)&&t(A)&&t(T)?a$1({r:Number(_),g:Number(A),b:Number(T),a:Number(I)}):null},"rgb"],[function(E){var _=E.h,A=E.s,T=E.l,B=E.a,I=B===void 0?1:B;if(!t(_)||!t(A)||!t(T))return null;var C=g({h:Number(_),s:Number(A),l:Number(T),a:Number(I)});return f(C)},"hsl"],[function(E){var _=E.h,A=E.s,T=E.v,B=E.a,I=B===void 0?1:B;if(!t(_)||!t(A)||!t(T))return null;var C=function(R){return{h:u(R.h),s:e$2(R.s,0,100),v:e$2(R.v,0,100),a:e$2(R.a)}}({h:Number(_),s:Number(A),v:Number(T),a:Number(I)});return b$1(C)},"hsv"]]},N=function(E,_){for(var A=0;A<_.length;A++){var T=_[A][0](E);if(T)return[T,_[A][1]]}return[null,void 0]},x$1=function(E){return typeof E=="string"?N(E.trim(),y.string):typeof E=="object"&&E!==null?N(E,y.object):[null,void 0]},M=function(E,_){var A=c$1(E);return{h:A.h,s:e$2(A.s+100*_,0,100),l:A.l,a:A.a}},H=function(E){return(299*E.r+587*E.g+114*E.b)/1e3/255},$=function(E,_){var A=c$1(E);return{h:A.h,s:A.s,l:e$2(A.l+100*_,0,100),a:A.a}},j=function(){function E(_){this.parsed=x$1(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return E.prototype.isValid=function(){return this.parsed!==null},E.prototype.brightness=function(){return n$3(H(this.rgba),2)},E.prototype.isDark=function(){return H(this.rgba)<.5},E.prototype.isLight=function(){return H(this.rgba)>=.5},E.prototype.toHex=function(){return _=o(this.rgba),A=_.r,T=_.g,B=_.b,C=(I=_.a)<1?s$1(n$3(255*I)):"","#"+s$1(A)+s$1(T)+s$1(B)+C;var _,A,T,B,I,C},E.prototype.toRgb=function(){return o(this.rgba)},E.prototype.toRgbString=function(){return _=o(this.rgba),A=_.r,T=_.g,B=_.b,(I=_.a)<1?"rgba("+A+", "+T+", "+B+", "+I+")":"rgb("+A+", "+T+", "+B+")";var _,A,T,B,I},E.prototype.toHsl=function(){return d$1(c$1(this.rgba))},E.prototype.toHslString=function(){return _=d$1(c$1(this.rgba)),A=_.h,T=_.s,B=_.l,(I=_.a)<1?"hsla("+A+", "+T+"%, "+B+"%, "+I+")":"hsl("+A+", "+T+"%, "+B+"%)";var _,A,T,B,I},E.prototype.toHsv=function(){return _=h(this.rgba),{h:n$3(_.h),s:n$3(_.s),v:n$3(_.v),a:n$3(_.a,3)};var _},E.prototype.invert=function(){return w({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},E.prototype.saturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,_))},E.prototype.desaturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,-_))},E.prototype.grayscale=function(){return w(M(this.rgba,-1))},E.prototype.lighten=function(_){return _===void 0&&(_=.1),w($(this.rgba,_))},E.prototype.darken=function(_){return _===void 0&&(_=.1),w($(this.rgba,-_))},E.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},E.prototype.alpha=function(_){return typeof _=="number"?w({r:(A=this.rgba).r,g:A.g,b:A.b,a:_}):n$3(this.rgba.a,3);var A},E.prototype.hue=function(_){var A=c$1(this.rgba);return typeof _=="number"?w({h:_,s:A.s,l:A.l,a:A.a}):n$3(A.h)},E.prototype.isEqual=function(_){return this.toHex()===w(_).toHex()},E}(),w=function(E){return E instanceof j?E:new j(E)},S=[],k=function(E){E.forEach(function(_){S.indexOf(_)<0&&(_(j,y),S.push(_))})};function namesPlugin(E,_){var A={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},T={};for(var B in A)T[A[B]]=B;var I={};E.prototype.toName=function(C){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var R,L,D=T[this.toHex()];if(D)return D;if(C!=null&&C.closest){var V=this.toRgb(),U=1/0,z="black";if(!I.length)for(var W in A)I[W]=new E(A[W]).toRgb();for(var Y in A){var K=(R=V,L=I[Y],Math.pow(R.r-L.r,2)+Math.pow(R.g-L.g,2)+Math.pow(R.b-L.b,2));K<U&&(U=K,z=Y)}return z}},_.string.push([function(C){var R=C.toLowerCase(),L=R==="transparent"?"#0000":A[R];return L?new E(L).toRgb():null},"name"])}k([namesPlugin]);const _Color=class Qr{constructor(_=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(_){return this.value=_,this}set value(_){if(_ instanceof Qr)this._value=this.cloneSource(_._value),this._int=_._int,this._components.set(_._components);else{if(_===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,_))&&(this.normalize(_),this._value=this.cloneSource(_))}}get value(){return this._value}cloneSource(_){return typeof _=="string"||typeof _=="number"||_ instanceof Number||_===null?_:Array.isArray(_)||ArrayBuffer.isView(_)?_.slice(0):typeof _=="object"&&_!==null?{..._}:_}isSourceEqual(_,A){const T=typeof _;if(T!==typeof A)return!1;if(T==="number"||T==="string"||_ instanceof Number)return _===A;if(Array.isArray(_)&&Array.isArray(A)||ArrayBuffer.isView(_)&&ArrayBuffer.isView(A))return _.length!==A.length?!1:_.every((B,I)=>B===A[I]);if(_!==null&&A!==null){const B=Object.keys(_),I=Object.keys(A);return B.length!==I.length?!1:B.every(C=>_[C]===A[C])}return _===A}toRgba(){const[_,A,T,B]=this._components;return{r:_,g:A,b:T,a:B}}toRgb(){const[_,A,T]=this._components;return{r:_,g:A,b:T}}toRgbaString(){const[_,A,T]=this.toUint8RgbArray();return`rgba(${_},${A},${T},${this.alpha})`}toUint8RgbArray(_){const[A,T,B]=this._components;return _=_??[],_[0]=Math.round(A*255),_[1]=Math.round(T*255),_[2]=Math.round(B*255),_}toRgbArray(_){_=_??[];const[A,T,B]=this._components;return _[0]=A,_[1]=T,_[2]=B,_}toNumber(){return this._int}toLittleEndianNumber(){const _=this._int;return(_>>16)+(_&65280)+((_&255)<<16)}multiply(_){const[A,T,B,I]=Qr.temp.setValue(_)._components;return this._components[0]*=A,this._components[1]*=T,this._components[2]*=B,this._components[3]*=I,this.refreshInt(),this._value=null,this}premultiply(_,A=!0){return A&&(this._components[0]*=_,this._components[1]*=_,this._components[2]*=_),this._components[3]=_,this.refreshInt(),this._value=null,this}toPremultiplied(_,A=!0){if(_===1)return(255<<24)+this._int;if(_===0)return A?0:this._int;let T=this._int>>16&255,B=this._int>>8&255,I=this._int&255;return A&&(T=T*_+.5|0,B=B*_+.5|0,I=I*_+.5|0),(_*255<<24)+(T<<16)+(B<<8)+I}toHex(){const _=this._int.toString(16);return`#${"000000".substring(0,6-_.length)+_}`}toHexa(){const _=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-_.length)+_}setAlpha(_){return this._components[3]=this._clamp(_),this}round(_){const[A,T,B]=this._components;return this._components[0]=Math.round(A*_)/_,this._components[1]=Math.round(T*_)/_,this._components[2]=Math.round(B*_)/_,this.refreshInt(),this._value=null,this}toArray(_){_=_??[];const[A,T,B,I]=this._components;return _[0]=A,_[1]=T,_[2]=B,_[3]=I,_}normalize(_){let A,T,B,I;if((typeof _=="number"||_ instanceof Number)&&_>=0&&_<=16777215){const C=_;A=(C>>16&255)/255,T=(C>>8&255)/255,B=(C&255)/255,I=1}else if((Array.isArray(_)||_ instanceof Float32Array)&&_.length>=3&&_.length<=4)_=this._clamp(_),[A,T,B,I=1]=_;else if((_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&_.length>=3&&_.length<=4)_=this._clamp(_,0,255),[A,T,B,I=255]=_,A/=255,T/=255,B/=255,I/=255;else if(typeof _=="string"||typeof _=="object"){if(typeof _=="string"){const R=Qr.HEX_PATTERN.exec(_);R&&(_=`#${R[2]}`)}const C=w(_);C.isValid()&&({r:A,g:T,b:B,a:I}=C.rgba,A/=255,T/=255,B/=255)}if(A!==void 0)this._components[0]=A,this._components[1]=T,this._components[2]=B,this._components[3]=I,this.refreshInt();else throw new Error(`Unable to convert color ${_}`)}refreshInt(){this._clamp(this._components);const[_,A,T]=this._components;this._int=(_*255<<16)+(A*255<<8)+(T*255|0)}_clamp(_,A=0,T=1){return typeof _=="number"?Math.min(Math.max(_,A),T):(_.forEach((B,I)=>{_[I]=Math.min(Math.max(B,A),T)}),_)}};_Color.shared=new _Color,_Color.temp=new _Color,_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color=_Color;function hex2string(E){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(E).toHex()}function rgb2hex(E){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(E).toNumber()}function mapPremultipliedBlendModes(){const E=[],_=[];for(let T=0;T<32;T++)E[T]=T,_[T]=T;E[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,E[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,E[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,_[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,_[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,_[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const A=[];return A.push(_),A.push(E),A}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(E,_){return premultiplyBlendMode[_?1:0][E]}function createIndicesForQuads(E,_=null){const A=E*6;if(_=_||new Uint16Array(A),_.length!==A)throw new Error(`Out buffer length is incorrect, got ${_.length} and expected ${A}`);for(let T=0,B=0;T<A;T+=6,B+=4)_[T+0]=B+0,_[T+1]=B+1,_[T+2]=B+2,_[T+3]=B+0,_[T+4]=B+2,_[T+5]=B+3;return _}function getBufferType(E){if(E.BYTES_PER_ELEMENT===4)return E instanceof Float32Array?"Float32Array":E instanceof Uint32Array?"Uint32Array":"Int32Array";if(E.BYTES_PER_ELEMENT===2){if(E instanceof Uint16Array)return"Uint16Array"}else if(E.BYTES_PER_ELEMENT===1&&E instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(E){return E+=E===0?1:0,--E,E|=E>>>1,E|=E>>>2,E|=E>>>4,E|=E>>>8,E|=E>>>16,E+1}function isPow2(E){return!(E&E-1)&&!!E}function log2(E){let _=(E>65535?1:0)<<4;E>>>=_;let A=(E>255?1:0)<<3;return E>>>=A,_|=A,A=(E>15?1:0)<<2,E>>>=A,_|=A,A=(E>3?1:0)<<1,E>>>=A,_|=A,_|E>>1}function removeItems(E,_,A){const T=E.length;let B;if(_>=T||A===0)return;A=_+A>T?T-_:A;const I=T-A;for(B=_;B<I;++B)E[B]=E[B+A];E.length=I}function sign(E){return E===0?0:E<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(E,_,A,T){this.left=E,this.top=_,this.right=A,this.bottom=T}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);let BoundingBox=_BoundingBox;const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);class CanvasRenderTarget{constructor(_,A,T){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=T||settings.RESOLUTION,this.resize(_,A)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(_,A){this._checkDestroyed(),this._canvas.width=Math.round(_*this.resolution),this._canvas.height=Math.round(A*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(_){this._checkDestroyed(),this._canvas.width=Math.round(_)}get height(){return this._checkDestroyed(),this._canvas.height}set height(_){this._checkDestroyed(),this._canvas.height=Math.round(_)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(E,_,A){for(let T=0,B=4*A*_;T<_;++T,B+=4)if(E[B+3]!==0)return!1;return!0}function checkColumn(E,_,A,T,B){const I=4*_;for(let C=T,R=T*I+4*A;C<=B;++C,R+=I)if(E[R+3]!==0)return!1;return!0}function getCanvasBoundingBox(E){const{width:_,height:A}=E,T=E.getContext("2d",{willReadFrequently:!0});if(T===null)throw new TypeError("Failed to get canvas 2D context");const B=T.getImageData(0,0,_,A).data;let I=0,C=0,R=_-1,L=A-1;for(;C<A&&checkRow(B,_,C);)++C;if(C===A)return BoundingBox.EMPTY;for(;checkRow(B,_,L);)--L;for(;checkColumn(B,_,I,C,L);)++I;for(;checkColumn(B,_,R,C,L);)--R;return++R,++L,new BoundingBox(I,C,R,L)}function trimCanvas(E){const _=getCanvasBoundingBox(E),{width:A,height:T}=_;let B=null;if(!_.isEmpty()){const I=E.getContext("2d");if(I===null)throw new TypeError("Failed to get canvas 2D context");B=I.getImageData(_.left,_.top,A,T)}return{width:A,height:T,data:B}}function determineCrossOrigin(E,_=globalThis.location){if(E.startsWith("data:"))return"";_=_||globalThis.location;const A=new URL(E,document.baseURI);return A.hostname!==_.hostname||A.port!==_.port||A.protocol!==_.protocol?"anonymous":""}function getResolutionOfUrl(E,_=1){var T;const A=(T=settings.RETINA_PREFIX)==null?void 0:T.exec(E);return A?parseFloat(A[1]):_}var ExtensionType=(E=>(E.Renderer="renderer",E.Application="application",E.RendererSystem="renderer-webgl-system",E.RendererPlugin="renderer-webgl-plugin",E.CanvasRendererSystem="renderer-canvas-system",E.CanvasRendererPlugin="renderer-canvas-plugin",E.Asset="asset",E.LoadParser="load-parser",E.ResolveParser="resolve-parser",E.CacheParser="cache-parser",E.DetectionParser="detection-parser",E))(ExtensionType||{});const normalizeExtension=E=>{if(typeof E=="function"||typeof E=="object"&&E.extension){if(!E.extension)throw new Error("Extension class must have an extension object");E={...typeof E.extension!="object"?{type:E.extension}:E.extension,ref:E}}if(typeof E=="object")E={...E};else throw new Error("Invalid extension type");return typeof E.type=="string"&&(E.type=[E.type]),E},normalizePriority=(E,_)=>normalizeExtension(E).priority??_,extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...E){return E.map(normalizeExtension).forEach(_=>{_.type.forEach(A=>{var T,B;return(B=(T=this._removeHandlers)[A])==null?void 0:B.call(T,_)})}),this},add(...E){return E.map(normalizeExtension).forEach(_=>{_.type.forEach(A=>{const T=this._addHandlers,B=this._queue;T[A]?T[A](_):(B[A]=B[A]||[],B[A].push(_))})}),this},handle(E,_,A){const T=this._addHandlers,B=this._removeHandlers;if(T[E]||B[E])throw new Error(`Extension type ${E} already has a handler`);T[E]=_,B[E]=A;const I=this._queue;return I[E]&&(I[E].forEach(C=>_(C)),delete I[E]),this},handleByMap(E,_){return this.handle(E,A=>{_[A.name]=A.ref},A=>{delete _[A.name]})},handleByList(E,_,A=-1){return this.handle(E,T=>{_.includes(T.ref)||(_.push(T.ref),_.sort((B,I)=>normalizePriority(I,A)-normalizePriority(B,A)))},T=>{const B=_.indexOf(T.ref);B!==-1&&_.splice(B,1)})}};class ViewableBuffer{constructor(_){typeof _=="number"?this.rawBinaryData=new ArrayBuffer(_):_ instanceof Uint8Array?this.rawBinaryData=_.buffer:this.rawBinaryData=_,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(_){return this[`${_}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(_){switch(_){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${_} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(E){let _="";for(let A=0;A<E;++A)A>0&&(_+=`
else `),A<E-1&&(_+=`if(test == ${A}.0){}`);return _}function checkMaxIfStatementsInShader(E,_){if(E===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const A=_.createShader(_.FRAGMENT_SHADER);for(;;){const T=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(E));if(_.shaderSource(A,T),_.compileShader(A),!_.getShaderParameter(A,_.COMPILE_STATUS))E=E/2|0;else break}return E}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(_){!!(this.data&1<<BLEND$1)!==_&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(_){!!(this.data&1<<OFFSET$1)!==_&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(_){!!(this.data&1<<CULLING$1)!==_&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(_){!!(this.data&1<<DEPTH_TEST$1)!==_&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(_){!!(this.data&1<<DEPTH_MASK$1)!==_&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(_){!!(this.data&1<<WINDING$1)!==_&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(_){this.blend=_!==BLEND_MODES.NONE,this._blendMode=_}get polygonOffset(){return this._polygonOffset}set polygonOffset(_){this.offsets=!!_,this._polygonOffset=_}static for2d(){const _=new State;return _.depthTest=!1,_.blend=!0,_}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(E,_){if(!E)return null;let A="";if(typeof E=="string"){const T=/\.(\w{3,4})(?:$|\?|#)/i.exec(E);T&&(A=T[1].toLowerCase())}for(let T=INSTALLED.length-1;T>=0;--T){const B=INSTALLED[T];if(B.test&&B.test(E,A))return new B(E,_)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(_){this.items=[],this._name=_,this._aliasCount=0}emit(_,A,T,B,I,C,R,L){if(arguments.length>8)throw new Error("max arguments reached");const{name:D,items:V}=this;this._aliasCount++;for(let U=0,z=V.length;U<z;U++)V[U][D](_,A,T,B,I,C,R,L);return V===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(_){return _[this._name]&&(this.ensureNonAliasedItems(),this.remove(_),this.items.push(_)),this}remove(_){const A=this.items.indexOf(_);return A!==-1&&(this.ensureNonAliasedItems(),this.items.splice(A,1)),this}contains(_){return this.items.includes(_)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(_=0,A=0){this._width=_,this._height=A,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(_){this.onResize.add(_),this.onUpdate.add(_),this.onError.add(_),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(_){this.onResize.remove(_),this.onUpdate.remove(_),this.onError.remove(_)}resize(_,A){(_!==this._width||A!==this._height)&&(this._width=_,this._height=A,this.onResize.emit(_,A))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(_,A,T){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(_,A){return!1}}class BufferResource extends Resource{constructor(_,A){const{width:T,height:B}=A||{};if(!T||!B)throw new Error("BufferResource width or height invalid");super(T,B),this.data=_,this.unpackAlignment=A.unpackAlignment??4}upload(_,A,T){const B=_.gl;B.pixelStorei(B.UNPACK_ALIGNMENT,this.unpackAlignment),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.alphaMode===ALPHA_MODES.UNPACK);const I=A.realWidth,C=A.realHeight;return T.width===I&&T.height===C?B.texSubImage2D(A.target,0,0,0,I,C,A.format,T.type,this.data):(T.width=I,T.height=C,B.texImage2D(A.target,0,T.internalFormat,I,C,0,A.format,T.type,this.data)),!0}dispose(){this.data=null}static test(_){return _===null||_ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class ur extends EventEmitter{constructor(_=null,A=null){super(),A=Object.assign({},ur.defaultOptions,A);const{alphaMode:T,mipmap:B,anisotropicLevel:I,scaleMode:C,width:R,height:L,wrapMode:D,format:V,type:U,target:z,resolution:W,resourceOptions:Y}=A;_&&!(_ instanceof Resource)&&(_=autoDetectResource(_,Y),_.internal=!0),this.resolution=W||settings.RESOLUTION,this.width=Math.round((R||0)*this.resolution)/this.resolution,this.height=Math.round((L||0)*this.resolution)/this.resolution,this._mipmap=B,this.anisotropicLevel=I,this._wrapMode=D,this._scaleMode=C,this.format=V,this.type=U,this.target=z,this.alphaMode=T,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=R>0&&L>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(_)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(_){this._mipmap!==_&&(this._mipmap=_,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(_){this._scaleMode!==_&&(this._scaleMode=_,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(_){this._wrapMode!==_&&(this._wrapMode=_,this.dirtyStyleId++)}setStyle(_,A){let T;return _!==void 0&&_!==this.scaleMode&&(this.scaleMode=_,T=!0),A!==void 0&&A!==this.mipmap&&(this.mipmap=A,T=!0),T&&this.dirtyStyleId++,this}setSize(_,A,T){return T=T||this.resolution,this.setRealSize(_*T,A*T,T)}setRealSize(_,A,T){return this.resolution=T||this.resolution,this.width=Math.round(_)/this.resolution,this.height=Math.round(A)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(_){const A=this.resolution;return A===_?this:(this.resolution=_,this.valid&&(this.width=Math.round(this.width*A)/_,this.height=Math.round(this.height*A)/_,this.emit("update",this)),this._refreshPOT(),this)}setResource(_){if(this.resource===_)return this;if(this.resource)throw new Error("Resource can be set only once");return _.bind(this),this.resource=_,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(_){this.emit("error",this,_)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),ur.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(_,A,T=settings.STRICT_TEXTURE_CACHE){const B=typeof _=="string";let I=null;if(B)I=_;else{if(!_._pixiId){const R=(A==null?void 0:A.pixiIdPrefix)||"pixiid";_._pixiId=`${R}_${uid()}`}I=_._pixiId}let C=BaseTextureCache[I];if(B&&T&&!C)throw new Error(`The cacheId "${I}" does not exist in BaseTextureCache.`);return C||(C=new ur(_,A),C.cacheId=I,ur.addToCache(C,I)),C}static fromBuffer(_,A,T,B){_=_||new Float32Array(A*T*4);const I=new BufferResource(_,{width:A,height:T,...B==null?void 0:B.resourceOptions});let C,R;return _ instanceof Float32Array?(C=FORMATS.RGBA,R=TYPES.FLOAT):_ instanceof Int32Array?(C=FORMATS.RGBA_INTEGER,R=TYPES.INT):_ instanceof Uint32Array?(C=FORMATS.RGBA_INTEGER,R=TYPES.UNSIGNED_INT):_ instanceof Int16Array?(C=FORMATS.RGBA_INTEGER,R=TYPES.SHORT):_ instanceof Uint16Array?(C=FORMATS.RGBA_INTEGER,R=TYPES.UNSIGNED_SHORT):_ instanceof Int8Array?(C=FORMATS.RGBA,R=TYPES.BYTE):(C=FORMATS.RGBA,R=TYPES.UNSIGNED_BYTE),I.internal=!0,new ur(I,Object.assign({},defaultBufferOptions,{type:R,format:C},B))}static addToCache(_,A){A&&(_.textureCacheIds.includes(A)||_.textureCacheIds.push(A),BaseTextureCache[A]&&BaseTextureCache[A]!==_&&console.warn(`BaseTexture added to the cache with an id [${A}] that already had an entry`),BaseTextureCache[A]=_)}static removeFromCache(_){if(typeof _=="string"){const A=BaseTextureCache[_];if(A){const T=A.textureCacheIds.indexOf(_);return T>-1&&A.textureCacheIds.splice(T,1),delete BaseTextureCache[_],A}}else if(_!=null&&_.textureCacheIds){for(let A=0;A<_.textureCacheIds.length;++A)delete BaseTextureCache[_.textureCacheIds[A]];return _.textureCacheIds.length=0,_}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(_,A=!0,T=!1){this.data=_||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=T,this.static=A,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(_){_ instanceof Array&&(_=new Float32Array(_)),this.data=_||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(_){this.type=_?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(_){return _ instanceof Array&&(_=new Float32Array(_)),new Buffer(_)}}class Attribute{constructor(_,A=0,T=!1,B=TYPES.FLOAT,I,C,R,L=1){this.buffer=_,this.size=A,this.normalized=T,this.type=B,this.stride=I,this.start=C,this.instance=R,this.divisor=L}destroy(){this.buffer=null}static from(_,A,T,B,I){return new Attribute(_,A,T,B,I)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(E,_){let A=0,T=0;const B={};for(let L=0;L<E.length;L++)T+=_[L],A+=E[L].length;const I=new ArrayBuffer(A*4);let C=null,R=0;for(let L=0;L<E.length;L++){const D=_[L],V=E[L],U=getBufferType(V);B[U]||(B[U]=new map$1[U](I)),C=B[U];for(let z=0;z<V.length;z++){const W=(z/D|0)*T+R,Y=z%D;C[W+Y]=V[z]}R+=D}return new Float32Array(I)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(_=[],A={}){this.buffers=_,this.indexBuffer=null,this.attributes=A,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(_,A,T=0,B=!1,I,C,R,L=!1){if(!A)throw new Error("You must pass a buffer when creating an attribute");A instanceof Buffer||(A instanceof Array&&(A=new Float32Array(A)),A=new Buffer(A));const D=_.split("|");if(D.length>1){for(let U=0;U<D.length;U++)this.addAttribute(D[U],A,T,B,I);return this}let V=this.buffers.indexOf(A);return V===-1&&(this.buffers.push(A),V=this.buffers.length-1),this.attributes[_]=new Attribute(V,T,B,I,C,R,L),this.instanced=this.instanced||L,this}getAttribute(_){return this.attributes[_]}getBuffer(_){return this.buffers[this.getAttribute(_).buffer]}addIndex(_){return _ instanceof Buffer||(_ instanceof Array&&(_=new Uint16Array(_)),_=new Buffer(_)),_.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=_,this.buffers.includes(_)||this.buffers.push(_),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const _=[],A=[],T=new Buffer;let B;for(B in this.attributes){const I=this.attributes[B],C=this.buffers[I.buffer];_.push(C.data),A.push(I.size*byteSizeMap$1[I.type]/4),I.buffer=0}for(T.data=interleaveTypedArrays(_,A),B=0;B<this.buffers.length;B++)this.buffers[B]!==this.indexBuffer&&this.buffers[B].destroy();return this.buffers=[T],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const _ in this.attributes){const A=this.attributes[_];return this.buffers[A.buffer].data.length/(A.stride/4||A.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const _=new Geometry;for(let A=0;A<this.buffers.length;A++)_.buffers[A]=new Buffer(this.buffers[A].data.slice(0));for(const A in this.attributes){const T=this.attributes[A];_.attributes[A]=new Attribute(T.buffer,T.size,T.normalized,T.type,T.stride,T.start,T.instance)}return this.indexBuffer&&(_.indexBuffer=_.buffers[this.buffers.indexOf(this.indexBuffer)],_.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),_}static merge(_){const A=new Geometry,T=[],B=[],I=[];let C;for(let R=0;R<_.length;R++){C=_[R];for(let L=0;L<C.buffers.length;L++)B[L]=B[L]||0,B[L]+=C.buffers[L].data.length,I[L]=0}for(let R=0;R<C.buffers.length;R++)T[R]=new map[getBufferType(C.buffers[R].data)](B[R]),A.buffers[R]=new Buffer(T[R]);for(let R=0;R<_.length;R++){C=_[R];for(let L=0;L<C.buffers.length;L++)T[L].set(C.buffers[L].data,I[L]),I[L]+=C.buffers[L].data.length}if(A.attributes=C.attributes,C.indexBuffer){A.indexBuffer=A.buffers[C.buffers.indexOf(C.indexBuffer)],A.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let R=0,L=0,D=0,V=0;for(let U=0;U<C.buffers.length;U++)if(C.buffers[U]!==C.indexBuffer){V=U;break}for(const U in C.attributes){const z=C.attributes[U];(z.buffer|0)===V&&(L+=z.size*byteSizeMap$1[z.type]/4)}for(let U=0;U<_.length;U++){const z=_[U].indexBuffer.data;for(let W=0;W<z.length;W++)A.indexBuffer.data[W+D]+=R;R+=_[U].buffers[V].data.length/L,D+=z.length}}return A}}class BatchGeometry extends Geometry{constructor(_=!1){super(),this._buffer=new Buffer(null,_,!1),this._indexBuffer=new Buffer(null,_,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(E=>(E[E.POLY=0]="POLY",E[E.RECT=1]="RECT",E[E.CIRC=2]="CIRC",E[E.ELIP=3]="ELIP",E[E.RREC=4]="RREC",E))(SHAPES||{});class Point{constructor(_=0,A=0){this.x=0,this.y=0,this.x=_,this.y=A}clone(){return new Point(this.x,this.y)}copyFrom(_){return this.set(_.x,_.y),this}copyTo(_){return _.set(this.x,this.y),_}equals(_){return _.x===this.x&&_.y===this.y}set(_=0,A=_){return this.x=_,this.y=A,this}}Point.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(_=0,A=0,T=0,B=0){this.x=Number(_),this.y=Number(A),this.width=Number(T),this.height=Number(B),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.x=this.x,_.y=this.y,_.width=this.width,_.height=this.height,_}contains(_,A){return this.width<=0||this.height<=0?!1:_>=this.x&&_<this.x+this.width&&A>=this.y&&A<this.y+this.height}intersects(_,A){if(!A){const ht=this.x<_.x?_.x:this.x;if((this.right>_.right?_.right:this.right)<=ht)return!1;const mt=this.y<_.y?_.y:this.y;return(this.bottom>_.bottom?_.bottom:this.bottom)>mt}const T=this.left,B=this.right,I=this.top,C=this.bottom;if(B<=T||C<=I)return!1;const R=tempPoints$1[0].set(_.left,_.top),L=tempPoints$1[1].set(_.left,_.bottom),D=tempPoints$1[2].set(_.right,_.top),V=tempPoints$1[3].set(_.right,_.bottom);if(D.x<=R.x||L.y<=R.y)return!1;const U=Math.sign(A.a*A.d-A.b*A.c);if(U===0||(A.apply(R,R),A.apply(L,L),A.apply(D,D),A.apply(V,V),Math.max(R.x,L.x,D.x,V.x)<=T||Math.min(R.x,L.x,D.x,V.x)>=B||Math.max(R.y,L.y,D.y,V.y)<=I||Math.min(R.y,L.y,D.y,V.y)>=C))return!1;const z=U*(L.y-R.y),W=U*(R.x-L.x),Y=z*T+W*I,K=z*B+W*I,J=z*T+W*C,et=z*B+W*C;if(Math.max(Y,K,J,et)<=z*R.x+W*R.y||Math.min(Y,K,J,et)>=z*V.x+W*V.y)return!1;const it=U*(R.y-D.y),rt=U*(D.x-R.x),st=it*T+rt*I,lt=it*B+rt*I,ct=it*T+rt*C,at=it*B+rt*C;return!(Math.max(st,lt,ct,at)<=it*R.x+rt*R.y||Math.min(st,lt,ct,at)>=it*V.x+rt*V.y)}pad(_=0,A=_){return this.x-=_,this.y-=A,this.width+=_*2,this.height+=A*2,this}fit(_){const A=Math.max(this.x,_.x),T=Math.min(this.x+this.width,_.x+_.width),B=Math.max(this.y,_.y),I=Math.min(this.y+this.height,_.y+_.height);return this.x=A,this.width=Math.max(T-A,0),this.y=B,this.height=Math.max(I-B,0),this}ceil(_=1,A=.001){const T=Math.ceil((this.x+this.width-A)*_)/_,B=Math.ceil((this.y+this.height-A)*_)/_;return this.x=Math.floor((this.x+A)*_)/_,this.y=Math.floor((this.y+A)*_)/_,this.width=T-this.x,this.height=B-this.y,this}enlarge(_){const A=Math.min(this.x,_.x),T=Math.max(this.x+this.width,_.x+_.width),B=Math.min(this.y,_.y),I=Math.max(this.y+this.height,_.y+_.height);return this.x=A,this.width=T-A,this.y=B,this.height=I-B,this}}Rectangle.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let Circle$1=class eo{constructor(_=0,A=0,T=0){this.x=_,this.y=A,this.radius=T,this.type=SHAPES.CIRC}clone(){return new eo(this.x,this.y,this.radius)}contains(_,A){if(this.radius<=0)return!1;const T=this.radius*this.radius;let B=this.x-_,I=this.y-A;return B*=B,I*=I,B+I<=T}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};Circle$1.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ellipse{constructor(_=0,A=0,T=0,B=0){this.x=_,this.y=A,this.width=T,this.height=B,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(_,A){if(this.width<=0||this.height<=0)return!1;let T=(_-this.x)/this.width,B=(A-this.y)/this.height;return T*=T,B*=B,T+B<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}Ellipse.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Polygon{constructor(..._){let A=Array.isArray(_[0])?_[0]:_;if(typeof A[0]!="number"){const T=[];for(let B=0,I=A.length;B<I;B++)T.push(A[B].x,A[B].y);A=T}this.points=A,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const _=this.points.slice(),A=new Polygon(_);return A.closeStroke=this.closeStroke,A}contains(_,A){let T=!1;const B=this.points.length/2;for(let I=0,C=B-1;I<B;C=I++){const R=this.points[I*2],L=this.points[I*2+1],D=this.points[C*2],V=this.points[C*2+1];L>A!=V>A&&_<(D-R)*((A-L)/(V-L))+R&&(T=!T)}return T}}Polygon.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((E,_)=>`${E}, ${_}`,"")}]`};class RoundedRectangle{constructor(_=0,A=0,T=0,B=0,I=20){this.x=_,this.y=A,this.width=T,this.height=B,this.radius=I,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(_,A){if(this.width<=0||this.height<=0)return!1;if(_>=this.x&&_<=this.x+this.width&&A>=this.y&&A<=this.y+this.height){const T=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(A>=this.y+T&&A<=this.y+this.height-T||_>=this.x+T&&_<=this.x+this.width-T)return!0;let B=_-(this.x+T),I=A-(this.y+T);const C=T*T;if(B*B+I*I<=C||(B=_-(this.x+this.width-T),B*B+I*I<=C)||(I=A-(this.y+this.height-T),B*B+I*I<=C)||(B=_-(this.x+T),B*B+I*I<=C))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(_=1,A=0,T=0,B=1,I=0,C=0){this.array=null,this.a=_,this.b=A,this.c=T,this.d=B,this.tx=I,this.ty=C}fromArray(_){this.a=_[0],this.b=_[1],this.c=_[3],this.d=_[4],this.tx=_[2],this.ty=_[5]}set(_,A,T,B,I,C){return this.a=_,this.b=A,this.c=T,this.d=B,this.tx=I,this.ty=C,this}toArray(_,A){this.array||(this.array=new Float32Array(9));const T=A||this.array;return _?(T[0]=this.a,T[1]=this.b,T[2]=0,T[3]=this.c,T[4]=this.d,T[5]=0,T[6]=this.tx,T[7]=this.ty,T[8]=1):(T[0]=this.a,T[1]=this.c,T[2]=this.tx,T[3]=this.b,T[4]=this.d,T[5]=this.ty,T[6]=0,T[7]=0,T[8]=1),T}apply(_,A){A=A||new Point;const T=_.x,B=_.y;return A.x=this.a*T+this.c*B+this.tx,A.y=this.b*T+this.d*B+this.ty,A}applyInverse(_,A){A=A||new Point;const T=1/(this.a*this.d+this.c*-this.b),B=_.x,I=_.y;return A.x=this.d*T*B+-this.c*T*I+(this.ty*this.c-this.tx*this.d)*T,A.y=this.a*T*I+-this.b*T*B+(-this.ty*this.a+this.tx*this.b)*T,A}translate(_,A){return this.tx+=_,this.ty+=A,this}scale(_,A){return this.a*=_,this.d*=A,this.c*=_,this.b*=A,this.tx*=_,this.ty*=A,this}rotate(_){const A=Math.cos(_),T=Math.sin(_),B=this.a,I=this.c,C=this.tx;return this.a=B*A-this.b*T,this.b=B*T+this.b*A,this.c=I*A-this.d*T,this.d=I*T+this.d*A,this.tx=C*A-this.ty*T,this.ty=C*T+this.ty*A,this}append(_){const A=this.a,T=this.b,B=this.c,I=this.d;return this.a=_.a*A+_.b*B,this.b=_.a*T+_.b*I,this.c=_.c*A+_.d*B,this.d=_.c*T+_.d*I,this.tx=_.tx*A+_.ty*B+this.tx,this.ty=_.tx*T+_.ty*I+this.ty,this}setTransform(_,A,T,B,I,C,R,L,D){return this.a=Math.cos(R+D)*I,this.b=Math.sin(R+D)*I,this.c=-Math.sin(R-L)*C,this.d=Math.cos(R-L)*C,this.tx=_-(T*this.a+B*this.c),this.ty=A-(T*this.b+B*this.d),this}prepend(_){const A=this.tx;if(_.a!==1||_.b!==0||_.c!==0||_.d!==1){const T=this.a,B=this.c;this.a=T*_.a+this.b*_.c,this.b=T*_.b+this.b*_.d,this.c=B*_.a+this.d*_.c,this.d=B*_.b+this.d*_.d}return this.tx=A*_.a+this.ty*_.c+_.tx,this.ty=A*_.b+this.ty*_.d+_.ty,this}decompose(_){const A=this.a,T=this.b,B=this.c,I=this.d,C=_.pivot,R=-Math.atan2(-B,I),L=Math.atan2(T,A),D=Math.abs(R+L);return D<1e-5||Math.abs(PI_2-D)<1e-5?(_.rotation=L,_.skew.x=_.skew.y=0):(_.rotation=0,_.skew.x=R,_.skew.y=L),_.scale.x=Math.sqrt(A*A+T*T),_.scale.y=Math.sqrt(B*B+I*I),_.position.x=this.tx+(C.x*A+C.y*B),_.position.y=this.ty+(C.x*T+C.y*I),_}invert(){const _=this.a,A=this.b,T=this.c,B=this.d,I=this.tx,C=_*B-A*T;return this.a=B/C,this.b=-A/C,this.c=-T/C,this.d=_/C,this.tx=(T*this.ty-B*I)/C,this.ty=-(_*this.ty-A*I)/C,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const _=new Matrix;return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyTo(_){return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyFrom(_){return this.a=_.a,this.b=_.b,this.c=_.c,this.d=_.d,this.tx=_.tx,this.ty=_.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let E=0;E<16;E++){const _=[];rotationCayley.push(_);for(let A=0;A<16;A++){const T=signum(ux[E]*ux[A]+vx[E]*uy[A]),B=signum(uy[E]*ux[A]+vy[E]*uy[A]),I=signum(ux[E]*vx[A]+vx[E]*vy[A]),C=signum(uy[E]*vx[A]+vy[E]*vy[A]);for(let R=0;R<16;R++)if(ux[R]===T&&uy[R]===B&&vx[R]===I&&vy[R]===C){_.push(R);break}}}for(let E=0;E<16;E++){const _=new Matrix;_.set(ux[E],uy[E],vx[E],vy[E],0,0),rotationMatrices.push(_)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:E=>ux[E],uY:E=>uy[E],vX:E=>vx[E],vY:E=>vy[E],inv:E=>E&8?E&15:-E&7,add:(E,_)=>rotationCayley[E][_],sub:(E,_)=>rotationCayley[E][groupD8.inv(_)],rotate180:E=>E^4,isVertical:E=>(E&3)===2,byDirection:(E,_)=>Math.abs(E)*2<=Math.abs(_)?_>=0?groupD8.S:groupD8.N:Math.abs(_)*2<=Math.abs(E)?E>0?groupD8.E:groupD8.W:_>0?E>0?groupD8.SE:groupD8.SW:E>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(E,_,A=0,T=0)=>{const B=rotationMatrices[groupD8.inv(_)];B.tx=A,B.ty=T,E.append(B)}};class ObservablePoint{constructor(_,A,T=0,B=0){this._x=T,this._y=B,this.cb=_,this.scope=A}clone(_=this.cb,A=this.scope){return new ObservablePoint(_,A,this._x,this._y)}set(_=0,A=_){return(this._x!==_||this._y!==A)&&(this._x=_,this._y=A,this.cb.call(this.scope)),this}copyFrom(_){return(this._x!==_.x||this._y!==_.y)&&(this._x=_.x,this._y=_.y,this.cb.call(this.scope)),this}copyTo(_){return _.set(this._x,this._y),_}equals(_){return _.x===this._x&&_.y===this._y}get x(){return this._x}set x(_){this._x!==_&&(this._x=_,this.cb.call(this.scope))}get y(){return this._y}set y(_){this._y!==_&&(this._y=_,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const E=this.localTransform;this._localID!==this._currentLocalID&&(E.a=this._cx*this.scale.x,E.b=this._sx*this.scale.x,E.c=this._cy*this.scale.y,E.d=this._sy*this.scale.y,E.tx=this.position.x-(this.pivot.x*E.a+this.pivot.y*E.c),E.ty=this.position.y-(this.pivot.x*E.b+this.pivot.y*E.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(E){const _=this.localTransform;if(this._localID!==this._currentLocalID&&(_.a=this._cx*this.scale.x,_.b=this._sx*this.scale.x,_.c=this._cy*this.scale.y,_.d=this._sy*this.scale.y,_.tx=this.position.x-(this.pivot.x*_.a+this.pivot.y*_.c),_.ty=this.position.y-(this.pivot.x*_.b+this.pivot.y*_.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==E._worldID){const A=E.worldTransform,T=this.worldTransform;T.a=_.a*A.a+_.b*A.c,T.b=_.a*A.b+_.b*A.d,T.c=_.c*A.a+_.d*A.c,T.d=_.c*A.b+_.d*A.d,T.tx=_.tx*A.a+_.ty*A.c+A.tx,T.ty=_.tx*A.b+_.ty*A.d+A.ty,this._parentID=E._worldID,this._worldID++}}setFromMatrix(E){E.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(E){this._rotation!==E&&(this._rotation=E,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform$1=_Transform;Transform$1.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(E,_,A){const T=E.createShader(_);return E.shaderSource(T,A),E.compileShader(T),T}function booleanArray(E){const _=new Array(E);for(let A=0;A<_.length;A++)_[A]=!1;return _}function defaultValue(E,_){switch(E){case"float":return 0;case"vec2":return new Float32Array(2*_);case"vec3":return new Float32Array(3*_);case"vec4":return new Float32Array(4*_);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*_);case"ivec3":return new Int32Array(3*_);case"ivec4":return new Int32Array(4*_);case"uvec2":return new Uint32Array(2*_);case"uvec3":return new Uint32Array(3*_);case"uvec4":return new Uint32Array(4*_);case"bool":return!1;case"bvec2":return booleanArray(2*_);case"bvec3":return booleanArray(3*_);case"bvec4":return booleanArray(4*_);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:E=>E.type==="float"&&E.size===1&&!E.isArray,code:E=>`
            if(uv["${E}"] !== ud["${E}"].value)
            {
                ud["${E}"].value = uv["${E}"]
                gl.uniform1f(ud["${E}"].location, uv["${E}"])
            }
            `},{test:(E,_)=>(E.type==="sampler2D"||E.type==="samplerCube"||E.type==="sampler2DArray")&&E.size===1&&!E.isArray&&(_==null||_.castToBaseTexture!==void 0),code:E=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${E}"], t);

            if(ud["${E}"].value !== t)
            {
                ud["${E}"].value = t;
                gl.uniform1i(ud["${E}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(E,_)=>E.type==="mat3"&&E.size===1&&!E.isArray&&_.a!==void 0,code:E=>`
            gl.uniformMatrix3fv(ud["${E}"].location, false, uv["${E}"].toArray(true));
            `,codeUbo:E=>`
                var ${E}_matrix = uv.${E}.toArray(true);

                data[offset] = ${E}_matrix[0];
                data[offset+1] = ${E}_matrix[1];
                data[offset+2] = ${E}_matrix[2];
        
                data[offset + 4] = ${E}_matrix[3];
                data[offset + 5] = ${E}_matrix[4];
                data[offset + 6] = ${E}_matrix[5];
        
                data[offset + 8] = ${E}_matrix[6];
                data[offset + 9] = ${E}_matrix[7];
                data[offset + 10] = ${E}_matrix[8];
            `},{test:(E,_)=>E.type==="vec2"&&E.size===1&&!E.isArray&&_.x!==void 0,code:E=>`
                cv = ud["${E}"].value;
                v = uv["${E}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${E}"].location, v.x, v.y);
                }`,codeUbo:E=>`
                v = uv.${E};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:E=>E.type==="vec2"&&E.size===1&&!E.isArray,code:E=>`
                cv = ud["${E}"].value;
                v = uv["${E}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${E}"].location, v[0], v[1]);
                }
            `},{test:(E,_)=>E.type==="vec4"&&E.size===1&&!E.isArray&&_.width!==void 0,code:E=>`
                cv = ud["${E}"].value;
                v = uv["${E}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${E}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:E=>`
                    v = uv.${E};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(E,_)=>E.type==="vec4"&&E.size===1&&!E.isArray&&_.red!==void 0,code:E=>`
                cv = ud["${E}"].value;
                v = uv["${E}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${E}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:E=>`
                    v = uv.${E};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(E,_)=>E.type==="vec3"&&E.size===1&&!E.isArray&&_.red!==void 0,code:E=>`
                cv = ud["${E}"].value;
                v = uv["${E}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${E}"].location, v.red, v.green, v.blue)
                }`,codeUbo:E=>`
                    v = uv.${E};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:E=>E.type==="vec4"&&E.size===1&&!E.isArray,code:E=>`
                cv = ud["${E}"].value;
                v = uv["${E}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${E}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(E,_){var T;const A=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const B in E.uniforms){const I=_[B];if(!I){((T=E.uniforms[B])==null?void 0:T.group)===!0&&(E.uniforms[B].ubo?A.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${B}, '${B}');
                    `):A.push(`
                        renderer.shader.syncUniformGroup(uv.${B}, syncData);
                    `));continue}const C=E.uniforms[B];let R=!1;for(let L=0;L<uniformParsers.length;L++)if(uniformParsers[L].test(I,C)){A.push(uniformParsers[L].code(B,C)),R=!0;break}if(!R){const L=(I.size===1&&!I.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[I.type].replace("location",`ud["${B}"].location`);A.push(`
            cu = ud["${B}"];
            cv = cu.value;
            v = uv["${B}"];
            ${L};`)}}return new Function("ud","uv","renderer","syncData",A.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const E=settings.ADAPTER.createCanvas();let _;settings.PREFER_ENV>=ENV.WEBGL2&&(_=E.getContext("webgl2",{})),_||(_=E.getContext("webgl",{})||E.getContext("experimental-webgl",{}),_?_.getExtension("WEBGL_draw_buffers"):_=null),context=_}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const E=getTestContext();if(E&&E.getShaderPrecisionFormat){const _=E.getShaderPrecisionFormat(E.FRAGMENT_SHADER,E.HIGH_FLOAT);_&&(maxFragmentPrecision=_.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(E,_){const A=E.getShaderSource(_).split(`
`).map((D,V)=>`${V}: ${D}`),T=E.getShaderInfoLog(_),B=T.split(`
`),I={},C=B.map(D=>parseFloat(D.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(D=>D&&!I[D]?(I[D]=!0,!0):!1),R=[""];C.forEach(D=>{A[D-1]=`%c${A[D-1]}%c`,R.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const L=A.join(`
`);R[0]=L,console.error(T),console.groupCollapsed("click to view full shader code"),console.warn(...R),console.groupEnd()}function logProgramError(E,_,A,T){E.getProgramParameter(_,E.LINK_STATUS)||(E.getShaderParameter(A,E.COMPILE_STATUS)||logPrettyShaderError(E,A),E.getShaderParameter(T,E.COMPILE_STATUS)||logPrettyShaderError(E,T),console.error("PixiJS Error: Could not initialize shader."),E.getProgramInfoLog(_)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",E.getProgramInfoLog(_)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(E){return GLSL_TO_SIZE[E]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(E,_){if(!GL_TABLE){const A=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let T=0;T<A.length;++T){const B=A[T];GL_TABLE[E[B]]=GL_TO_GLSL_TYPES[B]}}return GL_TABLE[_]}function setPrecision(E,_,A){if(E.substring(0,9)!=="precision"){let T=_;return _===PRECISION.HIGH&&A!==PRECISION.HIGH&&(T=PRECISION.MEDIUM),`precision ${T} float;
${E}`}else if(A!==PRECISION.HIGH&&E.substring(0,15)==="precision highp")return E.replace("precision highp","precision mediump");return E}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class dr{constructor(_,A,T="pixi-shader",B={}){this.extra={},this.id=UID$2++,this.vertexSrc=_||dr.defaultVertexSrc,this.fragmentSrc=A||dr.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=B,this.vertexSrc.substring(0,8)!=="#version"&&(T=T.replace(/\s+/g,"-"),nameCache[T]?(nameCache[T]++,T+=`-${nameCache[T]}`):nameCache[T]=1,this.vertexSrc=`#define SHADER_NAME ${T}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${T}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,dr.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,dr.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(_,A,T){const B=_+A;let I=ProgramCache[B];return I||(ProgramCache[B]=I=new dr(_,A,T)),I}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(_,A,T){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!A,this.ubo=!!T,_ instanceof Buffer?(this.buffer=_,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=_,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(_,A,T){if(!this.ubo)this.uniforms[_]=new UniformGroup(A,T);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(_,A,T){return new UniformGroup(_,A,T)}static uboFrom(_,A){return new UniformGroup(_,A??!0,!0)}}class Shader{constructor(_,A){this.uniformBindCount=0,this.program=_,A?A instanceof UniformGroup?this.uniformGroup=A:this.uniformGroup=new UniformGroup(A):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(_,A){if(A.uniforms[_])return!0;for(const T in A.uniforms){const B=A.uniforms[T];if(B.group===!0&&this.checkUniformExists(_,B))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(_,A,T){const B=Program.from(_,A);return new Shader(B,T)}}class BatchShaderGenerator{constructor(_,A){if(this.vertexSrc=_,this.fragTemplate=A,this.programCache={},this.defaultGroupCache={},!A.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!A.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(_){if(!this.programCache[_]){const T=new Int32Array(_);for(let I=0;I<_;I++)T[I]=I;this.defaultGroupCache[_]=UniformGroup.from({uSamplers:T},!0);let B=this.fragTemplate;B=B.replace(/%count%/gi,`${_}`),B=B.replace(/%forloop%/gi,this.generateSampleSrc(_)),this.programCache[_]=new Program(this.vertexSrc,B)}const A={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[_]};return new Shader(this.programCache[_],A)}generateSampleSrc(_){let A="";A+=`
`,A+=`
`;for(let T=0;T<_;T++)T>0&&(A+=`
else `),T<_-1&&(A+=`if(vTextureId < ${T}.5)`),A+=`
{`,A+=`
	color = texture2D(uSamplers[${T}], vTextureCoord);`,A+=`
}`;return A+=`
`,A+=`
`,A}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let _=0;_<this.count;_++)this.elements[_]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(E){let _=!0;const A=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const T=A.userAgent.match(/OS (\d+)_(\d+)?/);T&&parseInt(T[1],10)<11&&(_=!1)}if(isMobile.android.device){const T=A.userAgent.match(/Android\s([0-9.]*)/);T&&parseInt(T[1],10)<7&&(_=!1)}}return _?E:4}class ObjectRenderer{constructor(_){this.renderer=_}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(_){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class Ri extends ObjectRenderer{constructor(_){super(_),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=Ri.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),_.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(_){this._defaultMaxTextures=_}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(_){this._canUploadSameBuffer=_}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:_=Ri.defaultVertexSrc,fragment:A=Ri.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(_,A)}contextChange(){const _=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),Ri.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,_)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let A=0;A<this._packedGeometryPoolSize;A++)this._packedGeometries[A]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:_,_textureArrayPool:A}=Ri,T=this.size/4,B=Math.floor(T/this.maxTextures)+1;for(;_.length<T;)_.push(new BatchDrawCall);for(;A.length<B;)A.push(new BatchTextureArray);for(let I=0;I<this.maxTextures;I++)this._tempBoundTextures[I]=null}onPrerender(){this._flushId=0}render(_){_._texture.valid&&(this._vertexCount+_.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=_.vertexData.length/2,this._indexCount+=_.indices.length,this._bufferedTextures[this._bufferSize]=_._texture.baseTexture,this._bufferedElements[this._bufferSize++]=_)}buildTexturesAndDrawCalls(){const{_bufferedTextures:_,maxTextures:A}=this,T=Ri._textureArrayPool,B=this.renderer.batch,I=this._tempBoundTextures,C=this.renderer.textureGC.count;let R=++BaseTexture._globalBatch,L=0,D=T[0],V=0;B.copyBoundTextures(I,A);for(let U=0;U<this._bufferSize;++U){const z=_[U];_[U]=null,z._batchEnabled!==R&&(D.count>=A&&(B.boundArray(D,I,R,A),this.buildDrawCalls(D,V,U),V=U,D=T[++L],++R),z._batchEnabled=R,z.touched=C,D.elements[D.count++]=z)}D.count>0&&(B.boundArray(D,I,R,A),this.buildDrawCalls(D,V,this._bufferSize),++L,++R);for(let U=0;U<I.length;U++)I[U]=null;BaseTexture._globalBatch=R}buildDrawCalls(_,A,T){const{_bufferedElements:B,_attributeBuffer:I,_indexBuffer:C,vertexSize:R}=this,L=Ri._drawCallPool;let D=this._dcIndex,V=this._aIndex,U=this._iIndex,z=L[D];z.start=this._iIndex,z.texArray=_;for(let W=A;W<T;++W){const Y=B[W],K=Y._texture.baseTexture,J=premultiplyBlendMode[K.alphaMode?1:0][Y.blendMode];B[W]=null,A<W&&z.blend!==J&&(z.size=U-z.start,A=W,z=L[++D],z.texArray=_,z.start=U),this.packInterleavedGeometry(Y,I,C,V,U),V+=Y.vertexData.length/2*R,U+=Y.indices.length,z.blend=J}A<T&&(z.size=U-z.start,++D),this._dcIndex=D,this._aIndex=V,this._iIndex=U}bindAndClearTexArray(_){const A=this.renderer.texture;for(let T=0;T<_.count;T++)A.bind(_.elements[T],_.ids[T]),_.elements[T]=null;_.count=0}updateGeometry(){const{_packedGeometries:_,_attributeBuffer:A,_indexBuffer:T}=this;Ri.canUploadSameBuffer?(_[this._flushId]._buffer.update(A.rawBinaryData),_[this._flushId]._indexBuffer.update(T),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,_[this._flushId]=new this.geometryClass),_[this._flushId]._buffer.update(A.rawBinaryData),_[this._flushId]._indexBuffer.update(T),this.renderer.geometry.bind(_[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const _=this._dcIndex,{gl:A,state:T}=this.renderer,B=Ri._drawCallPool;let I=null;for(let C=0;C<_;C++){const{texArray:R,type:L,size:D,start:V,blend:U}=B[C];I!==R&&(I=R,this.bindAndClearTexArray(R)),this.state.blendMode=U,T.set(this.state),A.drawElements(L,D,A.UNSIGNED_SHORT,V*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ri.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let _=0;_<this._packedGeometryPoolSize;_++)this._packedGeometries[_]&&this._packedGeometries[_].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(_){const A=nextPow2(Math.ceil(_/8)),T=log2(A),B=A*8;this._aBuffers.length<=T&&(this._iBuffers.length=T+1);let I=this._aBuffers[B];return I||(this._aBuffers[B]=I=new ViewableBuffer(B*this.vertexSize*4)),I}getIndexBuffer(_){const A=nextPow2(Math.ceil(_/12)),T=log2(A),B=A*12;this._iBuffers.length<=T&&(this._iBuffers.length=T+1);let I=this._iBuffers[T];return I||(this._iBuffers[T]=I=new Uint16Array(B)),I}packInterleavedGeometry(_,A,T,B,I){const{uint32View:C,float32View:R}=A,L=B/this.vertexSize,D=_.uvs,V=_.indices,U=_.vertexData,z=_._texture.baseTexture._batchLocation,W=Math.min(_.worldAlpha,1),Y=Color.shared.setValue(_._tintRGB).toPremultiplied(W,_._texture.baseTexture.alphaMode>0);for(let K=0;K<U.length;K+=2)R[B++]=U[K],R[B++]=U[K+1],R[B++]=D[K],R[B++]=D[K+1],C[B++]=Y,R[B++]=z;for(let K=0;K<V.length;K++)T[I++]=L+V[K]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions$1.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class Br extends Shader{constructor(_,A,T){const B=Program.from(_||Br.defaultVertexSrc,A||Br.defaultFragmentSrc);super(B,T),this.padding=0,this.resolution=Br.defaultResolution,this.multisample=Br.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(_,A,T,B,I){_.applyFilter(this,A,T,B)}get blendMode(){return this.state.blendMode}set blendMode(_){this.state.blendMode=_}get resolution(){return this._resolution}set resolution(_){this._resolution=_}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(_){this.clearBeforeRender=_.clearBeforeRender;const{backgroundColor:A,background:T,backgroundAlpha:B}=_,I=T??A;I!==void 0&&(this.color=I),this.alpha=B}get color(){return this._backgroundColor.value}set color(_){this._backgroundColor.setValue(_)}get alpha(){return this._backgroundColor.alpha}set alpha(_){this._backgroundColor.setAlpha(_)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$1.add(BackgroundSystem);class BatchSystem{constructor(_){this.renderer=_,this.emptyRenderer=new ObjectRenderer(_),this.currentRenderer=this.emptyRenderer}setObjectRenderer(_){this.currentRenderer!==_&&(this.currentRenderer.stop(),this.currentRenderer=_,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(_,A){const{boundTextures:T}=this.renderer.texture;for(let B=A-1;B>=0;--B)_[B]=T[B]||null,_[B]&&(_[B]._batchLocation=B)}boundArray(_,A,T,B){const{elements:I,ids:C,count:R}=_;let L=0;for(let D=0;D<R;D++){const V=I[D],U=V._batchLocation;if(U>=0&&U<B&&A[U]===V){C[D]=U;continue}for(;L<B;){const z=A[L];if(z&&z._batchEnabled===T&&z._batchLocation===L){L++;continue}C[D]=L,V._batchLocation=L,A[L]=V;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(_){this.renderer=_,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(_){this.gl=_,this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(_){if(_.context)this.initFromContext(_.context);else{const A=this.renderer.background.alpha<1,T=_.premultipliedAlpha;this.preserveDrawingBuffer=_.preserveDrawingBuffer,this.useContextAlpha=_.useContextAlpha,this.powerPreference=_.powerPreference,this.initFromOptions({alpha:A,premultipliedAlpha:T,antialias:_.antialias,stencil:!0,preserveDrawingBuffer:_.preserveDrawingBuffer,powerPreference:_.powerPreference})}}initFromContext(_){this.gl=_,this.validateContext(_),this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(_);const A=this.renderer.view;A.addEventListener!==void 0&&(A.addEventListener("webglcontextlost",this.handleContextLost,!1),A.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(_){const A=this.createContext(this.renderer.view,_);this.initFromContext(A)}createContext(_,A){let T;if(settings.PREFER_ENV>=ENV.WEBGL2&&(T=_.getContext("webgl2",A)),T)this.webGLVersion=2;else if(this.webGLVersion=1,T=_.getContext("webgl",A)||_.getContext("experimental-webgl",A),!T)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=T,this.getExtensions(),this.gl}getExtensions(){const{gl:_}=this,A={loseContext:_.getExtension("WEBGL_lose_context"),anisotropicFiltering:_.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),s3tc:_.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:_.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:_.getExtension("WEBGL_compressed_texture_etc"),etc1:_.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:_.getExtension("WEBGL_compressed_texture_atc"),astc:_.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,A,{drawBuffers:_.getExtension("WEBGL_draw_buffers"),depthTexture:_.getExtension("WEBGL_depth_texture"),vertexArrayObject:_.getExtension("OES_vertex_array_object")||_.getExtension("MOZ_OES_vertex_array_object")||_.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:_.getExtension("OES_element_index_uint"),floatTexture:_.getExtension("OES_texture_float"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),textureHalfFloat:_.getExtension("OES_texture_half_float"),textureHalfFloatLinear:_.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,A,{colorBufferFloat:_.getExtension("EXT_color_buffer_float")})}handleContextLost(_){_.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const _=this.renderer.view;this.renderer=null,_.removeEventListener!==void 0&&(_.removeEventListener("webglcontextlost",this.handleContextLost),_.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(_){const A=_.getContextAttributes(),T="WebGL2RenderingContext"in globalThis&&_ instanceof globalThis.WebGL2RenderingContext;T&&(this.webGLVersion=2),A&&!A.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const B=T||!!_.getExtension("OES_element_index_uint");this.supports.uint32Indices=B,B||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$1.add(ContextSystem);class Framebuffer{constructor(_,A){if(this.width=Math.round(_),this.height=Math.round(A),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(_=0,A){return this.colorTextures[_]=A||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(_){return this.depthTexture=_||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(_,A){if(_=Math.round(_),A=Math.round(A),!_||!A)throw new Error("Framebuffer width and height must not be zero");if(!(_===this.width&&A===this.height)){this.width=_,this.height=A,this.dirtyId++,this.dirtySize++;for(let T=0;T<this.colorTextures.length;T++){const B=this.colorTextures[T],I=B.resolution;B.setSize(_/I,A/I)}if(this.depthTexture){const T=this.depthTexture.resolution;this.depthTexture.setSize(_/T,A/T)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(_={}){if(typeof _=="number"){const A=arguments[0],T=arguments[1],B=arguments[2],I=arguments[3];_={width:A,height:T,scaleMode:B,resolution:I}}_.width=_.width??100,_.height=_.height??100,_.multisample??(_.multisample=MSAA_QUALITY.NONE),super(null,_),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=_.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(_){this._clear.setValue(_)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,A){this.framebuffer.resize(_*this.resolution,A*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(_){const A=_,T=A.naturalWidth||A.videoWidth||A.width,B=A.naturalHeight||A.videoHeight||A.height;super(T,B),this.source=_,this.noSubImage=!1}static crossOrigin(_,A,T){T===void 0&&!A.startsWith("data:")?_.crossOrigin=determineCrossOrigin(A):T!==!1&&(_.crossOrigin=typeof T=="string"?T:"anonymous")}upload(_,A,T,B){const I=_.gl,C=A.realWidth,R=A.realHeight;if(B=B||this.source,typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement){if(!B.complete||B.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&B instanceof HTMLVideoElement&&B.readyState<=1)return!1;return I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&A.target===I.TEXTURE_2D&&T.width===C&&T.height===R?I.texSubImage2D(I.TEXTURE_2D,0,0,0,A.format,T.type,B):(T.width=C,T.height=R,I.texImage2D(A.target,0,T.internalFormat,A.format,T.type,B)),!0}update(){if(this.destroyed)return;const _=this.source,A=_.naturalWidth||_.videoWidth||_.width,T=_.naturalHeight||_.videoHeight||_.height;this.resize(A,T),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(_,A){if(A=A||{},typeof _=="string"){const T=new Image;BaseImageResource.crossOrigin(T,_,A.crossorigin),T.src=_,_=T}super(_),!_.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=_.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(A.createBitmap??settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof A.alphaMode=="number"?A.alphaMode:null,this.bitmap=null,this._load=null,A.autoLoad!==!1&&this.load()}load(_){return this._load?this._load:(_!==void 0&&(this.createBitmap=_),this._load=new Promise((A,T)=>{const B=this.source;this.url=B.src;const I=()=>{this.destroyed||(B.onload=null,B.onerror=null,this.update(),this._load=null,this.createBitmap?A(this.process()):A(this))};B.complete&&B.src?I():(B.onload=I,B.onerror=C=>{T(C),this.onError.emit(C)})}),this._load)}process(){const _=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const A=globalThis.createImageBitmap,T=!_.crossOrigin||_.crossOrigin==="anonymous";return this._process=fetch(_.src,{mode:T?"cors":"no-cors"}).then(B=>B.blob()).then(B=>A(B,0,0,_.width,_.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(B=>this.destroyed?Promise.reject():(this.bitmap=B,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(_,A,T){if(typeof this.alphaMode=="number"&&(A.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(_,A,T);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(_,A,T,this.bitmap),!this.preserveBitmap){let B=!0;const I=A._glTextures;for(const C in I){const R=I[C];if(R!==T&&R.dirtyId!==A.dirtyId){B=!1;break}}B&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(_){return typeof HTMLImageElement<"u"&&(typeof _=="string"||_ instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(_,A,T){const B=A.width,I=A.height;if(T){const C=_.width/2/B,R=_.height/2/I,L=_.x/B+C,D=_.y/I+R;T=groupD8.add(T,groupD8.NW),this.x0=L+C*groupD8.uX(T),this.y0=D+R*groupD8.uY(T),T=groupD8.add(T,2),this.x1=L+C*groupD8.uX(T),this.y1=D+R*groupD8.uY(T),T=groupD8.add(T,2),this.x2=L+C*groupD8.uX(T),this.y2=D+R*groupD8.uY(T),T=groupD8.add(T,2),this.x3=L+C*groupD8.uX(T),this.y3=D+R*groupD8.uY(T)}else this.x0=_.x/B,this.y0=_.y/I,this.x1=(_.x+_.width)/B,this.y1=_.y/I,this.x2=(_.x+_.width)/B,this.y2=(_.y+_.height)/I,this.x3=_.x/B,this.y3=(_.y+_.height)/I;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(E){E.destroy=function(){},E.on=function(){},E.once=function(){},E.emit=function(){}}class Texture extends EventEmitter{constructor(_,A,T,B,I,C,R){if(super(),this.noFrame=!1,A||(this.noFrame=!0,A=new Rectangle(0,0,1,1)),_ instanceof Texture&&(_=_.baseTexture),this.baseTexture=_,this._frame=A,this.trim=B,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=T||A,this._rotate=Number(I||0),I===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=C?new Point(C.x,C.y):new Point(0,0),this.defaultBorders=R,this._updateID=0,this.textureCacheIds=[],_.valid?this.noFrame?_.valid&&this.onBaseTextureUpdated(_):this.frame=A:_.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&_.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(_){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=_.width,this._frame.height=_.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(_){if(this.baseTexture){if(_){const{resource:A}=this.baseTexture;A!=null&&A.url&&TextureCache[A.url]&&Texture.removeFromCache(A.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var B;const _=this._frame.clone(),A=this._frame===this.orig?_:this.orig.clone(),T=new Texture(this.baseTexture,!this.noFrame&&_,A,(B=this.trim)==null?void 0:B.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(T._frame=_),T}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(_,A={},T=settings.STRICT_TEXTURE_CACHE){const B=typeof _=="string";let I=null;if(B)I=_;else if(_ instanceof BaseTexture){if(!_.cacheId){const R=(A==null?void 0:A.pixiIdPrefix)||"pixiid";_.cacheId=`${R}-${uid()}`,BaseTexture.addToCache(_,_.cacheId)}I=_.cacheId}else{if(!_._pixiId){const R=(A==null?void 0:A.pixiIdPrefix)||"pixiid";_._pixiId=`${R}_${uid()}`}I=_._pixiId}let C=TextureCache[I];if(B&&T&&!C)throw new Error(`The cacheId "${I}" does not exist in TextureCache.`);return!C&&!(_ instanceof BaseTexture)?(A.resolution||(A.resolution=getResolutionOfUrl(_)),C=new Texture(new BaseTexture(_,A)),C.baseTexture.cacheId=I,BaseTexture.addToCache(C.baseTexture,I),Texture.addToCache(C,I)):!C&&_ instanceof BaseTexture&&(C=new Texture(_),Texture.addToCache(C,I)),C}static fromURL(_,A){const T=Object.assign({autoLoad:!1},A==null?void 0:A.resourceOptions),B=Texture.from(_,Object.assign({resourceOptions:T},A),!1),I=B.baseTexture.resource;return B.baseTexture.valid?Promise.resolve(B):I.load().then(()=>Promise.resolve(B))}static fromBuffer(_,A,T,B){return new Texture(BaseTexture.fromBuffer(_,A,T,B))}static fromLoader(_,A,T,B){const I=new BaseTexture(_,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(A)},B)),{resource:C}=I;C instanceof ImageResource&&(C.url=A);const R=new Texture(I);return T||(T=A),BaseTexture.addToCache(R.baseTexture,T),Texture.addToCache(R,T),T!==A&&(BaseTexture.addToCache(R.baseTexture,A),Texture.addToCache(R,A)),R.baseTexture.valid?Promise.resolve(R):new Promise(L=>{R.baseTexture.once("loaded",()=>L(R))})}static addToCache(_,A){A&&(_.textureCacheIds.includes(A)||_.textureCacheIds.push(A),TextureCache[A]&&TextureCache[A]!==_&&console.warn(`Texture added to the cache with an id [${A}] that already had an entry`),TextureCache[A]=_)}static removeFromCache(_){if(typeof _=="string"){const A=TextureCache[_];if(A){const T=A.textureCacheIds.indexOf(_);return T>-1&&A.textureCacheIds.splice(T,1),delete TextureCache[_],A}}else if(_!=null&&_.textureCacheIds){for(let A=0;A<_.textureCacheIds.length;++A)TextureCache[_.textureCacheIds[A]]===_&&delete TextureCache[_.textureCacheIds[A]];return _.textureCacheIds.length=0,_}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(_){this._frame=_,this.noFrame=!1;const{x:A,y:T,width:B,height:I}=_,C=A+B>this.baseTexture.width,R=T+I>this.baseTexture.height;if(C||R){const L=C&&R?"and":"or",D=`X: ${A} + ${B} = ${A+B} > ${this.baseTexture.width}`,V=`Y: ${T} + ${I} = ${T+I} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${D} ${L} ${V}`)}this.valid=B&&I&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=_),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(_){this._rotate=_,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const _=settings.ADAPTER.createCanvas(16,16),A=_.getContext("2d");_.width=16,_.height=16,A.fillStyle="white",A.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(_)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(_,A){super(_,A),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,A,T=!0){const B=this.baseTexture.resolution,I=Math.round(_*B)/B,C=Math.round(A*B)/B;this.valid=I>0&&C>0,this._frame.width=this.orig.width=I,this._frame.height=this.orig.height=C,T&&this.baseTexture.resize(I,C),this.updateUvs()}setResolution(_){const{baseTexture:A}=this;A.resolution!==_&&(A.setResolution(_),this.resize(A.width,A.height,!1))}static create(_){return new RenderTexture(new BaseRenderTexture(_))}}class RenderTexturePool{constructor(_){this.texturePool={},this.textureOptions=_||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(_,A,T=MSAA_QUALITY.NONE){const B=new BaseRenderTexture(Object.assign({width:_,height:A,resolution:1,multisample:T},this.textureOptions));return new RenderTexture(B)}getOptimalTexture(_,A,T=1,B=MSAA_QUALITY.NONE){let I;_=Math.max(Math.ceil(_*T-1e-6),1),A=Math.max(Math.ceil(A*T-1e-6),1),!this.enableFullScreen||_!==this._pixelsWidth||A!==this._pixelsHeight?(_=nextPow2(_),A=nextPow2(A),I=((_&65535)<<16|A&65535)>>>0,B>1&&(I+=B*4294967296)):I=B>1?-B:-1,this.texturePool[I]||(this.texturePool[I]=[]);let C=this.texturePool[I].pop();return C||(C=this.createTexture(_,A,B)),C.filterPoolKey=I,C.setResolution(T),C}getFilterTexture(_,A,T){const B=this.getOptimalTexture(_.width,_.height,A||_.resolution,T||MSAA_QUALITY.NONE);return B.filterFrame=_.filterFrame,B}returnTexture(_){const A=_.filterPoolKey;_.filterFrame=null,this.texturePool[A].push(_)}returnFilterTexture(_){this.returnTexture(_)}clear(_){if(_=_!==!1,_)for(const A in this.texturePool){const T=this.texturePool[A];if(T)for(let B=0;B<T.length;B++)T[B].destroy(!0)}this.texturePool={}}setScreenSize(_){if(!(_.width===this._pixelsWidth&&_.height===this._pixelsHeight)){this.enableFullScreen=_.width>0&&_.height>0;for(const A in this.texturePool){if(!(Number(A)<0))continue;const T=this.texturePool[A];if(T)for(let B=0;B<T.length;B++)T[B].destroy(!0);this.texturePool[A]=[]}this._pixelsWidth=_.width,this._pixelsHeight=_.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(_,A){let T=0,B=0;return this.uvs[0]=T,this.uvs[1]=B,this.uvs[2]=T+A.width/_.width,this.uvs[3]=B,this.uvs[4]=T+A.width/_.width,this.uvs[5]=B+A.height/_.height,this.uvs[6]=T,this.uvs[7]=B+A.height/_.height,T=A.x,B=A.y,this.vertices[0]=T,this.vertices[1]=B,this.vertices[2]=T+A.width,this.vertices[3]=B,this.vertices[4]=T+A.width,this.vertices[5]=B+A.height,this.vertices[6]=T,this.vertices[7]=B+A.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix;class FilterSystem{constructor(_){this.renderer=_,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(_,A){const T=this.renderer,B=this.defaultFilterStack,I=this.statePool.pop()||new FilterState,C=T.renderTexture;let R,L;if(C.current){const J=C.current;R=J.resolution,L=J.multisample}else R=T.resolution,L=T.multisample;let D=A[0].resolution||R,V=A[0].multisample??L,U=A[0].padding,z=A[0].autoFit,W=A[0].legacy??!0;for(let J=1;J<A.length;J++){const et=A[J];D=Math.min(D,et.resolution||R),V=Math.min(V,et.multisample??L),U=this.useMaxPadding?Math.max(U,et.padding):U+et.padding,z=z&&et.autoFit,W=W||(et.legacy??!0)}B.length===1&&(this.defaultFilterStack[0].renderTexture=C.current),B.push(I),I.resolution=D,I.multisample=V,I.legacy=W,I.target=_,I.sourceFrame.copyFrom(_.filterArea||_.getBounds(!0)),I.sourceFrame.pad(U);const Y=this.tempRect.copyFrom(C.sourceFrame);T.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(T.projection.transform).invert(),Y),z?(I.sourceFrame.fit(Y),(I.sourceFrame.width<=0||I.sourceFrame.height<=0)&&(I.sourceFrame.width=0,I.sourceFrame.height=0)):I.sourceFrame.intersects(Y)||(I.sourceFrame.width=0,I.sourceFrame.height=0),this.roundFrame(I.sourceFrame,C.current?C.current.resolution:T.resolution,C.sourceFrame,C.destinationFrame,T.projection.transform),I.renderTexture=this.getOptimalFilterTexture(I.sourceFrame.width,I.sourceFrame.height,D,V),I.filters=A,I.destinationFrame.width=I.renderTexture.width,I.destinationFrame.height=I.renderTexture.height;const K=this.tempRect;K.x=0,K.y=0,K.width=I.sourceFrame.width,K.height=I.sourceFrame.height,I.renderTexture.filterFrame=I.sourceFrame,I.bindingSourceFrame.copyFrom(C.sourceFrame),I.bindingDestinationFrame.copyFrom(C.destinationFrame),I.transform=T.projection.transform,T.projection.transform=null,C.bind(I.renderTexture,I.sourceFrame,K),T.framebuffer.clear(0,0,0,0)}pop(){const _=this.defaultFilterStack,A=_.pop(),T=A.filters;this.activeState=A;const B=this.globalUniforms.uniforms;B.outputFrame=A.sourceFrame,B.resolution=A.resolution;const I=B.inputSize,C=B.inputPixel,R=B.inputClamp;if(I[0]=A.destinationFrame.width,I[1]=A.destinationFrame.height,I[2]=1/I[0],I[3]=1/I[1],C[0]=Math.round(I[0]*A.resolution),C[1]=Math.round(I[1]*A.resolution),C[2]=1/C[0],C[3]=1/C[1],R[0]=.5*C[2],R[1]=.5*C[3],R[2]=A.sourceFrame.width*I[2]-.5*C[2],R[3]=A.sourceFrame.height*I[3]-.5*C[3],A.legacy){const D=B.filterArea;D[0]=A.destinationFrame.width,D[1]=A.destinationFrame.height,D[2]=A.sourceFrame.x,D[3]=A.sourceFrame.y,B.filterClamp=B.inputClamp}this.globalUniforms.update();const L=_[_.length-1];if(this.renderer.framebuffer.blit(),T.length===1)T[0].apply(this,A.renderTexture,L.renderTexture,CLEAR_MODES.BLEND,A),this.returnFilterTexture(A.renderTexture);else{let D=A.renderTexture,V=this.getOptimalFilterTexture(D.width,D.height,A.resolution);V.filterFrame=D.filterFrame;let U=0;for(U=0;U<T.length-1;++U){U===1&&A.multisample>1&&(V=this.getOptimalFilterTexture(D.width,D.height,A.resolution),V.filterFrame=D.filterFrame),T[U].apply(this,D,V,CLEAR_MODES.CLEAR,A);const z=D;D=V,V=z}T[U].apply(this,D,L.renderTexture,CLEAR_MODES.BLEND,A),U>1&&A.multisample>1&&this.returnFilterTexture(A.renderTexture),this.returnFilterTexture(D),this.returnFilterTexture(V)}A.clear(),this.statePool.push(A)}bindAndClear(_,A=CLEAR_MODES.CLEAR){const{renderTexture:T,state:B}=this.renderer;if(_===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,_==null?void 0:_.filterFrame){const C=this.tempRect;C.x=0,C.y=0,C.width=_.filterFrame.width,C.height=_.filterFrame.height,T.bind(_,_.filterFrame,C)}else _!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?T.bind(_):this.renderer.renderTexture.bind(_,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const I=B.stateId&1||this.forceClear;(A===CLEAR_MODES.CLEAR||A===CLEAR_MODES.BLIT&&I)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(_,A,T,B){const I=this.renderer;I.state.set(_.state),this.bindAndClear(T,B),_.uniforms.uSampler=A,_.uniforms.filterGlobals=this.globalUniforms,I.shader.bind(_),_.legacy=!!_.program.attributeData.aTextureCoord,_.legacy?(this.quadUv.map(A._frame,A.filterFrame),I.geometry.bind(this.quadUv),I.geometry.draw(DRAW_MODES.TRIANGLES)):(I.geometry.bind(this.quad),I.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(_,A){const{sourceFrame:T,destinationFrame:B}=this.activeState,{orig:I}=A._texture,C=_.set(B.width,0,0,B.height,T.x,T.y),R=A.worldTransform.copyTo(Matrix.TEMP_MATRIX);return R.invert(),C.prepend(R),C.scale(1/I.width,1/I.height),C.translate(A.anchor.x,A.anchor.y),C}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(_,A,T=1,B=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(_,A,T,B)}getFilterTexture(_,A,T){if(typeof _=="number"){const I=_;_=A,A=I}_=_||this.activeState.renderTexture;const B=this.texturePool.getOptimalTexture(_.width,_.height,A||_.resolution,T||MSAA_QUALITY.NONE);return B.filterFrame=_.filterFrame,B}returnFilterTexture(_){this.texturePool.returnTexture(_)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(_,A){const T=tempPoints[0],B=tempPoints[1],I=tempPoints[2],C=tempPoints[3];T.set(A.left,A.top),B.set(A.left,A.bottom),I.set(A.right,A.top),C.set(A.right,A.bottom),_.apply(T,T),_.apply(B,B),_.apply(I,I),_.apply(C,C);const R=Math.min(T.x,B.x,I.x,C.x),L=Math.min(T.y,B.y,I.y,C.y),D=Math.max(T.x,B.x,I.x,C.x),V=Math.max(T.y,B.y,I.y,C.y);A.x=R,A.y=L,A.width=D-R,A.height=V-L}roundFrame(_,A,T,B,I){if(!(_.width<=0||_.height<=0||T.width<=0||T.height<=0)){if(I){const{a:C,b:R,c:L,d:D}=I;if((Math.abs(R)>1e-4||Math.abs(L)>1e-4)&&(Math.abs(C)>1e-4||Math.abs(D)>1e-4))return}I=I?tempMatrix$2.copyFrom(I):tempMatrix$2.identity(),I.translate(-T.x,-T.y).scale(B.width/T.width,B.height/T.height).translate(B.x,B.y),this.transformAABB(I,_),_.ceil(A),this.transformAABB(I.invert(),_)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$1.add(FilterSystem);class GLFramebuffer{constructor(_){this.framebuffer=_,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(_){this.renderer=_,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let A=this.renderer.context.extensions.drawBuffers,T=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(A=null,T=null),A?_.drawBuffers=B=>A.drawBuffersWEBGL(B):(this.hasMRT=!1,_.drawBuffers=()=>{}),T||(this.writeDepthTexture=!1)}else this.msaaSamples=_.getInternalformatParameter(_.RENDERBUFFER,_.RGBA8,_.SAMPLES)}bind(_,A,T=0){const{gl:B}=this;if(_){const I=_.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(_);this.current!==_&&(this.current=_,B.bindFramebuffer(B.FRAMEBUFFER,I.framebuffer)),I.mipLevel!==T&&(_.dirtyId++,_.dirtyFormat++,I.mipLevel=T),I.dirtyId!==_.dirtyId&&(I.dirtyId=_.dirtyId,I.dirtyFormat!==_.dirtyFormat?(I.dirtyFormat=_.dirtyFormat,I.dirtySize=_.dirtySize,this.updateFramebuffer(_,T)):I.dirtySize!==_.dirtySize&&(I.dirtySize=_.dirtySize,this.resizeFramebuffer(_)));for(let C=0;C<_.colorTextures.length;C++){const R=_.colorTextures[C];this.renderer.texture.unbind(R.parentTextureArray||R)}if(_.depthTexture&&this.renderer.texture.unbind(_.depthTexture),A){const C=A.width>>T,R=A.height>>T,L=C/A.width;this.setViewport(A.x*L,A.y*L,C,R)}else{const C=_.width>>T,R=_.height>>T;this.setViewport(0,0,C,R)}}else this.current&&(this.current=null,B.bindFramebuffer(B.FRAMEBUFFER,null)),A?this.setViewport(A.x,A.y,A.width,A.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(_,A,T,B){const I=this.viewport;_=Math.round(_),A=Math.round(A),T=Math.round(T),B=Math.round(B),(I.width!==T||I.height!==B||I.x!==_||I.y!==A)&&(I.x=_,I.y=A,I.width=T,I.height=B,this.gl.viewport(_,A,T,B))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(_,A,T,B,I=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:C}=this;C.clearColor(_,A,T,B),C.clear(I)}initFramebuffer(_){const{gl:A}=this,T=new GLFramebuffer(A.createFramebuffer());return T.multisample=this.detectSamples(_.multisample),_.glFramebuffers[this.CONTEXT_UID]=T,this.managedFramebuffers.push(_),_.disposeRunner.add(this),T}resizeFramebuffer(_){const{gl:A}=this,T=_.glFramebuffers[this.CONTEXT_UID];if(T.stencil){A.bindRenderbuffer(A.RENDERBUFFER,T.stencil);let C;this.renderer.context.webGLVersion===1?C=A.DEPTH_STENCIL:_.depth&&_.stencil?C=A.DEPTH24_STENCIL8:_.depth?C=A.DEPTH_COMPONENT24:C=A.STENCIL_INDEX8,T.msaaBuffer?A.renderbufferStorageMultisample(A.RENDERBUFFER,T.multisample,C,_.width,_.height):A.renderbufferStorage(A.RENDERBUFFER,C,_.width,_.height)}const B=_.colorTextures;let I=B.length;A.drawBuffers||(I=Math.min(I,1));for(let C=0;C<I;C++){const R=B[C],L=R.parentTextureArray||R;this.renderer.texture.bind(L,0),C===0&&T.msaaBuffer&&(A.bindRenderbuffer(A.RENDERBUFFER,T.msaaBuffer),A.renderbufferStorageMultisample(A.RENDERBUFFER,T.multisample,L._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height))}_.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(_.depthTexture,0)}updateFramebuffer(_,A){const{gl:T}=this,B=_.glFramebuffers[this.CONTEXT_UID],I=_.colorTextures;let C=I.length;T.drawBuffers||(C=Math.min(C,1)),B.multisample>1&&this.canMultisampleFramebuffer(_)?B.msaaBuffer=B.msaaBuffer||T.createRenderbuffer():B.msaaBuffer&&(T.deleteRenderbuffer(B.msaaBuffer),B.msaaBuffer=null,B.blitFramebuffer&&(B.blitFramebuffer.dispose(),B.blitFramebuffer=null));const R=[];for(let L=0;L<C;L++){const D=I[L],V=D.parentTextureArray||D;this.renderer.texture.bind(V,0),L===0&&B.msaaBuffer?(T.bindRenderbuffer(T.RENDERBUFFER,B.msaaBuffer),T.renderbufferStorageMultisample(T.RENDERBUFFER,B.multisample,V._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height),T.framebufferRenderbuffer(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.RENDERBUFFER,B.msaaBuffer)):(T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0+L,D.target,V._glTextures[this.CONTEXT_UID].texture,A),R.push(T.COLOR_ATTACHMENT0+L))}if(R.length>1&&T.drawBuffers(R),_.depthTexture&&this.writeDepthTexture){const L=_.depthTexture;this.renderer.texture.bind(L,0),T.framebufferTexture2D(T.FRAMEBUFFER,T.DEPTH_ATTACHMENT,T.TEXTURE_2D,L._glTextures[this.CONTEXT_UID].texture,A)}if((_.stencil||_.depth)&&!(_.depthTexture&&this.writeDepthTexture)){B.stencil=B.stencil||T.createRenderbuffer();let L,D;this.renderer.context.webGLVersion===1?(L=T.DEPTH_STENCIL_ATTACHMENT,D=T.DEPTH_STENCIL):_.depth&&_.stencil?(L=T.DEPTH_STENCIL_ATTACHMENT,D=T.DEPTH24_STENCIL8):_.depth?(L=T.DEPTH_ATTACHMENT,D=T.DEPTH_COMPONENT24):(L=T.STENCIL_ATTACHMENT,D=T.STENCIL_INDEX8),T.bindRenderbuffer(T.RENDERBUFFER,B.stencil),B.msaaBuffer?T.renderbufferStorageMultisample(T.RENDERBUFFER,B.multisample,D,_.width,_.height):T.renderbufferStorage(T.RENDERBUFFER,D,_.width,_.height),T.framebufferRenderbuffer(T.FRAMEBUFFER,L,T.RENDERBUFFER,B.stencil)}else B.stencil&&(T.deleteRenderbuffer(B.stencil),B.stencil=null)}canMultisampleFramebuffer(_){return this.renderer.context.webGLVersion!==1&&_.colorTextures.length<=1&&!_.depthTexture}detectSamples(_){const{msaaSamples:A}=this;let T=MSAA_QUALITY.NONE;if(_<=1||A===null)return T;for(let B=0;B<A.length;B++)if(A[B]<=_){T=A[B];break}return T===1&&(T=MSAA_QUALITY.NONE),T}blit(_,A,T){const{current:B,renderer:I,gl:C,CONTEXT_UID:R}=this;if(I.context.webGLVersion!==2||!B)return;const L=B.glFramebuffers[R];if(!L)return;if(!_){if(!L.msaaBuffer)return;const V=B.colorTextures[0];if(!V)return;L.blitFramebuffer||(L.blitFramebuffer=new Framebuffer(B.width,B.height),L.blitFramebuffer.addColorTexture(0,V)),_=L.blitFramebuffer,_.colorTextures[0]!==V&&(_.colorTextures[0]=V,_.dirtyId++,_.dirtyFormat++),(_.width!==B.width||_.height!==B.height)&&(_.width=B.width,_.height=B.height,_.dirtyId++,_.dirtySize++)}A||(A=tempRectangle,A.width=B.width,A.height=B.height),T||(T=A);const D=A.width===T.width&&A.height===T.height;this.bind(_),C.bindFramebuffer(C.READ_FRAMEBUFFER,L.framebuffer),C.blitFramebuffer(A.left,A.top,A.right,A.bottom,T.left,T.top,T.right,T.bottom,C.COLOR_BUFFER_BIT,D?C.NEAREST:C.LINEAR),C.bindFramebuffer(C.READ_FRAMEBUFFER,_.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(_,A){const T=_.glFramebuffers[this.CONTEXT_UID],B=this.gl;if(!T)return;delete _.glFramebuffers[this.CONTEXT_UID];const I=this.managedFramebuffers.indexOf(_);I>=0&&this.managedFramebuffers.splice(I,1),_.disposeRunner.remove(this),A||(B.deleteFramebuffer(T.framebuffer),T.msaaBuffer&&B.deleteRenderbuffer(T.msaaBuffer),T.stencil&&B.deleteRenderbuffer(T.stencil)),T.blitFramebuffer&&this.disposeFramebuffer(T.blitFramebuffer,A)}disposeAll(_){const A=this.managedFramebuffers;this.managedFramebuffers=[];for(let T=0;T<A.length;T++)this.disposeFramebuffer(A[T],_)}forceStencil(){const _=this.current;if(!_)return;const A=_.glFramebuffers[this.CONTEXT_UID];if(!A||A.stencil&&_.stencil)return;_.stencil=!0;const T=_.width,B=_.height,I=this.gl,C=A.stencil=I.createRenderbuffer();I.bindRenderbuffer(I.RENDERBUFFER,C);let R,L;this.renderer.context.webGLVersion===1?(R=I.DEPTH_STENCIL_ATTACHMENT,L=I.DEPTH_STENCIL):_.depth?(R=I.DEPTH_STENCIL_ATTACHMENT,L=I.DEPTH24_STENCIL8):(R=I.STENCIL_ATTACHMENT,L=I.STENCIL_INDEX8),A.msaaBuffer?I.renderbufferStorageMultisample(I.RENDERBUFFER,A.multisample,L,T,B):I.renderbufferStorage(I.RENDERBUFFER,L,T,B),I.framebufferRenderbuffer(I.FRAMEBUFFER,R,I.RENDERBUFFER,C)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(_){this.renderer=_,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl,A=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,A.webGLVersion!==2){let T=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(T=null),T?(_.createVertexArray=()=>T.createVertexArrayOES(),_.bindVertexArray=B=>T.bindVertexArrayOES(B),_.deleteVertexArray=B=>T.deleteVertexArrayOES(B)):(this.hasVao=!1,_.createVertexArray=()=>null,_.bindVertexArray=()=>null,_.deleteVertexArray=()=>null)}if(A.webGLVersion!==2){const T=_.getExtension("ANGLE_instanced_arrays");T?(_.vertexAttribDivisor=(B,I)=>T.vertexAttribDivisorANGLE(B,I),_.drawElementsInstanced=(B,I,C,R,L)=>T.drawElementsInstancedANGLE(B,I,C,R,L),_.drawArraysInstanced=(B,I,C,R)=>T.drawArraysInstancedANGLE(B,I,C,R)):this.hasInstance=!1}this.canUseUInt32ElementIndex=A.webGLVersion===2||!!A.extensions.uint32ElementIndex}bind(_,A){A=A||this.renderer.shader.shader;const{gl:T}=this;let B=_.glVertexArrayObjects[this.CONTEXT_UID],I=!1;B||(this.managedGeometries[_.id]=_,_.disposeRunner.add(this),_.glVertexArrayObjects[this.CONTEXT_UID]=B={},I=!0);const C=B[A.program.id]||this.initGeometryVao(_,A,I);this._activeGeometry=_,this._activeVao!==C&&(this._activeVao=C,this.hasVao?T.bindVertexArray(C):this.activateVao(_,A.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const _=this._activeGeometry,A=this.renderer.buffer;for(let T=0;T<_.buffers.length;T++){const B=_.buffers[T];A.update(B)}}checkCompatibility(_,A){const T=_.attributes,B=A.attributeData;for(const I in B)if(!T[I])throw new Error(`shader and geometry incompatible, geometry missing the "${I}" attribute`)}getSignature(_,A){const T=_.attributes,B=A.attributeData,I=["g",_.id];for(const C in T)B[C]&&I.push(C,B[C].location);return I.join("-")}initGeometryVao(_,A,T=!0){const B=this.gl,I=this.CONTEXT_UID,C=this.renderer.buffer,R=A.program;R.glPrograms[I]||this.renderer.shader.generateProgram(A),this.checkCompatibility(_,R);const L=this.getSignature(_,R),D=_.glVertexArrayObjects[this.CONTEXT_UID];let V=D[L];if(V)return D[R.id]=V,V;const U=_.buffers,z=_.attributes,W={},Y={};for(const K in U)W[K]=0,Y[K]=0;for(const K in z)!z[K].size&&R.attributeData[K]?z[K].size=R.attributeData[K].size:z[K].size||console.warn(`PIXI Geometry attribute '${K}' size cannot be determined (likely the bound shader does not have the attribute)`),W[z[K].buffer]+=z[K].size*byteSizeMap[z[K].type];for(const K in z){const J=z[K],et=J.size;J.stride===void 0&&(W[J.buffer]===et*byteSizeMap[J.type]?J.stride=0:J.stride=W[J.buffer]),J.start===void 0&&(J.start=Y[J.buffer],Y[J.buffer]+=et*byteSizeMap[J.type])}V=B.createVertexArray(),B.bindVertexArray(V);for(let K=0;K<U.length;K++){const J=U[K];C.bind(J),T&&J._glBuffers[I].refCount++}return this.activateVao(_,R),D[R.id]=V,D[L]=V,B.bindVertexArray(null),C.unbind(BUFFER_TYPE.ARRAY_BUFFER),V}disposeGeometry(_,A){var R;if(!this.managedGeometries[_.id])return;delete this.managedGeometries[_.id];const T=_.glVertexArrayObjects[this.CONTEXT_UID],B=this.gl,I=_.buffers,C=(R=this.renderer)==null?void 0:R.buffer;if(_.disposeRunner.remove(this),!!T){if(C)for(let L=0;L<I.length;L++){const D=I[L]._glBuffers[this.CONTEXT_UID];D&&(D.refCount--,D.refCount===0&&!A&&C.dispose(I[L],A))}if(!A){for(const L in T)if(L[0]==="g"){const D=T[L];this._activeVao===D&&this.unbind(),B.deleteVertexArray(D)}}delete _.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(_){const A=Object.keys(this.managedGeometries);for(let T=0;T<A.length;T++)this.disposeGeometry(this.managedGeometries[A[T]],_)}activateVao(_,A){const T=this.gl,B=this.CONTEXT_UID,I=this.renderer.buffer,C=_.buffers,R=_.attributes;_.indexBuffer&&I.bind(_.indexBuffer);let L=null;for(const D in R){const V=R[D],U=C[V.buffer],z=U._glBuffers[B];if(A.attributeData[D]){L!==z&&(I.bind(U),L=z);const W=A.attributeData[D].location;if(T.enableVertexAttribArray(W),T.vertexAttribPointer(W,V.size,V.type||T.FLOAT,V.normalized,V.stride,V.start),V.instance)if(this.hasInstance)T.vertexAttribDivisor(W,V.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(_,A,T,B){const{gl:I}=this,C=this._activeGeometry;if(C.indexBuffer){const R=C.indexBuffer.data.BYTES_PER_ELEMENT,L=R===2?I.UNSIGNED_SHORT:I.UNSIGNED_INT;R===2||R===4&&this.canUseUInt32ElementIndex?C.instanced?I.drawElementsInstanced(_,A||C.indexBuffer.data.length,L,(T||0)*R,B||1):I.drawElements(_,A||C.indexBuffer.data.length,L,(T||0)*R):console.warn("unsupported index buffer type: uint32")}else C.instanced?I.drawArraysInstanced(_,T,A||C.getSize(),B||1):I.drawArrays(_,T,A||C.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$1.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(_,A){this._texture=_,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof A>"u"?.5:A,this.isSimple=!1}get texture(){return this._texture}set texture(_){this._texture=_,this._textureID=-1}multiplyUvs(_,A){A===void 0&&(A=_);const T=this.mapCoord;for(let B=0;B<_.length;B+=2){const I=_[B],C=_[B+1];A[B]=I*T.a+C*T.c+T.tx,A[B+1]=I*T.b+C*T.d+T.ty}return A}update(_){const A=this._texture;if(!A||!A.valid||!_&&this._textureID===A._updateID)return!1;this._textureID=A._updateID,this._updateID++;const T=A._uvs;this.mapCoord.set(T.x1-T.x0,T.y1-T.y0,T.x3-T.x0,T.y3-T.y0,T.x0,T.y0);const B=A.orig,I=A.trim;I&&(tempMat$1.set(B.width/I.width,0,0,B.height/I.height,-I.x/I.width,-I.y/I.height),this.mapCoord.append(tempMat$1));const C=A.baseTexture,R=this.uClampFrame,L=this.clampMargin/C.resolution,D=this.clampOffset;return R[0]=(A._frame.x+L+D)/C.width,R[1]=(A._frame.y+L+D)/C.height,R[2]=(A._frame.x+A._frame.width-L+D)/C.width,R[3]=(A._frame.y+A._frame.height-L+D)/C.height,this.uClampOffset[0]=D/C.realWidth,this.uClampOffset[1]=D/C.realHeight,this.isSimple=A._frame.width===C.width&&A._frame.height===C.height&&A.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter{constructor(_,A,T){let B=null;typeof _!="string"&&A===void 0&&T===void 0&&(B=_,_=void 0,A=void 0,T=void 0),super(_||vertex$4,A||fragment$7,T),this.maskSprite=B,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(_){this._maskSprite=_,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(_,A,T,B){const I=this._maskSprite,C=I._texture;C.valid&&(C.uvMatrix||(C.uvMatrix=new TextureMatrix(C,0)),C.uvMatrix.update(),this.uniforms.npmAlpha=C.baseTexture.alphaMode?0:1,this.uniforms.mask=C,this.uniforms.otherMatrix=_.calculateSpriteMatrix(this.maskMatrix,I).prepend(C.uvMatrix.mapCoord),this.uniforms.alpha=I.worldAlpha,this.uniforms.maskClamp=C.uvMatrix.uClampFrame,_.applyFilter(this,A,T,B))}}class MaskData{constructor(_=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=_||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(_){_?this._filters?this._filters[0]=_:this._filters=[_]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(_){_?(this._stencilCounter=_._stencilCounter,this._scissorCounter=_._scissorCounter,this._scissorRect=_._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(_){this.renderer=_,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(_){this.maskStack=_,this.renderer.scissor.setMaskStack(_),this.renderer.stencil.setMaskStack(_)}push(_,A){let T=A;if(!T.isMaskData){const I=this.maskDataPool.pop()||new MaskData;I.pooled=!0,I.maskObject=A,T=I}const B=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(T.copyCountersOrReset(B),T._colorMask=B?B._colorMask:15,T.autoDetect&&this.detect(T),T._target=_,T.type!==MASK_TYPES.SPRITE&&this.maskStack.push(T),T.enabled)switch(T.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(T);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(T);break;case MASK_TYPES.SPRITE:T.copyCountersOrReset(null),this.pushSpriteMask(T);break;case MASK_TYPES.COLOR:this.pushColorMask(T);break}T.type===MASK_TYPES.SPRITE&&this.maskStack.push(T)}pop(_){const A=this.maskStack.pop();if(!(!A||A._target!==_)){if(A.enabled)switch(A.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(A);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(A.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(A);break;case MASK_TYPES.COLOR:this.popColorMask(A);break}if(A.reset(),A.pooled&&this.maskDataPool.push(A),this.maskStack.length!==0){const T=this.maskStack[this.maskStack.length-1];T.type===MASK_TYPES.SPRITE&&T._filters&&(T._filters[0].maskSprite=T.maskObject)}}}detect(_){const A=_.maskObject;A?A.isSprite?_.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(_)?_.type=MASK_TYPES.SCISSOR:_.type=MASK_TYPES.STENCIL:_.type=MASK_TYPES.COLOR}pushSpriteMask(_){const{maskObject:A}=_,T=_._target;let B=_._filters;B||(B=this.alphaMaskPool[this.alphaMaskIndex],B||(B=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),B[0].resolution=_.resolution,B[0].multisample=_.multisample,B[0].maskSprite=A;const I=T.filterArea;T.filterArea=A.getBounds(!0),this.renderer.filter.push(T,B),T.filterArea=I,_._filters||this.alphaMaskIndex++}popSpriteMask(_){this.renderer.filter.pop(),_._filters?_._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(_){const A=_._colorMask,T=_._colorMask=A&_.colorMask;T!==A&&this.renderer.gl.colorMask((T&1)!==0,(T&2)!==0,(T&4)!==0,(T&8)!==0)}popColorMask(_){const A=_._colorMask,T=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;T!==A&&this.renderer.gl.colorMask((T&1)!==0,(T&2)!==0,(T&4)!==0,(T&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(_){this.renderer=_,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(_){const{gl:A}=this.renderer,T=this.getStackLength();this.maskStack=_;const B=this.getStackLength();B!==T&&(B===0?A.disable(this.glConst):(A.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$1=new Matrix,rectPool=[],_ScissorSystem=class tn extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._scissorCounter:0}calcScissorRect(_){if(_._scissorRectLocal)return;const A=_._scissorRect,{maskObject:T}=_,{renderer:B}=this,I=B.renderTexture,C=T.getBounds(!0,rectPool.pop()??new Rectangle);this.roundFrameToPixels(C,I.current?I.current.resolution:B.resolution,I.sourceFrame,I.destinationFrame,B.projection.transform),A&&C.fit(A),_._scissorRectLocal=C}static isMatrixRotated(_){if(!_)return!1;const{a:A,b:T,c:B,d:I}=_;return(Math.abs(T)>1e-4||Math.abs(B)>1e-4)&&(Math.abs(A)>1e-4||Math.abs(I)>1e-4)}testScissor(_){const{maskObject:A}=_;if(!A.isFastRect||!A.isFastRect()||tn.isMatrixRotated(A.worldTransform)||tn.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(_);const T=_._scissorRectLocal;return T.width>0&&T.height>0}roundFrameToPixels(_,A,T,B,I){tn.isMatrixRotated(I)||(I=I?tempMatrix$1.copyFrom(I):tempMatrix$1.identity(),I.translate(-T.x,-T.y).scale(B.width/T.width,B.height/T.height).translate(B.x,B.y),this.renderer.filter.transformAABB(I,_),_.fit(B),_.x=Math.round(_.x*A),_.y=Math.round(_.y*A),_.width=Math.round(_.width*A),_.height=Math.round(_.height*A))}push(_){_._scissorRectLocal||this.calcScissorRect(_);const{gl:A}=this.renderer;_._scissorRect||A.enable(A.SCISSOR_TEST),_._scissorCounter++,_._scissorRect=_._scissorRectLocal,this._useCurrent()}pop(_){const{gl:A}=this.renderer;_&&rectPool.push(_._scissorRectLocal),this.getStackLength()>0?this._useCurrent():A.disable(A.SCISSOR_TEST)}_useCurrent(){const _=this.maskStack[this.maskStack.length-1]._scissorRect;let A;this.renderer.renderTexture.current?A=_.y:A=this.renderer.height-_.height-_.y,this.renderer.gl.scissor(_.x,A,_.width,_.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._stencilCounter:0}push(_){const A=_.maskObject,{gl:T}=this.renderer,B=_._stencilCounter;B===0&&(this.renderer.framebuffer.forceStencil(),T.clearStencil(0),T.clear(T.STENCIL_BUFFER_BIT),T.enable(T.STENCIL_TEST)),_._stencilCounter++;const I=_._colorMask;I!==0&&(_._colorMask=0,T.colorMask(!1,!1,!1,!1)),T.stencilFunc(T.EQUAL,B,4294967295),T.stencilOp(T.KEEP,T.KEEP,T.INCR),A.renderable=!0,A.render(this.renderer),this.renderer.batch.flush(),A.renderable=!1,I!==0&&(_._colorMask=I,T.colorMask((I&1)!==0,(I&2)!==0,(I&4)!==0,(I&8)!==0)),this._useCurrent()}pop(_){const A=this.renderer.gl;if(this.getStackLength()===0)A.disable(A.STENCIL_TEST);else{const T=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,B=T?T._colorMask:15;B!==0&&(T._colorMask=0,A.colorMask(!1,!1,!1,!1)),A.stencilOp(A.KEEP,A.KEEP,A.DECR),_.renderable=!0,_.render(this.renderer),this.renderer.batch.flush(),_.renderable=!1,B!==0&&(T._colorMask=B,A.colorMask((B&1)!==0,(B&2)!==0,(B&4)!==0,(B&8)!==0)),this._useCurrent()}}_useCurrent(){const _=this.renderer.gl;_.stencilFunc(_.EQUAL,this.getStackLength(),4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$1.add(StencilSystem);class PluginSystem{constructor(_){this.renderer=_,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),_.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),_.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),_.events}}})}init(){const _=this.rendererPlugins;for(const A in _)this.plugins[A]=new _[A](this.renderer)}destroy(){for(const _ in this.plugins)this.plugins[_].destroy(),this.plugins[_]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$1.add(PluginSystem);class ProjectionSystem{constructor(_){this.renderer=_,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(_,A,T,B){this.destinationFrame=_||this.destinationFrame||this.defaultFrame,this.sourceFrame=A||this.sourceFrame||_,this.calculateProjection(this.destinationFrame,this.sourceFrame,T,B),this.transform&&this.projectionMatrix.append(this.transform);const I=this.renderer;I.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,I.globalUniforms.update(),I.shader.shader&&I.shader.syncUniformGroup(I.shader.shader.uniforms.globals)}calculateProjection(_,A,T,B){const I=this.projectionMatrix,C=B?-1:1;I.identity(),I.a=1/A.width*2,I.d=C*(1/A.height*2),I.tx=-1-A.x*I.a,I.ty=-C-A.y*I.d}setTransform(_){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$1.add(ProjectionSystem);const tempTransform=new Transform$1,tempRect$1=new Rectangle;class GenerateTextureSystem{constructor(_){this.renderer=_,this._tempMatrix=new Matrix}generateTexture(_,A){const{region:T,...B}=A||{},I=(T==null?void 0:T.copyTo(tempRect$1))||_.getLocalBounds(tempRect$1,!0),C=B.resolution||this.renderer.resolution;I.width=Math.max(I.width,1/C),I.height=Math.max(I.height,1/C),B.width=I.width,B.height=I.height,B.resolution=C,B.multisample??(B.multisample=this.renderer.multisample);const R=RenderTexture.create(B);this._tempMatrix.tx=-I.x,this._tempMatrix.ty=-I.y;const L=_.transform;return _.transform=tempTransform,this.renderer.render(_,{renderTexture:R,transform:this._tempMatrix,skipUpdateTransform:!!_.parent,blit:!0}),_.transform=L,R}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$1.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(_){this.renderer=_,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var A;const _=(A=this.renderer)==null?void 0:A.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}bind(_=null,A,T){const B=this.renderer;this.current=_;let I,C,R;_?(I=_.baseTexture,R=I.resolution,A||(tempRect.width=_.frame.width,tempRect.height=_.frame.height,A=tempRect),T||(tempRect2.x=_.frame.x,tempRect2.y=_.frame.y,tempRect2.width=A.width,tempRect2.height=A.height,T=tempRect2),C=I.framebuffer):(R=B.resolution,A||(tempRect.width=B._view.screen.width,tempRect.height=B._view.screen.height,A=tempRect),T||(T=tempRect,T.width=A.width,T.height=A.height));const L=this.viewportFrame;L.x=T.x*R,L.y=T.y*R,L.width=T.width*R,L.height=T.height*R,_||(L.y=B.view.height-(L.y+L.height)),L.ceil(),this.renderer.framebuffer.bind(C,L),this.renderer.projection.update(T,A,R,!C),_?this.renderer.mask.setMaskStack(I.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(A),this.destinationFrame.copyFrom(T)}clear(_,A){const T=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,B=Color.shared.setValue(_||T);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&B.premultiply(B.alpha);const I=this.destinationFrame,C=this.current?this.current.baseTexture:this.renderer._view.screen,R=I.width!==C.width||I.height!==C.height;if(R){let{x:L,y:D,width:V,height:U}=this.viewportFrame;L=Math.round(L),D=Math.round(D),V=Math.round(V),U=Math.round(U),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(L,D,V,U)}this.renderer.framebuffer.clear(B.red,B.green,B.blue,B.alpha,A),R&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$1.add(RenderTextureSystem);class GLProgram{constructor(_,A){this.program=_,this.uniformData=A,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(E,_){const A={},T=_.getProgramParameter(E,_.ACTIVE_ATTRIBUTES);for(let B=0;B<T;B++){const I=_.getActiveAttrib(E,B);if(I.name.startsWith("gl_"))continue;const C=mapType(_,I.type),R={type:C,name:I.name,size:mapSize(C),location:_.getAttribLocation(E,I.name)};A[I.name]=R}return A}function getUniformData(E,_){const A={},T=_.getProgramParameter(E,_.ACTIVE_UNIFORMS);for(let B=0;B<T;B++){const I=_.getActiveUniform(E,B),C=I.name.replace(/\[.*?\]$/,""),R=!!I.name.match(/\[.*?\]$/),L=mapType(_,I.type);A[C]={name:C,index:B,type:L,size:I.size,isArray:R,value:defaultValue(L,I.size)}}return A}function generateProgram(E,_){var R;const A=compileShader(E,E.VERTEX_SHADER,_.vertexSrc),T=compileShader(E,E.FRAGMENT_SHADER,_.fragmentSrc),B=E.createProgram();E.attachShader(B,A),E.attachShader(B,T);const I=(R=_.extra)==null?void 0:R.transformFeedbackVaryings;if(I&&(typeof E.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):E.transformFeedbackVaryings(B,I.names,I.bufferMode==="separate"?E.SEPARATE_ATTRIBS:E.INTERLEAVED_ATTRIBS)),E.linkProgram(B),E.getProgramParameter(B,E.LINK_STATUS)||logProgramError(E,B,A,T),_.attributeData=getAttributeData(B,E),_.uniformData=getUniformData(B,E),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(_.vertexSrc)){const L=Object.keys(_.attributeData);L.sort((D,V)=>D>V?1:-1);for(let D=0;D<L.length;D++)_.attributeData[L[D]].location=D,E.bindAttribLocation(B,D,L[D]);E.linkProgram(B)}E.deleteShader(A),E.deleteShader(T);const C={};for(const L in _.uniformData){const D=_.uniformData[L];C[L]={location:E.getUniformLocation(B,L),value:defaultValue(D.type,D.size)}}return new GLProgram(B,C)}function uboUpdate(E,_,A,T,B){A.buffer.update(B)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(E){const _=E.map(I=>({data:I,offset:0,dataLen:0,dirty:0}));let A=0,T=0,B=0;for(let I=0;I<_.length;I++){const C=_[I];if(A=GLSL_TO_STD40_SIZE[C.data.type],C.data.size>1&&(A=Math.max(A,16)*C.data.size),C.dataLen=A,T%A!==0&&T<16){const R=T%A%16;T+=R,B+=R}T+A>16?(B=Math.ceil(B/16)*16,C.offset=B,B+=A,T=A):(C.offset=B,T+=A,B+=A)}return B=Math.ceil(B/16)*16,{uboElements:_,size:B}}function getUBOData(E,_){const A=[];for(const T in E)_[T]&&A.push(_[T]);return A.sort((T,B)=>T.index-B.index),A}function generateUniformBufferSync(E,_){if(!E.autoManage)return{size:0,syncFunc:uboUpdate};const A=getUBOData(E.uniforms,_),{uboElements:T,size:B}=createUBOElements(A),I=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let C=0;C<T.length;C++){const R=T[C],L=E.uniforms[R.data.name],D=R.data.name;let V=!1;for(let U=0;U<uniformParsers.length;U++){const z=uniformParsers[U];if(z.codeUbo&&z.test(R.data,L)){I.push(`offset = ${R.offset/4};`,uniformParsers[U].codeUbo(R.data.name,L)),V=!0;break}}if(!V)if(R.data.size>1){const U=mapSize(R.data.type),z=Math.max(GLSL_TO_STD40_SIZE[R.data.type]/16,1),W=U/z,Y=(4-W%4)%4;I.push(`
                cv = ud.${D}.value;
                v = uv.${D};
                offset = ${R.offset/4};

                t = 0;

                for(var i=0; i < ${R.data.size*z}; i++)
                {
                    for(var j = 0; j < ${W}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${Y};
                }

                `)}else{const U=UBO_TO_SINGLE_SETTERS[R.data.type];I.push(`
                cv = ud.${D}.value;
                v = uv.${D};
                offset = ${R.offset/4};
                ${U};
                `)}}return I.push(`
       renderer.buffer.update(buffer);
    `),{size:B,syncFunc:new Function("ud","uv","renderer","syncData","buffer",I.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(_){this.destroyed=!1,this.renderer=_,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(_){this.gl=_,this.reset()}bind(_,A){_.disposeRunner.add(this),_.uniforms.globals=this.renderer.globalUniforms;const T=_.program,B=T.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(_);return this.shader=_,this.program!==T&&(this.program=T,this.gl.useProgram(B.program)),A||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(_.uniformGroup,defaultSyncData)),B}setUniforms(_){const A=this.shader.program,T=A.glPrograms[this.renderer.CONTEXT_UID];A.syncUniforms(T.uniformData,_,this.renderer)}syncUniformGroup(_,A){const T=this.getGlProgram();(!_.static||_.dirtyId!==T.uniformDirtyGroups[_.id])&&(T.uniformDirtyGroups[_.id]=_.dirtyId,this.syncUniforms(_,T,A))}syncUniforms(_,A,T){(_.syncUniforms[this.shader.program.id]||this.createSyncGroups(_))(A.uniformData,_.uniforms,this.renderer,T)}createSyncGroups(_){const A=this.getSignature(_,this.shader.program.uniformData,"u");return this.cache[A]||(this.cache[A]=generateUniformsSync(_,this.shader.program.uniformData)),_.syncUniforms[this.shader.program.id]=this.cache[A],_.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(_,A){const T=this.getGlProgram();if(!_.static||_.dirtyId!==0||!T.uniformGroups[_.id]){_.dirtyId=0;const B=T.uniformGroups[_.id]||this.createSyncBufferGroup(_,T,A);_.buffer.update(),B(T.uniformData,_.uniforms,this.renderer,defaultSyncData,_.buffer)}this.renderer.buffer.bindBufferBase(_.buffer,T.uniformBufferBindings[A])}createSyncBufferGroup(_,A,T){const{gl:B}=this.renderer;this.renderer.buffer.bind(_.buffer);const I=this.gl.getUniformBlockIndex(A.program,T);A.uniformBufferBindings[T]=this.shader.uniformBindCount,B.uniformBlockBinding(A.program,I,this.shader.uniformBindCount),this.shader.uniformBindCount++;const C=this.getSignature(_,this.shader.program.uniformData,"ubo");let R=this._uboCache[C];if(R||(R=this._uboCache[C]=generateUniformBufferSync(_,this.shader.program.uniformData)),_.autoManage){const L=new Float32Array(R.size/4);_.buffer.update(L)}return A.uniformGroups[_.id]=R.syncFunc,A.uniformGroups[_.id]}getSignature(_,A,T){const B=_.uniforms,I=[`${T}-`];for(const C in B)I.push(C),A[C]&&I.push(A[C].type);return I.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(_){const A=this.gl,T=_.program,B=generateProgram(A,T);return T.glPrograms[this.renderer.CONTEXT_UID]=B,B}reset(){this.program=null,this.shader=null}disposeShader(_){this.shader===_&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$1.add(ShaderSystem);class StartupSystem{constructor(_){this.renderer=_}run(_){const{renderer:A}=this;A.runners.init.emit(A.options),_.hello&&console.log(`PixiJS 7.3.2 - ${A.rendererLogId} - https://pixijs.com`),A.resize(A.screen.width,A.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$1.add(StartupSystem);function mapWebGLBlendModesToPixi(E,_=[]){return _[BLEND_MODES.NORMAL]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD]=[E.ONE,E.ONE],_[BLEND_MODES.MULTIPLY]=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA,E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SCREEN]=[E.ONE,E.ONE_MINUS_SRC_COLOR,E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.OVERLAY]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DARKEN]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LIGHTEN]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_DODGE]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_BURN]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HARD_LIGHT]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SOFT_LIGHT]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DIFFERENCE]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.EXCLUSION]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HUE]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SATURATION]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LUMINOSITY]=[E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.NONE]=[0,0],_[BLEND_MODES.NORMAL_NPM]=[E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA,E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD_NPM]=[E.SRC_ALPHA,E.ONE,E.ONE,E.ONE],_[BLEND_MODES.SCREEN_NPM]=[E.SRC_ALPHA,E.ONE_MINUS_SRC_COLOR,E.ONE,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SRC_IN]=[E.DST_ALPHA,E.ZERO],_[BLEND_MODES.SRC_OUT]=[E.ONE_MINUS_DST_ALPHA,E.ZERO],_[BLEND_MODES.SRC_ATOP]=[E.DST_ALPHA,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_OVER]=[E.ONE_MINUS_DST_ALPHA,E.ONE],_[BLEND_MODES.DST_IN]=[E.ZERO,E.SRC_ALPHA],_[BLEND_MODES.DST_OUT]=[E.ZERO,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_ATOP]=[E.ONE_MINUS_DST_ALPHA,E.SRC_ALPHA],_[BLEND_MODES.XOR]=[E.ONE_MINUS_DST_ALPHA,E.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SUBTRACT]=[E.ONE,E.ONE,E.ONE,E.ONE,E.FUNC_REVERSE_SUBTRACT,E.FUNC_ADD],_}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class En{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(_){this.gl=_,this.blendModes=mapWebGLBlendModesToPixi(_),this.set(this.defaultState),this.reset()}set(_){if(_=_||this.defaultState,this.stateId!==_.data){let A=this.stateId^_.data,T=0;for(;A;)A&1&&this.map[T].call(this,!!(_.data&1<<T)),A=A>>1,T++;this.stateId=_.data}for(let A=0;A<this.checks.length;A++)this.checks[A](this,_)}forceState(_){_=_||this.defaultState;for(let A=0;A<this.map.length;A++)this.map[A].call(this,!!(_.data&1<<A));for(let A=0;A<this.checks.length;A++)this.checks[A](this,_);this.stateId=_.data}setBlend(_){this.updateCheck(En.checkBlendMode,_),this.gl[_?"enable":"disable"](this.gl.BLEND)}setOffset(_){this.updateCheck(En.checkPolygonOffset,_),this.gl[_?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(_){this.gl[_?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(_){this.gl.depthMask(_)}setCullFace(_){this.gl[_?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(_){this.gl.frontFace(this.gl[_?"CW":"CCW"])}setBlendMode(_){if(_===this.blendMode)return;this.blendMode=_;const A=this.blendModes[_],T=this.gl;A.length===2?T.blendFunc(A[0],A[1]):T.blendFuncSeparate(A[0],A[1],A[2],A[3]),A.length===6?(this._blendEq=!0,T.blendEquationSeparate(A[4],A[5])):this._blendEq&&(this._blendEq=!1,T.blendEquationSeparate(T.FUNC_ADD,T.FUNC_ADD))}setPolygonOffset(_,A){this.gl.polygonOffset(_,A)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(_,A){const T=this.checks.indexOf(_);A&&T===-1?this.checks.push(_):!A&&T!==-1&&this.checks.splice(T,1)}static checkBlendMode(_,A){_.setBlendMode(A.blendMode)}static checkPolygonOffset(_,A){_.setPolygonOffset(1,A.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions$1.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(_){this.addRunners(..._.runners);const A=(_.priority??[]).filter(B=>_.systems[B]),T=[...A,...Object.keys(_.systems).filter(B=>!A.includes(B))];for(const B of T)this.addSystem(_.systems[B],B)}addRunners(..._){_.forEach(A=>{this.runners[A]=new Runner(A)})}addSystem(_,A){const T=new _(this);if(this[A])throw new Error(`Whoops! The name "${A}" is already in use`);this[A]=T,this._systemsHash[A]=T;for(const B in this.runners)this.runners[B].add(T);return this}emitWithCustomOptions(_,A){const T=Object.keys(this._systemsHash);_.items.forEach(B=>{const I=T.find(C=>this._systemsHash[C]===B);B[_.name](A[I])})}destroy(){Object.values(this.runners).forEach(_=>{_.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class en{constructor(_){this.renderer=_,this.count=0,this.checkCount=0,this.maxIdle=en.defaultMaxIdle,this.checkCountMax=en.defaultCheckCountMax,this.mode=en.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const _=this.renderer.texture,A=_.managedTextures;let T=!1;for(let B=0;B<A.length;B++){const I=A[B];I.resource&&this.count-I.touched>this.maxIdle&&(_.destroyTexture(I,!0),A[B]=null,T=!0)}if(T){let B=0;for(let I=0;I<A.length;I++)A[I]!==null&&(A[B++]=A[I]);A.length=B}}unload(_){const A=this.renderer.texture,T=_._texture;T&&!T.framebuffer&&A.destroyTexture(T);for(let B=_.children.length-1;B>=0;B--)this.unload(_.children[B])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions$1.add(TextureGCSystem);class GLTexture{constructor(_){this.texture=_,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(E){let _;return"WebGL2RenderingContext"in globalThis&&E instanceof globalThis.WebGL2RenderingContext?_={[E.RGB]:SAMPLER_TYPES.FLOAT,[E.RGBA]:SAMPLER_TYPES.FLOAT,[E.ALPHA]:SAMPLER_TYPES.FLOAT,[E.LUMINANCE]:SAMPLER_TYPES.FLOAT,[E.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[E.R8]:SAMPLER_TYPES.FLOAT,[E.R8_SNORM]:SAMPLER_TYPES.FLOAT,[E.RG8]:SAMPLER_TYPES.FLOAT,[E.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[E.RGB8]:SAMPLER_TYPES.FLOAT,[E.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[E.RGB565]:SAMPLER_TYPES.FLOAT,[E.RGBA4]:SAMPLER_TYPES.FLOAT,[E.RGB5_A1]:SAMPLER_TYPES.FLOAT,[E.RGBA8]:SAMPLER_TYPES.FLOAT,[E.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[E.RGB10_A2]:SAMPLER_TYPES.FLOAT,[E.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[E.SRGB8]:SAMPLER_TYPES.FLOAT,[E.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[E.R16F]:SAMPLER_TYPES.FLOAT,[E.RG16F]:SAMPLER_TYPES.FLOAT,[E.RGB16F]:SAMPLER_TYPES.FLOAT,[E.RGBA16F]:SAMPLER_TYPES.FLOAT,[E.R32F]:SAMPLER_TYPES.FLOAT,[E.RG32F]:SAMPLER_TYPES.FLOAT,[E.RGB32F]:SAMPLER_TYPES.FLOAT,[E.RGBA32F]:SAMPLER_TYPES.FLOAT,[E.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[E.RGB9_E5]:SAMPLER_TYPES.FLOAT,[E.R8I]:SAMPLER_TYPES.INT,[E.R8UI]:SAMPLER_TYPES.UINT,[E.R16I]:SAMPLER_TYPES.INT,[E.R16UI]:SAMPLER_TYPES.UINT,[E.R32I]:SAMPLER_TYPES.INT,[E.R32UI]:SAMPLER_TYPES.UINT,[E.RG8I]:SAMPLER_TYPES.INT,[E.RG8UI]:SAMPLER_TYPES.UINT,[E.RG16I]:SAMPLER_TYPES.INT,[E.RG16UI]:SAMPLER_TYPES.UINT,[E.RG32I]:SAMPLER_TYPES.INT,[E.RG32UI]:SAMPLER_TYPES.UINT,[E.RGB8I]:SAMPLER_TYPES.INT,[E.RGB8UI]:SAMPLER_TYPES.UINT,[E.RGB16I]:SAMPLER_TYPES.INT,[E.RGB16UI]:SAMPLER_TYPES.UINT,[E.RGB32I]:SAMPLER_TYPES.INT,[E.RGB32UI]:SAMPLER_TYPES.UINT,[E.RGBA8I]:SAMPLER_TYPES.INT,[E.RGBA8UI]:SAMPLER_TYPES.UINT,[E.RGBA16I]:SAMPLER_TYPES.INT,[E.RGBA16UI]:SAMPLER_TYPES.UINT,[E.RGBA32I]:SAMPLER_TYPES.INT,[E.RGBA32UI]:SAMPLER_TYPES.UINT,[E.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[E.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[E.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[E.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[E.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[E.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:_={[E.RGB]:SAMPLER_TYPES.FLOAT,[E.RGBA]:SAMPLER_TYPES.FLOAT,[E.ALPHA]:SAMPLER_TYPES.FLOAT,[E.LUMINANCE]:SAMPLER_TYPES.FLOAT,[E.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[E.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},_}function mapTypeAndFormatToInternalFormat(E){let _;return"WebGL2RenderingContext"in globalThis&&E instanceof globalThis.WebGL2RenderingContext?_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:E.RGBA8,[FORMATS.RGB]:E.RGB8,[FORMATS.RG]:E.RG8,[FORMATS.RED]:E.R8,[FORMATS.RGBA_INTEGER]:E.RGBA8UI,[FORMATS.RGB_INTEGER]:E.RGB8UI,[FORMATS.RG_INTEGER]:E.RG8UI,[FORMATS.RED_INTEGER]:E.R8UI,[FORMATS.ALPHA]:E.ALPHA,[FORMATS.LUMINANCE]:E.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:E.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:E.RGBA8_SNORM,[FORMATS.RGB]:E.RGB8_SNORM,[FORMATS.RG]:E.RG8_SNORM,[FORMATS.RED]:E.R8_SNORM,[FORMATS.RGBA_INTEGER]:E.RGBA8I,[FORMATS.RGB_INTEGER]:E.RGB8I,[FORMATS.RG_INTEGER]:E.RG8I,[FORMATS.RED_INTEGER]:E.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:E.RGBA16UI,[FORMATS.RGB_INTEGER]:E.RGB16UI,[FORMATS.RG_INTEGER]:E.RG16UI,[FORMATS.RED_INTEGER]:E.R16UI,[FORMATS.DEPTH_COMPONENT]:E.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:E.RGBA16I,[FORMATS.RGB_INTEGER]:E.RGB16I,[FORMATS.RG_INTEGER]:E.RG16I,[FORMATS.RED_INTEGER]:E.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:E.RGBA32UI,[FORMATS.RGB_INTEGER]:E.RGB32UI,[FORMATS.RG_INTEGER]:E.RG32UI,[FORMATS.RED_INTEGER]:E.R32UI,[FORMATS.DEPTH_COMPONENT]:E.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:E.RGBA32I,[FORMATS.RGB_INTEGER]:E.RGB32I,[FORMATS.RG_INTEGER]:E.RG32I,[FORMATS.RED_INTEGER]:E.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:E.RGBA32F,[FORMATS.RGB]:E.RGB32F,[FORMATS.RG]:E.RG32F,[FORMATS.RED]:E.R32F,[FORMATS.DEPTH_COMPONENT]:E.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:E.RGBA16F,[FORMATS.RGB]:E.RGB16F,[FORMATS.RG]:E.RG16F,[FORMATS.RED]:E.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:E.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:E.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:E.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:E.RGB10_A2,[FORMATS.RGBA_INTEGER]:E.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:E.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:E.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:E.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:E.DEPTH32F_STENCIL8}}:_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:E.RGBA,[FORMATS.RGB]:E.RGB,[FORMATS.ALPHA]:E.ALPHA,[FORMATS.LUMINANCE]:E.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:E.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:E.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:E.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:E.RGBA}},_}class TextureSystem{constructor(_){this.renderer=_,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const _=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(_),this.samplerTypes=mapInternalFormatToSamplerType(_);const A=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=A;for(let B=0;B<A;B++)this.boundTextures[B]=null;this.emptyTextures={};const T=new GLTexture(_.createTexture());_.bindTexture(_.TEXTURE_2D,T.texture),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[_.TEXTURE_2D]=T,this.emptyTextures[_.TEXTURE_CUBE_MAP]=new GLTexture(_.createTexture()),_.bindTexture(_.TEXTURE_CUBE_MAP,this.emptyTextures[_.TEXTURE_CUBE_MAP].texture);for(let B=0;B<6;B++)_.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+B,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,null);_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MIN_FILTER,_.LINEAR);for(let B=0;B<this.boundTextures.length;B++)this.bind(null,B)}bind(_,A=0){const{gl:T}=this;if(_=_==null?void 0:_.castToBaseTexture(),(_==null?void 0:_.valid)&&!_.parentTextureArray){_.touched=this.renderer.textureGC.count;const B=_._glTextures[this.CONTEXT_UID]||this.initTexture(_);this.boundTextures[A]!==_&&(this.currentLocation!==A&&(this.currentLocation=A,T.activeTexture(T.TEXTURE0+A)),T.bindTexture(_.target,B.texture)),B.dirtyId!==_.dirtyId?(this.currentLocation!==A&&(this.currentLocation=A,T.activeTexture(T.TEXTURE0+A)),this.updateTexture(_)):B.dirtyStyleId!==_.dirtyStyleId&&this.updateTextureStyle(_),this.boundTextures[A]=_}else this.currentLocation!==A&&(this.currentLocation=A,T.activeTexture(T.TEXTURE0+A)),T.bindTexture(T.TEXTURE_2D,this.emptyTextures[T.TEXTURE_2D].texture),this.boundTextures[A]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let _=0;_<this.boundTextures.length;_++)this.boundTextures[_]=this.unknownTexture}unbind(_){const{gl:A,boundTextures:T}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let B=0;B<T.length;B++)T[B]===this.unknownTexture&&this.bind(null,B)}for(let B=0;B<T.length;B++)T[B]===_&&(this.currentLocation!==B&&(A.activeTexture(A.TEXTURE0+B),this.currentLocation=B),A.bindTexture(_.target,this.emptyTextures[_.target].texture),T[B]=null)}ensureSamplerType(_){const{boundTextures:A,hasIntegerTextures:T,CONTEXT_UID:B}=this;if(T)for(let I=_-1;I>=0;--I){const C=A[I];C&&C._glTextures[B].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(C)}}initTexture(_){const A=new GLTexture(this.gl.createTexture());return A.dirtyId=-1,_._glTextures[this.CONTEXT_UID]=A,this.managedTextures.push(_),_.on("dispose",this.destroyTexture,this),A}initTextureType(_,A){var T;A.internalFormat=((T=this.internalFormats[_.type])==null?void 0:T[_.format])??_.format,A.samplerType=this.samplerTypes[A.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&_.type===TYPES.HALF_FLOAT?A.type=this.gl.HALF_FLOAT:A.type=_.type}updateTexture(_){var B;const A=_._glTextures[this.CONTEXT_UID];if(!A)return;const T=this.renderer;if(this.initTextureType(_,A),(B=_.resource)==null?void 0:B.upload(T,_,A))A.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const I=_.realWidth,C=_.realHeight,R=T.gl;(A.width!==I||A.height!==C||A.dirtyId<0)&&(A.width=I,A.height=C,R.texImage2D(_.target,0,A.internalFormat,I,C,0,_.format,A.type,null))}_.dirtyStyleId!==A.dirtyStyleId&&this.updateTextureStyle(_),A.dirtyId=_.dirtyId}destroyTexture(_,A){const{gl:T}=this;if(_=_.castToBaseTexture(),_._glTextures[this.CONTEXT_UID]&&(this.unbind(_),T.deleteTexture(_._glTextures[this.CONTEXT_UID].texture),_.off("dispose",this.destroyTexture,this),delete _._glTextures[this.CONTEXT_UID],!A)){const B=this.managedTextures.indexOf(_);B!==-1&&removeItems(this.managedTextures,B,1)}}updateTextureStyle(_){var T;const A=_._glTextures[this.CONTEXT_UID];A&&((_.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!_.isPowerOfTwo?A.mipmap=!1:A.mipmap=_.mipmap>=1,this.webGLVersion!==2&&!_.isPowerOfTwo?A.wrapMode=WRAP_MODES.CLAMP:A.wrapMode=_.wrapMode,(T=_.resource)!=null&&T.style(this.renderer,_,A)||this.setStyle(_,A),A.dirtyStyleId=_.dirtyStyleId)}setStyle(_,A){const T=this.gl;if(A.mipmap&&_.mipmap!==MIPMAP_MODES.ON_MANUAL&&T.generateMipmap(_.target),T.texParameteri(_.target,T.TEXTURE_WRAP_S,A.wrapMode),T.texParameteri(_.target,T.TEXTURE_WRAP_T,A.wrapMode),A.mipmap){T.texParameteri(_.target,T.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?T.LINEAR_MIPMAP_LINEAR:T.NEAREST_MIPMAP_NEAREST);const B=this.renderer.context.extensions.anisotropicFiltering;if(B&&_.anisotropicLevel>0&&_.scaleMode===SCALE_MODES.LINEAR){const I=Math.min(_.anisotropicLevel,T.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT));T.texParameterf(_.target,B.TEXTURE_MAX_ANISOTROPY_EXT,I)}}else T.texParameteri(_.target,T.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?T.LINEAR:T.NEAREST);T.texParameteri(_.target,T.TEXTURE_MAG_FILTER,_.scaleMode===SCALE_MODES.LINEAR?T.LINEAR:T.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$1.add(TextureSystem);class TransformFeedbackSystem{constructor(_){this.renderer=_}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:A,CONTEXT_UID:T}=this,B=_._glTransformFeedbacks[T]||this.createGLTransformFeedback(_);A.bindTransformFeedback(A.TRANSFORM_FEEDBACK,B)}unbind(){const{gl:_}=this;_.bindTransformFeedback(_.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(_,A){const{gl:T,renderer:B}=this;A&&B.shader.bind(A),T.beginTransformFeedback(_)}endTransformFeedback(){const{gl:_}=this;_.endTransformFeedback()}createGLTransformFeedback(_){const{gl:A,renderer:T,CONTEXT_UID:B}=this,I=A.createTransformFeedback();_._glTransformFeedbacks[B]=I,A.bindTransformFeedback(A.TRANSFORM_FEEDBACK,I);for(let C=0;C<_.buffers.length;C++){const R=_.buffers[C];R&&(T.buffer.update(R),R._glBuffers[B].refCount++,A.bindBufferBase(A.TRANSFORM_FEEDBACK_BUFFER,C,R._glBuffers[B].buffer||null))}return A.bindTransformFeedback(A.TRANSFORM_FEEDBACK,null),_.disposeRunner.add(this),I}disposeTransformFeedback(_,A){const T=_._glTransformFeedbacks[this.CONTEXT_UID],B=this.gl;_.disposeRunner.remove(this);const I=this.renderer.buffer;if(I)for(let C=0;C<_.buffers.length;C++){const R=_.buffers[C];if(!R)continue;const L=R._glBuffers[this.CONTEXT_UID];L&&(L.refCount--,L.refCount===0&&!A&&I.dispose(R,A))}T&&(A||B.deleteTransformFeedback(T),delete _._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$1.add(TransformFeedbackSystem);class ViewSystem{constructor(_){this.renderer=_}init(_){this.screen=new Rectangle(0,0,_.width,_.height),this.element=_.view||settings.ADAPTER.createCanvas(),this.resolution=_.resolution||settings.RESOLUTION,this.autoDensity=!!_.autoDensity}resizeView(_,A){this.element.width=Math.round(_*this.resolution),this.element.height=Math.round(A*this.resolution);const T=this.element.width/this.resolution,B=this.element.height/this.resolution;this.screen.width=T,this.screen.height=B,this.autoDensity&&(this.element.style.width=`${T}px`,this.element.style.height=`${B}px`),this.renderer.emit("resize",T,B),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(_){var A;_&&((A=this.element.parentNode)==null||A.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$1.add(ViewSystem);settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(E){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=E}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(E){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=E}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(E){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=E}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(E){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=E}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter.defaultResolution},set(E){Filter.defaultResolution=E}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter.defaultMultisample},set(E){Filter.defaultMultisample=E}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(E){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=E}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(E){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=E}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(E){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=E}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(E){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=E}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(E){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=E}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(E){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=E}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(E){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=E}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(E){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=E}}});var UPDATE_PRIORITY=(E=>(E[E.INTERACTION=50]="INTERACTION",E[E.HIGH=25]="HIGH",E[E.NORMAL=0]="NORMAL",E[E.LOW=-25]="LOW",E[E.UTILITY=-50]="UTILITY",E))(UPDATE_PRIORITY||{});class TickerListener{constructor(_,A=null,T=0,B=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=_,this.context=A,this.priority=T,this.once=B}match(_,A=null){return this.fn===_&&this.context===A}emit(_){this.fn&&(this.context?this.fn.call(this.context,_):this.fn(_));const A=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),A}connect(_){this.previous=_,_.next&&(_.next.previous=this),this.next=_.next,_.next=this}destroy(_=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const A=this.next;return this.next=_?null:A,this.previous=null,A}}const _Ticker=class Bi{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/Bi.targetFPMS,this.elapsedMS=1/Bi.targetFPMS,this._tick=_=>{this._requestId=null,this.started&&(this.update(_),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(_,A,T=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,A,T))}addOnce(_,A,T=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,A,T,!0))}_addListener(_){let A=this._head.next,T=this._head;if(!A)_.connect(T);else{for(;A;){if(_.priority>A.priority){_.connect(T);break}T=A,A=A.next}_.previous||_.connect(T)}return this._startIfPossible(),this}remove(_,A){let T=this._head.next;for(;T;)T.match(_,A)?T=T.destroy():T=T.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let _=0,A=this._head;for(;A=A.next;)_++;return _}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let _=this._head.next;for(;_;)_=_.destroy(!0);this._head.destroy(),this._head=null}}update(_=performance.now()){let A;if(_>this.lastTime){if(A=this.elapsedMS=_-this.lastTime,A>this._maxElapsedMS&&(A=this._maxElapsedMS),A*=this.speed,this._minElapsedMS){const I=_-this._lastFrame|0;if(I<this._minElapsedMS)return;this._lastFrame=_-I%this._minElapsedMS}this.deltaMS=A,this.deltaTime=this.deltaMS*Bi.targetFPMS;const T=this._head;let B=T.next;for(;B;)B=B.emit(this.deltaTime);T.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=_}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(_){const A=Math.min(this.maxFPS,_),T=Math.min(Math.max(0,A)/1e3,Bi.targetFPMS);this._maxElapsedMS=1/T}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(_){if(_===0)this._minElapsedMS=0;else{const A=Math.max(this.minFPS,_);this._minElapsedMS=1/(A/1e3)}}static get shared(){if(!Bi._shared){const _=Bi._shared=new Bi;_.autoStart=!0,_._protected=!0}return Bi._shared}static get system(){if(!Bi._system){const _=Bi._system=new Bi;_.autoStart=!0,_._protected=!0}return Bi._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker;Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(E){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=E}}});class TickerPlugin{static init(_){_=Object.assign({autoStart:!0,sharedTicker:!1},_),Object.defineProperty(this,"ticker",{set(A){this._ticker&&this._ticker.remove(this.render,this),this._ticker=A,A&&A.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=_.sharedTicker?Ticker.shared:new Ticker,_.autoStart&&this.start()}static destroy(){if(this._ticker){const _=this._ticker;this.ticker=null,_.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$1.add(TickerPlugin);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(E){for(const _ of renderers)if(_.test(E))return new _(E);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(_){this.renderer=_}contextChange(_){let A;if(this.renderer.context.webGLVersion===1){const T=_.getParameter(_.FRAMEBUFFER_BINDING);_.bindFramebuffer(_.FRAMEBUFFER,null),A=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.FRAMEBUFFER,T)}else{const T=_.getParameter(_.DRAW_FRAMEBUFFER_BINDING);_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),A=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,T)}A>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:A>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:A>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$1.add(MultisampleSystem);class GLBuffer{constructor(_){this.buffer=_||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(_){this.renderer=_,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:A,CONTEXT_UID:T}=this,B=_._glBuffers[T]||this.createGLBuffer(_);A.bindBuffer(_.type,B.buffer)}unbind(_){const{gl:A}=this;A.bindBuffer(_,null)}bindBufferBase(_,A){const{gl:T,CONTEXT_UID:B}=this;if(this.boundBufferBases[A]!==_){const I=_._glBuffers[B]||this.createGLBuffer(_);this.boundBufferBases[A]=_,T.bindBufferBase(T.UNIFORM_BUFFER,A,I.buffer)}}bindBufferRange(_,A,T){const{gl:B,CONTEXT_UID:I}=this;T=T||0;const C=_._glBuffers[I]||this.createGLBuffer(_);B.bindBufferRange(B.UNIFORM_BUFFER,A||0,C.buffer,T*256,256)}update(_){const{gl:A,CONTEXT_UID:T}=this,B=_._glBuffers[T]||this.createGLBuffer(_);if(_._updateID!==B.updateID)if(B.updateID=_._updateID,A.bindBuffer(_.type,B.buffer),B.byteLength>=_.data.byteLength)A.bufferSubData(_.type,0,_.data);else{const I=_.static?A.STATIC_DRAW:A.DYNAMIC_DRAW;B.byteLength=_.data.byteLength,A.bufferData(_.type,_.data,I)}}dispose(_,A){if(!this.managedBuffers[_.id])return;delete this.managedBuffers[_.id];const T=_._glBuffers[this.CONTEXT_UID],B=this.gl;_.disposeRunner.remove(this),T&&(A||B.deleteBuffer(T.buffer),delete _._glBuffers[this.CONTEXT_UID])}disposeAll(_){const A=Object.keys(this.managedBuffers);for(let T=0;T<A.length;T++)this.dispose(this.managedBuffers[A[T]],_)}createGLBuffer(_){const{CONTEXT_UID:A,gl:T}=this;return _._glBuffers[A]=new GLBuffer(T.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this),_._glBuffers[A]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$1.add(BufferSystem);class ObjectRendererSystem{constructor(_){this.renderer=_}render(_,A){const T=this.renderer;let B,I,C,R;if(A&&(B=A.renderTexture,I=A.clear,C=A.transform,R=A.skipUpdateTransform),this.renderingToScreen=!B,T.runners.prerender.emit(),T.emit("prerender"),T.projection.transform=C,!T.context.isLost){if(B||(this.lastObjectRendered=_),!R){const L=_.enableTempParent();_.updateTransform(),_.disableTempParent(L)}T.renderTexture.bind(B),T.batch.currentRenderer.start(),(I??T.background.clearBeforeRender)&&T.renderTexture.clear(),_.render(T),T.batch.currentRenderer.flush(),B&&(A.blit&&T.framebuffer.blit(),B.baseTexture.update()),T.runners.postrender.emit(),T.projection.transform=null,T.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$1.add(ObjectRendererSystem);const _Renderer=class wn extends SystemManager{constructor(_){super(),this.type=RENDERER_TYPE.WEBGL,_=Object.assign({},settings.RENDER_OPTIONS,_),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const A={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:wn.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(A),"useContextAlpha"in _&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),_.premultipliedAlpha=_.useContextAlpha&&_.useContextAlpha!=="notMultiplied",_.backgroundAlpha=_.useContextAlpha===!1?1:_.backgroundAlpha),this._plugin.rendererPlugins=wn.__plugins,this.options=_,this.startup.run(this.options)}static test(_){return _!=null&&_.forceCanvas?!1:isWebGLSupported()}render(_,A){this.objectRenderer.render(_,A)}resize(_,A){this._view.resizeView(_,A)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(_=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(_){this._view.resolution=_,this.runners.resolutionChange.emit(_)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(_){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(_){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(_,A){return this.textureGenerator.generateTexture(_,A)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer=_Renderer;extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer.__systems);extensions$1.add(Renderer);class AbstractMultiResource extends Resource{constructor(_,A){const{width:T,height:B}=A||{};super(T,B),this.items=[],this.itemDirtyIds=[];for(let I=0;I<_;I++){const C=new BaseTexture;this.items.push(C),this.itemDirtyIds.push(-2)}this.length=_,this._load=null,this.baseTexture=null}initFromArray(_,A){for(let T=0;T<this.length;T++)_[T]&&(_[T].castToBaseTexture?this.addBaseTextureAt(_[T].castToBaseTexture(),T):_[T]instanceof Resource?this.addResourceAt(_[T],T):this.addResourceAt(autoDetectResource(_[T],A),T))}dispose(){for(let _=0,A=this.length;_<A;_++)this.items[_].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(_,A){if(!this.items[A])throw new Error(`Index ${A} is out of bounds`);return _.valid&&!this.valid&&this.resize(_.width,_.height),this.items[A].setResource(_),this}bind(_){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(_);for(let A=0;A<this.length;A++)this.items[A].parentTextureArray=_,this.items[A].on("update",_.update,_)}unbind(_){super.unbind(_);for(let A=0;A<this.length;A++)this.items[A].parentTextureArray=null,this.items[A].off("update",_.update,_)}load(){if(this._load)return this._load;const _=this.items.map(A=>A.resource).filter(A=>A).map(A=>A.load());return this._load=Promise.all(_).then(()=>{const{realWidth:A,realHeight:T}=this.items[0];return this.resize(A,T),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(_,A){const{width:T,height:B}=A||{};let I,C;Array.isArray(_)?(I=_,C=_.length):C=_,super(C,{width:T,height:B}),I&&this.initFromArray(I,A)}addBaseTextureAt(_,A){if(_.resource)this.addResourceAt(_.resource,A);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_2D_ARRAY}upload(_,A,T){const{length:B,itemDirtyIds:I,items:C}=this,{gl:R}=_;T.dirtyId<0&&R.texImage3D(R.TEXTURE_2D_ARRAY,0,T.internalFormat,this._width,this._height,B,0,A.format,T.type,null);for(let L=0;L<B;L++){const D=C[L];I[L]<D.dirtyId&&(I[L]=D.dirtyId,D.valid&&R.texSubImage3D(R.TEXTURE_2D_ARRAY,0,0,0,L,D.resource.width,D.resource.height,1,A.format,T.type,D.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(_){super(_)}static test(_){const{OffscreenCanvas:A}=globalThis;return A&&_ instanceof A?!0:globalThis.HTMLCanvasElement&&_ instanceof HTMLCanvasElement}}const _CubeResource=class Ir extends AbstractMultiResource{constructor(_,A){const{width:T,height:B,autoLoad:I,linkBaseTexture:C}=A||{};if(_&&_.length!==Ir.SIDES)throw new Error(`Invalid length. Got ${_.length}, expected 6`);super(6,{width:T,height:B});for(let R=0;R<Ir.SIDES;R++)this.items[R].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+R;this.linkBaseTexture=C!==!1,_&&this.initFromArray(_,A),I!==!1&&this.load()}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(_,A,T){if(T===void 0&&(T=this.linkBaseTexture),!this.items[A])throw new Error(`Index ${A} is out of bounds`);if(!this.linkBaseTexture||_.parentTextureArray||Object.keys(_._glTextures).length>0)if(_.resource)this.addResourceAt(_.resource,A);else throw new Error("CubeResource does not support copying of renderTexture.");else _.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+A,_.parentTextureArray=this.baseTexture,this.items[A]=_;return _.valid&&!this.valid&&this.resize(_.realWidth,_.realHeight),this.items[A]=_,this}upload(_,A,T){const B=this.itemDirtyIds;for(let I=0;I<Ir.SIDES;I++){const C=this.items[I];(B[I]<C.dirtyId||T.dirtyId<A.dirtyId)&&(C.valid&&C.resource?(C.resource.upload(_,C,T),B[I]=C.dirtyId):B[I]<-1&&(_.gl.texImage2D(C.target,0,T.internalFormat,A.realWidth,A.realHeight,0,A.format,T.type,null),B[I]=-1))}return!0}static test(_){return Array.isArray(_)&&_.length===Ir.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(_,A){A=A||{};let T,B,I;typeof _=="string"?(T=ImageBitmapResource.EMPTY,B=_,I=!0):(T=_,B=null,I=!1),super(T),this.url=B,this.crossOrigin=A.crossOrigin??!0,this.alphaMode=typeof A.alphaMode=="number"?A.alphaMode:null,this.ownsImageBitmap=A.ownsImageBitmap??I,this._load=null,A.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(_,A)=>{if(this.url===null){_(this);return}try{const T=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const B=await T.blob();if(this.destroyed)return;const I=await createImageBitmap(B,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){I.close();return}this.source=I,this.update(),_(this)}catch(T){if(this.destroyed)return;A(T),this.onError.emit(T)}}),this._load)}upload(_,A,T){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(A.alphaMode=this.alphaMode),super.upload(_,A,T)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(_){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof _=="string"||_ instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class rn extends BaseImageResource{constructor(_,A){A=A||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=_,this.scale=A.scale||1,this._overrideWidth=A.width,this._overrideHeight=A.height,this._resolve=null,this._crossorigin=A.crossorigin,this._load=null,A.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(_=>{if(this._resolve=()=>{this.update(),_(this)},rn.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const _=new Image;BaseImageResource.crossOrigin(_,this.svg,this._crossorigin),_.src=this.svg,_.onerror=A=>{this._resolve&&(_.onerror=null,this.onError.emit(A))},_.onload=()=>{if(!this._resolve)return;const A=_.width,T=_.height;if(!A||!T)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let B=A*this.scale,I=T*this.scale;(this._overrideWidth||this._overrideHeight)&&(B=this._overrideWidth||this._overrideHeight/T*A,I=this._overrideHeight||this._overrideWidth/A*T),B=Math.round(B),I=Math.round(I);const C=this.source;C.width=B,C.height=I,C._pixiId=`canvas_${uid()}`,C.getContext("2d").drawImage(_,0,0,A,T,0,0,B,I),this._resolve(),this._resolve=null}}static getSize(_){const A=rn.SVG_SIZE.exec(_),T={};return A&&(T[A[1]]=Math.round(parseFloat(A[3])),T[A[5]]=Math.round(parseFloat(A[7]))),T}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(_,A){return A==="svg"||typeof _=="string"&&_.startsWith("data:image/svg+xml")||typeof _=="string"&&rn.SVG_XML.test(_)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;const _VideoResource=class Sn extends BaseImageResource{constructor(_,A){if(A=A||{},!(_ instanceof HTMLVideoElement)){const T=document.createElement("video");A.autoLoad!==!1&&T.setAttribute("preload","auto"),A.playsinline!==!1&&(T.setAttribute("webkit-playsinline",""),T.setAttribute("playsinline","")),A.muted===!0&&(T.setAttribute("muted",""),T.muted=!0),A.loop===!0&&T.setAttribute("loop",""),A.autoPlay!==!1&&T.setAttribute("autoplay",""),typeof _=="string"&&(_=[_]);const B=_[0].src||_[0];BaseImageResource.crossOrigin(T,B,A.crossorigin);for(let I=0;I<_.length;++I){const C=document.createElement("source");let{src:R,mime:L}=_[I];if(R=R||_[I],R.startsWith("data:"))L=R.slice(5,R.indexOf(";"));else if(!R.startsWith("blob:")){const D=R.split("?").shift().toLowerCase(),V=D.slice(D.lastIndexOf(".")+1);L=L||Sn.MIME_TYPES[V]||`video/${V}`}C.src=R,L&&(C.type=L),T.appendChild(C)}_=T}super(_),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=A.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=A.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),A.autoLoad!==!1&&this.load()}update(_=0){if(!this.destroyed){if(this._updateFPS){const A=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-A)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const _=this.source;return(_.readyState===_.HAVE_ENOUGH_DATA||_.readyState===_.HAVE_FUTURE_DATA)&&_.width&&_.height&&(_.complete=!0),_.addEventListener("play",this._onPlayStart),_.addEventListener("pause",this._onPlayStop),_.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(_.addEventListener("canplay",this._onCanPlay),_.addEventListener("canplaythrough",this._onCanPlay),_.addEventListener("error",this._onError,!0)),this._load=new Promise((A,T)=>{this.valid?A(this):(this._resolve=A,this._reject=T,_.load())}),this._load}_onError(_){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(_),this._reject&&(this._reject(_),this._reject=null,this._resolve=null)}_isSourcePlaying(){const _=this.source;return!_.paused&&!_.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const _=this.source;_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay);const A=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!A&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&_.play()}dispose(){this._configureAutoUpdate();const _=this.source;_&&(_.removeEventListener("play",this._onPlayStart),_.removeEventListener("pause",this._onPlayStop),_.removeEventListener("seeked",this._onSeeked),_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay),_.removeEventListener("error",this._onError,!0),_.pause(),_.src="",_.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){_!==this._autoUpdate&&(this._autoUpdate=_,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(_){_!==this._updateFPS&&(this._updateFPS=_,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(_,A){return globalThis.HTMLVideoElement&&_ instanceof HTMLVideoElement||Sn.TYPES.includes(A)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(_){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(_=_||new Rectangle(0,0,1,1),_.x=this.minX,_.y=this.minY,_.width=this.maxX-this.minX,_.height=this.maxY-this.minY,_)}addPoint(_){this.minX=Math.min(this.minX,_.x),this.maxX=Math.max(this.maxX,_.x),this.minY=Math.min(this.minY,_.y),this.maxY=Math.max(this.maxY,_.y)}addPointMatrix(_,A){const{a:T,b:B,c:I,d:C,tx:R,ty:L}=_,D=T*A.x+I*A.y+R,V=B*A.x+C*A.y+L;this.minX=Math.min(this.minX,D),this.maxX=Math.max(this.maxX,D),this.minY=Math.min(this.minY,V),this.maxY=Math.max(this.maxY,V)}addQuad(_){let A=this.minX,T=this.minY,B=this.maxX,I=this.maxY,C=_[0],R=_[1];A=C<A?C:A,T=R<T?R:T,B=C>B?C:B,I=R>I?R:I,C=_[2],R=_[3],A=C<A?C:A,T=R<T?R:T,B=C>B?C:B,I=R>I?R:I,C=_[4],R=_[5],A=C<A?C:A,T=R<T?R:T,B=C>B?C:B,I=R>I?R:I,C=_[6],R=_[7],A=C<A?C:A,T=R<T?R:T,B=C>B?C:B,I=R>I?R:I,this.minX=A,this.minY=T,this.maxX=B,this.maxY=I}addFrame(_,A,T,B,I){this.addFrameMatrix(_.worldTransform,A,T,B,I)}addFrameMatrix(_,A,T,B,I){const C=_.a,R=_.b,L=_.c,D=_.d,V=_.tx,U=_.ty;let z=this.minX,W=this.minY,Y=this.maxX,K=this.maxY,J=C*A+L*T+V,et=R*A+D*T+U;z=J<z?J:z,W=et<W?et:W,Y=J>Y?J:Y,K=et>K?et:K,J=C*B+L*T+V,et=R*B+D*T+U,z=J<z?J:z,W=et<W?et:W,Y=J>Y?J:Y,K=et>K?et:K,J=C*A+L*I+V,et=R*A+D*I+U,z=J<z?J:z,W=et<W?et:W,Y=J>Y?J:Y,K=et>K?et:K,J=C*B+L*I+V,et=R*B+D*I+U,z=J<z?J:z,W=et<W?et:W,Y=J>Y?J:Y,K=et>K?et:K,this.minX=z,this.minY=W,this.maxX=Y,this.maxY=K}addVertexData(_,A,T){let B=this.minX,I=this.minY,C=this.maxX,R=this.maxY;for(let L=A;L<T;L+=2){const D=_[L],V=_[L+1];B=D<B?D:B,I=V<I?V:I,C=D>C?D:C,R=V>R?V:R}this.minX=B,this.minY=I,this.maxX=C,this.maxY=R}addVertices(_,A,T,B){this.addVerticesMatrix(_.worldTransform,A,T,B)}addVerticesMatrix(_,A,T,B,I=0,C=I){const R=_.a,L=_.b,D=_.c,V=_.d,U=_.tx,z=_.ty;let W=this.minX,Y=this.minY,K=this.maxX,J=this.maxY;for(let et=T;et<B;et+=2){const it=A[et],rt=A[et+1],st=R*it+D*rt+U,lt=V*rt+L*it+z;W=Math.min(W,st-I),K=Math.max(K,st+I),Y=Math.min(Y,lt-C),J=Math.max(J,lt+C)}this.minX=W,this.minY=Y,this.maxX=K,this.maxY=J}addBounds(_){const A=this.minX,T=this.minY,B=this.maxX,I=this.maxY;this.minX=_.minX<A?_.minX:A,this.minY=_.minY<T?_.minY:T,this.maxX=_.maxX>B?_.maxX:B,this.maxY=_.maxY>I?_.maxY:I}addBoundsMask(_,A){const T=_.minX>A.minX?_.minX:A.minX,B=_.minY>A.minY?_.minY:A.minY,I=_.maxX<A.maxX?_.maxX:A.maxX,C=_.maxY<A.maxY?_.maxY:A.maxY;if(T<=I&&B<=C){const R=this.minX,L=this.minY,D=this.maxX,V=this.maxY;this.minX=T<R?T:R,this.minY=B<L?B:L,this.maxX=I>D?I:D,this.maxY=C>V?C:V}}addBoundsMatrix(_,A){this.addFrameMatrix(A,_.minX,_.minY,_.maxX,_.maxY)}addBoundsArea(_,A){const T=_.minX>A.x?_.minX:A.x,B=_.minY>A.y?_.minY:A.y,I=_.maxX<A.x+A.width?_.maxX:A.x+A.width,C=_.maxY<A.y+A.height?_.maxY:A.y+A.height;if(T<=I&&B<=C){const R=this.minX,L=this.minY,D=this.maxX,V=this.maxY;this.minX=T<R?T:R,this.minY=B<L?B:L,this.maxX=I>D?I:D,this.maxY=C>V?C:V}}pad(_=0,A=_){this.isEmpty()||(this.minX-=_,this.maxX+=_,this.minY-=A,this.maxY+=A)}addFramePad(_,A,T,B,I,C){_-=I,A-=C,T+=I,B+=C,this.minX=this.minX<_?this.minX:_,this.maxX=this.maxX>T?this.maxX:T,this.minY=this.minY<A?this.minY:A,this.maxY=this.maxY>B?this.maxY:B}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform$1,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(_){const A=Object.keys(_);for(let T=0;T<A.length;++T){const B=A[T];Object.defineProperty(DisplayObject.prototype,B,Object.getOwnPropertyDescriptor(_,B))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(_,A){return _||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),A||(this._boundsRect||(this._boundsRect=new Rectangle),A=this._boundsRect),this._bounds.getRectangle(A)}getLocalBounds(_){_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const A=this.transform,T=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(T==null?void 0:T.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const B=this._bounds,I=this._boundsID;this._bounds=this._localBounds;const C=this.getBounds(!1,_);return this.parent=T,this.transform=A,this._bounds=B,this._bounds.updateID+=this._boundsID-I,C}toGlobal(_,A,T=!1){return T||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(_,A)}toLocal(_,A,T,B){return A&&(_=A.toGlobal(_,T,B)),B||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(_,T)}setParent(_){if(!_||!_.addChild)throw new Error("setParent: Argument must be a Container");return _.addChild(this),_}removeFromParent(){var _;(_=this.parent)==null||_.removeChild(this)}setTransform(_=0,A=0,T=1,B=1,I=0,C=0,R=0,L=0,D=0){return this.position.x=_,this.position.y=A,this.scale.x=T||1,this.scale.y=B||1,this.rotation=I,this.skew.x=C,this.skew.y=R,this.pivot.x=L,this.pivot.y=D,this}destroy(_){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const _=this.parent;return this.parent=this._tempDisplayObjectParent,_}disableTempParent(_){this.parent=_}get x(){return this.position.x}set x(_){this.transform.position.x=_}get y(){return this.position.y}set y(_){this.transform.position.y=_}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(_){this.transform.position.copyFrom(_)}get scale(){return this.transform.scale}set scale(_){this.transform.scale.copyFrom(_)}get pivot(){return this.transform.pivot}set pivot(_){this.transform.pivot.copyFrom(_)}get skew(){return this.transform.skew}set skew(_){this.transform.skew.copyFrom(_)}get rotation(){return this.transform.rotation}set rotation(_){this.transform.rotation=_}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(_){this.transform.rotation=_*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(_){this._zIndex=_,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let _=this;do{if(!_.visible)return!1;_=_.parent}while(_);return!0}get mask(){return this._mask}set mask(_){if(this._mask!==_){if(this._mask){const A=this._mask.isMaskData?this._mask.maskObject:this._mask;A&&(A._maskRefCount--,A._maskRefCount===0&&(A.renderable=!0,A.isMask=!1))}if(this._mask=_,this._mask){const A=this._mask.isMaskData?this._mask.maskObject:this._mask;A&&(A._maskRefCount===0&&(A.renderable=!1,A.isMask=!0),A._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix=new Matrix;function sortChildren(E,_){return E.zIndex===_.zIndex?E._lastSortedIndex-_._lastSortedIndex:E.zIndex-_.zIndex}const _Container=class Pn extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=Pn.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(_){}addChild(..._){if(_.length>1)for(let A=0;A<_.length;A++)this.addChild(_[A]);else{const A=_[0];A.parent&&A.parent.removeChild(A),A.parent=this,this.sortDirty=!0,A.transform._parentID=-1,this.children.push(A),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",A,this,this.children.length-1),A.emit("added",this)}return _[0]}addChildAt(_,A){if(A<0||A>this.children.length)throw new Error(`${_}addChildAt: The index ${A} supplied is out of bounds ${this.children.length}`);return _.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.splice(A,0,_),this._boundsID++,this.onChildrenChange(A),_.emit("added",this),this.emit("childAdded",_,this,A),_}swapChildren(_,A){if(_===A)return;const T=this.getChildIndex(_),B=this.getChildIndex(A);this.children[T]=A,this.children[B]=_,this.onChildrenChange(T<B?T:B)}getChildIndex(_){const A=this.children.indexOf(_);if(A===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return A}setChildIndex(_,A){if(A<0||A>=this.children.length)throw new Error(`The index ${A} supplied is out of bounds ${this.children.length}`);const T=this.getChildIndex(_);removeItems(this.children,T,1),this.children.splice(A,0,_),this.onChildrenChange(A)}getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]}removeChild(..._){if(_.length>1)for(let A=0;A<_.length;A++)this.removeChild(_[A]);else{const A=_[0],T=this.children.indexOf(A);if(T===-1)return null;A.parent=null,A.transform._parentID=-1,removeItems(this.children,T,1),this._boundsID++,this.onChildrenChange(T),A.emit("removed",this),this.emit("childRemoved",A,this,T)}return _[0]}removeChildAt(_){const A=this.getChildAt(_);return A.parent=null,A.transform._parentID=-1,removeItems(this.children,_,1),this._boundsID++,this.onChildrenChange(_),A.emit("removed",this),this.emit("childRemoved",A,this,_),A}removeChildren(_=0,A=this.children.length){const T=_,B=A,I=B-T;let C;if(I>0&&I<=B){C=this.children.splice(T,I);for(let R=0;R<C.length;++R)C[R].parent=null,C[R].transform&&(C[R].transform._parentID=-1);this._boundsID++,this.onChildrenChange(_);for(let R=0;R<C.length;++R)C[R].emit("removed",this),this.emit("childRemoved",C[R],this,R);return C}else if(I===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let _=!1;for(let A=0,T=this.children.length;A<T;++A){const B=this.children[A];B._lastSortedIndex=A,!_&&B.zIndex!==0&&(_=!0)}_&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let _=0,A=this.children.length;_<A;++_){const T=this.children[_];T.visible&&T.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let _=0;_<this.children.length;_++){const A=this.children[_];if(!(!A.visible||!A.renderable))if(A.calculateBounds(),A._mask){const T=A._mask.isMaskData?A._mask.maskObject:A._mask;T?(T.calculateBounds(),this._bounds.addBoundsMask(A._bounds,T._bounds)):this._bounds.addBounds(A._bounds)}else A.filterArea?this._bounds.addBoundsArea(A._bounds,A.filterArea):this._bounds.addBounds(A._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(_,A=!1){const T=super.getLocalBounds(_);if(!A)for(let B=0,I=this.children.length;B<I;++B){const C=this.children[B];C.visible&&C.updateTransform()}return T}_calculateBounds(){}_renderWithCulling(_){const A=_.renderTexture.sourceFrame;if(!(A.width>0&&A.height>0))return;let T,B;this.cullArea?(T=this.cullArea,B=this.worldTransform):this._render!==Pn.prototype._render&&(T=this.getBounds(!0));const I=_.projection.transform;if(I&&(B?(B=tempMatrix.copyFrom(B),B.prepend(I)):B=I),T&&A.intersects(T,B))this._render(_);else if(this.cullArea)return;for(let C=0,R=this.children.length;C<R;++C){const L=this.children[C],D=L.cullable;L.cullable=D||!this.cullArea,L.render(_),L.cullable=D}}render(_){var A;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(A=this.filters)!=null&&A.length)this.renderAdvanced(_);else if(this.cullable)this._renderWithCulling(_);else{this._render(_);for(let T=0,B=this.children.length;T<B;++T)this.children[T].render(_)}}renderAdvanced(_){var I,C,R;const A=this.filters,T=this._mask;if(A){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let L=0;L<A.length;L++)A[L].enabled&&this._enabledFilters.push(A[L])}const B=A&&((I=this._enabledFilters)==null?void 0:I.length)||T&&(!T.isMaskData||T.enabled&&(T.autoDetect||T.type!==MASK_TYPES.NONE));if(B&&_.batch.flush(),A&&((C=this._enabledFilters)!=null&&C.length)&&_.filter.push(this,this._enabledFilters),T&&_.mask.push(this,this._mask),this.cullable)this._renderWithCulling(_);else{this._render(_);for(let L=0,D=this.children.length;L<D;++L)this.children[L].render(_)}B&&_.batch.flush(),T&&_.mask.pop(this),A&&((R=this._enabledFilters)!=null&&R.length)&&_.filter.pop()}_render(_){}destroy(_){super.destroy(),this.sortDirty=!1;const A=typeof _=="boolean"?_:_==null?void 0:_.children,T=this.removeChildren(0,this.children.length);if(A)for(let B=0;B<T.length;++B)T[B].destroy(_)}get width(){return this.scale.x*this.getLocalBounds().width}set width(_){const A=this.getLocalBounds().width;A!==0?this.scale.x=_/A:this.scale.x=1,this._width=_}get height(){return this.scale.y*this.getLocalBounds().height}set height(_){const A=this.getLocalBounds().height;A!==0?this.scale.y=_/A:this.scale.y=1,this._height=_}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(E){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=E}}});const tempPoint$1=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(_){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,_?_.defaultAnchor.x:0,_?_.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=_||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const _=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===_._updateID)return;this._textureID!==_._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=_._updateID;const A=this.transform.worldTransform,T=A.a,B=A.b,I=A.c,C=A.d,R=A.tx,L=A.ty,D=this.vertexData,V=_.trim,U=_.orig,z=this._anchor;let W=0,Y=0,K=0,J=0;if(V?(Y=V.x-z._x*U.width,W=Y+V.width,J=V.y-z._y*U.height,K=J+V.height):(Y=-z._x*U.width,W=Y+U.width,J=-z._y*U.height,K=J+U.height),D[0]=T*Y+I*J+R,D[1]=C*J+B*Y+L,D[2]=T*W+I*J+R,D[3]=C*J+B*W+L,D[4]=T*W+I*K+R,D[5]=C*K+B*W+L,D[6]=T*Y+I*K+R,D[7]=C*K+B*Y+L,this._roundPixels){const et=settings.RESOLUTION;for(let it=0;it<D.length;++it)D[it]=Math.round(D[it]*et)/et}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const _=this._texture,A=this.vertexTrimmedData,T=_.orig,B=this._anchor,I=this.transform.worldTransform,C=I.a,R=I.b,L=I.c,D=I.d,V=I.tx,U=I.ty,z=-B._x*T.width,W=z+T.width,Y=-B._y*T.height,K=Y+T.height;if(A[0]=C*z+L*Y+V,A[1]=D*Y+R*z+U,A[2]=C*W+L*Y+V,A[3]=D*Y+R*W+U,A[4]=C*W+L*K+V,A[5]=D*K+R*W+U,A[6]=C*z+L*K+V,A[7]=D*K+R*z+U,this._roundPixels){const J=settings.RESOLUTION;for(let et=0;et<A.length;++et)A[et]=Math.round(A[et]*J)/J}}_render(_){this.calculateVertices(),_.batch.setObjectRenderer(_.plugins[this.pluginName]),_.plugins[this.pluginName].render(this)}_calculateBounds(){const _=this._texture.trim,A=this._texture.orig;!_||_.width===A.width&&_.height===A.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(_){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds.getRectangle(_)):super.getLocalBounds.call(this,_)}containsPoint(_){this.worldTransform.applyInverse(_,tempPoint$1);const A=this._texture.orig.width,T=this._texture.orig.height,B=-A*this.anchor.x;let I=0;return tempPoint$1.x>=B&&tempPoint$1.x<B+A&&(I=-T*this.anchor.y,tempPoint$1.y>=I&&tempPoint$1.y<I+T)}destroy(_){if(super.destroy(_),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof _=="boolean"?_:_==null?void 0:_.texture){const A=typeof _=="boolean"?_:_==null?void 0:_.baseTexture;this._texture.destroy(!!A)}this._texture=null}static from(_,A){const T=_ instanceof Texture?_:Texture.from(_,A);return new Sprite(T)}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(_){const A=sign(this.scale.x)||1;this.scale.x=A*_/this._texture.orig.width,this._width=_}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(_){const A=sign(this.scale.y)||1;this.scale.y=A*_/this._texture.orig.height,this._height=_}get anchor(){return this._anchor}set anchor(_){this._anchor.copyFrom(_)}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(_){this._texture!==_&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=_||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,_&&(_.baseTexture.valid?this._onTextureUpdate():_.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(E){E!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=E,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(E){E!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=E,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(E){if(this._cacheAsBitmap===E)return;this._cacheAsBitmap=E;let _;E?(this._cacheData||(this._cacheData=new CacheData),_=this._cacheData,_.originalRender=this.render,_.originalRenderCanvas=this.renderCanvas,_.originalUpdateTransform=this.updateTransform,_.originalCalculateBounds=this.calculateBounds,_.originalGetLocalBounds=this.getLocalBounds,_.originalDestroy=this.destroy,_.originalContainsPoint=this.containsPoint,_.originalMask=this._mask,_.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(_=this._cacheData,_.sprite&&this._destroyCachedDisplayObject(),this.render=_.originalRender,this.renderCanvas=_.originalRenderCanvas,this.calculateBounds=_.originalCalculateBounds,this.getLocalBounds=_.originalGetLocalBounds,this.destroy=_.originalDestroy,this.updateTransform=_.originalUpdateTransform,this.containsPoint=_.originalContainsPoint,this._mask=_.originalMask,this.filterArea=_.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(E){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(E),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(E))};DisplayObject.prototype._initCachedDisplayObject=function(E){var z,W;if((z=this._cacheData)!=null&&z.sprite)return;const _=this.alpha;this.alpha=1,E.batch.flush();const A=this.getLocalBounds(new Rectangle,!0);if((W=this.filters)!=null&&W.length){const Y=this.filters[0].padding;A.pad(Y)}const T=this.cacheAsBitmapResolution||E.resolution;A.ceil(T),A.width=Math.max(A.width,1/T),A.height=Math.max(A.height,1/T);const B=E.renderTexture.current,I=E.renderTexture.sourceFrame.clone(),C=E.renderTexture.destinationFrame.clone(),R=E.projection.transform,L=RenderTexture.create({width:A.width,height:A.height,resolution:T,multisample:this.cacheAsBitmapMultisample??E.multisample}),D=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=D,BaseTexture.addToCache(L.baseTexture,D),Texture.addToCache(L,D);const V=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-A.x,-A.y);this.render=this._cacheData.originalRender,E.render(this,{renderTexture:L,clear:!0,transform:V,skipUpdateTransform:!1}),E.framebuffer.blit(),E.projection.transform=R,E.renderTexture.bind(B,I,C),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=_;const U=new Sprite(L);U.transform.worldTransform=this.transform.worldTransform,U.anchor.x=-(A.x/A.width),U.anchor.y=-(A.y/A.height),U.alpha=_,U._bounds=this._bounds,this._cacheData.sprite=U,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=U.containsPoint.bind(U)};DisplayObject.prototype._renderCachedCanvas=function(E){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(E),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(E))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(E){var V;if((V=this._cacheData)!=null&&V.sprite)return;const _=this.getLocalBounds(new Rectangle,!0),A=this.alpha;this.alpha=1;const T=E.canvasContext.activeContext,B=E._projTransform,I=this.cacheAsBitmapResolution||E.resolution;_.ceil(I),_.width=Math.max(_.width,1/I),_.height=Math.max(_.height,1/I);const C=RenderTexture.create({width:_.width,height:_.height,resolution:I}),R=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=R,BaseTexture.addToCache(C.baseTexture,R),Texture.addToCache(C,R);const L=_tempMatrix;this.transform.localTransform.copyTo(L),L.invert(),L.tx-=_.x,L.ty-=_.y,this.renderCanvas=this._cacheData.originalRenderCanvas,E.render(this,{renderTexture:C,clear:!0,transform:L,skipUpdateTransform:!1}),E.canvasContext.activeContext=T,E._projTransform=B,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=A;const D=new Sprite(C);D.transform.worldTransform=this.transform.worldTransform,D.anchor.x=-(_.x/_.width),D.anchor.y=-(_.y/_.height),D.alpha=A,D._bounds=this._bounds,this._cacheData.sprite=D,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=E._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=D.containsPoint.bind(D)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(E){this.cacheAsBitmap=!1,this.destroy(E)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(E,_){for(let A=0,T=this.children.length;A<T;A++)if(this.children[A].name===E)return this.children[A];if(_)for(let A=0,T=this.children.length;A<T;A++){const B=this.children[A];if(!B.getChildByName)continue;const I=B.getChildByName(E,!0);if(I)return I}return null};DisplayObject.prototype.getGlobalPosition=function(E=new Point,_=!1){return this.parent?this.parent.toGlobal(this.position,E,_):(E.x=this.position.x,E.y=this.position.y),E};var fragment$6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter{constructor(_=1){super(defaultVertex,fragment$6,{uAlpha:1}),this.alpha=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(E){const _=GAUSSIAN_VALUES[E],A=_.length;let T=fragTemplate,B="";const I="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let C;for(let R=0;R<E;R++){let L=I.replace("%index%",R.toString());C=R,R>=A&&(C=E-R-1),L=L.replace("%value%",_[C].toString()),B+=L,B+=`
`}return T=T.replace("%blur%",B),T=T.replace("%size%",E.toString()),T}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(E,_){const A=Math.ceil(E/2);let T=vertTemplate,B="",I;_?I="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":I="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let C=0;C<E;C++){let R=I.replace("%index%",C.toString());R=R.replace("%sampleIndex%",`${C-(A-1)}.0`),B+=R,B+=`
`}return T=T.replace("%blur%",B),T=T.replace("%size%",E.toString()),T}class BlurFilterPass extends Filter{constructor(_,A=8,T=4,B=Filter.defaultResolution,I=5){const C=generateBlurVertSource(I,_),R=generateBlurFragSource(I);super(C,R),this.horizontal=_,this.resolution=B,this._quality=0,this.quality=T,this.blur=A}apply(_,A,T,B){if(T?this.horizontal?this.uniforms.strength=1/T.width*(T.width/A.width):this.uniforms.strength=1/T.height*(T.height/A.height):this.horizontal?this.uniforms.strength=1/_.renderer.width*(_.renderer.width/A.width):this.uniforms.strength=1/_.renderer.height*(_.renderer.height/A.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)_.applyFilter(this,A,T,B);else{const I=_.getFilterTexture(),C=_.renderer;let R=A,L=I;this.state.blend=!1,_.applyFilter(this,R,L,CLEAR_MODES.CLEAR);for(let D=1;D<this.passes-1;D++){_.bindAndClear(R,CLEAR_MODES.BLIT),this.uniforms.uSampler=L;const V=L;L=R,R=V,C.shader.bind(this),C.geometry.draw(5)}this.state.blend=!0,_.applyFilter(this,L,T,B),_.returnFilterTexture(I)}}get blur(){return this.strength}set blur(_){this.padding=1+Math.abs(_)*2,this.strength=_}get quality(){return this._quality}set quality(_){this._quality=_,this.passes=_}}class BlurFilter extends Filter{constructor(_=8,A=4,T=Filter.defaultResolution,B=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,_,A,T,B),this.blurYFilter=new BlurFilterPass(!1,_,A,T,B),this.resolution=T,this.quality=A,this.blur=_,this.repeatEdgePixels=!1}apply(_,A,T,B){const I=Math.abs(this.blurXFilter.strength),C=Math.abs(this.blurYFilter.strength);if(I&&C){const R=_.getFilterTexture();this.blurXFilter.apply(_,A,R,CLEAR_MODES.CLEAR),this.blurYFilter.apply(_,R,T,B),_.returnFilterTexture(R)}else C?this.blurYFilter.apply(_,A,T,B):this.blurXFilter.apply(_,A,T,B)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(_){this.blurXFilter.blur=this.blurYFilter.blur=_,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(_){this.blurXFilter.quality=this.blurYFilter.quality=_}get blurX(){return this.blurXFilter.blur}set blurX(_){this.blurXFilter.blur=_,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(_){this.blurYFilter.blur=_,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(_){this.blurYFilter.blendMode=_}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(_){this._repeatEdgePixels=_,this.updatePadding()}}var fragment$5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter{constructor(){const _={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$5,_),this.alpha=1}_loadMatrix(_,A=!1){let T=_;A&&(this._multiply(T,this.uniforms.m,_),T=this._colorMatrix(T)),this.uniforms.m=T}_multiply(_,A,T){return _[0]=A[0]*T[0]+A[1]*T[5]+A[2]*T[10]+A[3]*T[15],_[1]=A[0]*T[1]+A[1]*T[6]+A[2]*T[11]+A[3]*T[16],_[2]=A[0]*T[2]+A[1]*T[7]+A[2]*T[12]+A[3]*T[17],_[3]=A[0]*T[3]+A[1]*T[8]+A[2]*T[13]+A[3]*T[18],_[4]=A[0]*T[4]+A[1]*T[9]+A[2]*T[14]+A[3]*T[19]+A[4],_[5]=A[5]*T[0]+A[6]*T[5]+A[7]*T[10]+A[8]*T[15],_[6]=A[5]*T[1]+A[6]*T[6]+A[7]*T[11]+A[8]*T[16],_[7]=A[5]*T[2]+A[6]*T[7]+A[7]*T[12]+A[8]*T[17],_[8]=A[5]*T[3]+A[6]*T[8]+A[7]*T[13]+A[8]*T[18],_[9]=A[5]*T[4]+A[6]*T[9]+A[7]*T[14]+A[8]*T[19]+A[9],_[10]=A[10]*T[0]+A[11]*T[5]+A[12]*T[10]+A[13]*T[15],_[11]=A[10]*T[1]+A[11]*T[6]+A[12]*T[11]+A[13]*T[16],_[12]=A[10]*T[2]+A[11]*T[7]+A[12]*T[12]+A[13]*T[17],_[13]=A[10]*T[3]+A[11]*T[8]+A[12]*T[13]+A[13]*T[18],_[14]=A[10]*T[4]+A[11]*T[9]+A[12]*T[14]+A[13]*T[19]+A[14],_[15]=A[15]*T[0]+A[16]*T[5]+A[17]*T[10]+A[18]*T[15],_[16]=A[15]*T[1]+A[16]*T[6]+A[17]*T[11]+A[18]*T[16],_[17]=A[15]*T[2]+A[16]*T[7]+A[17]*T[12]+A[18]*T[17],_[18]=A[15]*T[3]+A[16]*T[8]+A[17]*T[13]+A[18]*T[18],_[19]=A[15]*T[4]+A[16]*T[9]+A[17]*T[14]+A[18]*T[19]+A[19],_}_colorMatrix(_){const A=new Float32Array(_);return A[4]/=255,A[9]/=255,A[14]/=255,A[19]/=255,A}brightness(_,A){const T=[_,0,0,0,0,0,_,0,0,0,0,0,_,0,0,0,0,0,1,0];this._loadMatrix(T,A)}tint(_,A){const[T,B,I]=Color.shared.setValue(_).toArray(),C=[T,0,0,0,0,0,B,0,0,0,0,0,I,0,0,0,0,0,1,0];this._loadMatrix(C,A)}greyscale(_,A){const T=[_,_,_,0,0,_,_,_,0,0,_,_,_,0,0,0,0,0,1,0];this._loadMatrix(T,A)}blackAndWhite(_){const A=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(A,_)}hue(_,A){_=(_||0)/180*Math.PI;const T=Math.cos(_),B=Math.sin(_),I=Math.sqrt,C=1/3,R=I(C),L=T+(1-T)*C,D=C*(1-T)-R*B,V=C*(1-T)+R*B,U=C*(1-T)+R*B,z=T+C*(1-T),W=C*(1-T)-R*B,Y=C*(1-T)-R*B,K=C*(1-T)+R*B,J=T+C*(1-T),et=[L,D,V,0,0,U,z,W,0,0,Y,K,J,0,0,0,0,0,1,0];this._loadMatrix(et,A)}contrast(_,A){const T=(_||0)+1,B=-.5*(T-1),I=[T,0,0,0,B,0,T,0,0,B,0,0,T,0,B,0,0,0,1,0];this._loadMatrix(I,A)}saturate(_=0,A){const T=_*2/3+1,B=(T-1)*-.5,I=[T,B,B,0,0,B,T,B,0,0,B,B,T,0,0,0,0,0,1,0];this._loadMatrix(I,A)}desaturate(){this.saturate(-1)}negative(_){const A=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(A,_)}sepia(_){const A=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(A,_)}technicolor(_){const A=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(A,_)}polaroid(_){const A=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(A,_)}toBGR(_){const A=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(A,_)}kodachrome(_){const A=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(A,_)}browni(_){const A=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(A,_)}vintage(_){const A=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(A,_)}colorTone(_,A,T,B,I){_=_||.2,A=A||.15,T=T||16770432,B=B||3375104;const C=Color.shared,[R,L,D]=C.setValue(T).toArray(),[V,U,z]=C.setValue(B).toArray(),W=[.3,.59,.11,0,0,R,L,D,_,0,V,U,z,A,0,R-V,L-U,D-z,0,0];this._loadMatrix(W,I)}night(_,A){_=_||.1;const T=[_*-2,-_,0,0,0,-_,0,_,0,0,0,_,_*2,0,0,0,0,0,1,0];this._loadMatrix(T,A)}predator(_,A){const T=[11.224130630493164*_,-4.794486999511719*_,-2.8746118545532227*_,0*_,.40342438220977783*_,-3.6330697536468506*_,9.193157196044922*_,-2.951810836791992*_,0*_,-1.316135048866272*_,-3.2184197902679443*_,-4.2375030517578125*_,7.476448059082031*_,0*_,.8044459223747253*_,0,0,0,1,0];this._loadMatrix(T,A)}lsd(_){const A=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(A,_)}reset(){const _=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(_,!1)}get matrix(){return this.uniforms.m}set matrix(_){this.uniforms.m=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter{constructor(_,A){const T=new Matrix;_.renderable=!1,super(vertex$3,fragment$4,{mapSampler:_._texture,filterMatrix:T,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=_,this.maskMatrix=T,A==null&&(A=20),this.scale=new Point(A,A)}apply(_,A,T,B){this.uniforms.filterMatrix=_.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const I=this.maskSprite.worldTransform,C=Math.sqrt(I.a*I.a+I.b*I.b),R=Math.sqrt(I.c*I.c+I.d*I.d);C!==0&&R!==0&&(this.uniforms.rotation[0]=I.a/C,this.uniforms.rotation[1]=I.b/C,this.uniforms.rotation[2]=I.c/R,this.uniforms.rotation[3]=I.d/R),_.applyFilter(this,A,T,B)}get map(){return this.uniforms.mapSampler}set map(_){this.uniforms.mapSampler=_}}var fragment$3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex$2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter{constructor(){super(vertex$2,fragment$3)}}var fragment$2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter{constructor(_=.5,A=Math.random()){super(defaultFilterVertex,fragment$2,{uNoise:0,uSeed:0}),this.noise=_,this.seed=A}get noise(){return this.uniforms.uNoise}set noise(_){this.uniforms.uNoise=_}get seed(){return this.uniforms.uSeed}set seed(_){this.uniforms.uSeed=_}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([E,_])=>{Object.defineProperty(filters,E,{get(){return deprecation("7.1.0",`filters.${E} has moved to ${E}`),_}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(_){this.removeTickerListener(),this.events=_,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(_){this._pauseUpdate=_}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const _=this.events.rootPointerEvent;this.events.supportsTouchEvents&&_.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:_.clientX,clientY:_.clientY}))}tickerUpdate(_){this._deltaTime+=_,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(_){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=_}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(_,A,T){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(_,A,T,B,I){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(_,A,T){return _.worldTransform.applyInverse(T||this.global,A)}getModifierState(_){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(_)}initMouseEvent(_,A,T,B,I,C,R,L,D,V,U,z,W,Y,K){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(_){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=_,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(_,A){this.mappingTable[_]||(this.mappingTable[_]=[]),this.mappingTable[_].push({fn:A,priority:0}),this.mappingTable[_].sort((T,B)=>T.priority-B.priority)}dispatchEvent(_,A){_.propagationStopped=!1,_.propagationImmediatelyStopped=!1,this.propagate(_,A),this.dispatch.emit(A||_.type,_)}mapEvent(_){if(!this.rootTarget)return;const A=this.mappingTable[_.type];if(A)for(let T=0,B=A.length;T<B;T++)A[T].fn(_);else console.warn(`[EventBoundary]: Event mapping not defined for ${_.type}`)}hitTest(_,A){EventsTicker.pauseUpdate=!0;const T=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",B=this[T](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(_,A),this.hitTestFn,this.hitPruneFn);return B&&B[0]}propagate(_,A){if(!_.target)return;const T=_.composedPath();_.eventPhase=_.CAPTURING_PHASE;for(let B=0,I=T.length-1;B<I;B++)if(_.currentTarget=T[B],this.notifyTarget(_,A),_.propagationStopped||_.propagationImmediatelyStopped)return;if(_.eventPhase=_.AT_TARGET,_.currentTarget=_.target,this.notifyTarget(_,A),!(_.propagationStopped||_.propagationImmediatelyStopped)){_.eventPhase=_.BUBBLING_PHASE;for(let B=T.length-2;B>=0;B--)if(_.currentTarget=T[B],this.notifyTarget(_,A),_.propagationStopped||_.propagationImmediatelyStopped)return}}all(_,A,T=this._allInteractiveElements){if(T.length===0)return;_.eventPhase=_.BUBBLING_PHASE;const B=Array.isArray(A)?A:[A];for(let I=T.length-1;I>=0;I--)B.forEach(C=>{_.currentTarget=T[I],this.notifyTarget(_,C)})}propagationPath(_){const A=[_];for(let T=0;T<PROPAGATION_LIMIT&&_!==this.rootTarget;T++){if(!_.parent)throw new Error("Cannot find propagation path to disconnected target");A.push(_.parent),_=_.parent}return A.reverse(),A}hitTestMoveRecursive(_,A,T,B,I,C=!1){let R=!1;if(this._interactivePrune(_))return null;if((_.eventMode==="dynamic"||A==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const V=_.children;for(let U=V.length-1;U>=0;U--){const z=V[U],W=this.hitTestMoveRecursive(z,this._isInteractive(A)?A:z.eventMode,T,B,I,C||I(_,T));if(W){if(W.length>0&&!W[W.length-1].parent)continue;const Y=_.isInteractive();(W.length>0||Y)&&(Y&&this._allInteractiveElements.push(_),W.push(_)),this._hitElements.length===0&&(this._hitElements=W),R=!0}}}const L=this._isInteractive(A),D=_.isInteractive();return L&&D&&this._allInteractiveElements.push(_),C||this._hitElements.length>0?null:R?this._hitElements:L&&!I(_,T)&&B(_,T)?D?[_]:[]:null}hitTestRecursive(_,A,T,B,I){if(this._interactivePrune(_)||I(_,T))return null;if((_.eventMode==="dynamic"||A==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const L=_.children;for(let D=L.length-1;D>=0;D--){const V=L[D],U=this.hitTestRecursive(V,this._isInteractive(A)?A:V.eventMode,T,B,I);if(U){if(U.length>0&&!U[U.length-1].parent)continue;const z=_.isInteractive();return(U.length>0||z)&&U.push(_),U}}}const C=this._isInteractive(A),R=_.isInteractive();return C&&B(_,T)?R?[_]:[]:null}_isInteractive(_){return _==="static"||_==="dynamic"}_interactivePrune(_){return!!(!_||_.isMask||!_.visible||!_.renderable||_.eventMode==="none"||_.eventMode==="passive"&&!_.interactiveChildren||_.isMask)}hitPruneFn(_,A){var T;if(_.hitArea&&(_.worldTransform.applyInverse(A,tempLocalMapping),!_.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(_._mask){const B=_._mask.isMaskData?_._mask.maskObject:_._mask;if(B&&!((T=B.containsPoint)!=null&&T.call(B,A)))return!0}return!1}hitTestFn(_,A){return _.eventMode==="passive"?!1:_.hitArea?!0:_.containsPoint?_.containsPoint(A):!1}notifyTarget(_,A){var I,C;A=A??_.type;const T=`on${A}`;(C=(I=_.currentTarget)[T])==null||C.call(I,_);const B=_.eventPhase===_.CAPTURING_PHASE||_.eventPhase===_.AT_TARGET?`${A}capture`:A;this.notifyListeners(_,B),_.eventPhase===_.AT_TARGET&&this.notifyListeners(_,A)}mapPointerDown(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=this.createPointerEvent(_);if(this.dispatchEvent(A,"pointerdown"),A.pointerType==="touch")this.dispatchEvent(A,"touchstart");else if(A.pointerType==="mouse"||A.pointerType==="pen"){const B=A.button===2;this.dispatchEvent(A,B?"rightdown":"mousedown")}const T=this.trackingData(_.pointerId);T.pressTargetsByButton[_.button]=A.composedPath(),this.freeEvent(A)}mapPointerMove(_){var L,D;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const A=this.createPointerEvent(_);this._isPointerMoveEvent=!1;const T=A.pointerType==="mouse"||A.pointerType==="pen",B=this.trackingData(_.pointerId),I=this.findMountedTarget(B.overTargets);if(((L=B.overTargets)==null?void 0:L.length)>0&&I!==A.target){const V=_.type==="mousemove"?"mouseout":"pointerout",U=this.createPointerEvent(_,V,I);if(this.dispatchEvent(U,"pointerout"),T&&this.dispatchEvent(U,"mouseout"),!A.composedPath().includes(I)){const z=this.createPointerEvent(_,"pointerleave",I);for(z.eventPhase=z.AT_TARGET;z.target&&!A.composedPath().includes(z.target);)z.currentTarget=z.target,this.notifyTarget(z),T&&this.notifyTarget(z,"mouseleave"),z.target=z.target.parent;this.freeEvent(z)}this.freeEvent(U)}if(I!==A.target){const V=_.type==="mousemove"?"mouseover":"pointerover",U=this.clonePointerEvent(A,V);this.dispatchEvent(U,"pointerover"),T&&this.dispatchEvent(U,"mouseover");let z=I==null?void 0:I.parent;for(;z&&z!==this.rootTarget.parent&&z!==A.target;)z=z.parent;if(!z||z===this.rootTarget.parent){const W=this.clonePointerEvent(A,"pointerenter");for(W.eventPhase=W.AT_TARGET;W.target&&W.target!==I&&W.target!==this.rootTarget.parent;)W.currentTarget=W.target,this.notifyTarget(W),T&&this.notifyTarget(W,"mouseenter"),W.target=W.target.parent;this.freeEvent(W)}this.freeEvent(U)}const C=[],R=this.enableGlobalMoveEvents??!0;this.moveOnAll?C.push("pointermove"):this.dispatchEvent(A,"pointermove"),R&&C.push("globalpointermove"),A.pointerType==="touch"&&(this.moveOnAll?C.splice(1,0,"touchmove"):this.dispatchEvent(A,"touchmove"),R&&C.push("globaltouchmove")),T&&(this.moveOnAll?C.splice(1,0,"mousemove"):this.dispatchEvent(A,"mousemove"),R&&C.push("globalmousemove"),this.cursor=(D=A.target)==null?void 0:D.cursor),C.length>0&&this.all(A,C),this._allInteractiveElements.length=0,this._hitElements.length=0,B.overTargets=A.composedPath(),this.freeEvent(A)}mapPointerOver(_){var C;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=this.trackingData(_.pointerId),T=this.createPointerEvent(_),B=T.pointerType==="mouse"||T.pointerType==="pen";this.dispatchEvent(T,"pointerover"),B&&this.dispatchEvent(T,"mouseover"),T.pointerType==="mouse"&&(this.cursor=(C=T.target)==null?void 0:C.cursor);const I=this.clonePointerEvent(T,"pointerenter");for(I.eventPhase=I.AT_TARGET;I.target&&I.target!==this.rootTarget.parent;)I.currentTarget=I.target,this.notifyTarget(I),B&&this.notifyTarget(I,"mouseenter"),I.target=I.target.parent;A.overTargets=T.composedPath(),this.freeEvent(T),this.freeEvent(I)}mapPointerOut(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=this.trackingData(_.pointerId);if(A.overTargets){const T=_.pointerType==="mouse"||_.pointerType==="pen",B=this.findMountedTarget(A.overTargets),I=this.createPointerEvent(_,"pointerout",B);this.dispatchEvent(I),T&&this.dispatchEvent(I,"mouseout");const C=this.createPointerEvent(_,"pointerleave",B);for(C.eventPhase=C.AT_TARGET;C.target&&C.target!==this.rootTarget.parent;)C.currentTarget=C.target,this.notifyTarget(C),T&&this.notifyTarget(C,"mouseleave"),C.target=C.target.parent;A.overTargets=null,this.freeEvent(I),this.freeEvent(C)}this.cursor=null}mapPointerUp(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=performance.now(),T=this.createPointerEvent(_);if(this.dispatchEvent(T,"pointerup"),T.pointerType==="touch")this.dispatchEvent(T,"touchend");else if(T.pointerType==="mouse"||T.pointerType==="pen"){const R=T.button===2;this.dispatchEvent(T,R?"rightup":"mouseup")}const B=this.trackingData(_.pointerId),I=this.findMountedTarget(B.pressTargetsByButton[_.button]);let C=I;if(I&&!T.composedPath().includes(I)){let R=I;for(;R&&!T.composedPath().includes(R);){if(T.currentTarget=R,this.notifyTarget(T,"pointerupoutside"),T.pointerType==="touch")this.notifyTarget(T,"touchendoutside");else if(T.pointerType==="mouse"||T.pointerType==="pen"){const L=T.button===2;this.notifyTarget(T,L?"rightupoutside":"mouseupoutside")}R=R.parent}delete B.pressTargetsByButton[_.button],C=R}if(C){const R=this.clonePointerEvent(T,"click");R.target=C,R.path=null,B.clicksByButton[_.button]||(B.clicksByButton[_.button]={clickCount:0,target:R.target,timeStamp:A});const L=B.clicksByButton[_.button];if(L.target===R.target&&A-L.timeStamp<200?++L.clickCount:L.clickCount=1,L.target=R.target,L.timeStamp=A,R.detail=L.clickCount,R.pointerType==="mouse"){const D=R.button===2;this.dispatchEvent(R,D?"rightclick":"click")}else R.pointerType==="touch"&&this.dispatchEvent(R,"tap");this.dispatchEvent(R,"pointertap"),this.freeEvent(R)}this.freeEvent(T)}mapPointerUpOutside(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const A=this.trackingData(_.pointerId),T=this.findMountedTarget(A.pressTargetsByButton[_.button]),B=this.createPointerEvent(_);if(T){let I=T;for(;I;)B.currentTarget=I,this.notifyTarget(B,"pointerupoutside"),B.pointerType==="touch"?this.notifyTarget(B,"touchendoutside"):(B.pointerType==="mouse"||B.pointerType==="pen")&&this.notifyTarget(B,B.button===2?"rightupoutside":"mouseupoutside"),I=I.parent;delete A.pressTargetsByButton[_.button]}this.freeEvent(B)}mapWheel(_){if(!(_ instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const A=this.createWheelEvent(_);this.dispatchEvent(A),this.freeEvent(A)}findMountedTarget(_){if(!_)return null;let A=_[0];for(let T=1;T<_.length&&_[T].parent===A;T++)A=_[T];return A}createPointerEvent(_,A,T){const B=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(_,B),this.copyMouseData(_,B),this.copyData(_,B),B.nativeEvent=_.nativeEvent,B.originalEvent=_,B.target=T??this.hitTest(B.global.x,B.global.y)??this._hitElements[0],typeof A=="string"&&(B.type=A),B}createWheelEvent(_){const A=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(_,A),this.copyMouseData(_,A),this.copyData(_,A),A.nativeEvent=_.nativeEvent,A.originalEvent=_,A.target=this.hitTest(A.global.x,A.global.y),A}clonePointerEvent(_,A){const T=this.allocateEvent(FederatedPointerEvent);return T.nativeEvent=_.nativeEvent,T.originalEvent=_.originalEvent,this.copyPointerData(_,T),this.copyMouseData(_,T),this.copyData(_,T),T.target=_.target,T.path=_.composedPath().slice(),T.type=A??T.type,T}copyWheelData(_,A){A.deltaMode=_.deltaMode,A.deltaX=_.deltaX,A.deltaY=_.deltaY,A.deltaZ=_.deltaZ}copyPointerData(_,A){_ instanceof FederatedPointerEvent&&A instanceof FederatedPointerEvent&&(A.pointerId=_.pointerId,A.width=_.width,A.height=_.height,A.isPrimary=_.isPrimary,A.pointerType=_.pointerType,A.pressure=_.pressure,A.tangentialPressure=_.tangentialPressure,A.tiltX=_.tiltX,A.tiltY=_.tiltY,A.twist=_.twist)}copyMouseData(_,A){_ instanceof FederatedMouseEvent&&A instanceof FederatedMouseEvent&&(A.altKey=_.altKey,A.button=_.button,A.buttons=_.buttons,A.client.copyFrom(_.client),A.ctrlKey=_.ctrlKey,A.metaKey=_.metaKey,A.movement.copyFrom(_.movement),A.screen.copyFrom(_.screen),A.shiftKey=_.shiftKey,A.global.copyFrom(_.global))}copyData(_,A){A.isTrusted=_.isTrusted,A.srcElement=_.srcElement,A.timeStamp=performance.now(),A.type=_.type,A.detail=_.detail,A.view=_.view,A.which=_.which,A.layer.copyFrom(_.layer),A.page.copyFrom(_.page)}trackingData(_){return this.mappingState.trackingData[_]||(this.mappingState.trackingData[_]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[_]}allocateEvent(_){this.eventPool.has(_)||this.eventPool.set(_,[]);const A=this.eventPool.get(_).pop()||new _(this);return A.eventPhase=A.NONE,A.currentTarget=null,A.path=null,A.target=null,A}freeEvent(_){if(_.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const A=_.constructor;this.eventPool.has(A)||this.eventPool.set(A,[]),this.eventPool.get(A).push(_)}notifyListeners(_,A){const T=_.currentTarget._events[A];if(T&&_.currentTarget.isInteractive())if("fn"in T)T.once&&_.currentTarget.removeListener(A,T.fn,void 0,!0),T.fn.call(T.context,_);else for(let B=0,I=T.length;B<I&&!_.propagationImmediatelyStopped;B++)T[B].once&&_.currentTarget.removeListener(A,T[B].fn,void 0,!0),T[B].fn.call(T[B].context,_)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class Cn{constructor(_){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=_,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Cn.defaultEventFeatures},{set:(A,T,B)=>(T==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=B),A[T]=B,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(_){const{view:A,resolution:T}=this.renderer;this.setTargetElement(A),this.resolution=T,Cn._defaultEventMode=_.eventMode??"auto",Object.assign(this.features,_.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(_){this.resolution=_}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(_){_=_||"default";let A=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(A=!1),this.currentCursor===_)return;this.currentCursor=_;const T=this.cursorStyles[_];if(T)switch(typeof T){case"string":A&&(this.domElement.style.cursor=T);break;case"function":T(_);break;case"object":A&&Object.assign(this.domElement.style,T);break}else A&&typeof _=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,_)&&(this.domElement.style.cursor=_)}get pointer(){return this.rootPointerEvent}onPointerDown(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const A=this.normalizeToPointerData(_);this.autoPreventDefault&&A[0].isNormalized&&(_.cancelable||!("cancelable"in _))&&_.preventDefault();for(let T=0,B=A.length;T<B;T++){const I=A[T],C=this.bootstrapEvent(this.rootPointerEvent,I);this.rootBoundary.mapEvent(C)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(_){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const A=this.normalizeToPointerData(_);for(let T=0,B=A.length;T<B;T++){const I=this.bootstrapEvent(this.rootPointerEvent,A[T]);this.rootBoundary.mapEvent(I)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let A=_.target;_.composedPath&&_.composedPath().length>0&&(A=_.composedPath()[0]);const T=A!==this.domElement?"outside":"",B=this.normalizeToPointerData(_);for(let I=0,C=B.length;I<C;I++){const R=this.bootstrapEvent(this.rootPointerEvent,B[I]);R.type+=T,this.rootBoundary.mapEvent(R)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const A=this.normalizeToPointerData(_);for(let T=0,B=A.length;T<B;T++){const I=this.bootstrapEvent(this.rootPointerEvent,A[T]);this.rootBoundary.mapEvent(I)}this.setCursor(this.rootBoundary.cursor)}onWheel(_){if(!this.features.wheel)return;const A=this.normalizeWheelEvent(_);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(A)}setTargetElement(_){this.removeEvents(),this.domElement=_,EventsTicker.domElement=_,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const _=this.domElement.style;_&&(globalThis.navigator.msPointerEnabled?(_.msContentZooming="none",_.msTouchAction="none"):this.supportsPointerEvents&&(_.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const _=this.domElement.style;globalThis.navigator.msPointerEnabled?(_.msContentZooming="",_.msTouchAction=""):this.supportsPointerEvents&&(_.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(_,A,T){const B=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},I=1/this.resolution;_.x=(A-B.left)*(this.domElement.width/B.width)*I,_.y=(T-B.top)*(this.domElement.height/B.height)*I}normalizeToPointerData(_){const A=[];if(this.supportsTouchEvents&&_ instanceof TouchEvent)for(let T=0,B=_.changedTouches.length;T<B;T++){const I=_.changedTouches[T];typeof I.button>"u"&&(I.button=0),typeof I.buttons>"u"&&(I.buttons=1),typeof I.isPrimary>"u"&&(I.isPrimary=_.touches.length===1&&_.type==="touchstart"),typeof I.width>"u"&&(I.width=I.radiusX||1),typeof I.height>"u"&&(I.height=I.radiusY||1),typeof I.tiltX>"u"&&(I.tiltX=0),typeof I.tiltY>"u"&&(I.tiltY=0),typeof I.pointerType>"u"&&(I.pointerType="touch"),typeof I.pointerId>"u"&&(I.pointerId=I.identifier||0),typeof I.pressure>"u"&&(I.pressure=I.force||.5),typeof I.twist>"u"&&(I.twist=0),typeof I.tangentialPressure>"u"&&(I.tangentialPressure=0),typeof I.layerX>"u"&&(I.layerX=I.offsetX=I.clientX),typeof I.layerY>"u"&&(I.layerY=I.offsetY=I.clientY),I.isNormalized=!0,I.type=_.type,A.push(I)}else if(!globalThis.MouseEvent||_ instanceof MouseEvent&&(!this.supportsPointerEvents||!(_ instanceof globalThis.PointerEvent))){const T=_;typeof T.isPrimary>"u"&&(T.isPrimary=!0),typeof T.width>"u"&&(T.width=1),typeof T.height>"u"&&(T.height=1),typeof T.tiltX>"u"&&(T.tiltX=0),typeof T.tiltY>"u"&&(T.tiltY=0),typeof T.pointerType>"u"&&(T.pointerType="mouse"),typeof T.pointerId>"u"&&(T.pointerId=MOUSE_POINTER_ID),typeof T.pressure>"u"&&(T.pressure=.5),typeof T.twist>"u"&&(T.twist=0),typeof T.tangentialPressure>"u"&&(T.tangentialPressure=0),T.isNormalized=!0,A.push(T)}else A.push(_);return A}normalizeWheelEvent(_){const A=this.rootWheelEvent;return this.transferMouseData(A,_),A.deltaX=_.deltaX,A.deltaY=_.deltaY,A.deltaZ=_.deltaZ,A.deltaMode=_.deltaMode,this.mapPositionToPoint(A.screen,_.clientX,_.clientY),A.global.copyFrom(A.screen),A.offset.copyFrom(A.screen),A.nativeEvent=_,A.type=_.type,A}bootstrapEvent(_,A){return _.originalEvent=null,_.nativeEvent=A,_.pointerId=A.pointerId,_.width=A.width,_.height=A.height,_.isPrimary=A.isPrimary,_.pointerType=A.pointerType,_.pressure=A.pressure,_.tangentialPressure=A.tangentialPressure,_.tiltX=A.tiltX,_.tiltY=A.tiltY,_.twist=A.twist,this.transferMouseData(_,A),this.mapPositionToPoint(_.screen,A.clientX,A.clientY),_.global.copyFrom(_.screen),_.offset.copyFrom(_.screen),_.isTrusted=A.isTrusted,_.type==="pointerleave"&&(_.type="pointerout"),_.type.startsWith("mouse")&&(_.type=_.type.replace("mouse","pointer")),_.type.startsWith("touch")&&(_.type=TOUCH_TO_POINTER[_.type]||_.type),_}transferMouseData(_,A){_.isTrusted=A.isTrusted,_.srcElement=A.srcElement,_.timeStamp=performance.now(),_.type=A.type,_.altKey=A.altKey,_.button=A.button,_.buttons=A.buttons,_.client.x=A.clientX,_.client.y=A.clientY,_.ctrlKey=A.ctrlKey,_.metaKey=A.metaKey,_.movement.x=A.movementX,_.movement.y=A.movementY,_.page.x=A.pageX,_.page.y=A.pageY,_.relatedTarget=null,_.shiftKey=A.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;extensions$1.add(EventSystem);function convertEventModeToInteractiveMode(E){return E==="dynamic"||E==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(E){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=E,this.eventMode=E?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(E){this._internalInteractive=convertEventModeToInteractiveMode(E),this._internalEventMode=E},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(E,_,A){const T=typeof A=="boolean"&&A||typeof A=="object"&&A.capture,B=typeof _=="function"?void 0:_;E=T?`${E}capture`:E,_=typeof _=="function"?_:_.handleEvent,this.on(E,_,B)},removeEventListener(E,_,A){const T=typeof A=="boolean"&&A||typeof A=="object"&&A.capture,B=typeof _=="function"?void 0:_;E=T?`${E}capture`:E,_=typeof _=="function"?_:_.handleEvent,this.off(E,_,B)},dispatchEvent(E){if(!(E instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return E.defaultPrevented=!1,E.path=null,E.target=this,E.manager.dispatchEvent(E),!E.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(_){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const A=document.createElement("div");A.style.width=`${DIV_TOUCH_SIZE}px`,A.style.height=`${DIV_TOUCH_SIZE}px`,A.style.position="absolute",A.style.top=`${DIV_TOUCH_POS_X}px`,A.style.left=`${DIV_TOUCH_POS_Y}px`,A.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=A,this.renderer=_,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const _=document.createElement("button");_.style.width=`${DIV_HOOK_SIZE}px`,_.style.height=`${DIV_HOOK_SIZE}px`,_.style.position="absolute",_.style.top=`${DIV_HOOK_POS_X}px`,_.style.left=`${DIV_HOOK_POS_Y}px`,_.style.zIndex=DIV_HOOK_ZINDEX.toString(),_.style.backgroundColor="#FF0000",_.title="select to enable accessibility for this content",_.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(_),this._hookDiv=_}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var _;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(_=this.renderer.view.parentNode)==null||_.appendChild(this.div))}deactivate(){var _;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(_=this.div.parentNode)==null||_.removeChild(this.div))}updateAccessibleObjects(_){if(!_.visible||!_.accessibleChildren)return;_.accessible&&_.isInteractive()&&(_._accessibleActive||this.addChild(_),_.renderId=this.renderId);const A=_.children;if(A)for(let T=0;T<A.length;T++)this.updateAccessibleObjects(A[T])}update(){const _=performance.now();if(isMobile.android.device&&_<this.androidUpdateCount||(this.androidUpdateCount=_+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:A,y:T,width:B,height:I}=this.renderer.view.getBoundingClientRect(),{width:C,height:R,resolution:L}=this.renderer,D=B/C*L,V=I/R*L;let U=this.div;U.style.left=`${A}px`,U.style.top=`${T}px`,U.style.width=`${C}px`,U.style.height=`${R}px`;for(let z=0;z<this.children.length;z++){const W=this.children[z];if(W.renderId!==this.renderId)W._accessibleActive=!1,removeItems(this.children,z,1),this.div.removeChild(W._accessibleDiv),this.pool.push(W._accessibleDiv),W._accessibleDiv=null,z--;else{U=W._accessibleDiv;let Y=W.hitArea;const K=W.worldTransform;W.hitArea?(U.style.left=`${(K.tx+Y.x*K.a)*D}px`,U.style.top=`${(K.ty+Y.y*K.d)*V}px`,U.style.width=`${Y.width*K.a*D}px`,U.style.height=`${Y.height*K.d*V}px`):(Y=W.getBounds(),this.capHitArea(Y),U.style.left=`${Y.x*D}px`,U.style.top=`${Y.y*V}px`,U.style.width=`${Y.width*D}px`,U.style.height=`${Y.height*V}px`,U.title!==W.accessibleTitle&&W.accessibleTitle!==null&&(U.title=W.accessibleTitle),U.getAttribute("aria-label")!==W.accessibleHint&&W.accessibleHint!==null&&U.setAttribute("aria-label",W.accessibleHint)),(W.accessibleTitle!==U.title||W.tabIndex!==U.tabIndex)&&(U.title=W.accessibleTitle,U.tabIndex=W.tabIndex,this.debug&&this.updateDebugHTML(U))}}this.renderId++}updateDebugHTML(_){_.innerHTML=`type: ${_.type}</br> title : ${_.title}</br> tabIndex: ${_.tabIndex}`}capHitArea(_){_.x<0&&(_.width+=_.x,_.x=0),_.y<0&&(_.height+=_.y,_.y=0);const{width:A,height:T}=this.renderer;_.x+_.width>A&&(_.width=A-_.x),_.y+_.height>T&&(_.height=T-_.y)}addChild(_){let A=this.pool.pop();A||(A=document.createElement("button"),A.style.width=`${DIV_TOUCH_SIZE}px`,A.style.height=`${DIV_TOUCH_SIZE}px`,A.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",A.style.position="absolute",A.style.zIndex=DIV_TOUCH_ZINDEX.toString(),A.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?A.setAttribute("aria-live","off"):A.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?A.setAttribute("aria-relevant","additions"):A.setAttribute("aria-relevant","text"),A.addEventListener("click",this._onClick.bind(this)),A.addEventListener("focus",this._onFocus.bind(this)),A.addEventListener("focusout",this._onFocusOut.bind(this))),A.style.pointerEvents=_.accessiblePointerEvents,A.type=_.accessibleType,_.accessibleTitle&&_.accessibleTitle!==null?A.title=_.accessibleTitle:(!_.accessibleHint||_.accessibleHint===null)&&(A.title=`displayObject ${_.tabIndex}`),_.accessibleHint&&_.accessibleHint!==null&&A.setAttribute("aria-label",_.accessibleHint),this.debug&&this.updateDebugHTML(A),_._accessibleActive=!0,_._accessibleDiv=A,A.displayObject=_,this.children.push(_),this.div.appendChild(_._accessibleDiv),_._accessibleDiv.tabIndex=_.tabIndex}_dispatchEvent(_,A){const{displayObject:T}=_.target,B=this.renderer.events.rootBoundary,I=Object.assign(new FederatedEvent(B),{target:T});B.rootTarget=this.renderer.lastObjectRendered,A.forEach(C=>B.dispatchEvent(I,C))}_onClick(_){this._dispatchEvent(_,["click","pointertap","tap"])}_onFocus(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","assertive"),this._dispatchEvent(_,["mouseover"])}_onFocusOut(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","polite"),this._dispatchEvent(_,["mouseout"])}_onKeyDown(_){_.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(_){_.movementX===0&&_.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$1.add(AccessibilityManager);const _Application=class Bn{constructor(_){this.stage=new Container,_=Object.assign({forceCanvas:!1},_),this.renderer=autoDetectRenderer(_),Bn._plugins.forEach(A=>{A.init.call(this,_)})}render(){this.renderer.render(this.stage)}get view(){var _;return(_=this.renderer)==null?void 0:_.view}get screen(){var _;return(_=this.renderer)==null?void 0:_.screen}destroy(_,A){const T=Bn._plugins.slice(0);T.reverse(),T.forEach(B=>{B.destroy.call(this)}),this.stage.destroy(A),this.stage=null,this.renderer.destroy(_),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(_){Object.defineProperty(this,"resizeTo",{set(A){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=A,A&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let A,T;if(this._resizeTo===globalThis.window)A=globalThis.innerWidth,T=globalThis.innerHeight;else{const{clientWidth:B,clientHeight:I}=this._resizeTo;A=B,T=I}this.renderer.resize(A,T),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=_.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$1.add(ResizePlugin);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,E=>{const _=E.ref;Object.entries(assetKeyMap).filter(([A])=>!!_[A]).forEach(([A,T])=>extensions$1.add(Object.assign(_[A],{extension:_[A].extension??T})))},E=>{const _=E.ref;Object.keys(assetKeyMap).filter(A=>!!_[A]).forEach(A=>extensions$1.remove(_[A]))});class BackgroundLoader{constructor(_,A=!1){this._loader=_,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=A}add(_){_.forEach(A=>{this._assetList.push(A)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const _=[],A=Math.min(this._assetList.length,this._maxConcurrent);for(let T=0;T<A;T++)_.push(this._assetList.pop());await this._loader.load(_),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(_){this._isActive!==_&&(this._isActive=_,_&&!this._isLoading&&this._next())}}function checkDataUrl(E,_){if(Array.isArray(_)){for(const A of _)if(E.startsWith(`data:${A}`))return!0;return!1}return E.startsWith(`data:${_}`)}function checkExtension(E,_){const A=E.split("?")[0],T=path.extname(A).toLowerCase();return Array.isArray(_)?_.includes(T):T===_}const convertToList=(E,_,A=!1)=>(Array.isArray(E)||(E=[E]),_?E.map(T=>typeof T=="string"||A?_(T):T):E),copySearchParams=(E,_)=>{const A=_.split("?")[1];return A&&(E+=`?${A}`),E};function processX(E,_,A,T,B){const I=_[A];for(let C=0;C<I.length;C++){const R=I[C];A<_.length-1?processX(E.replace(T[A],R),_,A+1,T,B):B.push(E.replace(T[A],R))}}function createStringVariations(E){const _=/\{(.*?)\}/g,A=E.match(_),T=[];if(A){const B=[];A.forEach(I=>{const C=I.substring(1,I.length-1).split(",");B.push(C)}),processX(E,B,0,A,T)}else T.push(E);return T}const isSingleItem=E=>!Array.isArray(E);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(_){return this._cache.has(_)}get(_){const A=this._cache.get(_);return A||console.warn(`[Assets] Asset id ${_} was not found in the Cache`),A}set(_,A){const T=convertToList(_);let B;for(let R=0;R<this.parsers.length;R++){const L=this.parsers[R];if(L.test(A)){B=L.getCacheableAssets(T,A);break}}B||(B={},T.forEach(R=>{B[R]=A}));const I=Object.keys(B),C={cacheKeys:I,keys:T};if(T.forEach(R=>{this._cacheMap.set(R,C)}),I.forEach(R=>{this._cache.has(R)&&this._cache.get(R)!==A&&console.warn("[Cache] already has key:",R),this._cache.set(R,B[R])}),A instanceof Texture){const R=A;T.forEach(L=>{R.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(R.baseTexture,L),Texture.addToCache(R,L)})}}remove(_){if(!this._cacheMap.has(_)){console.warn(`[Assets] Asset id ${_} was not found in the Cache`);return}const A=this._cacheMap.get(_);A.cacheKeys.forEach(T=>{this._cache.delete(T)}),A.keys.forEach(T=>{this._cacheMap.delete(T)})}get parsers(){return this._parsers}}const Cache=new CacheClass;class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(_,A,T)=>(this._parsersValidated=!1,_[A]=T,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(_,A){const T={promise:null,parser:null};return T.promise=(async()=>{var C,R;let B=null,I=null;if(A.loadParser&&(I=this._parserHash[A.loadParser],I||console.warn(`[Assets] specified load parser "${A.loadParser}" not found while loading ${_}`)),!I){for(let L=0;L<this.parsers.length;L++){const D=this.parsers[L];if(D.load&&((C=D.test)!=null&&C.call(D,_,A,this))){I=D;break}}if(!I)return console.warn(`[Assets] ${_} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}B=await I.load(_,A,this),T.parser=I;for(let L=0;L<this.parsers.length;L++){const D=this.parsers[L];D.parse&&D.parse&&await((R=D.testParse)==null?void 0:R.call(D,B,A,this))&&(B=await D.parse(B,A,this)||B,T.parser=D)}return B})(),T}async load(_,A){this._parsersValidated||this._validateParsers();let T=0;const B={},I=isSingleItem(_),C=convertToList(_,D=>({alias:[D],src:D})),R=C.length,L=C.map(async D=>{const V=path.toAbsolute(D.src);if(!B[D.src])try{this.promiseCache[V]||(this.promiseCache[V]=this._getLoadPromiseAndParser(V,D)),B[D.src]=await this.promiseCache[V].promise,A&&A(++T/R)}catch(U){throw delete this.promiseCache[V],delete B[D.src],new Error(`[Loader.load] Failed to load ${V}.
${U}`)}});return await Promise.all(L),I?B[C[0].src]:B}async unload(_){const A=convertToList(_,T=>({alias:[T],src:T})).map(async T=>{var C,R;const B=path.toAbsolute(T.src),I=this.promiseCache[B];if(I){const L=await I.promise;delete this.promiseCache[B],(R=(C=I.parser)==null?void 0:C.unload)==null||R.call(C,L,T,this)}});await Promise.all(A)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(_=>_.name).reduce((_,A)=>(_[A.name]&&console.warn(`[Assets] loadParser name conflict "${A.name}"`),{..._,[A.name]:A}),{})}}var LoaderParserPriority=(E=>(E[E.Low=0]="Low",E[E.Normal=1]="Normal",E[E.High=2]="High",E))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(E){return checkDataUrl(E,validJSONMIME)||checkExtension(E,validJSONExtension)},async load(E){return await(await settings.ADAPTER.fetch(E)).json()}};extensions$1.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(E){return checkDataUrl(E,validTXTMIME)||checkExtension(E,validTXTExtension)},async load(E){return await(await settings.ADAPTER.fetch(E)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(E){const _=path.extname(E),A=path.basename(E,_).replace(/(-|_)/g," ").toLowerCase().split(" ").map(I=>I.charAt(0).toUpperCase()+I.slice(1));let T=A.length>0;for(const I of A)if(!I.match(CSS_IDENT_TOKEN_REGEX)){T=!1;break}let B=A.join(" ");return T||(B=`"${B.replace(/[\\"]/g,"\\$&")}"`),B}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(E){return validURICharactersRegex.test(E)?E:encodeURI(E)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(E){return checkDataUrl(E,validFontMIMEs)||checkExtension(E,validFontExtensions)},async load(E,_){var T,B,I;const A=settings.ADAPTER.getFontFaceSet();if(A){const C=[],R=((T=_.data)==null?void 0:T.family)??getFontFamilyName(E),L=((I=(B=_.data)==null?void 0:B.weights)==null?void 0:I.filter(V=>validWeights.includes(V)))??["normal"],D=_.data??{};for(let V=0;V<L.length;V++){const U=L[V],z=new FontFace(R,`url(${encodeURIWhenNeeded(E)})`,{...D,weight:U});await z.load(),A.add(z),C.push(z)}return C.length===1?C[0]:C}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(E){(Array.isArray(E)?E:[E]).forEach(_=>settings.ADAPTER.getFontFaceSet().delete(_))}};extensions$1.add(loadWebFont);let UUID=0,MAX_WORKERS;const WHITE_PNG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",checkImageBitmapCode={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${WHITE_PNG}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},workerCode={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let workerURL;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(_=>{const A=URL.createObjectURL(new Blob([checkImageBitmapCode.code],{type:"application/javascript"})),T=new Worker(A);T.addEventListener("message",B=>{T.terminate(),URL.revokeObjectURL(A),_(B.data)})}),this._isImageBitmapSupported)}loadImageBitmap(_){return this._run("loadImageBitmap",[_])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let _=this.workerPool.pop();return!_&&this._createdWorkers<MAX_WORKERS&&(workerURL||(workerURL=URL.createObjectURL(new Blob([workerCode.code],{type:"application/javascript"}))),this._createdWorkers++,_=new Worker(workerURL),_.addEventListener("message",A=>{this.complete(A.data),this.returnWorker(A.target),this.next()})),_}returnWorker(_){this.workerPool.push(_)}complete(_){_.error!==void 0?this.resolveHash[_.uuid].reject(_.error):this.resolveHash[_.uuid].resolve(_.data),this.resolveHash[_.uuid]=null}async _run(_,A){await this._initWorkers();const T=new Promise((B,I)=>{this.queue.push({id:_,arguments:A,resolve:B,reject:I})});return this.next(),T}next(){if(!this.queue.length)return;const _=this.getWorker();if(!_)return;const A=this.queue.pop(),T=A.id;this.resolveHash[UUID]={resolve:A.resolve,reject:A.reject},_.postMessage({data:A.arguments,uuid:UUID++,id:T})}}const WorkerManager=new WorkerManagerClass;function createTexture(E,_,A){E.resource.internal=!0;const T=new Texture(E),B=()=>{delete _.promiseCache[A],Cache.has(A)&&Cache.remove(A)};return T.baseTexture.once("destroyed",()=>{A in _.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),B())}),T.once("destroyed",()=>{E.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),B())}),T}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(E){const _=await settings.ADAPTER.fetch(E);if(!_.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${E}: ${_.status} ${_.statusText}`);const A=await _.blob();return await createImageBitmap(A)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(E){return checkDataUrl(E,validImageMIMEs)||checkExtension(E,validImageExtensions)},async load(E,_,A){var R;const T=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let B;T?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?B=await WorkerManager.loadImageBitmap(E):B=await loadImageBitmap(E):B=await new Promise((L,D)=>{const V=new Image;V.crossOrigin=this.config.crossOrigin,V.src=E,V.complete?L(V):(V.onload=()=>L(V),V.onerror=U=>D(U))});const I={..._.data};I.resolution??(I.resolution=getResolutionOfUrl(E)),T&&((R=I.resourceOptions)==null?void 0:R.ownsImageBitmap)===void 0&&(I.resourceOptions={...I.resourceOptions},I.resourceOptions.ownsImageBitmap=!0);const C=new BaseTexture(B,I);return C.resource.src=E,createTexture(C,A,E)},unload(E){E.destroy(!0)}};extensions$1.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(E){return checkDataUrl(E,validSVGMIME)||checkExtension(E,validSVGExtension)},async testParse(E){return SVGResource.test(E)},async parse(E,_,A){var I;const T=new SVGResource(E,(I=_==null?void 0:_.data)==null?void 0:I.resourceOptions);await T.load();const B=new BaseTexture(T,{resolution:getResolutionOfUrl(E),..._==null?void 0:_.data});return B.resource.src=_.src,createTexture(B,A,_.src)},async load(E,_){return(await settings.ADAPTER.fetch(E)).text()},unload:loadTextures.unload};extensions$1.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0},test(E){return checkDataUrl(E,validVideoMIMEs)||checkExtension(E,validVideoExtensions)},async load(E,_,A){var C;let T;const B=await(await settings.ADAPTER.fetch(E)).blob(),I=URL.createObjectURL(B);try{const R={autoPlay:this.config.defaultAutoPlay,...(C=_==null?void 0:_.data)==null?void 0:C.resourceOptions},L=new VideoResource(I,R);await L.load();const D=new BaseTexture(L,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(E),..._==null?void 0:_.data});D.resource.src=E,T=createTexture(D,A,E),T.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(I)})}catch(R){throw URL.revokeObjectURL(I),R}return T},unload(E){E.destroy(!0)}};extensions$1.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(_,A)=>`${_}${this._bundleIdConnector}${A}`,extractAssetIdFromBundle:(_,A)=>A.replace(`${_}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(_){if(this._bundleIdConnector=_.connector??this._bundleIdConnector,this._createBundleAssetId=_.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=_.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(..._){_.forEach(A=>{this._preferredOrder.push(A),A.priority||(A.priority=Object.keys(A.params))}),this._resolverHash={}}set basePath(_){this._basePath=_}get basePath(){return this._basePath}set rootPath(_){this._rootPath=_}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(_){if(typeof _=="string")this._defaultSearchParams=_;else{const A=_;this._defaultSearchParams=Object.keys(A).map(T=>`${encodeURIComponent(T)}=${encodeURIComponent(A[T])}`).join("&")}}getAlias(_){const{alias:A,name:T,src:B,srcs:I}=_;return convertToList(A||T||B||I,C=>typeof C=="string"?C:Array.isArray(C)?C.map(R=>(R==null?void 0:R.src)??(R==null?void 0:R.srcs)??R):C!=null&&C.src||C!=null&&C.srcs?C.src??C.srcs:C,!0)}addManifest(_){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=_,_.bundles.forEach(A=>{this.addBundle(A.name,A.assets)})}addBundle(_,A){const T=[];Array.isArray(A)?A.forEach(B=>{const I=B.src??B.srcs,C=B.alias??B.name;let R;if(typeof C=="string"){const L=this._createBundleAssetId(_,C);T.push(L),R=[C,L]}else{const L=C.map(D=>this._createBundleAssetId(_,D));T.push(...L),R=[...C,...L]}this.add({...B,alias:R,src:I})}):Object.keys(A).forEach(B=>{const I=[B,this._createBundleAssetId(_,B)];if(typeof A[B]=="string")this.add({alias:I,src:A[B]});else if(Array.isArray(A[B]))this.add({alias:I,src:A[B]});else{const C=A[B],R=C.src??C.srcs;this.add({...C,alias:I,src:Array.isArray(R)?R:[R]})}T.push(...I)}),this._bundles[_]=T}add(_,A,T,B,I){const C=[];typeof _=="string"||Array.isArray(_)&&typeof _[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),C.push({alias:_,src:A,data:T,format:B,loadParser:I})):Array.isArray(_)?C.push(..._):C.push(_);let R;R=L=>{this.hasKey(L)&&console.warn(`[Resolver] already has key: ${L} overwriting`)},convertToList(C).forEach(L=>{const{src:D,srcs:V}=L;let{data:U,format:z,loadParser:W}=L;const Y=convertToList(D||V).map(et=>typeof et=="string"?createStringVariations(et):Array.isArray(et)?et:[et]),K=this.getAlias(L);Array.isArray(K)?K.forEach(R):R(K);const J=[];Y.forEach(et=>{et.forEach(it=>{let rt={};if(typeof it!="object"){rt.src=it;for(let st=0;st<this._parsers.length;st++){const lt=this._parsers[st];if(lt.test(it)){rt=lt.parse(it);break}}}else U=it.data??U,z=it.format??z,W=it.loadParser??W,rt={...rt,...it};if(!K)throw new Error(`[Resolver] alias is undefined for this asset: ${rt.src}`);rt=this.buildResolvedAsset(rt,{aliases:K,data:U,format:z,loadParser:W}),J.push(rt)})}),K.forEach(et=>{this._assetMap[et]=J})})}resolveBundle(_){const A=isSingleItem(_);_=convertToList(_);const T={};return _.forEach(B=>{const I=this._bundles[B];if(I){const C=this.resolve(I),R={};for(const L in C){const D=C[L];R[this._extractAssetIdFromBundle(B,L)]=D}T[B]=R}}),A?T[_[0]]:T}resolveUrl(_){const A=this.resolve(_);if(typeof _!="string"){const T={};for(const B in A)T[B]=A[B].src;return T}return A.src}resolve(_){const A=isSingleItem(_);_=convertToList(_);const T={};return _.forEach(B=>{if(!this._resolverHash[B])if(this._assetMap[B]){let I=this._assetMap[B];const C=I[0],R=this._getPreferredOrder(I);R==null||R.priority.forEach(L=>{R.params[L].forEach(D=>{const V=I.filter(U=>U[L]?U[L]===D:!1);V.length&&(I=V)})}),this._resolverHash[B]=I[0]??C}else this._resolverHash[B]=this.buildResolvedAsset({alias:[B],src:B},{});T[B]=this._resolverHash[B]}),A?T[_[0]]:T}hasKey(_){return!!this._assetMap[_]}hasBundle(_){return!!this._bundles[_]}_getPreferredOrder(_){for(let A=0;A<_.length;A++){const T=_[0],B=this._preferredOrder.find(I=>I.params.format.includes(T.format));if(B)return B}return this._preferredOrder[0]}_appendDefaultSearchParams(_){if(!this._defaultSearchParams)return _;const A=/\?/.test(_)?"&":"?";return`${_}${A}${this._defaultSearchParams}`}buildResolvedAsset(_,A){const{aliases:T,data:B,loadParser:I,format:C}=A;return(this._basePath||this._rootPath)&&(_.src=path.toAbsolute(_.src,this._basePath,this._rootPath)),_.alias=T??_.alias??[_.src],_.src=this._appendDefaultSearchParams(_.src),_.data={...B||{},..._.data},_.loadParser=I??_.loadParser,_.format=C??path.extname(_.src).slice(1),_.srcs=_.src,_.name=_.alias,_}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(_={}){var I,C;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,_.defaultSearchParams&&this.resolver.setDefaultSearchParams(_.defaultSearchParams),_.basePath&&(this.resolver.basePath=_.basePath),_.bundleIdentifier&&this.resolver.setBundleIdentifier(_.bundleIdentifier),_.manifest){let R=_.manifest;typeof R=="string"&&(R=await this.load(R)),this.resolver.addManifest(R)}const A=((I=_.texturePreference)==null?void 0:I.resolution)??1,T=typeof A=="number"?[A]:A,B=await this._detectFormats({preferredFormats:(C=_.texturePreference)==null?void 0:C.format,skipDetections:_.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:B,resolution:T}}),_.preferences&&this.setPreferences(_.preferences)}add(_,A,T,B,I){this.resolver.add(_,A,T,B,I)}async load(_,A){this._initialized||await this.init();const T=isSingleItem(_),B=convertToList(_).map(R=>{if(typeof R!="string"){const L=this.resolver.getAlias(R);return L.some(D=>!this.resolver.hasKey(D))&&this.add(R),Array.isArray(L)?L[0]:L}return this.resolver.hasKey(R)||this.add({alias:R,src:R}),R}),I=this.resolver.resolve(B),C=await this._mapLoadToResolve(I,A);return T?C[B[0]]:C}addBundle(_,A){this.resolver.addBundle(_,A)}async loadBundle(_,A){this._initialized||await this.init();let T=!1;typeof _=="string"&&(T=!0,_=[_]);const B=this.resolver.resolveBundle(_),I={},C=Object.keys(B);let R=0,L=0;const D=()=>{A==null||A(++R/L)},V=C.map(U=>{const z=B[U];return L+=Object.keys(z).length,this._mapLoadToResolve(z,D).then(W=>{I[U]=W})});return await Promise.all(V),T?I[_[0]]:I}async backgroundLoad(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const A=this.resolver.resolve(_);this._backgroundLoader.add(Object.values(A))}async backgroundLoadBundle(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const A=this.resolver.resolveBundle(_);Object.values(A).forEach(T=>{this._backgroundLoader.add(Object.values(T))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(_){if(typeof _=="string")return Cache.get(_);const A={};for(let T=0;T<_.length;T++)A[T]=Cache.get(_[T]);return A}async _mapLoadToResolve(_,A){const T=Object.values(_),B=Object.keys(_);this._backgroundLoader.active=!1;const I=await this.loader.load(T,A);this._backgroundLoader.active=!0;const C={};return T.forEach((R,L)=>{const D=I[R.src],V=[R.src];R.alias&&V.push(...R.alias),C[B[L]]=D,Cache.set(V,D)}),C}async unload(_){this._initialized||await this.init();const A=convertToList(_).map(B=>typeof B!="string"?B.src:B),T=this.resolver.resolve(A);await this._unloadFromResolved(T)}async unloadBundle(_){this._initialized||await this.init(),_=convertToList(_);const A=this.resolver.resolveBundle(_),T=Object.keys(A).map(B=>this._unloadFromResolved(A[B]));await Promise.all(T)}async _unloadFromResolved(_){const A=Object.values(_);A.forEach(T=>{Cache.remove(T.src)}),await this.loader.unload(A)}async _detectFormats(_){let A=[];_.preferredFormats&&(A=Array.isArray(_.preferredFormats)?_.preferredFormats:[_.preferredFormats]);for(const T of _.detections)_.skipDetections||await T.test()?A=await T.add(A):_.skipDetections||(A=await T.remove(A));return A=A.filter((T,B)=>A.indexOf(T)===B),A}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(_){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:_})}setPreferences(_){this.loader.parsers.forEach(A=>{A.config&&Object.keys(A.config).filter(T=>T in _).forEach(T=>{A.config[T]=_[T]})})}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:E=>Array.isArray(E)&&E.every(_=>_ instanceof Texture),getCacheableAssets:(E,_)=>{const A={};return E.forEach(T=>{_.forEach((B,I)=>{A[T+(I===0?"":I+1)]=B})}),A}};extensions$1.add(cacheTextureArray);async function testImageFormat(E){if("Image"in globalThis)return new Promise(_=>{const A=new Image;A.onload=()=>{_(!0)},A.onerror=()=>{_(!1)},A.src=E});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const _=await(await fetch(E)).blob();await createImageBitmap(_)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async E=>[...E,"avif"],remove:async E=>E.filter(_=>_!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async E=>[...E,"webp"],remove:async E=>E.filter(_=>_!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async E=>[...E,...imageFormats],remove:async E=>E.filter(_=>!imageFormats.includes(_))};extensions$1.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(E){return inWorker?!1:document.createElement("video").canPlayType(E)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async E=>[...E,"webm"],remove:async E=>E.filter(_=>_!=="webm")};extensions$1.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async E=>[...E,"mp4","m4v"],remove:async E=>E.filter(_=>_!=="mp4"&&_!=="m4v")};extensions$1.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async E=>[...E,"ogv"],remove:async E=>E.filter(_=>_!=="ogv")};extensions$1.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:E=>{var _;return{resolution:parseFloat(((_=settings.RETINA_PREFIX.exec(E))==null?void 0:_[1])??"1"),format:path.extname(E).slice(1),src:E}}};extensions$1.add(resolveTextureUrl);var INTERNAL_FORMATS=(E=>(E[E.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",E[E.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",E[E.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",E[E.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",E[E.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",E[E.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",E[E.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",E[E.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",E[E.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",E[E.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",E[E.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",E[E.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",E[E.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",E[E.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",E[E.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",E[E.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",E[E.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",E[E.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",E[E.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",E[E.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",E[E.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",E[E.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",E[E.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",E[E.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",E[E.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",E[E.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",E[E.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",E))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let storedGl,extensions;function getCompressedTextureExtensions(){extensions={s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const E=settings.ADAPTER.createCanvas().getContext("webgl");return E?(storedGl=E,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async E=>{extensions||getCompressedTextureExtensions();const _=[];for(const A in extensions)extensions[A]&&_.push(A);return[..._,...E]},remove:async E=>(extensions||getCompressedTextureExtensions(),E.filter(_=>!(_ in extensions)))};extensions$1.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(_,A={width:1,height:1,autoLoad:!0}){let T,B;typeof _=="string"?(T=_,B=new Uint8Array):(T=null,B=_),super(B,A),this.origin=T,this.buffer=B?new ViewableBuffer(B):null,this._load=null,this.loaded=!1,this.origin!==null&&A.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(_){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(_=>_.blob()).then(_=>_.arrayBuffer()).then(_=>(this.data=new Uint32Array(_),this.buffer=new ViewableBuffer(_),this.loaded=!0,this.onBlobLoaded(_),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(_,A){super(_,A),this.format=A.format,this.levels=A.levels||1,this._width=A.width,this._height=A.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(A.levelBuffers||this.buffer)&&(this._levelBuffers=A.levelBuffers||CompressedTextureResource._createLevelBuffers(_ instanceof Uint8Array?_:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(_,A,T){const B=_.gl;if(!_.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;B.pixelStorei(B.UNPACK_ALIGNMENT,4);for(let I=0,C=this.levels;I<C;I++){const{levelID:R,levelWidth:L,levelHeight:D,levelBuffer:V}=this._levelBuffers[I];B.compressedTexImage2D(B.TEXTURE_2D,R,this.format,L,D,0,V)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(_){if(_>=33776&&_<=33779)return"s3tc";if(_>=37488&&_<=37497)return"etc";if(_>=35840&&_<=35843)return"pvrtc";if(_>=36196)return"etc1";if(_>=35986&&_<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(_,A,T,B,I,C,R){const L=new Array(T);let D=_.byteOffset,V=C,U=R,z=V+B-1&~(B-1),W=U+I-1&~(I-1),Y=z*W*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[A];for(let K=0;K<T;K++)L[K]={levelID:K,levelWidth:T>1?V:z,levelHeight:T>1?U:W,levelBuffer:new Uint8Array(_.buffer,D,Y)},D+=Y,V=V>>1||1,U=U>>1||1,z=V+B-1&~(B-1),W=U+I-1&~(I-1),Y=z*W*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[A];return L}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={70:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function parseDDS(E){const _=new Uint32Array(E);if(_[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const A=new Uint32Array(E,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),T=A[DDS_FIELDS.HEIGHT],B=A[DDS_FIELDS.WIDTH],I=A[DDS_FIELDS.MIPMAP_COUNT],C=new Uint32Array(E,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),R=C[PF_FLAGS];if(R&DDPF_FOURCC){const L=C[DDS_PF_FIELDS.FOURCC];if(L!==FOURCC_DX10){const it=FOURCC_TO_FORMAT[L],rt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,st=new Uint8Array(E,rt);return[new CompressedTextureResource(st,{format:it,width:B,height:T,levels:I})]}const D=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,V=new Uint32Array(_.buffer,D,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),U=V[DDS_DX10_FIELDS.DXGI_FORMAT],z=V[DDS_DX10_FIELDS.RESOURCE_DIMENSION],W=V[DDS_DX10_FIELDS.MISC_FLAG],Y=V[DDS_DX10_FIELDS.ARRAY_SIZE],K=DXGI_TO_FORMAT[U];if(K===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${U}`);if(W===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(z===6)throw new Error("DDSParser does not supported 3D texture data");const J=new Array,et=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(Y===1)J.push(new Uint8Array(E,et));else{const it=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[K];let rt=0,st=B,lt=T;for(let at=0;at<I;at++){const ht=Math.max(1,st+3&-4),mt=Math.max(1,lt+3&-4),yt=ht*mt*it;rt+=yt,st=st>>>1,lt=lt>>>1}let ct=et;for(let at=0;at<Y;at++)J.push(new Uint8Array(E,ct,rt)),ct+=rt}return J.map(it=>new CompressedTextureResource(it,{format:K,width:B,height:T,levels:I}))}throw R&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):R&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):R&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):R&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(E,_,A=!1){const T=new DataView(_);if(!validate(E,T))return null;const B=T.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,I=T.getUint32(KTX_FIELDS.GL_TYPE,B),C=T.getUint32(KTX_FIELDS.GL_FORMAT,B),R=T.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,B),L=T.getUint32(KTX_FIELDS.PIXEL_WIDTH,B),D=T.getUint32(KTX_FIELDS.PIXEL_HEIGHT,B)||1,V=T.getUint32(KTX_FIELDS.PIXEL_DEPTH,B)||1,U=T.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,B)||1,z=T.getUint32(KTX_FIELDS.NUMBER_OF_FACES,B),W=T.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,B),Y=T.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,B);if(D===0||V!==1)throw new Error("Only 2D textures are supported");if(z!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(U!==1)throw new Error("WebGL does not support array textures");const K=4,J=4,et=L+3&-4,it=D+3&-4,rt=new Array(U);let st=L*D;I===0&&(st=et*it);let lt;if(I!==0?TYPES_TO_BYTES_PER_COMPONENT[I]?lt=TYPES_TO_BYTES_PER_COMPONENT[I]*FORMATS_TO_COMPONENTS[C]:lt=TYPES_TO_BYTES_PER_PIXEL[I]:lt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[R],lt===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const ct=A?parseKvData(T,Y,B):null;let at=st*lt,ht=L,mt=D,yt=et,Tt=it,At=FILE_HEADER_SIZE+Y;for(let pt=0;pt<W;pt++){const Et=T.getUint32(At,B);let Vt=At+4;for(let Ot=0;Ot<U;Ot++){let gt=rt[Ot];gt||(gt=rt[Ot]=new Array(W)),gt[pt]={levelID:pt,levelWidth:W>1||I!==0?ht:yt,levelHeight:W>1||I!==0?mt:Tt,levelBuffer:new Uint8Array(_,Vt,at)},Vt+=at}At+=Et+4,At=At%4!==0?At+4-At%4:At,ht=ht>>1||1,mt=mt>>1||1,yt=ht+K-1&~(K-1),Tt=mt+J-1&~(J-1),at=yt*Tt*lt}return I!==0?{uncompressed:rt.map(pt=>{let Et=pt[0].levelBuffer,Vt=!1;return I===TYPES.FLOAT?Et=new Float32Array(pt[0].levelBuffer.buffer,pt[0].levelBuffer.byteOffset,pt[0].levelBuffer.byteLength/4):I===TYPES.UNSIGNED_INT?(Vt=!0,Et=new Uint32Array(pt[0].levelBuffer.buffer,pt[0].levelBuffer.byteOffset,pt[0].levelBuffer.byteLength/4)):I===TYPES.INT&&(Vt=!0,Et=new Int32Array(pt[0].levelBuffer.buffer,pt[0].levelBuffer.byteOffset,pt[0].levelBuffer.byteLength/4)),{resource:new BufferResource(Et,{width:pt[0].levelWidth,height:pt[0].levelHeight}),type:I,format:Vt?convertFormatToInteger(C):C}}),kvData:ct}:{compressed:rt.map(pt=>new CompressedTextureResource(null,{format:R,width:L,height:D,levels:W,levelBuffers:pt})),kvData:ct}}function validate(E,_){for(let A=0;A<FILE_IDENTIFIER.length;A++)if(_.getUint8(A)!==FILE_IDENTIFIER[A])return console.error(`${E} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(E){switch(E){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return E}}function parseKvData(E,_,A){const T=new Map;let B=0;for(;B<_;){const I=E.getUint32(FILE_HEADER_SIZE+B,A),C=FILE_HEADER_SIZE+B+4,R=3-(I+3)%4;if(I===0||I>_-B){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let L=0;for(;L<I&&E.getUint8(C+L)!==0;L++);if(L===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const D=new TextDecoder().decode(new Uint8Array(E.buffer,C,L)),V=new DataView(E.buffer,C+L+1,I-L-1);T.set(D,V),B+=4+I+R}return T}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(E){return checkExtension(E,".dds")},async load(E,_,A){const T=await(await settings.ADAPTER.fetch(E)).arrayBuffer(),B=parseDDS(T).map(I=>{const C=new BaseTexture(I,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(E),..._.data});return createTexture(C,A,E)});return B.length===1?B[0]:B},unload(E){Array.isArray(E)?E.forEach(_=>_.destroy(!0)):E.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(E){return checkExtension(E,".ktx")},async load(E,_,A){const T=await(await settings.ADAPTER.fetch(E)).arrayBuffer(),{compressed:B,uncompressed:I,kvData:C}=parseKTX(E,T),R=B??I,L={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(E),..._.data},D=R.map(V=>{R===I&&Object.assign(L,{type:V.type,format:V.format});const U=V.resource??V,z=new BaseTexture(U,L);return z.ktxKeyValueData=C,createTexture(z,A,E)});return D.length===1?D[0]:D},unload(E){Array.isArray(E)?E.forEach(_=>_.destroy(!0)):E.destroy(!0)}};extensions$1.add(loadKTX);const resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:E=>{const _=path.extname(E).slice(1);return["basis","ktx","dds"].includes(_)},parse:E=>{var A,T;const _=path.extname(E).slice(1);if(_==="ktx"){const B=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(B.some(I=>E.endsWith(I)))return{resolution:parseFloat(((A=settings.RETINA_PREFIX.exec(E))==null?void 0:A[1])??"1"),format:B.find(I=>E.endsWith(I)),src:E}}return{resolution:parseFloat(((T=settings.RETINA_PREFIX.exec(E))==null?void 0:T[1])??"1"),format:_,src:E}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class Mr{constructor(_){this.renderer=_,this._rendererPremultipliedAlpha=!1}contextChange(){var A;const _=(A=this.renderer)==null?void 0:A.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}async image(_,A,T,B){const I=new Image;return I.src=await this.base64(_,A,T,B),I}async base64(_,A,T,B){const I=this.canvas(_,B);if(I.toBlob!==void 0)return new Promise((C,R)=>{I.toBlob(L=>{if(!L){R(new Error("ICanvas.toBlob failed!"));return}const D=new FileReader;D.onload=()=>C(D.result),D.onerror=R,D.readAsDataURL(L)},A,T)});if(I.toDataURL!==void 0)return I.toDataURL(A,T);if(I.convertToBlob!==void 0){const C=await I.convertToBlob({type:A,quality:T});return new Promise((R,L)=>{const D=new FileReader;D.onload=()=>R(D.result),D.onerror=L,D.readAsDataURL(C)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(_,A){const{pixels:T,width:B,height:I,flipY:C,premultipliedAlpha:R}=this._rawPixels(_,A);C&&Mr._flipY(T,B,I),R&&Mr._unpremultiplyAlpha(T);const L=new CanvasRenderTarget(B,I,1),D=new ImageData(new Uint8ClampedArray(T.buffer),B,I);return L.context.putImageData(D,0,0),L.canvas}pixels(_,A){const{pixels:T,width:B,height:I,flipY:C,premultipliedAlpha:R}=this._rawPixels(_,A);return C&&Mr._flipY(T,B,I),R&&Mr._unpremultiplyAlpha(T),T}_rawPixels(_,A){const T=this.renderer;if(!T)throw new Error("The Extract has already been destroyed");let B,I=!1,C=!1,R,L=!1;_&&(_ instanceof RenderTexture?R=_:(R=T.generateTexture(_,{region:A,resolution:T.resolution,multisample:T.multisample}),L=!0,A&&(TEMP_RECT.width=A.width,TEMP_RECT.height=A.height,A=TEMP_RECT)));const D=T.gl;if(R){if(B=R.baseTexture.resolution,A=A??R.frame,I=!1,C=R.baseTexture.alphaMode>0&&R.baseTexture.format===FORMATS.RGBA,!L){T.renderTexture.bind(R);const W=R.framebuffer.glFramebuffers[T.CONTEXT_UID];W.blitFramebuffer&&T.framebuffer.bind(W.blitFramebuffer)}}else B=T.resolution,A||(A=TEMP_RECT,A.width=T.width/B,A.height=T.height/B),I=!0,C=this._rendererPremultipliedAlpha,T.renderTexture.bind();const V=Math.max(Math.round(A.width*B),1),U=Math.max(Math.round(A.height*B),1),z=new Uint8Array(BYTES_PER_PIXEL*V*U);return D.readPixels(Math.round(A.x*B),Math.round(A.y*B),V,U,D.RGBA,D.UNSIGNED_BYTE,z),L&&(R==null||R.destroy(!0)),{pixels:z,width:V,height:U,flipY:I,premultipliedAlpha:C}}destroy(){this.renderer=null}static _flipY(_,A,T){const B=A<<2,I=T>>1,C=new Uint8Array(B);for(let R=0;R<I;R++){const L=R*B,D=(T-R-1)*B;C.set(_.subarray(L,L+B)),_.copyWithin(L,D,D+B),_.set(C,D)}}static _unpremultiplyAlpha(_){_ instanceof Uint8ClampedArray&&(_=new Uint8Array(_.buffer));const A=_.length;for(let T=0;T<A;T+=4){const B=_[T+3];if(B!==0){const I=255.001/B;_[T]=_[T]*I+.5,_[T+1]=_[T+1]*I+.5,_[T+2]=_[T+2]*I+.5}}}};_Extract.extension={name:"extract",type:ExtensionType.RendererSystem};let Extract=_Extract;extensions$1.add(Extract);const buildCircle={build(E){const _=E.points;let A,T,B,I,C,R;if(E.type===SHAPES.CIRC){const Y=E.shape;A=Y.x,T=Y.y,C=R=Y.radius,B=I=0}else if(E.type===SHAPES.ELIP){const Y=E.shape;A=Y.x,T=Y.y,C=Y.width,R=Y.height,B=I=0}else{const Y=E.shape,K=Y.width/2,J=Y.height/2;A=Y.x+K,T=Y.y+J,C=R=Math.max(0,Math.min(Y.radius,Math.min(K,J))),B=K-C,I=J-R}if(!(C>=0&&R>=0&&B>=0&&I>=0)){_.length=0;return}const L=Math.ceil(2.3*Math.sqrt(C+R)),D=L*8+(B?4:0)+(I?4:0);if(_.length=D,D===0)return;if(L===0){_.length=8,_[0]=_[6]=A+B,_[1]=_[3]=T+I,_[2]=_[4]=A-B,_[5]=_[7]=T-I;return}let V=0,U=L*4+(B?2:0)+2,z=U,W=D;{const Y=B+C,K=I,J=A+Y,et=A-Y,it=T+K;if(_[V++]=J,_[V++]=it,_[--U]=it,_[--U]=et,I){const rt=T-K;_[z++]=et,_[z++]=rt,_[--W]=rt,_[--W]=J}}for(let Y=1;Y<L;Y++){const K=Math.PI/2*(Y/L),J=B+Math.cos(K)*C,et=I+Math.sin(K)*R,it=A+J,rt=A-J,st=T+et,lt=T-et;_[V++]=it,_[V++]=st,_[--U]=st,_[--U]=rt,_[z++]=rt,_[z++]=lt,_[--W]=lt,_[--W]=it}{const Y=B,K=I+R,J=A+Y,et=A-Y,it=T+K,rt=T-K;_[V++]=J,_[V++]=it,_[--W]=rt,_[--W]=J,B&&(_[V++]=et,_[V++]=it,_[--W]=rt,_[--W]=et)}},triangulate(E,_){const A=E.points,T=_.points,B=_.indices;if(A.length===0)return;let I=T.length/2;const C=I;let R,L;if(E.type!==SHAPES.RREC){const V=E.shape;R=V.x,L=V.y}else{const V=E.shape;R=V.x+V.width/2,L=V.y+V.height/2}const D=E.matrix;T.push(E.matrix?D.a*R+D.c*L+D.tx:R,E.matrix?D.b*R+D.d*L+D.ty:L),I++,T.push(A[0],A[1]);for(let V=2;V<A.length;V+=2)T.push(A[V],A[V+1]),B.push(I++,C,I);B.push(C+1,C,I)}};function fixOrientation(E,_=!1){const A=E.length;if(A<6)return;let T=0;for(let B=0,I=E[A-2],C=E[A-1];B<A;B+=2){const R=E[B],L=E[B+1];T+=(R-I)*(L+C),I=R,C=L}if(!_&&T>0||_&&T<=0){const B=A/2;for(let I=B+B%2;I<A;I+=2){const C=A-I-2,R=A-I-1,L=I,D=I+1;[E[C],E[L]]=[E[L],E[C]],[E[R],E[D]]=[E[D],E[R]]}}}const buildPoly={build(E){E.points=E.shape.points.slice()},triangulate(E,_){let A=E.points;const T=E.holes,B=_.points,I=_.indices;if(A.length>=6){fixOrientation(A,!1);const C=[];for(let D=0;D<T.length;D++){const V=T[D];fixOrientation(V.points,!0),C.push(A.length/2),A=A.concat(V.points)}const R=earcut$1(A,C,2);if(!R)return;const L=B.length/2;for(let D=0;D<R.length;D+=3)I.push(R[D]+L),I.push(R[D+1]+L),I.push(R[D+2]+L);for(let D=0;D<A.length;D++)B.push(A[D])}}},buildRectangle={build(E){const _=E.shape,A=_.x,T=_.y,B=_.width,I=_.height,C=E.points;C.length=0,B>=0&&I>=0&&C.push(A,T,A+B,T,A+B,T+I,A,T+I)},triangulate(E,_){const A=E.points,T=_.points;if(A.length===0)return;const B=T.length/2;T.push(A[0],A[1],A[2],A[3],A[6],A[7],A[4],A[5]),_.indices.push(B,B+1,B+2,B+1,B+2,B+3)}},buildRoundedRectangle={build(E){buildCircle.build(E)},triangulate(E,_){buildCircle.triangulate(E,_)}};var LINE_JOIN=(E=>(E.MITER="miter",E.BEVEL="bevel",E.ROUND="round",E))(LINE_JOIN||{}),LINE_CAP=(E=>(E.BUTT="butt",E.ROUND="round",E.SQUARE="square",E))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(E,_=20){if(!this.adaptive||!E||isNaN(E))return _;let A=Math.ceil(E/this.maxLength);return A<this.minSegments?A=this.minSegments:A>this.maxSegments&&(A=this.maxSegments),A}};class ArcUtils{static curveTo(_,A,T,B,I,C){const R=C[C.length-2],L=C[C.length-1]-A,D=R-_,V=B-A,U=T-_,z=Math.abs(L*U-D*V);if(z<1e-8||I===0)return(C[C.length-2]!==_||C[C.length-1]!==A)&&C.push(_,A),null;const W=L*L+D*D,Y=V*V+U*U,K=L*V+D*U,J=I*Math.sqrt(W)/z,et=I*Math.sqrt(Y)/z,it=J*K/W,rt=et*K/Y,st=J*U+et*D,lt=J*V+et*L,ct=D*(et+it),at=L*(et+it),ht=U*(J+rt),mt=V*(J+rt),yt=Math.atan2(at-lt,ct-st),Tt=Math.atan2(mt-lt,ht-st);return{cx:st+_,cy:lt+A,radius:I,startAngle:yt,endAngle:Tt,anticlockwise:D*V>U*L}}static arc(_,A,T,B,I,C,R,L,D){const V=R-C,U=curves._segmentsCount(Math.abs(V)*I,Math.ceil(Math.abs(V)/PI_2)*40),z=V/(U*2),W=z*2,Y=Math.cos(z),K=Math.sin(z),J=U-1,et=J%1/J;for(let it=0;it<=J;++it){const rt=it+et*it,st=z+C+W*rt,lt=Math.cos(st),ct=-Math.sin(st);D.push((Y*lt+K*ct)*I+T,(Y*-ct+K*lt)*I+B)}}}class BatchPart{constructor(){this.reset()}begin(_,A,T){this.reset(),this.style=_,this.start=A,this.attribStart=T}end(_,A){this.attribSize=A-this.attribStart,this.size=_-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(_,A,T,B,I,C,R,L){let D=0,V=0,U=0,z=0,W=0,Y=0,K=0,J=0,et=0,it=0,rt=0,st=_,lt=A;for(let ct=1;ct<=10;++ct)V=ct/10,U=V*V,z=U*V,W=1-V,Y=W*W,K=Y*W,J=K*_+3*Y*V*T+3*W*U*I+z*R,et=K*A+3*Y*V*B+3*W*U*C+z*L,it=st-J,rt=lt-et,st=J,lt=et,D+=Math.sqrt(it*it+rt*rt);return D}static curveTo(_,A,T,B,I,C,R){const L=R[R.length-2],D=R[R.length-1];R.length-=2;const V=curves._segmentsCount(BezierUtils.curveLength(L,D,_,A,T,B,I,C));let U=0,z=0,W=0,Y=0,K=0;R.push(L,D);for(let J=1,et=0;J<=V;++J)et=J/V,U=1-et,z=U*U,W=z*U,Y=et*et,K=Y*et,R.push(W*L+3*z*et*_+3*U*Y*T+K*I,W*D+3*z*et*A+3*U*Y*B+K*C)}}function square(E,_,A,T,B,I,C,R){const L=E-A*B,D=_-T*B,V=E+A*I,U=_+T*I;let z,W;C?(z=T,W=-A):(z=-T,W=A);const Y=L+z,K=D+W,J=V+z,et=U+W;return R.push(Y,K,J,et),2}function round(E,_,A,T,B,I,C,R){const L=A-E,D=T-_;let V=Math.atan2(L,D),U=Math.atan2(B-E,I-_);R&&V<U?V+=Math.PI*2:!R&&V>U&&(U+=Math.PI*2);let z=V;const W=U-V,Y=Math.abs(W),K=Math.sqrt(L*L+D*D),J=(15*Y*Math.sqrt(K)/Math.PI>>0)+1,et=W/J;if(z+=et,R){C.push(E,_,A,T);for(let it=1,rt=z;it<J;it++,rt+=et)C.push(E,_,E+Math.sin(rt)*K,_+Math.cos(rt)*K);C.push(E,_,B,I)}else{C.push(A,T,E,_);for(let it=1,rt=z;it<J;it++,rt+=et)C.push(E+Math.sin(rt)*K,_+Math.cos(rt)*K,E,_);C.push(B,I,E,_)}return J*2}function buildNonNativeLine(E,_){const A=E.shape;let T=E.points||A.points.slice();const B=_.closePointEps;if(T.length===0)return;const I=E.lineStyle,C=new Point(T[0],T[1]),R=new Point(T[T.length-2],T[T.length-1]),L=A.type!==SHAPES.POLY||A.closeStroke,D=Math.abs(C.x-R.x)<B&&Math.abs(C.y-R.y)<B;if(L){T=T.slice(),D&&(T.pop(),T.pop(),R.set(T[T.length-2],T[T.length-1]));const gt=(C.x+R.x)*.5,bt=(R.y+C.y)*.5;T.unshift(gt,bt),T.push(gt,bt)}const V=_.points,U=T.length/2;let z=T.length;const W=V.length/2,Y=I.width/2,K=Y*Y,J=I.miterLimit*I.miterLimit;let et=T[0],it=T[1],rt=T[2],st=T[3],lt=0,ct=0,at=-(it-st),ht=et-rt,mt=0,yt=0,Tt=Math.sqrt(at*at+ht*ht);at/=Tt,ht/=Tt,at*=Y,ht*=Y;const At=I.alignment,pt=(1-At)*2,Et=At*2;L||(I.cap===LINE_CAP.ROUND?z+=round(et-at*(pt-Et)*.5,it-ht*(pt-Et)*.5,et-at*pt,it-ht*pt,et+at*Et,it+ht*Et,V,!0)+2:I.cap===LINE_CAP.SQUARE&&(z+=square(et,it,at,ht,pt,Et,!0,V))),V.push(et-at*pt,it-ht*pt,et+at*Et,it+ht*Et);for(let gt=1;gt<U-1;++gt){et=T[(gt-1)*2],it=T[(gt-1)*2+1],rt=T[gt*2],st=T[gt*2+1],lt=T[(gt+1)*2],ct=T[(gt+1)*2+1],at=-(it-st),ht=et-rt,Tt=Math.sqrt(at*at+ht*ht),at/=Tt,ht/=Tt,at*=Y,ht*=Y,mt=-(st-ct),yt=rt-lt,Tt=Math.sqrt(mt*mt+yt*yt),mt/=Tt,yt/=Tt,mt*=Y,yt*=Y;const bt=rt-et,$t=it-st,Lt=rt-lt,St=ct-st,Ct=bt*Lt+$t*St,_t=$t*Lt-St*bt,wt=_t<0;if(Math.abs(_t)<.001*Math.abs(Ct)){V.push(rt-at*pt,st-ht*pt,rt+at*Et,st+ht*Et),Ct>=0&&(I.join===LINE_JOIN.ROUND?z+=round(rt,st,rt-at*pt,st-ht*pt,rt-mt*pt,st-yt*pt,V,!1)+4:z+=2,V.push(rt-mt*Et,st-yt*Et,rt+mt*pt,st+yt*pt));continue}const Mt=(-at+et)*(-ht+st)-(-at+rt)*(-ht+it),Gt=(-mt+lt)*(-yt+st)-(-mt+rt)*(-yt+ct),Jt=(bt*Gt-Lt*Mt)/_t,he=(St*Mt-$t*Gt)/_t,me=(Jt-rt)*(Jt-rt)+(he-st)*(he-st),ne=rt+(Jt-rt)*pt,Kt=st+(he-st)*pt,ue=rt-(Jt-rt)*Et,_e=st-(he-st)*Et,ge=Math.min(bt*bt+$t*$t,Lt*Lt+St*St),pe=wt?pt:Et,ve=ge+pe*pe*K,Ee=me<=ve;let De=I.join;if(De===LINE_JOIN.MITER&&me/K>J&&(De=LINE_JOIN.BEVEL),Ee)switch(De){case LINE_JOIN.MITER:{V.push(ne,Kt,ue,_e);break}case LINE_JOIN.BEVEL:{wt?V.push(ne,Kt,rt+at*Et,st+ht*Et,ne,Kt,rt+mt*Et,st+yt*Et):V.push(rt-at*pt,st-ht*pt,ue,_e,rt-mt*pt,st-yt*pt,ue,_e),z+=2;break}case LINE_JOIN.ROUND:{wt?(V.push(ne,Kt,rt+at*Et,st+ht*Et),z+=round(rt,st,rt+at*Et,st+ht*Et,rt+mt*Et,st+yt*Et,V,!0)+4,V.push(ne,Kt,rt+mt*Et,st+yt*Et)):(V.push(rt-at*pt,st-ht*pt,ue,_e),z+=round(rt,st,rt-at*pt,st-ht*pt,rt-mt*pt,st-yt*pt,V,!1)+4,V.push(rt-mt*pt,st-yt*pt,ue,_e));break}}else{switch(V.push(rt-at*pt,st-ht*pt,rt+at*Et,st+ht*Et),De){case LINE_JOIN.MITER:{wt?V.push(ue,_e,ue,_e):V.push(ne,Kt,ne,Kt),z+=2;break}case LINE_JOIN.ROUND:{wt?z+=round(rt,st,rt+at*Et,st+ht*Et,rt+mt*Et,st+yt*Et,V,!0)+2:z+=round(rt,st,rt-at*pt,st-ht*pt,rt-mt*pt,st-yt*pt,V,!1)+2;break}}V.push(rt-mt*pt,st-yt*pt,rt+mt*Et,st+yt*Et),z+=2}}et=T[(U-2)*2],it=T[(U-2)*2+1],rt=T[(U-1)*2],st=T[(U-1)*2+1],at=-(it-st),ht=et-rt,Tt=Math.sqrt(at*at+ht*ht),at/=Tt,ht/=Tt,at*=Y,ht*=Y,V.push(rt-at*pt,st-ht*pt,rt+at*Et,st+ht*Et),L||(I.cap===LINE_CAP.ROUND?z+=round(rt-at*(pt-Et)*.5,st-ht*(pt-Et)*.5,rt-at*pt,st-ht*pt,rt+at*Et,st+ht*Et,V,!1)+2:I.cap===LINE_CAP.SQUARE&&(z+=square(rt,st,at,ht,pt,Et,!1,V)));const Vt=_.indices,Ot=curves.epsilon*curves.epsilon;for(let gt=W;gt<z+W-2;++gt)et=V[gt*2],it=V[gt*2+1],rt=V[(gt+1)*2],st=V[(gt+1)*2+1],lt=V[(gt+2)*2],ct=V[(gt+2)*2+1],!(Math.abs(et*(st-ct)+rt*(ct-it)+lt*(it-st))<Ot)&&Vt.push(gt,gt+1,gt+2)}function buildNativeLine(E,_){let A=0;const T=E.shape,B=E.points||T.points,I=T.type!==SHAPES.POLY||T.closeStroke;if(B.length===0)return;const C=_.points,R=_.indices,L=B.length/2,D=C.length/2;let V=D;for(C.push(B[0],B[1]),A=1;A<L;A++)C.push(B[A*2],B[A*2+1]),R.push(V,V+1),V++;I&&R.push(V,D)}function buildLine(E,_){E.lineStyle.native?buildNativeLine(E,_):buildNonNativeLine(E,_)}class QuadraticUtils{static curveLength(_,A,T,B,I,C){const R=_-2*T+I,L=A-2*B+C,D=2*T-2*_,V=2*B-2*A,U=4*(R*R+L*L),z=4*(R*D+L*V),W=D*D+V*V,Y=2*Math.sqrt(U+z+W),K=Math.sqrt(U),J=2*U*K,et=2*Math.sqrt(W),it=z/K;return(J*Y+K*z*(Y-et)+(4*W*U-z*z)*Math.log((2*K+it+Y)/(it+et)))/(4*J)}static curveTo(_,A,T,B,I){const C=I[I.length-2],R=I[I.length-1],L=curves._segmentsCount(QuadraticUtils.curveLength(C,R,_,A,T,B));let D=0,V=0;for(let U=1;U<=L;++U){const z=U/L;D=C+(_-C)*z,V=R+(A-R)*z,I.push(D+(_+(T-_)*z-D)*z,V+(A+(B-A)*z-V)*z)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(_,A=null,T=null,B=null){this.points=[],this.holes=[],this.shape=_,this.lineStyle=T,this.fillStyle=A,this.matrix=B,this.type=_.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class io extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let _=0;_<this.drawCalls.length;_++)this.drawCalls[_].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[_]);this.drawCalls.length=0;for(let _=0;_<this.batches.length;_++){const A=this.batches[_];A.reset(),BATCH_POOL.push(A)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(_,A=null,T=null,B=null){const I=new GraphicsData(_,A,T,B);return this.graphicsData.push(I),this.dirty++,this}drawHole(_,A=null){if(!this.graphicsData.length)return null;const T=new GraphicsData(_,null,null,A),B=this.graphicsData[this.graphicsData.length-1];return T.lineStyle=B.lineStyle,B.holes.push(T),this.dirty++,this}destroy(){super.destroy();for(let _=0;_<this.graphicsData.length;++_)this.graphicsData[_].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(_){const A=this.graphicsData;for(let T=0;T<A.length;++T){const B=A[T];if(B.fillStyle.visible&&B.shape&&(B.matrix?B.matrix.applyInverse(_,tmpPoint):tmpPoint.copyFrom(_),B.shape.contains(tmpPoint.x,tmpPoint.y))){let I=!1;if(B.holes){for(let C=0;C<B.holes.length;C++)if(B.holes[C].shape.contains(tmpPoint.x,tmpPoint.y)){I=!0;break}}if(!I)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const _=this.uvs,A=this.graphicsData;let T=null,B=null;this.batches.length>0&&(T=this.batches[this.batches.length-1],B=T.style);for(let L=this.shapeIndex;L<A.length;L++){this.shapeIndex++;const D=A[L],V=D.fillStyle,U=D.lineStyle;FILL_COMMANDS[D.type].build(D),D.matrix&&this.transformPoints(D.points,D.matrix),(V.visible||U.visible)&&this.processHoles(D.holes);for(let z=0;z<2;z++){const W=z===0?V:U;if(!W.visible)continue;const Y=W.texture.baseTexture,K=this.indices.length,J=this.points.length/2;Y.wrapMode=WRAP_MODES.REPEAT,z===0?this.processFill(D):this.processLine(D);const et=this.points.length/2-J;et!==0&&(T&&!this._compareStyles(B,W)&&(T.end(K,J),T=null),T||(T=BATCH_POOL.pop()||new BatchPart,T.begin(W,K,J),this.batches.push(T),B=W),this.addUvs(this.points,_,W.texture,J,et,W.matrix))}}const I=this.indices.length,C=this.points.length/2;if(T&&T.end(I,C),this.batches.length===0){this.batchable=!0;return}const R=C>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&R===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=R?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(_,A){return!(!_||!A||_.texture.baseTexture!==A.texture.baseTexture||_.color+_.alpha!==A.color+A.alpha||!!_.native!=!!A.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let _=0,A=this.graphicsData.length;_<A;_++){const T=this.graphicsData[_],B=T.fillStyle,I=T.lineStyle;if(B&&!B.texture.baseTexture.valid||I&&!I.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const _=this.batches;for(let A=0,T=_.length;A<T;A++){const B=_[A];for(let I=0;I<B.size;I++){const C=B.start+I;this.indicesUint16[C]=this.indicesUint16[C]-B.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const _=this.batches;for(let A=0;A<_.length;A++)if(_[A].style.native)return!1;return this.points.length<io.BATCHABLE_SIZE*2}buildDrawCalls(){let _=++BaseTexture._globalBatch;for(let U=0;U<this.drawCalls.length;U++)this.drawCalls[U].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[U]);this.drawCalls.length=0;const A=this.colors,T=this.textureIds;let B=DRAW_CALL_POOL.pop();B||(B=new BatchDrawCall,B.texArray=new BatchTextureArray),B.texArray.count=0,B.start=0,B.size=0,B.type=DRAW_MODES.TRIANGLES;let I=0,C=null,R=0,L=!1,D=DRAW_MODES.TRIANGLES,V=0;this.drawCalls.push(B);for(let U=0;U<this.batches.length;U++){const z=this.batches[U],W=8,Y=z.style,K=Y.texture.baseTexture;L!==!!Y.native&&(L=!!Y.native,D=L?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,C=null,I=W,_++),C!==K&&(C=K,K._batchEnabled!==_&&(I===W&&(_++,I=0,B.size>0&&(B=DRAW_CALL_POOL.pop(),B||(B=new BatchDrawCall,B.texArray=new BatchTextureArray),this.drawCalls.push(B)),B.start=V,B.size=0,B.texArray.count=0,B.type=D),K.touched=1,K._batchEnabled=_,K._batchLocation=I,K.wrapMode=WRAP_MODES.REPEAT,B.texArray.elements[B.texArray.count++]=K,I++)),B.size+=z.size,V+=z.size,R=K._batchLocation,this.addColors(A,Y.color,Y.alpha,z.attribSize,z.attribStart),this.addTextureIds(T,R,z.attribSize,z.attribStart)}BaseTexture._globalBatch=_,this.packAttributes()}packAttributes(){const _=this.points,A=this.uvs,T=this.colors,B=this.textureIds,I=new ArrayBuffer(_.length*3*4),C=new Float32Array(I),R=new Uint32Array(I);let L=0;for(let D=0;D<_.length/2;D++)C[L++]=_[D*2],C[L++]=_[D*2+1],C[L++]=A[D*2],C[L++]=A[D*2+1],R[L++]=T[D],C[L++]=B[D];this._buffer.update(I),this._indexBuffer.update(this.indicesUint16)}processFill(_){_.holes.length?buildPoly.triangulate(_,this):FILL_COMMANDS[_.type].triangulate(_,this)}processLine(_){buildLine(_,this);for(let A=0;A<_.holes.length;A++)buildLine(_.holes[A],this)}processHoles(_){for(let A=0;A<_.length;A++){const T=_[A];FILL_COMMANDS[T.type].build(T),T.matrix&&this.transformPoints(T.points,T.matrix)}}calculateBounds(){const _=this._bounds;_.clear(),_.addVertexData(this.points,0,this.points.length),_.pad(this.boundsPadding,this.boundsPadding)}transformPoints(_,A){for(let T=0;T<_.length/2;T++){const B=_[T*2],I=_[T*2+1];_[T*2]=A.a*B+A.c*I+A.tx,_[T*2+1]=A.b*B+A.d*I+A.ty}}addColors(_,A,T,B,I=0){const C=Color.shared.setValue(A).toLittleEndianNumber(),R=Color.shared.setValue(C).toPremultiplied(T);_.length=Math.max(_.length,I+B);for(let L=0;L<B;L++)_[I+L]=R}addTextureIds(_,A,T,B=0){_.length=Math.max(_.length,B+T);for(let I=0;I<T;I++)_[B+I]=A}addUvs(_,A,T,B,I,C=null){let R=0;const L=A.length,D=T.frame;for(;R<I;){let U=_[(B+R)*2],z=_[(B+R)*2+1];if(C){const W=C.a*U+C.c*z+C.tx;z=C.b*U+C.d*z+C.ty,U=W}R++,A.push(U/D.width,z/D.height)}const V=T.baseTexture;(D.width<V.width||D.height<V.height)&&this.adjustUvs(A,T,L,I)}adjustUvs(_,A,T,B){const I=A.baseTexture,C=1e-6,R=T+B*2,L=A.frame,D=L.width/I.width,V=L.height/I.height;let U=L.x/L.width,z=L.y/L.height,W=Math.floor(_[T]+C),Y=Math.floor(_[T+1]+C);for(let K=T+2;K<R;K+=2)W=Math.min(W,Math.floor(_[K]+C)),Y=Math.min(Y,Math.floor(_[K+1]+C));U-=W,z-=Y;for(let K=T;K<R;K+=2)_[K]=(_[K]+U)*D,_[K+1]=(_[K+1]+z)*V}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const _=new FillStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const _=new LineStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_.width=this.width,_.alignment=this.alignment,_.native=this.native,_.cap=this.cap,_.join=this.join,_.miterLimit=this.miterLimit,_}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class nn extends Container{constructor(_=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=_||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new nn(this._geometry)}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(_=null,A=0,T,B=.5,I=!1){return typeof _=="number"&&(_={width:_,color:A,alpha:T,alignment:B,native:I}),this.lineTextureStyle(_)}lineTextureStyle(_){const A={width:0,texture:Texture.WHITE,color:_!=null&&_.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};_=Object.assign(A,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const T=_.width>0&&_.alpha>0;return T?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._lineStyle,{visible:T},_)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const _=this.currentPath.points,A=this.currentPath.points.length;A>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(_[A-2],_[A-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(_,A){return this.startPoly(),this.currentPath.points[0]=_,this.currentPath.points[1]=A,this}lineTo(_,A){this.currentPath||this.moveTo(0,0);const T=this.currentPath.points,B=T[T.length-2],I=T[T.length-1];return(B!==_||I!==A)&&T.push(_,A),this}_initCurve(_=0,A=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[_,A]):this.moveTo(_,A)}quadraticCurveTo(_,A,T,B){this._initCurve();const I=this.currentPath.points;return I.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(_,A,T,B,I),this}bezierCurveTo(_,A,T,B,I,C){return this._initCurve(),BezierUtils.curveTo(_,A,T,B,I,C,this.currentPath.points),this}arcTo(_,A,T,B,I){this._initCurve(_,A);const C=this.currentPath.points,R=ArcUtils.curveTo(_,A,T,B,I,C);if(R){const{cx:L,cy:D,radius:V,startAngle:U,endAngle:z,anticlockwise:W}=R;this.arc(L,D,V,U,z,W)}return this}arc(_,A,T,B,I,C=!1){if(B===I)return this;if(!C&&I<=B?I+=PI_2:C&&B<=I&&(B+=PI_2),I-B===0)return this;const R=_+Math.cos(B)*T,L=A+Math.sin(B)*T,D=this._geometry.closePointEps;let V=this.currentPath?this.currentPath.points:null;if(V){const U=Math.abs(V[V.length-2]-R),z=Math.abs(V[V.length-1]-L);U<D&&z<D||V.push(R,L)}else this.moveTo(R,L),V=this.currentPath.points;return ArcUtils.arc(R,L,_,A,T,B,I,C,V),this}beginFill(_=0,A){return this.beginTextureFill({texture:Texture.WHITE,color:_,alpha:A})}normalizeColor(_){const A=Color.shared.setValue(_.color??0);_.color=A.toNumber(),_.alpha??(_.alpha=A.alpha)}beginTextureFill(_){const A={texture:Texture.WHITE,color:16777215,matrix:null};_=Object.assign(A,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const T=_.alpha>0;return T?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._fillStyle,{visible:T},_)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(_,A,T,B){return this.drawShape(new Rectangle(_,A,T,B))}drawRoundedRect(_,A,T,B,I){return this.drawShape(new RoundedRectangle(_,A,T,B,I))}drawCircle(_,A,T){return this.drawShape(new Circle$1(_,A,T))}drawEllipse(_,A,T,B){return this.drawShape(new Ellipse(_,A,T,B))}drawPolygon(..._){let A,T=!0;const B=_[0];B.points?(T=B.closeStroke,A=B.points):Array.isArray(_[0])?A=_[0]:A=_;const I=new Polygon(A);return I.closeStroke=T,this.drawShape(I),this}drawShape(_){return this._holeMode?this._geometry.drawHole(_,this._matrix):this._geometry.drawShape(_,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const _=this._geometry.graphicsData;return _.length===1&&_[0].shape.type===SHAPES.RECT&&!_[0].matrix&&!_[0].holes.length&&!(_[0].lineStyle.visible&&_[0].lineStyle.width)}_render(_){this.finishPoly();const A=this._geometry;A.updateBatches(),A.batchable?(this.batchDirty!==A.batchDirty&&this._populateBatches(),this._renderBatched(_)):(_.batch.flush(),this._renderDirect(_))}_populateBatches(){const _=this._geometry,A=this.blendMode,T=_.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=_.batchDirty,this.batches.length=T,this.vertexData=new Float32Array(_.points);for(let B=0;B<T;B++){const I=_.batches[B],C=I.style.color,R=new Float32Array(this.vertexData.buffer,I.attribStart*4*2,I.attribSize*2),L=new Float32Array(_.uvsFloat32.buffer,I.attribStart*4*2,I.attribSize*2),D=new Uint16Array(_.indicesUint16.buffer,I.start*2,I.size),V={vertexData:R,blendMode:A,indices:D,uvs:L,_batchRGB:Color.shared.setValue(C).toRgbArray(),_tintRGB:C,_texture:I.style.texture,alpha:I.style.alpha,worldAlpha:1};this.batches[B]=V}}_renderBatched(_){if(this.batches.length){_.batch.setObjectRenderer(_.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let A=0,T=this.batches.length;A<T;A++){const B=this.batches[A];B.worldAlpha=this.worldAlpha*B.alpha,_.plugins[this.pluginName].render(B)}}}_renderDirect(_){const A=this._resolveDirectShader(_),T=this._geometry,B=this.worldAlpha,I=A.uniforms,C=T.drawCalls;I.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(B).toArray(I.tint),_.shader.bind(A),_.geometry.bind(T,A),_.state.set(this.state);for(let R=0,L=C.length;R<L;R++)this._renderDrawCallDirect(_,T.drawCalls[R])}_renderDrawCallDirect(_,A){const{texArray:T,type:B,size:I,start:C}=A,R=T.count;for(let L=0;L<R;L++)_.texture.bind(T.elements[L],L);_.geometry.draw(B,I,C)}_resolveDirectShader(_){let A=this.shader;const T=this.pluginName;if(!A){if(!DEFAULT_SHADERS[T]){const{maxTextures:B}=_.plugins[T],I=new Int32Array(B);for(let L=0;L<B;L++)I[L]=L;const C={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:I},!0)},R=_.plugins[T]._shader.program;DEFAULT_SHADERS[T]=new Shader(R,C)}A=DEFAULT_SHADERS[T]}return A}_calculateBounds(){this.finishPoly();const _=this._geometry;if(!_.graphicsData.length)return;const{minX:A,minY:T,maxX:B,maxY:I}=_.bounds;this._bounds.addFrame(this.transform,A,T,B,I)}containsPoint(_){return this.worldTransform.applyInverse(_,nn._TEMP_POINT),this._geometry.containsPoint(nn._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let _=0;_<this.batches.length;_++){const A=this.batches[_];A._tintRGB=Color.shared.setValue(this._tintColor).multiply(A._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const _=this.transform._worldID;if(this._transformID===_)return;this._transformID=_;const A=this.transform.worldTransform,T=A.a,B=A.b,I=A.c,C=A.d,R=A.tx,L=A.ty,D=this._geometry.points,V=this.vertexData;let U=0;for(let z=0;z<D.length;z+=2){const W=D[z],Y=D[z+1];V[U++]=T*W+I*Y+R,V[U++]=C*Y+B*W+L}}closePath(){const _=this.currentPath;return _&&(_.closeStroke=!0,this.finishPoly()),this}setMatrix(_){return this._matrix=_,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(_){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(_)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point;let Graphics=_Graphics;class MeshBatchUvs{constructor(_,A){this.uvBuffer=_,this.uvMatrix=A,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(_){if(!_&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const A=this.uvBuffer.data;(!this.data||this.data.length!==A.length)&&(this.data=new Float32Array(A.length)),this.uvMatrix.multiplyUvs(A,this.data),this._updateID++}}const tempPoint=new Point,tempPolygon=new Polygon,_Mesh=class ro extends Container{constructor(_,A,T,B=DRAW_MODES.TRIANGLES){super(),this.geometry=_,this.shader=A,this.state=T||State.for2d(),this.drawMode=B,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(_){this._geometry!==_&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=_,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(_){this.shader=_}get material(){return this.shader}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(_){this.shader.tint=_}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(_){this.shader.texture=_}_render(_){const A=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&A.length<ro.BATCHABLE_SIZE*2?this._renderToBatch(_):this._renderDefault(_)}_renderDefault(_){const A=this.shader;A.alpha=this.worldAlpha,A.update&&A.update(),_.batch.flush(),A.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),_.shader.bind(A),_.state.set(this.state),_.geometry.bind(this.geometry,A),_.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(_){const A=this.geometry,T=this.shader;T.uvMatrix&&(T.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=A.indexBuffer.data,this._tintRGB=T._tintRGB,this._texture=T.texture;const B=this.material.pluginName;_.batch.setObjectRenderer(_.plugins[B]),_.plugins[B].render(this)}calculateVertices(){const _=this.geometry.buffers[0],A=_.data,T=_._updateID;if(T===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==A.length&&(this.vertexData=new Float32Array(A.length));const B=this.transform.worldTransform,I=B.a,C=B.b,R=B.c,L=B.d,D=B.tx,V=B.ty,U=this.vertexData;for(let z=0;z<U.length/2;z++){const W=A[z*2],Y=A[z*2+1];U[z*2]=I*W+R*Y+D,U[z*2+1]=C*W+L*Y+V}if(this._roundPixels){const z=settings.RESOLUTION;for(let W=0;W<U.length;++W)U[W]=Math.round(U[W]*z)/z}this.vertexDirty=T}calculateUvs(){const _=this.geometry.buffers[1],A=this.shader;A.uvMatrix.isSimple?this.uvs=_.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(_,A.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(_){if(!this.getBounds().contains(_.x,_.y))return!1;this.worldTransform.applyInverse(_,tempPoint);const A=this.geometry.getBuffer("aVertexPosition").data,T=tempPolygon.points,B=this.geometry.getIndex().data,I=B.length,C=this.drawMode===4?3:1;for(let R=0;R+2<I;R+=C){const L=B[R]*2,D=B[R+1]*2,V=B[R+2]*2;if(T[0]=A[L],T[1]=A[L+1],T[2]=A[D],T[3]=A[D+1],T[4]=A[V],T[5]=A[V+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1}destroy(_){super.destroy(_),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(_,A,T){super();const B=new Buffer(_),I=new Buffer(A,!0),C=new Buffer(T,!0,!0);this.addAttribute("aVertexPosition",B,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",I,2,!1,TYPES.FLOAT).addIndex(C),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(_,A){const T={uSampler:_,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};A=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},A),A.uniforms&&Object.assign(T,A.uniforms),super(A.program||Program.from(vertex$1,fragment$1),T),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(_),this.batchable=A.program===void 0,this.pluginName=A.pluginName,this._tintColor=new Color(A.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=A.alpha}get texture(){return this.uniforms.uSampler}set texture(_){this.uniforms.uSampler!==_&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!_.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=_,this.uvMatrix.texture=_)}set alpha(_){_!==this._alpha&&(this._alpha=_,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(_){_!==this.tint&&(this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const _=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,_).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ParticleBuffer{constructor(_,A,T){this.geometry=new Geometry,this.indexBuffer=null,this.size=T,this.dynamicProperties=[],this.staticProperties=[];for(let B=0;B<_.length;++B){let I=_[B];I={attributeName:I.attributeName,size:I.size,uploadFunction:I.uploadFunction,type:I.type||TYPES.FLOAT,offset:I.offset},A[B]?this.dynamicProperties.push(I):this.staticProperties.push(I)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const _=this.geometry;let A=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),_.addIndex(this.indexBuffer),this.dynamicStride=0;for(let C=0;C<this.dynamicProperties.length;++C){const R=this.dynamicProperties[C];R.offset=A,A+=R.size,this.dynamicStride+=R.size}const T=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(T),this.dynamicDataUint32=new Uint32Array(T),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);let B=0;this.staticStride=0;for(let C=0;C<this.staticProperties.length;++C){const R=this.staticProperties[C];R.offset=B,B+=R.size,this.staticStride+=R.size}const I=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(I),this.staticDataUint32=new Uint32Array(I),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(let C=0;C<this.dynamicProperties.length;++C){const R=this.dynamicProperties[C];_.addAttribute(R.attributeName,this.dynamicBuffer,0,R.type===TYPES.UNSIGNED_BYTE,R.type,this.dynamicStride*4,R.offset*4)}for(let C=0;C<this.staticProperties.length;++C){const R=this.staticProperties[C];_.addAttribute(R.attributeName,this.staticBuffer,0,R.type===TYPES.UNSIGNED_BYTE,R.type,this.staticStride*4,R.offset*4)}}uploadDynamic(_,A,T){for(let B=0;B<this.dynamicProperties.length;B++){const I=this.dynamicProperties[B];I.uploadFunction(_,A,T,I.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,I.offset)}this.dynamicBuffer._updateID++}uploadStatic(_,A,T){for(let B=0;B<this.staticProperties.length;B++){const I=this.staticProperties[B];I.uploadFunction(_,A,T,I.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,I.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(_){super(_),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State.for2d()}render(_){const A=_.children,T=_._maxSize,B=_._batchSize,I=this.renderer;let C=A.length;if(C===0)return;C>T&&!_.autoResize&&(C=T);let R=_._buffers;R||(R=_._buffers=this.generateBuffers(_));const L=A[0]._texture.baseTexture,D=L.alphaMode>0;this.state.blendMode=correctBlendMode(_.blendMode,D),I.state.set(this.state);const V=I.gl,U=_.worldTransform.copyTo(this.tempMatrix);U.prepend(I.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=U.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(_.tintRgb).premultiply(_.worldAlpha,D).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=L,this.renderer.shader.bind(this.shader);let z=!1;for(let W=0,Y=0;W<C;W+=B,Y+=1){let K=C-W;K>B&&(K=B),Y>=R.length&&R.push(this._generateOneMoreBuffer(_));const J=R[Y];J.uploadDynamic(A,W,K);const et=_._bufferUpdateIDs[Y]||0;z=z||J._updateID<et,z&&(J._updateID=_._updateID,J.uploadStatic(A,W,K)),I.geometry.bind(J.geometry),V.drawElements(V.TRIANGLES,K*6,V.UNSIGNED_SHORT,0)}}generateBuffers(_){const A=[],T=_._maxSize,B=_._batchSize,I=_._properties;for(let C=0;C<T;C+=B)A.push(new ParticleBuffer(this.properties,I,B));return A}_generateOneMoreBuffer(_){const A=_._batchSize,T=_._properties;return new ParticleBuffer(this.properties,T,A)}uploadVertices(_,A,T,B,I,C){let R=0,L=0,D=0,V=0;for(let U=0;U<T;++U){const z=_[A+U],W=z._texture,Y=z.scale.x,K=z.scale.y,J=W.trim,et=W.orig;J?(L=J.x-z.anchor.x*et.width,R=L+J.width,V=J.y-z.anchor.y*et.height,D=V+J.height):(R=et.width*(1-z.anchor.x),L=et.width*-z.anchor.x,D=et.height*(1-z.anchor.y),V=et.height*-z.anchor.y),B[C]=L*Y,B[C+1]=V*K,B[C+I]=R*Y,B[C+I+1]=V*K,B[C+I*2]=R*Y,B[C+I*2+1]=D*K,B[C+I*3]=L*Y,B[C+I*3+1]=D*K,C+=I*4}}uploadPosition(_,A,T,B,I,C){for(let R=0;R<T;R++){const L=_[A+R].position;B[C]=L.x,B[C+1]=L.y,B[C+I]=L.x,B[C+I+1]=L.y,B[C+I*2]=L.x,B[C+I*2+1]=L.y,B[C+I*3]=L.x,B[C+I*3+1]=L.y,C+=I*4}}uploadRotation(_,A,T,B,I,C){for(let R=0;R<T;R++){const L=_[A+R].rotation;B[C]=L,B[C+I]=L,B[C+I*2]=L,B[C+I*3]=L,C+=I*4}}uploadUvs(_,A,T,B,I,C){for(let R=0;R<T;++R){const L=_[A+R]._texture._uvs;L?(B[C]=L.x0,B[C+1]=L.y0,B[C+I]=L.x1,B[C+I+1]=L.y1,B[C+I*2]=L.x2,B[C+I*2+1]=L.y2,B[C+I*3]=L.x3,B[C+I*3+1]=L.y3,C+=I*4):(B[C]=0,B[C+1]=0,B[C+I]=0,B[C+I+1]=0,B[C+I*2]=0,B[C+I*2+1]=0,B[C+I*3]=0,B[C+I*3+1]=0,C+=I*4)}}uploadTint(_,A,T,B,I,C){for(let R=0;R<T;++R){const L=_[A+R],D=Color.shared.setValue(L._tintRGB).toPremultiplied(L.alpha,L.texture.baseTexture.alphaMode>0);B[C]=D,B[C+I]=D,B[C+I*2]=D,B[C+I*3]=D,C+=I*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$1.add(ParticleRenderer);var TEXT_GRADIENT=(E=>(E[E.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",E[E.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",E))(TEXT_GRADIENT||{});const contextSettings={willReadFrequently:!0},_TextMetrics=class ae{static get experimentalLetterSpacingSupported(){let _=ae._experimentalLetterSpacingSupported;if(_!==void 0){const A=settings.ADAPTER.getCanvasRenderingContext2D().prototype;_=ae._experimentalLetterSpacingSupported="letterSpacing"in A||"textLetterSpacing"in A}return _}constructor(_,A,T,B,I,C,R,L,D){this.text=_,this.style=A,this.width=T,this.height=B,this.lines=I,this.lineWidths=C,this.lineHeight=R,this.maxLineWidth=L,this.fontProperties=D}static measureText(_,A,T,B=ae._canvas){T=T??A.wordWrap;const I=A.toFontString(),C=ae.measureFont(I);C.fontSize===0&&(C.fontSize=A.fontSize,C.ascent=A.fontSize);const R=B.getContext("2d",contextSettings);R.font=I;const L=(T?ae.wordWrap(_,A,B):_).split(/(?:\r\n|\r|\n)/),D=new Array(L.length);let V=0;for(let Y=0;Y<L.length;Y++){const K=ae._measureText(L[Y],A.letterSpacing,R);D[Y]=K,V=Math.max(V,K)}let U=V+A.strokeThickness;A.dropShadow&&(U+=A.dropShadowDistance);const z=A.lineHeight||C.fontSize+A.strokeThickness;let W=Math.max(z,C.fontSize+A.strokeThickness*2)+A.leading+(L.length-1)*(z+A.leading);return A.dropShadow&&(W+=A.dropShadowDistance),new ae(_,A,U,W,L,D,z+A.leading,V,C)}static _measureText(_,A,T){let B=!1;ae.experimentalLetterSpacingSupported&&(ae.experimentalLetterSpacing?(T.letterSpacing=`${A}px`,T.textLetterSpacing=`${A}px`,B=!0):(T.letterSpacing="0px",T.textLetterSpacing="0px"));let I=T.measureText(_).width;return I>0&&(B?I-=A:I+=(ae.graphemeSegmenter(_).length-1)*A),I}static wordWrap(_,A,T=ae._canvas){const B=T.getContext("2d",contextSettings);let I=0,C="",R="";const L=Object.create(null),{letterSpacing:D,whiteSpace:V}=A,U=ae.collapseSpaces(V),z=ae.collapseNewlines(V);let W=!U;const Y=A.wordWrapWidth+D,K=ae.tokenize(_);for(let J=0;J<K.length;J++){let et=K[J];if(ae.isNewline(et)){if(!z){R+=ae.addLine(C),W=!U,C="",I=0;continue}et=" "}if(U){const rt=ae.isBreakingSpace(et),st=ae.isBreakingSpace(C[C.length-1]);if(rt&&st)continue}const it=ae.getFromCache(et,D,L,B);if(it>Y)if(C!==""&&(R+=ae.addLine(C),C="",I=0),ae.canBreakWords(et,A.breakWords)){const rt=ae.wordWrapSplit(et);for(let st=0;st<rt.length;st++){let lt=rt[st],ct=lt,at=1;for(;rt[st+at];){const mt=rt[st+at];if(!ae.canBreakChars(ct,mt,et,st,A.breakWords))lt+=mt;else break;ct=mt,at++}st+=at-1;const ht=ae.getFromCache(lt,D,L,B);ht+I>Y&&(R+=ae.addLine(C),W=!1,C="",I=0),C+=lt,I+=ht}}else{C.length>0&&(R+=ae.addLine(C),C="",I=0);const rt=J===K.length-1;R+=ae.addLine(et,!rt),W=!1,C="",I=0}else it+I>Y&&(W=!1,R+=ae.addLine(C),C="",I=0),(C.length>0||!ae.isBreakingSpace(et)||W)&&(C+=et,I+=it)}return R+=ae.addLine(C,!1),R}static addLine(_,A=!0){return _=ae.trimRight(_),_=A?`${_}
`:_,_}static getFromCache(_,A,T,B){let I=T[_];return typeof I!="number"&&(I=ae._measureText(_,A,B)+A,T[_]=I),I}static collapseSpaces(_){return _==="normal"||_==="pre-line"}static collapseNewlines(_){return _==="normal"}static trimRight(_){if(typeof _!="string")return"";for(let A=_.length-1;A>=0;A--){const T=_[A];if(!ae.isBreakingSpace(T))break;_=_.slice(0,-1)}return _}static isNewline(_){return typeof _!="string"?!1:ae._newlines.includes(_.charCodeAt(0))}static isBreakingSpace(_,A){return typeof _!="string"?!1:ae._breakingSpaces.includes(_.charCodeAt(0))}static tokenize(_){const A=[];let T="";if(typeof _!="string")return A;for(let B=0;B<_.length;B++){const I=_[B],C=_[B+1];if(ae.isBreakingSpace(I,C)||ae.isNewline(I)){T!==""&&(A.push(T),T=""),A.push(I);continue}T+=I}return T!==""&&A.push(T),A}static canBreakWords(_,A){return A}static canBreakChars(_,A,T,B,I){return!0}static wordWrapSplit(_){return ae.graphemeSegmenter(_)}static measureFont(_){if(ae._fonts[_])return ae._fonts[_];const A={ascent:0,descent:0,fontSize:0},T=ae._canvas,B=ae._context;B.font=_;const I=ae.METRICS_STRING+ae.BASELINE_SYMBOL,C=Math.ceil(B.measureText(I).width);let R=Math.ceil(B.measureText(ae.BASELINE_SYMBOL).width);const L=Math.ceil(ae.HEIGHT_MULTIPLIER*R);if(R=R*ae.BASELINE_MULTIPLIER|0,C===0||L===0)return ae._fonts[_]=A,A;T.width=C,T.height=L,B.fillStyle="#f00",B.fillRect(0,0,C,L),B.font=_,B.textBaseline="alphabetic",B.fillStyle="#000",B.fillText(I,0,R);const D=B.getImageData(0,0,C,L).data,V=D.length,U=C*4;let z=0,W=0,Y=!1;for(z=0;z<R;++z){for(let K=0;K<U;K+=4)if(D[W+K]!==255){Y=!0;break}if(!Y)W+=U;else break}for(A.ascent=R-z,W=V-U,Y=!1,z=L;z>R;--z){for(let K=0;K<U;K+=4)if(D[W+K]!==255){Y=!0;break}if(!Y)W-=U;else break}return A.descent=z-R,A.fontSize=A.ascent+A.descent,ae._fonts[_]=A,A}static clearMetrics(_=""){_?delete ae._fonts[_]:ae._fonts={}}static get _canvas(){var _;if(!ae.__canvas){let A;try{const T=new OffscreenCanvas(0,0);if((_=T.getContext("2d",contextSettings))!=null&&_.measureText)return ae.__canvas=T,T;A=settings.ADAPTER.createCanvas()}catch{A=settings.ADAPTER.createCanvas()}A.width=A.height=10,ae.__canvas=A}return ae.__canvas}static get _context(){return ae.__context||(ae.__context=ae._canvas.getContext("2d",contextSettings)),ae.__context}};_TextMetrics.METRICS_STRING="|ÃqÃ",_TextMetrics.BASELINE_SYMBOL="M",_TextMetrics.BASELINE_MULTIPLIER=1.4,_TextMetrics.HEIGHT_MULTIPLIER=2,_TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const E=new Intl.Segmenter;return _=>[...E.segment(_)].map(A=>A.segment)}return E=>[...E]})(),_TextMetrics.experimentalLetterSpacing=!1,_TextMetrics._fonts={},_TextMetrics._newlines=[10,13],_TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let TextMetrics=_TextMetrics;const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class Rr{constructor(_){this.styleID=0,this.reset(),deepCopyProperties(this,_,_)}clone(){const _={};return deepCopyProperties(_,this,Rr.defaultStyle),new Rr(_)}reset(){deepCopyProperties(this,Rr.defaultStyle,Rr.defaultStyle)}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(_){this._breakWords!==_&&(this._breakWords=_,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(_){this._dropShadow!==_&&(this._dropShadow=_,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(_){this._dropShadowAlpha!==_&&(this._dropShadowAlpha=_,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(_){this._dropShadowAngle!==_&&(this._dropShadowAngle=_,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(_){this._dropShadowBlur!==_&&(this._dropShadowBlur=_,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(_){const A=getColor(_);this._dropShadowColor!==A&&(this._dropShadowColor=A,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(_){this._dropShadowDistance!==_&&(this._dropShadowDistance=_,this.styleID++)}get fill(){return this._fill}set fill(_){const A=getColor(_);this._fill!==A&&(this._fill=A,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(_){this._fillGradientType!==_&&(this._fillGradientType=_,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(_){areArraysEqual(this._fillGradientStops,_)||(this._fillGradientStops=_,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(_){this.fontFamily!==_&&(this._fontFamily=_,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(_){this._fontStyle!==_&&(this._fontStyle=_,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(_){this._fontVariant!==_&&(this._fontVariant=_,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(_){this._fontWeight!==_&&(this._fontWeight=_,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(_){this._lineHeight!==_&&(this._lineHeight=_,this.styleID++)}get leading(){return this._leading}set leading(_){this._leading!==_&&(this._leading=_,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(_){this._lineJoin!==_&&(this._lineJoin=_,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(_){this._miterLimit!==_&&(this._miterLimit=_,this.styleID++)}get padding(){return this._padding}set padding(_){this._padding!==_&&(this._padding=_,this.styleID++)}get stroke(){return this._stroke}set stroke(_){const A=getColor(_);this._stroke!==A&&(this._stroke=A,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(_){this._strokeThickness!==_&&(this._strokeThickness=_,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(_){this._textBaseline!==_&&(this._textBaseline=_,this.styleID++)}get trim(){return this._trim}set trim(_){this._trim!==_&&(this._trim=_,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(_){this._whiteSpace!==_&&(this._whiteSpace=_,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(_){this._wordWrap!==_&&(this._wordWrap=_,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(_){this._wordWrapWidth!==_&&(this._wordWrapWidth=_,this.styleID++)}toFontString(){const _=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let A=this.fontFamily;Array.isArray(this.fontFamily)||(A=this.fontFamily.split(","));for(let T=A.length-1;T>=0;T--){let B=A[T].trim();!/([\"\'])[^\'\"]+\1/.test(B)&&!genericFontFamilies.includes(B)&&(B=`"${B}"`),A[T]=B}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${_} ${A.join(",")}`}};_TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function getColor(E){const _=Color.shared,A=T=>{const B=_.setValue(T);return B.alpha===1?B.toHex():B.toRgbaString()};return Array.isArray(E)?E.map(A):A(E)}function areArraysEqual(E,_){if(!Array.isArray(E)||!Array.isArray(_)||E.length!==_.length)return!1;for(let A=0;A<E.length;++A)if(E[A]!==_[A])return!1;return!0}function deepCopyProperties(E,_,A){for(const T in A)Array.isArray(_[T])?E[T]=_[T].slice():E[T]=_[T]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class In extends Sprite{constructor(_,A,T){let B=!1;T||(T=settings.ADAPTER.createCanvas(),B=!0),T.width=3,T.height=3;const I=Texture.from(T);I.orig=new Rectangle,I.trim=new Rectangle,super(I),this._ownCanvas=B,this.canvas=T,this.context=T.getContext("2d",{willReadFrequently:!0}),this._resolution=In.defaultResolution??settings.RESOLUTION,this._autoResolution=In.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=_,this.style=A,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(_){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=_}updateText(_){const A=this._style;if(this.localStyleID!==A.styleID&&(this.dirty=!0,this.localStyleID=A.styleID),!this.dirty&&_)return;this._font=this._style.toFontString();const T=this.context,B=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),I=B.width,C=B.height,R=B.lines,L=B.lineHeight,D=B.lineWidths,V=B.maxLineWidth,U=B.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,I)+A.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,C)+A.padding*2)*this._resolution),T.scale(this._resolution,this._resolution),T.clearRect(0,0,this.canvas.width,this.canvas.height),T.font=this._font,T.lineWidth=A.strokeThickness,T.textBaseline=A.textBaseline,T.lineJoin=A.lineJoin,T.miterLimit=A.miterLimit;let z,W;const Y=A.dropShadow?2:1;for(let K=0;K<Y;++K){const J=A.dropShadow&&K===0,et=J?Math.ceil(Math.max(1,C)+A.padding*2):0,it=et*this._resolution;if(J){T.fillStyle="black",T.strokeStyle="black";const st=A.dropShadowColor,lt=A.dropShadowBlur*this._resolution,ct=A.dropShadowDistance*this._resolution;T.shadowColor=Color.shared.setValue(st).setAlpha(A.dropShadowAlpha).toRgbaString(),T.shadowBlur=lt,T.shadowOffsetX=Math.cos(A.dropShadowAngle)*ct,T.shadowOffsetY=Math.sin(A.dropShadowAngle)*ct+it}else T.fillStyle=this._generateFillStyle(A,R,B),T.strokeStyle=A.stroke,T.shadowColor="black",T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0;let rt=(L-U.fontSize)/2;L-U.fontSize<0&&(rt=0);for(let st=0;st<R.length;st++)z=A.strokeThickness/2,W=A.strokeThickness/2+st*L+U.ascent+rt,A.align==="right"?z+=V-D[st]:A.align==="center"&&(z+=(V-D[st])/2),A.stroke&&A.strokeThickness&&this.drawLetterSpacing(R[st],z+A.padding,W+A.padding-et,!0),A.fill&&this.drawLetterSpacing(R[st],z+A.padding,W+A.padding-et)}this.updateTexture()}drawLetterSpacing(_,A,T,B=!1){const I=this._style.letterSpacing;let C=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${I}px`,this.context.textLetterSpacing=`${I}px`,C=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),I===0||C){B?this.context.strokeText(_,A,T):this.context.fillText(_,A,T);return}let R=A;const L=TextMetrics.graphemeSegmenter(_);let D=this.context.measureText(_).width,V=0;for(let U=0;U<L.length;++U){const z=L[U];B?this.context.strokeText(z,R,T):this.context.fillText(z,R,T);let W="";for(let Y=U+1;Y<L.length;++Y)W+=L[Y];V=this.context.measureText(W).width,R+=D-V+I,D=V}}updateTexture(){const _=this.canvas;if(this._style.trim){const C=trimCanvas(_);C.data&&(_.width=C.width,_.height=C.height,this.context.putImageData(C.data,0,0))}const A=this._texture,T=this._style,B=T.trim?0:T.padding,I=A.baseTexture;A.trim.width=A._frame.width=_.width/this._resolution,A.trim.height=A._frame.height=_.height/this._resolution,A.trim.x=-B,A.trim.y=-B,A.orig.width=A._frame.width-B*2,A.orig.height=A._frame.height-B*2,this._onTextureUpdate(),I.setRealSize(_.width,_.height,this._resolution),A.updateUvs(),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(_,A){return this.updateText(!0),this._textureID===-1&&(_=!1),super.getBounds(_,A)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds.call(this,_)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(_,A,T){const B=_.fill;if(Array.isArray(B)){if(B.length===1)return B[0]}else return B;let I;const C=_.dropShadow?_.dropShadowDistance:0,R=_.padding||0,L=this.canvas.width/this._resolution-C-R*2,D=this.canvas.height/this._resolution-C-R*2,V=B.slice(),U=_.fillGradientStops.slice();if(!U.length){const z=V.length+1;for(let W=1;W<z;++W)U.push(W/z)}if(V.unshift(B[0]),U.unshift(0),V.push(B[B.length-1]),U.push(1),_.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){I=this.context.createLinearGradient(L/2,R,L/2,D+R);const z=T.fontProperties.fontSize+_.strokeThickness;for(let W=0;W<A.length;W++){const Y=T.lineHeight*(W-1)+z,K=T.lineHeight*W;let J=K;W>0&&Y>K&&(J=(K+Y)/2);const et=K+z,it=T.lineHeight*(W+1);let rt=et;W+1<A.length&&it<et&&(rt=(et+it)/2);const st=(rt-J)/D;for(let lt=0;lt<V.length;lt++){let ct=0;typeof U[lt]=="number"?ct=U[lt]:ct=lt/V.length;let at=Math.min(1,Math.max(0,J/D+ct*st));at=Number(at.toFixed(5)),I.addColorStop(at,V[lt])}}}else{I=this.context.createLinearGradient(R,D/2,L+R,D/2);const z=V.length+1;let W=1;for(let Y=0;Y<V.length;Y++){let K;typeof U[Y]=="number"?K=U[Y]:K=W/z,I.addColorStop(K,V[Y]),W++}}return I}destroy(_){typeof _=="boolean"&&(_={children:_}),_=Object.assign({},defaultDestroyOptions,_),super.destroy(_),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(_){this.updateText(!0);const A=sign(this.scale.x)||1;this.scale.x=A*_/this._texture.orig.width,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(_){this.updateText(!0);const A=sign(this.scale.y)||1;this.scale.y=A*_/this._texture.orig.height,this._height=_}get style(){return this._style}set style(_){_=_||{},_ instanceof TextStyle?this._style=_:this._style=new TextStyle(_),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}};_Text.defaultAutoResolution=!0;let Text=_Text;class CountLimiter{constructor(_){this.maxItemsPerFrame=_,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(E,_){var T;let A=!1;if((T=E==null?void 0:E._textures)!=null&&T.length){for(let B=0;B<E._textures.length;B++)if(E._textures[B]instanceof Texture){const I=E._textures[B].baseTexture;_.includes(I)||(_.push(I),A=!0)}}return A}function findBaseTexture(E,_){if(E.baseTexture instanceof BaseTexture){const A=E.baseTexture;return _.includes(A)||_.push(A),!0}return!1}function findTexture(E,_){if(E._texture&&E._texture instanceof Texture){const A=E._texture.baseTexture;return _.includes(A)||_.push(A),!0}return!1}function drawText(E,_){return _ instanceof Text?(_.updateText(!0),!0):!1}function calculateTextStyle(E,_){if(_ instanceof TextStyle){const A=_.toFontString();return TextMetrics.measureFont(A),!0}return!1}function findText(E,_){if(E instanceof Text){_.includes(E.style)||_.push(E.style),_.includes(E)||_.push(E);const A=E._texture.baseTexture;return _.includes(A)||_.push(A),!0}return!1}function findTextStyle(E,_){return E instanceof TextStyle?(_.includes(E)||_.push(E),!0):!1}const _BasePrepare=class no{constructor(_){this.limiter=new CountLimiter(no.uploadsPerFrame),this.renderer=_,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(_){return new Promise(A=>{_&&this.add(_),this.queue.length?(this.completes.push(A),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):A()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const _=this.queue[0];let A=!1;if(_&&!_._destroyed){for(let T=0,B=this.uploadHooks.length;T<B;T++)if(this.uploadHooks[T](this.uploadHookHelper,_)){this.queue.shift(),A=!0;break}}A||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const _=this.completes.slice(0);this.completes.length=0;for(let A=0,T=_.length;A<T;A++)_[A]()}}registerFindHook(_){return _&&this.addHooks.push(_),this}registerUploadHook(_){return _&&this.uploadHooks.push(_),this}add(_){for(let A=0,T=this.addHooks.length;A<T&&!this.addHooks[A](_,this.queue);A++);if(_ instanceof Container)for(let A=_.children.length-1;A>=0;A--)this.add(_.children[A]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_BasePrepare.uploadsPerFrame=4;let BasePrepare=_BasePrepare;Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(E){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=E}}});function uploadBaseTextures(E,_){return _ instanceof BaseTexture?(_._glTextures[E.CONTEXT_UID]||E.texture.bind(_),!0):!1}function uploadGraphics(E,_){if(!(_ instanceof Graphics))return!1;const{geometry:A}=_;_.finishPoly(),A.updateBatches();const{batches:T}=A;for(let B=0;B<T.length;B++){const{texture:I}=T[B].style;I&&uploadBaseTextures(E,I.baseTexture)}return A.batchable||E.geometry.bind(A,_._resolveDirectShader(E)),!0}function findGraphics(E,_){return E instanceof Graphics?(_.push(E),!0):!1}class Prepare extends BasePrepare{constructor(_){super(_),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$1.add(Prepare);var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(_){super(_),_.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const _=this.renderer,A={globals:_.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,A),this.shader=_.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,A):Shader.from(gl1VertexSrc,gl1FragmentSrc,A)}render(_){const A=this.renderer,T=this.quad;let B=T.vertices;B[0]=B[6]=_._width*-_.anchor.x,B[1]=B[3]=_._height*-_.anchor.y,B[2]=B[4]=_._width*(1-_.anchor.x),B[5]=B[7]=_._height*(1-_.anchor.y);const I=_.uvRespectAnchor?_.anchor.x:0,C=_.uvRespectAnchor?_.anchor.y:0;B=T.uvs,B[0]=B[6]=-I,B[1]=B[3]=-C,B[2]=B[4]=1-I,B[5]=B[7]=1-C,T.invalidate();const R=_._texture,L=R.baseTexture,D=L.alphaMode>0,V=_.tileTransform.localTransform,U=_.uvMatrix;let z=L.isPowerOfTwo&&R.frame.width===L.width&&R.frame.height===L.height;z&&(L._glTextures[A.CONTEXT_UID]?z=L.wrapMode!==WRAP_MODES.CLAMP:L.wrapMode===WRAP_MODES.CLAMP&&(L.wrapMode=WRAP_MODES.REPEAT));const W=z?this.simpleShader:this.shader,Y=R.width,K=R.height,J=_._width,et=_._height;tempMat.set(V.a*Y/J,V.b*Y/et,V.c*K/J,V.d*K/et,V.tx/J,V.ty/et),tempMat.invert(),z?tempMat.prepend(U.mapCoord):(W.uniforms.uMapCoord=U.mapCoord.toArray(!0),W.uniforms.uClampFrame=U.uClampFrame,W.uniforms.uClampOffset=U.uClampOffset),W.uniforms.uTransform=tempMat.toArray(!0),W.uniforms.uColor=Color.shared.setValue(_.tint).premultiply(_.worldAlpha,D).toArray(W.uniforms.uColor),W.uniforms.translationMatrix=_.transform.worldTransform.toArray(!0),W.uniforms.uSampler=R,A.shader.bind(W),A.geometry.bind(T),this.state.blendMode=correctBlendMode(_.blendMode,D),A.state.set(this.state),A.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$1.add(TilingSpriteRenderer);const _Spritesheet=class Lr{constructor(_,A,T=null){this.linkedSheets=[],this._texture=_ instanceof Texture?_:null,this.baseTexture=_ instanceof BaseTexture?_:this._texture.baseTexture,this.textures={},this.animations={},this.data=A;const B=this.baseTexture.resource;this.resolution=this._updateResolution(T||(B?B.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(_=null){const{scale:A}=this.data.meta;let T=getResolutionOfUrl(_,null);return T===null&&(T=parseFloat(A??"1")),T!==1&&this.baseTexture.setResolution(T),T}parse(){return new Promise(_=>{this._callback=_,this._batchIndex=0,this._frameKeys.length<=Lr.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(_){let A=_;const T=Lr.BATCH_SIZE;for(;A-_<T&&A<this._frameKeys.length;){const B=this._frameKeys[A],I=this._frames[B],C=I.frame;if(C){let R=null,L=null;const D=I.trimmed!==!1&&I.sourceSize?I.sourceSize:I.frame,V=new Rectangle(0,0,Math.floor(D.w)/this.resolution,Math.floor(D.h)/this.resolution);I.rotated?R=new Rectangle(Math.floor(C.x)/this.resolution,Math.floor(C.y)/this.resolution,Math.floor(C.h)/this.resolution,Math.floor(C.w)/this.resolution):R=new Rectangle(Math.floor(C.x)/this.resolution,Math.floor(C.y)/this.resolution,Math.floor(C.w)/this.resolution,Math.floor(C.h)/this.resolution),I.trimmed!==!1&&I.spriteSourceSize&&(L=new Rectangle(Math.floor(I.spriteSourceSize.x)/this.resolution,Math.floor(I.spriteSourceSize.y)/this.resolution,Math.floor(C.w)/this.resolution,Math.floor(C.h)/this.resolution)),this.textures[B]=new Texture(this.baseTexture,R,V,L,I.rotated?2:0,I.anchor,I.borders),Texture.addToCache(this.textures[B],B.toString())}A++}}_processAnimations(){const _=this.data.animations||{};for(const A in _){this.animations[A]=[];for(let T=0;T<_[A].length;T++){const B=_[A][T];this.animations[A].push(this.textures[B])}}}_parseComplete(){const _=this._callback;this._callback=null,this._batchIndex=0,_.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Lr.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Lr.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(_=!1){var A;for(const T in this.textures)this.textures[T].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,_&&((A=this._texture)==null||A.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp"];function getCacheableAssets(E,_,A){const T={};if(E.forEach(B=>{T[B]=_}),Object.keys(_.textures).forEach(B=>{T[B]=_.textures[B]}),!A){const B=path.dirname(E[0]);_.linkedSheets.forEach((I,C)=>{const R=getCacheableAssets([`${B}/${_.data.meta.related_multi_packs[C]}`],I,!0);Object.assign(T,R)})}return T}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:E=>E instanceof Spritesheet,getCacheableAssets:(E,_)=>getCacheableAssets(E,_,!1)},resolver:{test:E=>{const _=E.split("?")[0].split("."),A=_.pop(),T=_.pop();return A==="json"&&validImages.includes(T)},parse:E=>{var A;const _=E.split(".");return{resolution:parseFloat(((A=settings.RETINA_PREFIX.exec(E))==null?void 0:A[1])??"1"),format:_[_.length-2],src:E}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(E,_){return path.extname(_.src).toLowerCase()===".json"&&!!E.frames},async parse(E,_,A){var L,D;let T=path.dirname(_.src);T&&T.lastIndexOf("/")!==T.length-1&&(T+="/");let B=T+E.meta.image;B=copySearchParams(B,_.src);const I=(await A.load([B]))[B],C=new Spritesheet(I.baseTexture,E,_.src);await C.parse();const R=(L=E==null?void 0:E.meta)==null?void 0:L.related_multi_packs;if(Array.isArray(R)){const V=[];for(const z of R){if(typeof z!="string")continue;let W=T+z;(D=_.data)!=null&&D.ignoreMultiPack||(W=copySearchParams(W,_.src),V.push(A.load({src:W,data:{ignoreMultiPack:!0}})))}const U=await Promise.all(V);C.linkedSheets=U,U.forEach(z=>{z.linkedSheets=[C].concat(C.linkedSheets.filter(W=>W!==z))})}return C},unload(E){E.destroy(!0)}}};extensions$1.add(spritesheetAsset);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(_){return typeof _=="string"&&_.startsWith("info face=")}static parse(_){const A=_.match(/^[a-z]+\s+.+$/gm),T={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const I in A){const C=A[I].match(/^[a-z]+/gm)[0],R=A[I].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),L={};for(const D in R){const V=R[D].split("="),U=V[0],z=V[1].replace(/"/gm,""),W=parseFloat(z),Y=isNaN(W)?z:W;L[U]=Y}T[C].push(L)}const B=new BitmapFontData;return T.info.forEach(I=>B.info.push({face:I.face,size:parseInt(I.size,10)})),T.common.forEach(I=>B.common.push({lineHeight:parseInt(I.lineHeight,10)})),T.page.forEach(I=>B.page.push({id:parseInt(I.id,10),file:I.file})),T.char.forEach(I=>B.char.push({id:parseInt(I.id,10),page:parseInt(I.page,10),x:parseInt(I.x,10),y:parseInt(I.y,10),width:parseInt(I.width,10),height:parseInt(I.height,10),xoffset:parseInt(I.xoffset,10),yoffset:parseInt(I.yoffset,10),xadvance:parseInt(I.xadvance,10)})),T.kerning.forEach(I=>B.kerning.push({first:parseInt(I.first,10),second:parseInt(I.second,10),amount:parseInt(I.amount,10)})),T.distanceField.forEach(I=>B.distanceField.push({distanceRange:parseInt(I.distanceRange,10),fieldType:I.fieldType})),B}}class XMLFormat{static test(_){const A=_;return typeof _!="string"&&"getElementsByTagName"in _&&A.getElementsByTagName("page").length&&A.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(_){const A=new BitmapFontData,T=_.getElementsByTagName("info"),B=_.getElementsByTagName("common"),I=_.getElementsByTagName("page"),C=_.getElementsByTagName("char"),R=_.getElementsByTagName("kerning"),L=_.getElementsByTagName("distanceField");for(let D=0;D<T.length;D++)A.info.push({face:T[D].getAttribute("face"),size:parseInt(T[D].getAttribute("size"),10)});for(let D=0;D<B.length;D++)A.common.push({lineHeight:parseInt(B[D].getAttribute("lineHeight"),10)});for(let D=0;D<I.length;D++)A.page.push({id:parseInt(I[D].getAttribute("id"),10)||0,file:I[D].getAttribute("file")});for(let D=0;D<C.length;D++){const V=C[D];A.char.push({id:parseInt(V.getAttribute("id"),10),page:parseInt(V.getAttribute("page"),10)||0,x:parseInt(V.getAttribute("x"),10),y:parseInt(V.getAttribute("y"),10),width:parseInt(V.getAttribute("width"),10),height:parseInt(V.getAttribute("height"),10),xoffset:parseInt(V.getAttribute("xoffset"),10),yoffset:parseInt(V.getAttribute("yoffset"),10),xadvance:parseInt(V.getAttribute("xadvance"),10)})}for(let D=0;D<R.length;D++)A.kerning.push({first:parseInt(R[D].getAttribute("first"),10),second:parseInt(R[D].getAttribute("second"),10),amount:parseInt(R[D].getAttribute("amount"),10)});for(let D=0;D<L.length;D++)A.distanceField.push({fieldType:L[D].getAttribute("fieldType"),distanceRange:parseInt(L[D].getAttribute("distanceRange"),10)});return A}}class XMLStringFormat{static test(_){return typeof _=="string"&&_.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(_)):!1}static parse(_){return XMLFormat.parse(settings.ADAPTER.parseXML(_))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(E){for(let _=0;_<formats.length;_++)if(formats[_].test(E))return formats[_];return null}function generateFillStyle(E,_,A,T,B,I){const C=A.fill;if(Array.isArray(C)){if(C.length===1)return C[0]}else return C;let R;const L=A.dropShadow?A.dropShadowDistance:0,D=A.padding||0,V=E.width/T-L-D*2,U=E.height/T-L-D*2,z=C.slice(),W=A.fillGradientStops.slice();if(!W.length){const Y=z.length+1;for(let K=1;K<Y;++K)W.push(K/Y)}if(z.unshift(C[0]),W.unshift(0),z.push(C[C.length-1]),W.push(1),A.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){R=_.createLinearGradient(V/2,D,V/2,U+D);let Y=0;const K=(I.fontProperties.fontSize+A.strokeThickness)/U;for(let J=0;J<B.length;J++){const et=I.lineHeight*J;for(let it=0;it<z.length;it++){let rt=0;typeof W[it]=="number"?rt=W[it]:rt=it/z.length;const st=et/U+rt*K;let lt=Math.max(Y,st);lt=Math.min(lt,1),R.addColorStop(lt,z[it]),Y=lt}}}else{R=_.createLinearGradient(D,U/2,V+D,U/2);const Y=z.length+1;let K=1;for(let J=0;J<z.length;J++){let et;typeof W[J]=="number"?et=W[J]:et=K/Y,R.addColorStop(et,z[J]),K++}}return R}function drawGlyph(E,_,A,T,B,I,C){const R=A.text,L=A.fontProperties;_.translate(T,B),_.scale(I,I);const D=C.strokeThickness/2,V=-(C.strokeThickness/2);if(_.font=C.toFontString(),_.lineWidth=C.strokeThickness,_.textBaseline=C.textBaseline,_.lineJoin=C.lineJoin,_.miterLimit=C.miterLimit,_.fillStyle=generateFillStyle(E,_,C,I,[R],A),_.strokeStyle=C.stroke,C.dropShadow){const U=C.dropShadowColor,z=C.dropShadowBlur*I,W=C.dropShadowDistance*I;_.shadowColor=Color.shared.setValue(U).setAlpha(C.dropShadowAlpha).toRgbaString(),_.shadowBlur=z,_.shadowOffsetX=Math.cos(C.dropShadowAngle)*W,_.shadowOffsetY=Math.sin(C.dropShadowAngle)*W}else _.shadowColor="black",_.shadowBlur=0,_.shadowOffsetX=0,_.shadowOffsetY=0;C.stroke&&C.strokeThickness&&_.strokeText(R,D,V+A.lineHeight-L.descent),C.fill&&_.fillText(R,D,V+A.lineHeight-L.descent),_.setTransform(1,0,0,1,0,0),_.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(E){return E.codePointAt?E.codePointAt(0):E.charCodeAt(0)}function splitTextToCharacters(E){return Array.from?Array.from(E):E.split("")}function resolveCharacters(E){typeof E=="string"&&(E=[E]);const _=[];for(let A=0,T=E.length;A<T;A++){const B=E[A];if(Array.isArray(B)){if(B.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${B.length}.`);const I=B[0].charCodeAt(0),C=B[1].charCodeAt(0);if(C<I)throw new Error("[BitmapFont]: Invalid character range.");for(let R=I,L=C;R<=L;R++)_.push(String.fromCharCode(R))}else _.push(...splitTextToCharacters(B))}if(_.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return _}const _BitmapFont=class $i{constructor(_,A,T){var V;const[B]=_.info,[I]=_.common,[C]=_.page,[R]=_.distanceField,L=getResolutionOfUrl(C.file),D={};this._ownsTextures=T,this.font=B.face,this.size=B.size,this.lineHeight=I.lineHeight/L,this.chars={},this.pageTextures=D;for(let U=0;U<_.page.length;U++){const{id:z,file:W}=_.page[U];D[z]=A instanceof Array?A[U]:A[W],R!=null&&R.fieldType&&R.fieldType!=="none"&&(D[z].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,D[z].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let U=0;U<_.char.length;U++){const{id:z,page:W}=_.char[U];let{x:Y,y:K,width:J,height:et,xoffset:it,yoffset:rt,xadvance:st}=_.char[U];Y/=L,K/=L,J/=L,et/=L,it/=L,rt/=L,st/=L;const lt=new Rectangle(Y+D[W].frame.x/L,K+D[W].frame.y/L,J,et);this.chars[z]={xOffset:it,yOffset:rt,xAdvance:st,kerning:{},texture:new Texture(D[W].baseTexture,lt),page:W}}for(let U=0;U<_.kerning.length;U++){let{first:z,second:W,amount:Y}=_.kerning[U];z/=L,W/=L,Y/=L,this.chars[W]&&(this.chars[W].kerning[z]=Y)}this.distanceFieldRange=R==null?void 0:R.distanceRange,this.distanceFieldType=((V=R==null?void 0:R.fieldType)==null?void 0:V.toLowerCase())??"none"}destroy(){for(const _ in this.chars)this.chars[_].texture.destroy(),this.chars[_].texture=null;for(const _ in this.pageTextures)this._ownsTextures&&this.pageTextures[_].destroy(!0),this.pageTextures[_]=null;this.chars=null,this.pageTextures=null}static install(_,A,T){let B;if(_ instanceof BitmapFontData)B=_;else{const C=autoDetectFormat(_);if(!C)throw new Error("Unrecognized data format for font.");B=C.parse(_)}A instanceof Texture&&(A=[A]);const I=new $i(B,A,T);return $i.available[I.font]=I,I}static uninstall(_){const A=$i.available[_];if(!A)throw new Error(`No font found named '${_}'`);A.destroy(),delete $i.available[_]}static from(_,A,T){if(!_)throw new Error("[BitmapFont] Property `name` is required.");const{chars:B,padding:I,resolution:C,textureWidth:R,textureHeight:L,...D}=Object.assign({},$i.defaultOptions,T),V=resolveCharacters(B),U=A instanceof TextStyle?A:new TextStyle(A),z=R,W=new BitmapFontData;W.info[0]={face:U.fontFamily,size:U.fontSize},W.common[0]={lineHeight:U.fontSize};let Y=0,K=0,J,et,it,rt=0;const st=[];for(let ct=0;ct<V.length;ct++){J||(J=settings.ADAPTER.createCanvas(),J.width=R,J.height=L,et=J.getContext("2d"),it=new BaseTexture(J,{resolution:C,...D}),st.push(new Texture(it)),W.page.push({id:st.length-1,file:""}));const at=V[ct],ht=TextMetrics.measureText(at,U,!1,J),mt=ht.width,yt=Math.ceil(ht.height),Tt=Math.ceil((U.fontStyle==="italic"?2:1)*mt);if(K>=L-yt*C){if(K===0)throw new Error(`[BitmapFont] textureHeight ${L}px is too small (fontFamily: '${U.fontFamily}', fontSize: ${U.fontSize}px, char: '${at}')`);--ct,J=null,et=null,it=null,K=0,Y=0,rt=0;continue}if(rt=Math.max(yt+ht.fontProperties.descent,rt),Tt*C+Y>=z){if(Y===0)throw new Error(`[BitmapFont] textureWidth ${R}px is too small (fontFamily: '${U.fontFamily}', fontSize: ${U.fontSize}px, char: '${at}')`);--ct,K+=rt*C,K=Math.ceil(K),Y=0,rt=0;continue}drawGlyph(J,et,ht,Y,K,C,U);const At=extractCharCode(ht.text);W.char.push({id:At,page:st.length-1,x:Y/C,y:K/C,width:Tt,height:yt,xoffset:0,yoffset:0,xadvance:mt-(U.dropShadow?U.dropShadowDistance:0)-(U.stroke?U.strokeThickness:0)}),Y+=(Tt+2*I)*C,Y=Math.ceil(Y)}if(!(T!=null&&T.skipKerning))for(let ct=0,at=V.length;ct<at;ct++){const ht=V[ct];for(let mt=0;mt<at;mt++){const yt=V[mt],Tt=et.measureText(ht).width,At=et.measureText(yt).width,pt=et.measureText(ht+yt).width-(Tt+At);pt&&W.kerning.push({first:extractCharCode(ht),second:extractCharCode(yt),amount:pt})}}const lt=new $i(W,st,!0);return $i.available[_]!==void 0&&$i.uninstall(_),$i.available[_]=lt,lt}};_BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],_BitmapFont.NUMERIC=[["0","9"]],_BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_BitmapFont.ASCII=[[" ","~"]],_BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},_BitmapFont.available={};let BitmapFont=_BitmapFont;var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class so extends Container{constructor(_,A={}){super();const{align:T,tint:B,maxWidth:I,letterSpacing:C,fontName:R,fontSize:L}=Object.assign({},so.styleDefaults,A);if(!BitmapFont.available[R])throw new Error(`Missing BitmapFont "${R}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=T,this._tintColor=new Color(B),this._font=void 0,this._fontName=R,this._fontSize=L,this.text=_,this._maxWidth=I,this._maxLineHeight=0,this._letterSpacing=C,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Tt;const _=BitmapFont.available[this._fontName],A=this.fontSize,T=A/_.size,B=new Point,I=[],C=[],R=[],L=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",D=splitTextToCharacters(L),V=this._maxWidth*_.size/A,U=_.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let z=null,W=0,Y=0,K=0,J=-1,et=0,it=0,rt=0,st=0;for(let At=0;At<D.length;At++){const pt=D[At],Et=extractCharCode(pt);if(/(?:\s)/.test(pt)&&(J=At,et=W,st++),pt==="\r"||pt===`
`){C.push(W),R.push(-1),Y=Math.max(Y,W),++K,++it,B.x=0,B.y+=_.lineHeight,z=null,st=0;continue}const Vt=_.chars[Et];if(!Vt)continue;z&&Vt.kerning[z]&&(B.x+=Vt.kerning[z]);const Ot=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};Ot.texture=Vt.texture,Ot.line=K,Ot.charCode=Et,Ot.position.x=Math.round(B.x+Vt.xOffset+this._letterSpacing/2),Ot.position.y=Math.round(B.y+Vt.yOffset),Ot.prevSpaces=st,I.push(Ot),W=Ot.position.x+Math.max(Vt.xAdvance-Vt.xOffset,Vt.texture.orig.width),B.x+=Vt.xAdvance+this._letterSpacing,rt=Math.max(rt,Vt.yOffset+Vt.texture.height),z=Et,J!==-1&&V>0&&B.x>V&&(++it,removeItems(I,1+J-it,1+At-J),At=J,J=-1,C.push(et),R.push(I.length>0?I[I.length-1].prevSpaces:0),Y=Math.max(Y,et),K++,B.x=0,B.y+=_.lineHeight,z=null,st=0)}const lt=D[D.length-1];lt!=="\r"&&lt!==`
`&&(/(?:\s)/.test(lt)&&(W=et),C.push(W),Y=Math.max(Y,W),R.push(-1));const ct=[];for(let At=0;At<=K;At++){let pt=0;this._align==="right"?pt=Y-C[At]:this._align==="center"?pt=(Y-C[At])/2:this._align==="justify"&&(pt=R[At]<0?0:(Y-C[At])/R[At]),ct.push(pt)}const at=I.length,ht={},mt=[],yt=this._activePagesMeshData;U.push(...yt);for(let At=0;At<at;At++){const pt=I[At].texture,Et=pt.baseTexture.uid;if(!ht[Et]){let Vt=U.pop();if(!Vt){const gt=new MeshGeometry;let bt,$t;_.distanceFieldType==="none"?(bt=new MeshMaterial(Texture.EMPTY),$t=BLEND_MODES.NORMAL):(bt=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),$t=BLEND_MODES.NORMAL_NPM);const Lt=new Mesh(gt,bt);Lt.blendMode=$t,Vt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Lt,vertices:null,uvs:null,indices:null}}Vt.index=0,Vt.indexCount=0,Vt.vertexCount=0,Vt.uvsCount=0,Vt.total=0;const{_textureCache:Ot}=this;Ot[Et]=Ot[Et]||new Texture(pt.baseTexture),Vt.mesh.texture=Ot[Et],Vt.mesh.tint=this._tintColor.value,mt.push(Vt),ht[Et]=Vt}ht[Et].total++}for(let At=0;At<yt.length;At++)mt.includes(yt[At])||this.removeChild(yt[At].mesh);for(let At=0;At<mt.length;At++)mt[At].mesh.parent!==this&&this.addChild(mt[At].mesh);this._activePagesMeshData=mt;for(const At in ht){const pt=ht[At],Et=pt.total;if(!(((Tt=pt.indices)==null?void 0:Tt.length)>6*Et)||pt.vertices.length<Mesh.BATCHABLE_SIZE*2)pt.vertices=new Float32Array(4*2*Et),pt.uvs=new Float32Array(4*2*Et),pt.indices=new Uint16Array(6*Et);else{const Vt=pt.total,Ot=pt.vertices;for(let gt=Vt*4*2;gt<Ot.length;gt++)Ot[gt]=0}pt.mesh.size=6*Et}for(let At=0;At<at;At++){const pt=I[At];let Et=pt.position.x+ct[pt.line]*(this._align==="justify"?pt.prevSpaces:1);this._roundPixels&&(Et=Math.round(Et));const Vt=Et*T,Ot=pt.position.y*T,gt=pt.texture,bt=ht[gt.baseTexture.uid],$t=gt.frame,Lt=gt._uvs,St=bt.index++;bt.indices[St*6+0]=0+St*4,bt.indices[St*6+1]=1+St*4,bt.indices[St*6+2]=2+St*4,bt.indices[St*6+3]=0+St*4,bt.indices[St*6+4]=2+St*4,bt.indices[St*6+5]=3+St*4,bt.vertices[St*8+0]=Vt,bt.vertices[St*8+1]=Ot,bt.vertices[St*8+2]=Vt+$t.width*T,bt.vertices[St*8+3]=Ot,bt.vertices[St*8+4]=Vt+$t.width*T,bt.vertices[St*8+5]=Ot+$t.height*T,bt.vertices[St*8+6]=Vt,bt.vertices[St*8+7]=Ot+$t.height*T,bt.uvs[St*8+0]=Lt.x0,bt.uvs[St*8+1]=Lt.y0,bt.uvs[St*8+2]=Lt.x1,bt.uvs[St*8+3]=Lt.y1,bt.uvs[St*8+4]=Lt.x2,bt.uvs[St*8+5]=Lt.y2,bt.uvs[St*8+6]=Lt.x3,bt.uvs[St*8+7]=Lt.y3}this._textWidth=Y*T,this._textHeight=(B.y+_.lineHeight)*T;for(const At in ht){const pt=ht[At];if(this.anchor.x!==0||this.anchor.y!==0){let gt=0;const bt=this._textWidth*this.anchor.x,$t=this._textHeight*this.anchor.y;for(let Lt=0;Lt<pt.total;Lt++)pt.vertices[gt++]-=bt,pt.vertices[gt++]-=$t,pt.vertices[gt++]-=bt,pt.vertices[gt++]-=$t,pt.vertices[gt++]-=bt,pt.vertices[gt++]-=$t,pt.vertices[gt++]-=bt,pt.vertices[gt++]-=$t}this._maxLineHeight=rt*T;const Et=pt.mesh.geometry.getBuffer("aVertexPosition"),Vt=pt.mesh.geometry.getBuffer("aTextureCoord"),Ot=pt.mesh.geometry.getIndex();Et.data=pt.vertices,Vt.data=pt.uvs,Ot.data=pt.indices,Et.update(),Vt.update(),Ot.update()}for(let At=0;At<I.length;At++)charRenderDataPool.push(I[At]);this._font=_,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0);const{distanceFieldRange:A,distanceFieldType:T,size:B}=BitmapFont.available[this._fontName];if(T!=="none"){const{a:I,b:C,c:R,d:L}=this.worldTransform,D=Math.sqrt(I*I+C*C),V=Math.sqrt(R*R+L*L),U=(Math.abs(D)+Math.abs(V))/2,z=this.fontSize/B,W=_._view.resolution;for(const Y of this._activePagesMeshData)Y.mesh.shader.uniforms.uFWidth=U*A*z*W}super._render(_)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const _=BitmapFont.available[this._fontName];if(!_)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==_&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(_){if(this.tint!==_){this._tintColor.setValue(_);for(let A=0;A<this._activePagesMeshData.length;A++)this._activePagesMeshData[A].mesh.tint=_}}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.dirty=!0)}get fontName(){return this._fontName}set fontName(_){if(!BitmapFont.available[_])throw new Error(`Missing BitmapFont "${_}"`);this._fontName!==_&&(this._fontName=_,this.dirty=!0)}get fontSize(){return this._fontSize??BitmapFont.available[this._fontName].size}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.dirty=!0)}get anchor(){return this._anchor}set anchor(_){typeof _=="number"?this._anchor.set(_):this._anchor.copyFrom(_)}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(_){this._maxWidth!==_&&(this._maxWidth=_,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(_){_!==this._roundPixels&&(this._roundPixels=_,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}destroy(_){const{_textureCache:A}=this,T=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;T.push(...this._activePagesMeshData);for(const B of this._activePagesMeshData)this.removeChild(B.mesh);this._activePagesMeshData=[],T.filter(B=>A[B.mesh.texture.baseTexture.uid]).forEach(B=>{B.mesh.texture=Texture.EMPTY});for(const B in A)A[B].destroy(),delete A[B];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(_)}};_BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(E){return validExtensions.includes(path.extname(E).toLowerCase())},async testParse(E){return TextFormat.test(E)||XMLStringFormat.test(E)},async parse(E,_,A){const T=TextFormat.test(E)?TextFormat.parse(E):XMLStringFormat.parse(E),{src:B}=_,{page:I}=T,C=[];for(let D=0;D<I.length;++D){const V=I[D].file;let U=path.join(path.dirname(B),V);U=copySearchParams(U,B),C.push(U)}const R=await A.load(C),L=C.map(D=>R[D]);return BitmapFont.install(T,L,!0)},async load(E,_){return(await settings.ADAPTER.fetch(E)).text()},unload(E){E.destroy()}};extensions$1.add(loadBitmapFont);const _HTMLTextStyle=class mr extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(_){return new mr(Object.keys(mr.defaultOptions).reduce((A,T)=>({...A,[T]:_[T]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(_=>{URL.revokeObjectURL(_.src),_.refs--,_.refs===0&&(_.fontFace&&document.fonts.delete(_.fontFace),delete mr.availableFonts[_.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(_,A={}){const{availableFonts:T}=mr;if(T[_]){const B=T[_];return this._fonts.push(B),B.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(_).then(B=>B.blob()).then(async B=>new Promise((I,C)=>{const R=URL.createObjectURL(B),L=new FileReader;L.onload=()=>I([R,L.result]),L.onerror=C,L.readAsDataURL(B)})).then(async([B,I])=>{const C=Object.assign({family:path.basename(_,path.extname(_)),weight:"normal",style:"normal",display:"auto",src:B,dataSrc:I,refs:1,originalUrl:_,fontFace:null},A);T[_]=C,this._fonts.push(C),this.styleID++;const R=new FontFace(C.family,`url(${C.src})`,{weight:C.weight,style:C.style,display:C.display});C.fontFace=R,await R.load(),document.fonts.add(R),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(..._){const A=_.filter(T=>!this._overrides.includes(T));A.length>0&&(this._overrides.push(...A),this.styleID++)}removeOverride(..._){const A=_.filter(T=>this._overrides.includes(T));A.length>0&&(this._overrides=this._overrides.filter(T=>!A.includes(T)),this.styleID++)}toCSS(_){return[`transform: scale(${_})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((_,A)=>`${_}
            @font-face {
                font-family: "${A.family}";
                src: url('${A.dataSrc}');
                font-weight: ${A.weight};
                font-style: ${A.style};
                font-display: ${A.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(_){this._stylesheet!==_&&(this._stylesheet=_,this.styleID++)}normalizeColor(_){return Array.isArray(_)&&(_=rgb2hex(_)),typeof _=="number"?hex2string(_):_}dropShadowToCSS(){let _=this.normalizeColor(this.dropShadowColor);const A=this.dropShadowAlpha,T=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),B=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);_.startsWith("#")&&A<1&&(_+=(A*255|0).toString(16).padStart(2,"0"));const I=`${T}px ${B}px`;return this.dropShadowBlur>0?`text-shadow: ${I} ${this.dropShadowBlur}px ${_}`:`text-shadow: ${I} ${_}`}reset(){Object.assign(this,mr.defaultOptions)}onBeforeDraw(){const{fontsDirty:_}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&_?new Promise(A=>setTimeout(A,100)):Promise.resolve()}get isSafari(){const{userAgent:_}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(_)}set fillGradientStops(_){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(_){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(_){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(_){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(_){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(_){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(_){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class fr extends Sprite{constructor(_="",A={}){super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const T=new Image,B=Texture.from(T,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});B.orig=new Rectangle,B.trim=new Rectangle,this.texture=B;const I="http://www.w3.org/2000/svg",C="http://www.w3.org/1999/xhtml",R=document.createElementNS(I,"svg"),L=document.createElementNS(I,"foreignObject"),D=document.createElementNS(C,"div"),V=document.createElementNS(C,"style");L.setAttribute("width","10000"),L.setAttribute("height","10000"),L.style.overflow="hidden",R.appendChild(L),this.maxWidth=fr.defaultMaxWidth,this.maxHeight=fr.defaultMaxHeight,this._domElement=D,this._styleElement=V,this._svgRoot=R,this._foreignObject=L,this._foreignObject.appendChild(V),this._foreignObject.appendChild(D),this._image=T,this._loadImage=new Image,this._autoResolution=fr.defaultAutoResolution,this._resolution=fr.defaultResolution??settings.RESOLUTION,this.text=_,this.style=A}measureText(_){var V,U;const{text:A,style:T,resolution:B}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},_);Object.assign(this._domElement,{innerHTML:A,style:T.toCSS(B)}),this._styleElement.textContent=T.toGlobalCSS(),document.body.appendChild(this._svgRoot);const I=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:C,height:R}=I;(C>this.maxWidth||R>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const L=Math.min(this.maxWidth,Math.ceil(C)),D=Math.min(this.maxHeight,Math.ceil(R));return this._svgRoot.setAttribute("width",L.toString()),this._svgRoot.setAttribute("height",D.toString()),A!==this._text&&(this._domElement.innerHTML=this._text),T!==this._style&&(Object.assign(this._domElement,{style:(V=this._style)==null?void 0:V.toCSS(B)}),this._styleElement.textContent=(U=this._style)==null?void 0:U.toGlobalCSS()),{width:L+T.padding*2,height:D+T.padding*2}}async updateText(_=!0){const{style:A,_image:T,_loadImage:B}=this;if(this.localStyleID!==A.styleID&&(this.dirty=!0,this.localStyleID=A.styleID),!this.dirty&&_)return;const{width:I,height:C}=this.measureText();T.width=B.width=Math.ceil(Math.max(1,I)),T.height=B.height=Math.ceil(Math.max(1,C)),this._updateID++;const R=this._updateID;await new Promise(L=>{B.onload=async()=>{if(R<this._updateID){L();return}await A.onBeforeDraw(),T.src=B.src,B.onload=null,B.src="",this.updateTexture(),L()};const D=new XMLSerializer().serializeToString(this._svgRoot);B.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(D)}`})}get source(){return this._image}updateTexture(){const{style:_,texture:A,_image:T,resolution:B}=this,{padding:I}=_,{baseTexture:C}=A;A.trim.width=A._frame.width=T.width/B,A.trim.height=A._frame.height=T.height/B,A.trim.x=-I,A.trim.y=-I,A.orig.width=A._frame.width-I*2,A.orig.height=A._frame.height-I*2,this._onTextureUpdate(),C.setRealSize(T.width,T.height,B),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}_renderCanvas(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(_)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds(_)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(_){var T,B,I,C,R;typeof _=="boolean"&&(_={children:_}),_=Object.assign({},fr.defaultDestroyOptions,_),super.destroy(_);const A=null;this.ownsStyle&&((T=this._style)==null||T.cleanFonts()),this._style=A,(B=this._svgRoot)==null||B.remove(),this._svgRoot=A,(I=this._domElement)==null||I.remove(),this._domElement=A,(C=this._foreignObject)==null||C.remove(),this._foreignObject=A,(R=this._styleElement)==null||R.remove(),this._styleElement=A,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=A,this._image.src="",this._image=A}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(_){this.updateText(!0);const A=sign(this.scale.x)||1;this.scale.x=A*_/this._image.width/this.resolution,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(_){this.updateText(!0);const A=sign(this.scale.y)||1;this.scale.y=A*_/this._image.height/this.resolution,this._height=_}get style(){return this._style}set style(_){this._style!==_&&(_=_||{},_ instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=_):_ instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(_)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(_)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(_){_=String(_===""||_===null||_===void 0?" ":_),_=this.sanitiseText(_),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}sanitiseText(_){return _.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;function delay(E){return new Promise(_=>{setTimeout(_,E)})}function randomInt(E,_){if(E=Math.ceil(E),_=Math.floor(_),E>_)throw Error(`ä¸éå¼${E}ä¸è½å¤§äºä¸éå¼${_}`);const A=_-E+1;return E+Math.floor(Math.random()*A)}function isPortrait(){const E=window.orientation;return E===0||E===180}const innerWidth$1=Math.min(window.innerWidth,window.innerHeight),ratioOfWidth=innerWidth$1/750,innerHeight$1=Math.max(window.innerWidth,window.innerHeight),ratioOfHeight=innerHeight$1/1624;function clamp$2(E,_,A){if(E>_)throw Error(`ä¸é${E}ä¸è½å¤§äº${_}`);return A<E?E:A>_?_:A}const EPSILON$1=.3;function equal(E,_){return Math.abs(E-_)<EPSILON$1}const app="",manifest={bundles:[{name:"game-page",assets:[{alias:"bg",src:new URL(""+new URL("bg-ad8845c2.png",import.meta.url).href,self.location).href},{alias:"musicSetting",src:new URL(""+new URL("music-3b8fff8a.png",import.meta.url).href,self.location).href},{alias:"grass",src:new URL(""+new URL("grass-4e822043.png",import.meta.url).href,self.location).href},{alias:"cordon",src:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAAAPCAYAAAC7mkrEAAAIH0lEQVR4nO1cbY4rNwxz0h6j979Jb9JLFG03/fMCGAJJUf6YmeyOgMVuLIqSPR+mHb/3eP39ZzvY/iime/z6/Qqf49+sjWEUjvlQHOJE8dGHuJ7B9wD9Vlyqr73vKeIVdwWPcKgW5e8/P40Yl8vBP0H8M+GPfoZnedDPs8M0EIfilY/liHiUN/rQ/ari3m3us/y2l/A5Nht/22eauqcqFu9bZq+A639/dT+v8PP29fhX1xZjWLsby3KheMTR53N8CoP6VcnDuLIfhv8KnK3DovFuoL6IbyAm+lvAqX652AovM9Yf1KdG+st+o/oYFzI0Hih+pE1xMPurgJ2y349K1NlvRbw7uTMfi4/4KIxQGxKcihuJF1SfEjkIm4lfVUMDgqsRH+JWeTIx27ocCNuLP8adxSJRmnGsiFN4tQhQ/XHEOWp3FhCsLcbHGlh9lcWC4opjhO6f227bZUoEV0Qp++njMg7kR8JbCXun9jZQkyOomfhHY9tI35wxjouOynVAYhrVGvuK8rk1tAJH/PwV4hk+40ZxjJdxMRxqZ/lYXvSbtWXxyFyfwp1mZwj3r+5vZzJGA+dO4m/cq/scY9XnKE5V7siNPrN4JoZVzQjPOKLvSXys3kwkq7rYD4pBnE+RQ8XGvmZYJBCdXE5fRxYirSCa4zVTwj32N45RxLIaWD/YeEd+dF2R6Gf1Zdc1u77surXw99vQNz7REL+KeX9W7ydkGYb5s0nImaTcSZFNrGzibmFiZ0Kgx7EdQEd4ZYLSEX6q5sitxKW7I61qcfqKsM44sN34BoTkqn6pGrL61DjE2CxP5EA1ZOPg9L83ho38yIdiI3c09U2CUwPLU8GrOBWj8j4ELuOt2Gx82c4Q7qOddC8CytVPkCyWTcTxc2x7CV8UJiyvM9mr+pDgcHwsZ4Ur1lqtgYktlQfFRSHYunZWg/rmQdWWiUQmPBFv5kNj0oRwV9cgE7iRx1k0sfFDCxKEZX7nPmJc8blX2BbyO3HIFKcTx3yV9llTk2n8O5sI1aQbRcIDtCmBgjhi2wPEOQInE5dvQ2IR+XpMJgAroo7xfhF81i+Vm/Un+txxdsRmFtdCDQzPxkJdC2f8WJ8rfVR1snFEtbF6o1VqQLWgPrbwnnLGA+FRzgoGWXwWKubwV2pZamcL93iRkUBBcdWJCw2s4mdYVKfizNqjX/W/b2dCg3HFz1EsMrziqvhUfbEuJnji2GcCMnKgPleFO+qDKypRn9h4qD5lornCr66rM0ZqHFC9Kh9bwMS2jFPhWRuLi3jm6+/Nvg19zvI57Ucbemc7pgQB4lJzA8PHNnRuGGEzoYbalHiJNbCcqoZM4MX7zRW4MbcTz/ofMeycdhbrjgPCRJ/69oONgeo/isv40dhk44hqyjizuEwkV3MrbOXZdvGPBFfJtzJmhH+bnSHc/xMTVf9yej+M8WXVxITewg2g8ihMvEgR417E6sTr4B2hUsEr0cD43BhVjyMas/iqGMuEIItRgrWCZ7mz+lAflJB0hOdsnUy0Vq+5U7uLZ7jqfezmduKcGMc/i8/Mfac5uOqEjnxVkeAKL+Vzcjh1Ic4HaGP1ZeLvbc7uusqD+jUaF9sVl7MwULlZHvcaIu6R+2fmfnDwbp5RkbzSp0zFscUowrB60SKF4ZTeY4sdhM3ybbWzhHsbEJnM4gTsXMRqzlGuF7gxM/wIpsrJsC6Xe+2qiy7kYzmrNTgCrxo3srBhf1f7E+NehZor4lIJ/RGODJvhRu+DSvwMfwVzZtyOSXg2ripAkH9GxMTJfZTbEYEK5wpexpnhYh8zEYiOHDhC0hWlK32O0HIF9Gx/MqxrI5zsfeDWUKl1hhNdE6WZRmsYebeM5DnErrbj3tvIrlYFu4JjhtPFH7UTt2P1WB23ykOx+pqs2kV1d2ZRXGXRuUOwZvGjzwxbwLEFN7sfqrvkjDe2OzwVv2un7dhsstlJbWTyjf7KxgYTC7OCYUa8Ofl3CMjRhdUsf9ZeWURVapyNOZt/98L7KOG+s4aVdV1CsL/tzB33zL6rcN8pxEe4nZV5VdyMiqLRb0uqcSp35Hbqreau7pK4NnqvOOOH8NH/IGMy2t9V74AR+26i+lPtCqJqVABkonN0V3RmZ3IE78ZX3u3OO0ftpI88n+71yeLdmp04d4EVY6sLTCffKP4W7gfbGcL9X+HbuTu6Os/Vco/EnDkOnxy3svbVHBn3rhfQpwjdoxZYl3rRn2iz433UEaCj7ZPvjxW1X4Fj9671bNwVBPHKWo4W7lWujxHwZwj3fxL/6l3rn3RUZrfA/q4CfjZ2Nc8RAv4ou5qgv3fSv6ddVQgfVdcReWZyrK7vjCMxR32zseOYyk78VXfcM/8Vj1VZdpZwr3zVlJ2Vjb6qGJ456zqCrx5H2H1kyIlxj6KMHF2p9nk2DuFGj7xkZ6pnOao1VXaCj1jkrMg1mpuZ8+K9xf01TV27I+6LEa4V3/C4cVmuWSFUPeqBcDMcETt61GU23o1bdT0Zz8iYvor97nPMivijj+moe0Xd36uPaC23s/4f950ryh22cgd45671d9lxXxU/U8NP3Dk/46X0iSL5FvZr7ROPjZxV8668uxYuZ3OdeSTnp+y4Z/jqgmc09xH2Y3fcP9GOfnCvYp8iPK+wQJjl+mQhfhUhewvq25Rd7X38ycdorjAnfrKov1qOI+z+dz+L7Bbutynb+aD95Id4xVfaZ4jy0X+sOXutd/6D7qvb2c/JdxrTo84ov230uXCeuVVW4d/9nN92222Ztdb+B8m7EhCaR3hUAAAAAElFTkSuQmCC",self.location).href},{alias:"score",src:new URL(""+new URL("score-f40f0a31.png",import.meta.url).href,self.location).href},{alias:"spriteOfDogs",src:new URL(""+new URL("spriteOfDogs-2fc4d6ac.json",import.meta.url).href,self.location).href}]}]},pr=class pr{constructor(){se(this,"cache",new Map);se(this,"_initPromise",null);if(pr._instance)return pr._instance;pr._instance=this,this._initPromise=Assets.init({manifest})}async loadAsset(_,A){await this._initPromise;let T;return this.cache.has(_)?T=this.cache.get(_):(T=await Assets.loadBundle(_),this.cache.set(_,T)),A?T[A]:T}};se(pr,"_instance",null);let ResourceManager=pr;class Bg{constructor(){se(this,"_bgContainer",null);se(this,"_game",null);const A=(this._game=new Game).rootContainer,T=this._bgContainer=new Container;T.name="bgContainer",T.zIndex=0,A==null||A.addChild(T)}async build(){var B,I,C;const _=Math.max(ratioOfWidth,ratioOfHeight),A=await((I=(B=this._game)==null?void 0:B.resourceManager)==null?void 0:I.loadAsset("game-page","bg")),T=new Sprite(A);T.anchor.set(.5),T.scale.set(_),T.position.set(innerWidth/2,innerHeight/2),(C=this._bgContainer)==null||C.addChild(T)}}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let E=0;E<256;++E)byteToHex.push((E+256).toString(16).slice(1));function unsafeStringify(E,_=0){return byteToHex[E[_+0]]+byteToHex[E[_+1]]+byteToHex[E[_+2]]+byteToHex[E[_+3]]+"-"+byteToHex[E[_+4]]+byteToHex[E[_+5]]+"-"+byteToHex[E[_+6]]+byteToHex[E[_+7]]+"-"+byteToHex[E[_+8]]+byteToHex[E[_+9]]+"-"+byteToHex[E[_+10]]+byteToHex[E[_+11]]+byteToHex[E[_+12]]+byteToHex[E[_+13]]+byteToHex[E[_+14]]+byteToHex[E[_+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(E,_,A){if(native.randomUUID&&!_&&!E)return native.randomUUID();E=E||{};const T=E.random||(E.rng||rng)();if(T[6]=T[6]&15|64,T[8]=T[8]&63|128,_){A=A||0;for(let B=0;B<16;++B)_[A+B]=T[B];return _}return unsafeStringify(T)}/**
 * Planck.js v1.0.2
 * @license The MIT license
 * @copyright Copyright (c) 2023 Erin Catto, Ali Shakiba
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(E,_){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,T){A.__proto__=T}||function(A,T){for(var B in T)Object.prototype.hasOwnProperty.call(T,B)&&(A[B]=T[B])},extendStatics(E,_)};function __extends(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");extendStatics(E,_);function A(){this.constructor=E}E.prototype=_===null?Object.create(_):(A.prototype=_.prototype,new A)}var __assign=function(){return __assign=Object.assign||function(_){for(var A,T=1,B=arguments.length;T<B;T++){A=arguments[T];for(var I in A)Object.prototype.hasOwnProperty.call(A,I)&&(_[I]=A[I])}return _},__assign.apply(this,arguments)},options=function(E,_){(E===null||typeof E>"u")&&(E={});var A=__assign({},E);for(var T in _)_.hasOwnProperty(T)&&typeof E[T]>"u"&&(A[T]=_[T]);if(typeof Object.getOwnPropertySymbols=="function")for(var B=Object.getOwnPropertySymbols(_),I=0;I<B.length;I++){var C=B[I];_.propertyIsEnumerable(C)&&typeof E[C]>"u"&&(A[C]=_[C])}return A},math_random=Math.random,EPSILON=1e-9,isFinite$1=Number.isFinite;function nextPowerOfTwo(E){return E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,E|=E>>16,E+1}function isPowerOfTwo(E){return E>0&&(E&E-1)===0}function mod(E,_,A){return typeof _>"u"?(A=1,_=0):typeof A>"u"&&(A=_,_=0),A>_?(E=(E-_)%(A-_),E+(E<0?A:_)):(E=(E-A)%(_-A),E+(E<=0?_:A))}function clamp$1(E,_,A){return E<_?_:E>A?A:E}function random$1(E,_){return typeof E>"u"?(_=1,E=0):typeof _>"u"&&(_=E,E=0),E===_?E:math_random()*(_-E)+E}var math=Object.create(Math);math.EPSILON=EPSILON;math.isFinite=isFinite$1;math.nextPowerOfTwo=nextPowerOfTwo;math.isPowerOfTwo=isPowerOfTwo;math.mod=mod;math.clamp=clamp$1;math.random=random$1;var math_abs$9=Math.abs,math_sqrt$5=Math.sqrt,math_max$8=Math.max,math_min$8=Math.min,Vec2=function(){function E(_,A){if(!(this instanceof E))return new E(_,A);typeof _>"u"?(this.x=0,this.y=0):typeof _=="object"?(this.x=_.x,this.y=_.y):(this.x=_,this.y=A)}return E.prototype._serialize=function(){return{x:this.x,y:this.y}},E._deserialize=function(_){var A=Object.create(E.prototype);return A.x=_.x,A.y=_.y,A},E.zero=function(){var _=Object.create(E.prototype);return _.x=0,_.y=0,_},E.neo=function(_,A){var T=Object.create(E.prototype);return T.x=_,T.y=A,T},E.clone=function(_){return E.neo(_.x,_.y)},E.prototype.toString=function(){return JSON.stringify(this)},E.isValid=function(_){return _===null||typeof _>"u"?!1:Number.isFinite(_.x)&&Number.isFinite(_.y)},E.assert=function(_){},E.prototype.clone=function(){return E.clone(this)},E.prototype.setZero=function(){return this.x=0,this.y=0,this},E.prototype.set=function(_,A){return typeof _=="object"?(this.x=_.x,this.y=_.y):(this.x=_,this.y=A),this},E.prototype.setNum=function(_,A){return this.x=_,this.y=A,this},E.prototype.setVec2=function(_){return this.x=_.x,this.y=_.y,this},E.prototype.wSet=function(_,A,T,B){return typeof T<"u"||typeof B<"u"?this.setCombine(_,A,T,B):this.setMul(_,A)},E.prototype.setCombine=function(_,A,T,B){var I=_*A.x+T*B.x,C=_*A.y+T*B.y;return this.x=I,this.y=C,this},E.prototype.setMul=function(_,A){var T=_*A.x,B=_*A.y;return this.x=T,this.y=B,this},E.prototype.add=function(_){return this.x+=_.x,this.y+=_.y,this},E.prototype.wAdd=function(_,A,T,B){return typeof T<"u"||typeof B<"u"?this.addCombine(_,A,T,B):this.addMul(_,A)},E.prototype.addCombine=function(_,A,T,B){var I=_*A.x+T*B.x,C=_*A.y+T*B.y;return this.x+=I,this.y+=C,this},E.prototype.addMul=function(_,A){var T=_*A.x,B=_*A.y;return this.x+=T,this.y+=B,this},E.prototype.wSub=function(_,A,T,B){return typeof T<"u"||typeof B<"u"?this.subCombine(_,A,T,B):this.subMul(_,A)},E.prototype.subCombine=function(_,A,T,B){var I=_*A.x+T*B.x,C=_*A.y+T*B.y;return this.x-=I,this.y-=C,this},E.prototype.subMul=function(_,A){var T=_*A.x,B=_*A.y;return this.x-=T,this.y-=B,this},E.prototype.sub=function(_){return this.x-=_.x,this.y-=_.y,this},E.prototype.mul=function(_){return this.x*=_,this.y*=_,this},E.prototype.length=function(){return E.lengthOf(this)},E.prototype.lengthSquared=function(){return E.lengthSquared(this)},E.prototype.normalize=function(){var _=this.length();if(_<EPSILON)return 0;var A=1/_;return this.x*=A,this.y*=A,_},E.lengthOf=function(_){return math_sqrt$5(_.x*_.x+_.y*_.y)},E.lengthSquared=function(_){return _.x*_.x+_.y*_.y},E.distance=function(_,A){var T=_.x-A.x,B=_.y-A.y;return math_sqrt$5(T*T+B*B)},E.distanceSquared=function(_,A){var T=_.x-A.x,B=_.y-A.y;return T*T+B*B},E.areEqual=function(_,A){return _===A||typeof A=="object"&&A!==null&&_.x===A.x&&_.y===A.y},E.skew=function(_){return E.neo(-_.y,_.x)},E.dot=function(_,A){return _.x*A.x+_.y*A.y},E.cross=function(_,A){return typeof A=="number"?E.neo(A*_.y,-A*_.x):typeof _=="number"?E.neo(-_*A.y,_*A.x):_.x*A.y-_.y*A.x},E.crossVec2Vec2=function(_,A){return _.x*A.y-_.y*A.x},E.crossVec2Num=function(_,A){return E.neo(A*_.y,-A*_.x)},E.crossNumVec2=function(_,A){return E.neo(-_*A.y,_*A.x)},E.addCross=function(_,A,T){if(typeof T=="number")return E.neo(T*A.y+_.x,-T*A.x+_.y);if(typeof A=="number")return E.neo(-A*T.y+_.x,A*T.x+_.y)},E.addCrossVec2Num=function(_,A,T){return E.neo(T*A.y+_.x,-T*A.x+_.y)},E.addCrossNumVec2=function(_,A,T){return E.neo(-A*T.y+_.x,A*T.x+_.y)},E.add=function(_,A){return E.neo(_.x+A.x,_.y+A.y)},E.wAdd=function(_,A,T,B){return typeof T<"u"||typeof B<"u"?E.combine(_,A,T,B):E.mulNumVec2(_,A)},E.combine=function(_,A,T,B){return E.zero().setCombine(_,A,T,B)},E.sub=function(_,A){return E.neo(_.x-A.x,_.y-A.y)},E.mul=function(_,A){if(typeof _=="object")return E.neo(_.x*A,_.y*A);if(typeof A=="object")return E.neo(_*A.x,_*A.y)},E.mulVec2Num=function(_,A){return E.neo(_.x*A,_.y*A)},E.mulNumVec2=function(_,A){return E.neo(_*A.x,_*A.y)},E.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},E.neg=function(_){return E.neo(-_.x,-_.y)},E.abs=function(_){return E.neo(math_abs$9(_.x),math_abs$9(_.y))},E.mid=function(_,A){return E.neo((_.x+A.x)*.5,(_.y+A.y)*.5)},E.upper=function(_,A){return E.neo(math_max$8(_.x,A.x),math_max$8(_.y,A.y))},E.lower=function(_,A){return E.neo(math_min$8(_.x,A.x),math_min$8(_.y,A.y))},E.prototype.clamp=function(_){var A=this.x*this.x+this.y*this.y;if(A>_*_){var T=_/math_sqrt$5(A);this.x*=T,this.y*=T}return this},E.clamp=function(_,A){var T=E.neo(_.x,_.y);return T.clamp(A),T},E.scaleFn=function(_,A){return function(T){return E.neo(T.x*_,T.y*A)}},E.translateFn=function(_,A){return function(T){return E.neo(T.x+_,T.y+A)}},E}(),math_max$7=Math.max,math_min$7=Math.min,AABB=function(){function E(_,A){if(!(this instanceof E))return new E(_,A);this.lowerBound=Vec2.zero(),this.upperBound=Vec2.zero(),typeof _=="object"&&this.lowerBound.setVec2(_),typeof A=="object"?this.upperBound.setVec2(A):typeof _=="object"&&this.upperBound.setVec2(_)}return E.prototype.isValid=function(){return E.isValid(this)},E.isValid=function(_){return _===null||typeof _>"u"?!1:Vec2.isValid(_.lowerBound)&&Vec2.isValid(_.upperBound)&&Vec2.sub(_.upperBound,_.lowerBound).lengthSquared()>=0},E.assert=function(_){},E.prototype.getCenter=function(){return Vec2.neo((this.lowerBound.x+this.upperBound.x)*.5,(this.lowerBound.y+this.upperBound.y)*.5)},E.prototype.getExtents=function(){return Vec2.neo((this.upperBound.x-this.lowerBound.x)*.5,(this.upperBound.y-this.lowerBound.y)*.5)},E.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},E.prototype.combine=function(_,A){A=A||this;var T=_.lowerBound,B=_.upperBound,I=A.lowerBound,C=A.upperBound,R=math_min$7(T.x,I.x),L=math_min$7(T.y,I.y),D=math_max$7(C.x,B.x),V=math_max$7(C.y,B.y);this.lowerBound.setNum(R,L),this.upperBound.setNum(D,V)},E.prototype.combinePoints=function(_,A){this.lowerBound.setNum(math_min$7(_.x,A.x),math_min$7(_.y,A.y)),this.upperBound.setNum(math_max$7(_.x,A.x),math_max$7(_.y,A.y))},E.prototype.set=function(_){this.lowerBound.setNum(_.lowerBound.x,_.lowerBound.y),this.upperBound.setNum(_.upperBound.x,_.upperBound.y)},E.prototype.contains=function(_){var A=!0;return A=A&&this.lowerBound.x<=_.lowerBound.x,A=A&&this.lowerBound.y<=_.lowerBound.y,A=A&&_.upperBound.x<=this.upperBound.x,A=A&&_.upperBound.y<=this.upperBound.y,A},E.prototype.extend=function(_){return E.extend(this,_),this},E.extend=function(_,A){return _.lowerBound.x-=A,_.lowerBound.y-=A,_.upperBound.x+=A,_.upperBound.y+=A,_},E.testOverlap=function(_,A){var T=A.lowerBound.x-_.upperBound.x,B=_.lowerBound.x-A.upperBound.x,I=A.lowerBound.y-_.upperBound.y,C=_.lowerBound.y-A.upperBound.y;return!(T>0||I>0||B>0||C>0)},E.areEqual=function(_,A){return Vec2.areEqual(_.lowerBound,A.lowerBound)&&Vec2.areEqual(_.upperBound,A.upperBound)},E.diff=function(_,A){var T=math_max$7(0,math_min$7(_.upperBound.x,A.upperBound.x)-math_max$7(A.lowerBound.x,_.lowerBound.x)),B=math_max$7(0,math_min$7(_.upperBound.y,A.upperBound.y)-math_max$7(A.lowerBound.y,_.lowerBound.y)),I=_.upperBound.x-_.lowerBound.x,C=_.upperBound.y-_.lowerBound.y,R=A.upperBound.x-A.lowerBound.x,L=A.upperBound.y-A.lowerBound.y;return I*C+R*L-T*B},E.prototype.rayCast=function(_,A){for(var T=-1/0,B=1/0,I=A.p1,C=Vec2.sub(A.p2,A.p1),R=Vec2.abs(C),L=Vec2.zero(),D="x";D!==null;D=D==="x"?"y":null)if(R.x<EPSILON){if(I[D]<this.lowerBound[D]||this.upperBound[D]<I[D])return!1}else{var V=1/C[D],U=(this.lowerBound[D]-I[D])*V,z=(this.upperBound[D]-I[D])*V,W=-1;if(U>z){var Y=U;U=z,z=Y,W=1}if(U>T&&(L.setZero(),L[D]=W,T=U),B=math_min$7(B,z),T>B)return!1}return T<0||A.maxFraction<T?!1:(_.fraction=T,_.normal=L,!0)},E.prototype.toString=function(){return JSON.stringify(this)},E.combinePoints=function(_,A,T){return _.lowerBound.x=math_min$7(A.x,T.x),_.lowerBound.y=math_min$7(A.y,T.y),_.upperBound.x=math_max$7(A.x,T.x),_.upperBound.y=math_max$7(A.y,T.y),_},E.combinedPerimeter=function(_,A){var T=math_min$7(_.lowerBound.x,A.lowerBound.x),B=math_min$7(_.lowerBound.y,A.lowerBound.y),I=math_max$7(_.upperBound.x,A.upperBound.x),C=math_max$7(_.upperBound.y,A.upperBound.y);return 2*(I-T+C-B)},E}(),math_PI$6=Math.PI,Settings=function(){function E(){}return Object.defineProperty(E,"polygonRadius",{get:function(){return 2*E.linearSlop},enumerable:!1,configurable:!0}),E.lengthUnitsPerMeter=1,E.maxManifoldPoints=2,E.maxPolygonVertices=12,E.aabbExtension=.1,E.aabbMultiplier=2,E.linearSlop=.005,E.angularSlop=2/180*math_PI$6,E.maxSubSteps=8,E.maxTOIContacts=32,E.maxTOIIterations=20,E.maxDistanceIterations=20,E.velocityThreshold=1,E.maxLinearCorrection=.2,E.maxAngularCorrection=8/180*math_PI$6,E.maxTranslation=2,E.maxRotation=.5*math_PI$6,E.baumgarte=.2,E.toiBaugarte=.75,E.timeToSleep=.5,E.linearSleepTolerance=.01,E.angularSleepTolerance=2/180*math_PI$6,E}(),SettingsInternal=function(){function E(){}return Object.defineProperty(E,"maxManifoldPoints",{get:function(){return Settings.maxManifoldPoints},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxPolygonVertices",{get:function(){return Settings.maxPolygonVertices},enumerable:!1,configurable:!0}),Object.defineProperty(E,"aabbExtension",{get:function(){return Settings.aabbExtension*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"aabbMultiplier",{get:function(){return Settings.aabbMultiplier},enumerable:!1,configurable:!0}),Object.defineProperty(E,"linearSlop",{get:function(){return Settings.linearSlop*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"linearSlopSquared",{get:function(){return Settings.linearSlop*Settings.lengthUnitsPerMeter*Settings.linearSlop*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"angularSlop",{get:function(){return Settings.angularSlop},enumerable:!1,configurable:!0}),Object.defineProperty(E,"polygonRadius",{get:function(){return 2*Settings.linearSlop},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxSubSteps",{get:function(){return Settings.maxSubSteps},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxTOIContacts",{get:function(){return Settings.maxTOIContacts},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxTOIIterations",{get:function(){return Settings.maxTOIIterations},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxDistanceIterations",{get:function(){return Settings.maxDistanceIterations},enumerable:!1,configurable:!0}),Object.defineProperty(E,"velocityThreshold",{get:function(){return Settings.velocityThreshold*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxLinearCorrection",{get:function(){return Settings.maxLinearCorrection*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxAngularCorrection",{get:function(){return Settings.maxAngularCorrection},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxTranslation",{get:function(){return Settings.maxTranslation*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxTranslationSquared",{get:function(){return Settings.maxTranslation*Settings.lengthUnitsPerMeter*Settings.maxTranslation*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxRotation",{get:function(){return Settings.maxRotation},enumerable:!1,configurable:!0}),Object.defineProperty(E,"maxRotationSquared",{get:function(){return Settings.maxRotation*Settings.maxRotation},enumerable:!1,configurable:!0}),Object.defineProperty(E,"baumgarte",{get:function(){return Settings.baumgarte},enumerable:!1,configurable:!0}),Object.defineProperty(E,"toiBaugarte",{get:function(){return Settings.toiBaugarte},enumerable:!1,configurable:!0}),Object.defineProperty(E,"timeToSleep",{get:function(){return Settings.timeToSleep},enumerable:!1,configurable:!0}),Object.defineProperty(E,"linearSleepTolerance",{get:function(){return Settings.linearSleepTolerance*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"linearSleepToleranceSqr",{get:function(){return Settings.linearSleepTolerance*Settings.lengthUnitsPerMeter*Settings.linearSleepTolerance*Settings.lengthUnitsPerMeter},enumerable:!1,configurable:!0}),Object.defineProperty(E,"angularSleepTolerance",{get:function(){return Settings.angularSleepTolerance},enumerable:!1,configurable:!0}),Object.defineProperty(E,"angularSleepToleranceSqr",{get:function(){return Settings.angularSleepTolerance*Settings.angularSleepTolerance},enumerable:!1,configurable:!0}),E}(),Pool=function(){function E(_){this._list=[],this._max=1/0,this._hasCreateFn=!1,this._createCount=0,this._hasAllocateFn=!1,this._allocateCount=0,this._hasReleaseFn=!1,this._releaseCount=0,this._hasDisposeFn=!1,this._disposeCount=0,this._list=[],this._max=_.max||this._max,this._createFn=_.create,this._hasCreateFn=typeof this._createFn=="function",this._allocateFn=_.allocate,this._hasAllocateFn=typeof this._allocateFn=="function",this._releaseFn=_.release,this._hasReleaseFn=typeof this._releaseFn=="function",this._disposeFn=_.dispose,this._hasDisposeFn=typeof this._disposeFn=="function"}return E.prototype.max=function(_){return typeof _=="number"?(this._max=_,this):this._max},E.prototype.size=function(){return this._list.length},E.prototype.allocate=function(){var _;return this._list.length>0?_=this._list.shift():(this._createCount++,this._hasCreateFn?_=this._createFn():_={}),this._allocateCount++,this._hasAllocateFn&&this._allocateFn(_),_},E.prototype.release=function(_){this._list.length<this._max?(this._releaseCount++,this._hasReleaseFn&&this._releaseFn(_),this._list.push(_)):(this._disposeCount++,this._hasDisposeFn&&(_=this._disposeFn(_)))},E.prototype.toString=function(){return" +"+this._createCount+" >"+this._allocateCount+" <"+this._releaseCount+" -"+this._disposeCount+" ="+this._list.length+"/"+this._max},E}(),math_abs$8=Math.abs,math_max$6=Math.max,TreeNode=function(){function E(_){this.aabb=new AABB,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.id=_}return E.prototype.toString=function(){return this.id+": "+this.userData},E.prototype.isLeaf=function(){return this.child1==null},E}(),poolTreeNode=new Pool({create:function(){return new TreeNode},release:function(E){E.userData=null,E.parent=null,E.child1=null,E.child2=null,E.height=-1,E.id=void 0}}),DynamicTree=function(){function E(){this.inputPool=new Pool({create:function(){return{}},release:function(_){}}),this.stackPool=new Pool({create:function(){return[]},release:function(_){_.length=0}}),this.iteratorPool=new Pool({create:function(){return new Iterator},release:function(_){_.close()}}),this.m_root=null,this.m_nodes={},this.m_lastProxyId=0}return E.prototype.getUserData=function(_){var A=this.m_nodes[_];return A.userData},E.prototype.getFatAABB=function(_){var A=this.m_nodes[_];return A.aabb},E.prototype.allocateNode=function(){var _=poolTreeNode.allocate();return _.id=++this.m_lastProxyId,this.m_nodes[_.id]=_,_},E.prototype.freeNode=function(_){delete this.m_nodes[_.id],poolTreeNode.release(_)},E.prototype.createProxy=function(_,A){var T=this.allocateNode();return T.aabb.set(_),AABB.extend(T.aabb,SettingsInternal.aabbExtension),T.userData=A,T.height=0,this.insertLeaf(T),T.id},E.prototype.destroyProxy=function(_){var A=this.m_nodes[_];this.removeLeaf(A),this.freeNode(A)},E.prototype.moveProxy=function(_,A,T){var B=this.m_nodes[_];return B.aabb.contains(A)?!1:(this.removeLeaf(B),B.aabb.set(A),A=B.aabb,AABB.extend(A,SettingsInternal.aabbExtension),T.x<0?A.lowerBound.x+=T.x*SettingsInternal.aabbMultiplier:A.upperBound.x+=T.x*SettingsInternal.aabbMultiplier,T.y<0?A.lowerBound.y+=T.y*SettingsInternal.aabbMultiplier:A.upperBound.y+=T.y*SettingsInternal.aabbMultiplier,this.insertLeaf(B),!0)},E.prototype.insertLeaf=function(_){if(this.m_root==null){this.m_root=_,this.m_root.parent=null;return}for(var A=_.aabb,T=this.m_root;!T.isLeaf();){var B=T.child1,I=T.child2,C=T.aabb.getPerimeter(),R=AABB.combinedPerimeter(T.aabb,A),L=2*R,D=2*(R-C),V=AABB.combinedPerimeter(A,B.aabb),U=V+D;if(!B.isLeaf()){var z=B.aabb.getPerimeter();U-=z}var W=AABB.combinedPerimeter(A,I.aabb),Y=W+D;if(!I.isLeaf()){var z=I.aabb.getPerimeter();Y-=z}if(L<U&&L<Y)break;U<Y?T=B:T=I}var K=T,J=K.parent,et=this.allocateNode();for(et.parent=J,et.userData=null,et.aabb.combine(A,K.aabb),et.height=K.height+1,J!=null?(J.child1===K?J.child1=et:J.child2=et,et.child1=K,et.child2=_,K.parent=et,_.parent=et):(et.child1=K,et.child2=_,K.parent=et,_.parent=et,this.m_root=et),T=_.parent;T!=null;){T=this.balance(T);var B=T.child1,I=T.child2;T.height=1+math_max$6(B.height,I.height),T.aabb.combine(B.aabb,I.aabb),T=T.parent}},E.prototype.removeLeaf=function(_){if(_===this.m_root){this.m_root=null;return}var A=_.parent,T=A.parent,B;if(A.child1===_?B=A.child2:B=A.child1,T!=null){T.child1===A?T.child1=B:T.child2=B,B.parent=T,this.freeNode(A);for(var I=T;I!=null;){I=this.balance(I);var C=I.child1,R=I.child2;I.aabb.combine(C.aabb,R.aabb),I.height=1+math_max$6(C.height,R.height),I=I.parent}}else this.m_root=B,B.parent=null,this.freeNode(A)},E.prototype.balance=function(_){var A=_;if(A.isLeaf()||A.height<2)return _;var T=A.child1,B=A.child2,I=B.height-T.height;if(I>1){var C=B.child1,R=B.child2;return B.child1=A,B.parent=A.parent,A.parent=B,B.parent!=null?B.parent.child1===_?B.parent.child1=B:B.parent.child2=B:this.m_root=B,C.height>R.height?(B.child2=C,A.child2=R,R.parent=A,A.aabb.combine(T.aabb,R.aabb),B.aabb.combine(A.aabb,C.aabb),A.height=1+math_max$6(T.height,R.height),B.height=1+math_max$6(A.height,C.height)):(B.child2=R,A.child2=C,C.parent=A,A.aabb.combine(T.aabb,C.aabb),B.aabb.combine(A.aabb,R.aabb),A.height=1+math_max$6(T.height,C.height),B.height=1+math_max$6(A.height,R.height)),B}if(I<-1){var L=T.child1,D=T.child2;return T.child1=A,T.parent=A.parent,A.parent=T,T.parent!=null?T.parent.child1===A?T.parent.child1=T:T.parent.child2=T:this.m_root=T,L.height>D.height?(T.child2=L,A.child1=D,D.parent=A,A.aabb.combine(B.aabb,D.aabb),T.aabb.combine(A.aabb,L.aabb),A.height=1+math_max$6(B.height,D.height),T.height=1+math_max$6(A.height,L.height)):(T.child2=D,A.child1=L,L.parent=A,A.aabb.combine(B.aabb,L.aabb),T.aabb.combine(A.aabb,D.aabb),A.height=1+math_max$6(B.height,L.height),T.height=1+math_max$6(A.height,D.height)),T}return A},E.prototype.getHeight=function(){return this.m_root==null?0:this.m_root.height},E.prototype.getAreaRatio=function(){if(this.m_root==null)return 0;for(var _=this.m_root,A=_.aabb.getPerimeter(),T=0,B,I=this.iteratorPool.allocate().preorder(this.m_root);B=I.next();)B.height<0||(T+=B.aabb.getPerimeter());return this.iteratorPool.release(I),T/A},E.prototype.computeHeight=function(_){var A;if(typeof _<"u"?A=this.m_nodes[_]:A=this.m_root,A.isLeaf())return 0;var T=this.computeHeight(A.child1.id),B=this.computeHeight(A.child2.id);return 1+math_max$6(T,B)},E.prototype.validateStructure=function(_){if(_!=null){this.m_root;var A=_.child1,T=_.child2;_.isLeaf()||(this.validateStructure(A),this.validateStructure(T))}},E.prototype.validateMetrics=function(_){if(_!=null){var A=_.child1,T=_.child2;if(!_.isLeaf()){A.height,T.height;var B=new AABB;B.combine(A.aabb,T.aabb),this.validateMetrics(A),this.validateMetrics(T)}}},E.prototype.validate=function(){},E.prototype.getMaxBalance=function(){for(var _=0,A,T=this.iteratorPool.allocate().preorder(this.m_root);A=T.next();)if(!(A.height<=1)){var B=math_abs$8(A.child2.height-A.child1.height);_=math_max$6(_,B)}return this.iteratorPool.release(T),_},E.prototype.rebuildBottomUp=function(){for(var _=[],A=0,T,B=this.iteratorPool.allocate().preorder(this.m_root);T=B.next();)T.height<0||(T.isLeaf()?(T.parent=null,_[A]=T,++A):this.freeNode(T));for(this.iteratorPool.release(B);A>1;){for(var I=1/0,C=-1,R=-1,L=0;L<A;++L)for(var D=_[L].aabb,V=L+1;V<A;++V){var U=_[V].aabb,z=AABB.combinedPerimeter(D,U);z<I&&(C=L,R=V,I=z)}var W=_[C],Y=_[R],K=this.allocateNode();K.child1=W,K.child2=Y,K.height=1+math_max$6(W.height,Y.height),K.aabb.combine(W.aabb,Y.aabb),K.parent=null,W.parent=K,Y.parent=K,_[R]=_[A-1],_[C]=K,--A}this.m_root=_[0]},E.prototype.shiftOrigin=function(_){for(var A,T=this.iteratorPool.allocate().preorder(this.m_root);A=T.next();){var B=A.aabb;B.lowerBound.x-=_.x,B.lowerBound.y-=_.y,B.upperBound.x-=_.x,B.upperBound.y-=_.y}this.iteratorPool.release(T)},E.prototype.query=function(_,A){var T=this.stackPool.allocate();for(T.push(this.m_root);T.length>0;){var B=T.pop();if(B!=null&&AABB.testOverlap(B.aabb,_))if(B.isLeaf()){var I=A(B.id);if(I===!1)return}else T.push(B.child1),T.push(B.child2)}this.stackPool.release(T)},E.prototype.rayCast=function(_,A){var T=_.p1,B=_.p2,I=Vec2.sub(B,T);I.normalize();var C=Vec2.crossNumVec2(1,I),R=Vec2.abs(C),L=_.maxFraction,D=new AABB,V=Vec2.combine(1-L,T,L,B);D.combinePoints(T,V);var U=this.stackPool.allocate(),z=this.inputPool.allocate();for(U.push(this.m_root);U.length>0;){var W=U.pop();if(W!=null&&AABB.testOverlap(W.aabb,D)!==!1){var Y=W.aabb.getCenter(),K=W.aabb.getExtents(),J=math_abs$8(Vec2.dot(C,Vec2.sub(T,Y)))-Vec2.dot(R,K);if(!(J>0))if(W.isLeaf()){z.p1=Vec2.clone(_.p1),z.p2=Vec2.clone(_.p2),z.maxFraction=L;var et=A(z,W.id);if(et===0)return;et>0&&(L=et,V=Vec2.combine(1-L,T,L,B),D.combinePoints(T,V))}else U.push(W.child1),U.push(W.child2)}}this.stackPool.release(U),this.inputPool.release(z)},E}(),Iterator=function(){function E(){this.parents=[],this.states=[]}return E.prototype.preorder=function(_){return this.parents.length=0,this.parents.push(_),this.states.length=0,this.states.push(0),this},E.prototype.next=function(){for(;this.parents.length>0;){var _=this.parents.length-1,A=this.parents[_];if(this.states[_]===0)return this.states[_]=1,A;if(this.states[_]===1&&(this.states[_]=2,A.child1))return this.parents.push(A.child1),this.states.push(1),A.child1;if(this.states[_]===2&&(this.states[_]=3,A.child2))return this.parents.push(A.child2),this.states.push(1),A.child2;this.parents.pop(),this.states.pop()}},E.prototype.close=function(){this.parents.length=0},E}(),math_max$5=Math.max,math_min$6=Math.min,BroadPhase=function(){function E(){var _=this;this.m_tree=new DynamicTree,this.m_moveBuffer=[],this.query=function(A,T){_.m_tree.query(A,T)},this.queryCallback=function(A){if(A===_.m_queryProxyId)return!0;var T=math_min$6(A,_.m_queryProxyId),B=math_max$5(A,_.m_queryProxyId),I=_.m_tree.getUserData(T),C=_.m_tree.getUserData(B);return _.m_callback(I,C),!0}}return E.prototype.getUserData=function(_){return this.m_tree.getUserData(_)},E.prototype.testOverlap=function(_,A){var T=this.m_tree.getFatAABB(_),B=this.m_tree.getFatAABB(A);return AABB.testOverlap(T,B)},E.prototype.getFatAABB=function(_){return this.m_tree.getFatAABB(_)},E.prototype.getProxyCount=function(){return this.m_moveBuffer.length},E.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},E.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},E.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},E.prototype.rayCast=function(_,A){this.m_tree.rayCast(_,A)},E.prototype.shiftOrigin=function(_){this.m_tree.shiftOrigin(_)},E.prototype.createProxy=function(_,A){var T=this.m_tree.createProxy(_,A);return this.bufferMove(T),T},E.prototype.destroyProxy=function(_){this.unbufferMove(_),this.m_tree.destroyProxy(_)},E.prototype.moveProxy=function(_,A,T){var B=this.m_tree.moveProxy(_,A,T);B&&this.bufferMove(_)},E.prototype.touchProxy=function(_){this.bufferMove(_)},E.prototype.bufferMove=function(_){this.m_moveBuffer.push(_)},E.prototype.unbufferMove=function(_){for(var A=0;A<this.m_moveBuffer.length;++A)this.m_moveBuffer[A]===_&&(this.m_moveBuffer[A]=null)},E.prototype.updatePairs=function(_){for(this.m_callback=_;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),this.m_queryProxyId!==null){var A=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(A,this.queryCallback)}},E}(),math_sin$2=Math.sin,math_cos$2=Math.cos,math_sqrt$4=Math.sqrt;function vec2(E,_){return{x:E,y:_}}function rotation(E){return{s:math_sin$2(E),c:math_cos$2(E)}}function setVec2(E,_,A){return E.x=_,E.y=A,E}function copyVec2(E,_){return E.x=_.x,E.y=_.y,E}function zeroVec2(E){return E.x=0,E.y=0,E}function negVec2(E){return E.x=-E.x,E.y=-E.y,E}function plusVec2(E,_){return E.x+=_.x,E.y+=_.y,E}function addVec2(E,_,A){return E.x=_.x+A.x,E.y=_.x+A.y,E}function minusVec2(E,_){return E.x-=_.x,E.y-=_.y,E}function subVec2(E,_,A){return E.x=_.x-A.x,E.y=_.y-A.y,E}function mulVec2(E,_){return E.x*=_,E.y*=_,E}function scaleVec2(E,_,A){return E.x=_*A.x,E.y=_*A.y,E}function plusScaleVec2(E,_,A){return E.x+=_*A.x,E.y+=_*A.y,E}function minusScaleVec2(E,_,A){return E.x-=_*A.x,E.y-=_*A.y,E}function combine2Vec2(E,_,A,T,B){return E.x=_*A.x+T*B.x,E.y=_*A.y+T*B.y,E}function combine3Vec2(E,_,A,T,B,I,C){return E.x=_*A.x+T*B.x+I*C.x,E.y=_*A.y+T*B.y+I*C.y,E}function normalizeVec2Length(E){var _=math_sqrt$4(E.x*E.x+E.y*E.y);if(_!==0){var A=1/_;E.x*=A,E.y*=A}return _}function normalizeVec2(E){var _=math_sqrt$4(E.x*E.x+E.y*E.y);if(_>0){var A=1/_;E.x*=A,E.y*=A}return E}function crossVec2Num(E,_,A){var T=A*_.y,B=-A*_.x;return E.x=T,E.y=B,E}function crossNumVec2(E,_,A){var T=-_*A.y,B=_*A.x;return E.x=T,E.y=B,E}function crossVec2Vec2(E,_){return E.x*_.y-E.y*_.x}function dotVec2(E,_){return E.x*_.x+E.y*_.y}function lengthSqrVec2(E){return E.x*E.x+E.y*E.y}function distVec2(E,_){var A=E.x-_.x,T=E.y-_.y;return math_sqrt$4(A*A+T*T)}function distSqrVec2(E,_){var A=E.x-_.x,T=E.y-_.y;return A*A+T*T}function setRotAngle(E,_){return E.c=math_cos$2(_),E.s=math_sin$2(_),E}function rotVec2(E,_,A){return E.x=_.c*A.x-_.s*A.y,E.y=_.s*A.x+_.c*A.y,E}function derotVec2(E,_,A){var T=_.c*A.x+_.s*A.y,B=-_.s*A.x+_.c*A.y;return E.x=T,E.y=B,E}function rerotVec2(E,_,A,T){var B=_.c*T.x+_.s*T.y,I=-_.s*T.x+_.c*T.y,C=A.c*B-A.s*I,R=A.s*B+A.c*I;return E.x=C,E.y=R,E}function transform(E,_,A){return{p:vec2(E,_),q:rotation(A)}}function copyTransform(E,_){return E.p.x=_.p.x,E.p.y=_.p.y,E.q.s=_.q.s,E.q.c=_.q.c,E}function transformVec2(E,_,A){var T=_.q.c*A.x-_.q.s*A.y+_.p.x,B=_.q.s*A.x+_.q.c*A.y+_.p.y;return E.x=T,E.y=B,E}function detransformVec2(E,_,A){var T=A.x-_.p.x,B=A.y-_.p.y,I=_.q.c*T+_.q.s*B,C=-_.q.s*T+_.q.c*B;return E.x=I,E.y=C,E}function retransformVec2(E,_,A,T){var B=_.q.c*T.x-_.q.s*T.y+_.p.x,I=_.q.s*T.x+_.q.c*T.y+_.p.y,C=B-A.p.x,R=I-A.p.y,L=A.q.c*C+A.q.s*R,D=-A.q.s*C+A.q.c*R;return E.x=L,E.y=D,E}function detransformTransform(E,_,A){var T=_.q.c*A.q.c+_.q.s*A.q.s,B=_.q.c*A.q.s-_.q.s*A.q.c,I=_.q.c*(A.p.x-_.p.x)+_.q.s*(A.p.y-_.p.y),C=-_.q.s*(A.p.x-_.p.x)+_.q.c*(A.p.y-_.p.y);return E.q.c=T,E.q.s=B,E.p.x=I,E.p.y=C,E}var math_sin$1=Math.sin,math_cos$1=Math.cos,math_atan2$1=Math.atan2,Rot=function(){function E(_){if(!(this instanceof E))return new E(_);typeof _=="number"?this.setAngle(_):typeof _=="object"?this.setRot(_):this.setIdentity()}return E.neo=function(_){var A=Object.create(E.prototype);return A.setAngle(_),A},E.clone=function(_){var A=Object.create(E.prototype);return A.s=_.s,A.c=_.c,A},E.identity=function(){var _=Object.create(E.prototype);return _.s=0,_.c=1,_},E.isValid=function(_){return _===null||typeof _>"u"?!1:Number.isFinite(_.s)&&Number.isFinite(_.c)},E.assert=function(_){},E.prototype.setIdentity=function(){this.s=0,this.c=1},E.prototype.set=function(_){typeof _=="object"?(this.s=_.s,this.c=_.c):(this.s=math_sin$1(_),this.c=math_cos$1(_))},E.prototype.setRot=function(_){this.s=_.s,this.c=_.c},E.prototype.setAngle=function(_){this.s=math_sin$1(_),this.c=math_cos$1(_)},E.prototype.getAngle=function(){return math_atan2$1(this.s,this.c)},E.prototype.getXAxis=function(){return Vec2.neo(this.c,this.s)},E.prototype.getYAxis=function(){return Vec2.neo(-this.s,this.c)},E.mul=function(_,A){if("c"in A&&"s"in A){var T=E.identity();return T.s=_.s*A.c+_.c*A.s,T.c=_.c*A.c-_.s*A.s,T}else if("x"in A&&"y"in A)return Vec2.neo(_.c*A.x-_.s*A.y,_.s*A.x+_.c*A.y)},E.mulRot=function(_,A){var T=E.identity();return T.s=_.s*A.c+_.c*A.s,T.c=_.c*A.c-_.s*A.s,T},E.mulVec2=function(_,A){return Vec2.neo(_.c*A.x-_.s*A.y,_.s*A.x+_.c*A.y)},E.mulSub=function(_,A,T){var B=_.c*(A.x-T.x)-_.s*(A.y-T.y),I=_.s*(A.x-T.x)+_.c*(A.y-T.y);return Vec2.neo(B,I)},E.mulT=function(_,A){if("c"in A&&"s"in A){var T=E.identity();return T.s=_.c*A.s-_.s*A.c,T.c=_.c*A.c+_.s*A.s,T}else if("x"in A&&"y"in A)return Vec2.neo(_.c*A.x+_.s*A.y,-_.s*A.x+_.c*A.y)},E.mulTRot=function(_,A){var T=E.identity();return T.s=_.c*A.s-_.s*A.c,T.c=_.c*A.c+_.s*A.s,T},E.mulTVec2=function(_,A){return Vec2.neo(_.c*A.x+_.s*A.y,-_.s*A.x+_.c*A.y)},E}(),math_atan2=Math.atan2,math_PI$5=Math.PI,temp$7=vec2(0,0),Sweep=function(){function E(){this.localCenter=Vec2.zero(),this.c=Vec2.zero(),this.a=0,this.alpha0=0,this.c0=Vec2.zero(),this.a0=0}return E.prototype.recycle=function(){zeroVec2(this.localCenter),zeroVec2(this.c),this.a=0,this.alpha0=0,zeroVec2(this.c0),this.a0=0},E.prototype.setTransform=function(_){transformVec2(temp$7,_,this.localCenter),copyVec2(this.c,temp$7),copyVec2(this.c0,temp$7),this.a=this.a0=math_atan2(_.q.s,_.q.c)},E.prototype.setLocalCenter=function(_,A){copyVec2(this.localCenter,_),transformVec2(temp$7,A,this.localCenter),copyVec2(this.c,temp$7),copyVec2(this.c0,temp$7)},E.prototype.getTransform=function(_,A){A===void 0&&(A=0),setRotAngle(_.q,(1-A)*this.a0+A*this.a),combine2Vec2(_.p,1-A,this.c0,A,this.c),minusVec2(_.p,rotVec2(temp$7,_.q,this.localCenter))},E.prototype.advance=function(_){var A=(_-this.alpha0)/(1-this.alpha0);combine2Vec2(this.c0,A,this.c,1-A,this.c0),this.a0=A*this.a+(1-A)*this.a0,this.alpha0=_},E.prototype.forward=function(){this.a0=this.a,copyVec2(this.c0,this.c)},E.prototype.normalize=function(){var _=mod(this.a0,-math_PI$5,+math_PI$5);this.a-=this.a0-_,this.a0=_},E.prototype.set=function(_){copyVec2(this.localCenter,_.localCenter),copyVec2(this.c,_.c),this.a=_.a,this.alpha0=_.alpha0,copyVec2(this.c0,_.c0),this.a0=_.a0},E}(),Transform=function(){function E(_,A){if(!(this instanceof E))return new E(_,A);this.p=Vec2.zero(),this.q=Rot.identity(),typeof _<"u"&&this.p.setVec2(_),typeof A<"u"&&this.q.setAngle(A)}return E.clone=function(_){var A=Object.create(E.prototype);return A.p=Vec2.clone(_.p),A.q=Rot.clone(_.q),A},E.neo=function(_,A){var T=Object.create(E.prototype);return T.p=Vec2.clone(_),T.q=Rot.clone(A),T},E.identity=function(){var _=Object.create(E.prototype);return _.p=Vec2.zero(),_.q=Rot.identity(),_},E.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},E.prototype.set=function(_,A){typeof A>"u"?(this.p.set(_.p),this.q.set(_.q)):(this.p.set(_),this.q.set(A))},E.prototype.setNum=function(_,A){this.p.setVec2(_),this.q.setAngle(A)},E.prototype.setTransform=function(_){this.p.setVec2(_.p),this.q.setRot(_.q)},E.isValid=function(_){return _===null||typeof _>"u"?!1:Vec2.isValid(_.p)&&Rot.isValid(_.q)},E.assert=function(_){},E.mul=function(_,A){if(Array.isArray(A)){for(var T=[],B=0;B<A.length;B++)T[B]=E.mul(_,A[B]);return T}else{if("x"in A&&"y"in A)return E.mulVec2(_,A);if("p"in A&&"q"in A)return E.mulXf(_,A)}},E.mulAll=function(_,A){for(var T=[],B=0;B<A.length;B++)T[B]=E.mul(_,A[B]);return T},E.mulFn=function(_){return function(A){return E.mul(_,A)}},E.mulVec2=function(_,A){var T=_.q.c*A.x-_.q.s*A.y+_.p.x,B=_.q.s*A.x+_.q.c*A.y+_.p.y;return Vec2.neo(T,B)},E.mulXf=function(_,A){var T=E.identity();return T.q=Rot.mulRot(_.q,A.q),T.p=Vec2.add(Rot.mulVec2(_.q,A.p),_.p),T},E.mulT=function(_,A){if("x"in A&&"y"in A)return E.mulTVec2(_,A);if("p"in A&&"q"in A)return E.mulTXf(_,A)},E.mulTVec2=function(_,A){var T=A.x-_.p.x,B=A.y-_.p.y,I=_.q.c*T+_.q.s*B,C=-_.q.s*T+_.q.c*B;return Vec2.neo(I,C)},E.mulTXf=function(_,A){var T=E.identity();return T.q.setRot(Rot.mulTRot(_.q,A.q)),T.p.setVec2(Rot.mulTVec2(_.q,Vec2.sub(A.p,_.p))),T},E}(),Velocity=function(){function E(){this.v=Vec2.zero(),this.w=0}return E}(),math_sin=Math.sin,math_cos=Math.cos,Position=function(){function E(){this.c=Vec2.zero(),this.a=0}return E.prototype.getTransform=function(_,A){return _.q.c=math_cos(this.a),_.q.s=math_sin(this.a),_.p.x=this.c.x-(_.q.c*A.x-_.q.s*A.y),_.p.y=this.c.y-(_.q.s*A.x+_.q.c*A.y),_},E}();function getTransform(E,_,A,T){return E.q.c=math_cos(T),E.q.s=math_sin(T),E.p.x=A.x-(E.q.c*_.x-E.q.s*_.y),E.p.y=A.y-(E.q.s*_.x+E.q.c*_.y),E}var Shape=function(){function E(){this.style={},this.appData={}}return E.isValid=function(_){return _===null||typeof _>"u"?!1:typeof _.m_type=="string"&&typeof _.m_radius=="number"},E}(),synchronize_aabb1=new AABB,synchronize_aabb2=new AABB,displacement=vec2(0,0),FixtureDefDefault={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535},FixtureProxy=function(){function E(_,A){this.aabb=new AABB,this.fixture=_,this.childIndex=A,this.proxyId}return E}(),Fixture=function(){function E(_,A,T){this.style={},this.appData={},A.shape?(T=A,A=A.shape):typeof T=="number"&&(T={density:T}),T=options(T,FixtureDefDefault),this.m_body=_,this.m_friction=T.friction,this.m_restitution=T.restitution,this.m_density=T.density,this.m_isSensor=T.isSensor,this.m_filterGroupIndex=T.filterGroupIndex,this.m_filterCategoryBits=T.filterCategoryBits,this.m_filterMaskBits=T.filterMaskBits,this.m_shape=A,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var B=this.m_shape.getChildCount(),I=0;I<B;++I)this.m_proxies[I]=new FixtureProxy(this,I);this.m_userData=T.userData}return E.prototype._reset=function(){var _=this.getBody(),A=_.m_world.m_broadPhase;this.destroyProxies(A),this.m_shape._reset&&this.m_shape._reset();for(var T=this.m_shape.getChildCount(),B=0;B<T;++B)this.m_proxies[B]=new FixtureProxy(this,B);this.createProxies(A,_.m_xf),_.resetMassData()},E.prototype._serialize=function(){return{friction:this.m_friction,restitution:this.m_restitution,density:this.m_density,isSensor:this.m_isSensor,filterGroupIndex:this.m_filterGroupIndex,filterCategoryBits:this.m_filterCategoryBits,filterMaskBits:this.m_filterMaskBits,shape:this.m_shape}},E._deserialize=function(_,A,T){var B=T(Shape,_.shape),I=B&&new E(A,B,_);return I},E.prototype.getType=function(){return this.m_shape.m_type},E.prototype.getShape=function(){return this.m_shape},E.prototype.isSensor=function(){return this.m_isSensor},E.prototype.setSensor=function(_){_!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=_)},E.prototype.getUserData=function(){return this.m_userData},E.prototype.setUserData=function(_){this.m_userData=_},E.prototype.getBody=function(){return this.m_body},E.prototype.getNext=function(){return this.m_next},E.prototype.getDensity=function(){return this.m_density},E.prototype.setDensity=function(_){this.m_density=_},E.prototype.getFriction=function(){return this.m_friction},E.prototype.setFriction=function(_){this.m_friction=_},E.prototype.getRestitution=function(){return this.m_restitution},E.prototype.setRestitution=function(_){this.m_restitution=_},E.prototype.testPoint=function(_){return this.m_shape.testPoint(this.m_body.getTransform(),_)},E.prototype.rayCast=function(_,A,T){return this.m_shape.rayCast(_,A,this.m_body.getTransform(),T)},E.prototype.getMassData=function(_){this.m_shape.computeMass(_,this.m_density)},E.prototype.getAABB=function(_){return this.m_proxies[_].aabb},E.prototype.createProxies=function(_,A){this.m_proxyCount=this.m_shape.getChildCount();for(var T=0;T<this.m_proxyCount;++T){var B=this.m_proxies[T];this.m_shape.computeAABB(B.aabb,A,T),B.proxyId=_.createProxy(B.aabb,B)}},E.prototype.destroyProxies=function(_){for(var A=0;A<this.m_proxyCount;++A){var T=this.m_proxies[A];_.destroyProxy(T.proxyId),T.proxyId=null}this.m_proxyCount=0},E.prototype.synchronize=function(_,A,T){for(var B=0;B<this.m_proxyCount;++B){var I=this.m_proxies[B];this.m_shape.computeAABB(synchronize_aabb1,A,I.childIndex),this.m_shape.computeAABB(synchronize_aabb2,T,I.childIndex),I.aabb.combine(synchronize_aabb1,synchronize_aabb2),subVec2(displacement,T.p,A.p),_.moveProxy(I.proxyId,I.aabb,displacement)}},E.prototype.setFilterData=function(_){this.m_filterGroupIndex=_.groupIndex,this.m_filterCategoryBits=_.categoryBits,this.m_filterMaskBits=_.maskBits,this.refilter()},E.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},E.prototype.setFilterGroupIndex=function(_){this.m_filterGroupIndex=_,this.refilter()},E.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},E.prototype.setFilterCategoryBits=function(_){this.m_filterCategoryBits=_,this.refilter()},E.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},E.prototype.setFilterMaskBits=function(_){this.m_filterMaskBits=_,this.refilter()},E.prototype.refilter=function(){if(this.m_body!=null){for(var _=this.m_body.getContactList();_;){var A=_.contact,T=A.getFixtureA(),B=A.getFixtureB();(T==this||B==this)&&A.flagForFiltering(),_=_.next}var I=this.m_body.getWorld();if(I!=null)for(var C=I.m_broadPhase,R=0;R<this.m_proxyCount;++R)C.touchProxy(this.m_proxies[R].proxyId)}},E.prototype.shouldCollide=function(_){if(_.m_filterGroupIndex===this.m_filterGroupIndex&&_.m_filterGroupIndex!==0)return _.m_filterGroupIndex>0;var A=(_.m_filterMaskBits&this.m_filterCategoryBits)!==0,T=(_.m_filterCategoryBits&this.m_filterMaskBits)!==0,B=A&&T;return B},E}(),STATIC="static",KINEMATIC="kinematic",DYNAMIC="dynamic",oldCenter=vec2(0,0),localCenter=vec2(0,0),shift=vec2(0,0),temp$6=vec2(0,0),xf$2=transform(0,0,0),BodyDefDefault={type:STATIC,position:Vec2.zero(),angle:0,linearVelocity:Vec2.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null},Body=function(){function E(_,A){this.style={},this.appData={},A=options(A,BodyDefDefault),this.m_world=_,this.m_awakeFlag=A.awake,this.m_autoSleepFlag=A.allowSleep,this.m_bulletFlag=A.bullet,this.m_fixedRotationFlag=A.fixedRotation,this.m_activeFlag=A.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=A.userData,this.m_type=A.type,this.m_type==DYNAMIC?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=Transform.identity(),this.m_xf.p.setVec2(A.position),this.m_xf.q.setAngle(A.angle),this.m_sweep=new Sweep,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new Velocity,this.c_position=new Position,this.m_force=Vec2.zero(),this.m_torque=0,this.m_linearVelocity=Vec2.clone(A.linearVelocity),this.m_angularVelocity=A.angularVelocity,this.m_linearDamping=A.linearDamping,this.m_angularDamping=A.angularDamping,this.m_gravityScale=A.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}return E.prototype._serialize=function(){for(var _=[],A=this.m_fixtureList;A;A=A.m_next)_.push(A);return{type:this.m_type,bullet:this.m_bulletFlag,position:this.m_xf.p,angle:this.m_xf.q.getAngle(),linearVelocity:this.m_linearVelocity,angularVelocity:this.m_angularVelocity,fixtures:_}},E._deserialize=function(_,A,T){var B=new E(A,_);if(_.fixtures)for(var I=_.fixtures.length-1;I>=0;I--){var C=T(Fixture,_.fixtures[I],B);B._addFixture(C)}return B},E.prototype.isWorldLocked=function(){return!!(this.m_world&&this.m_world.isLocked())},E.prototype.getWorld=function(){return this.m_world},E.prototype.getNext=function(){return this.m_next},E.prototype.setUserData=function(_){this.m_userData=_},E.prototype.getUserData=function(){return this.m_userData},E.prototype.getFixtureList=function(){return this.m_fixtureList},E.prototype.getJointList=function(){return this.m_jointList},E.prototype.getContactList=function(){return this.m_contactList},E.prototype.isStatic=function(){return this.m_type==STATIC},E.prototype.isDynamic=function(){return this.m_type==DYNAMIC},E.prototype.isKinematic=function(){return this.m_type==KINEMATIC},E.prototype.setStatic=function(){return this.setType(STATIC),this},E.prototype.setDynamic=function(){return this.setType(DYNAMIC),this},E.prototype.setKinematic=function(){return this.setType(KINEMATIC),this},E.prototype.getType=function(){return this.m_type},E.prototype.setType=function(_){if(this.isWorldLocked()!=!0&&this.m_type!=_){this.m_type=_,this.resetMassData(),this.m_type==STATIC&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var A=this.m_contactList;A;){var T=A;A=A.next,this.m_world.destroyContact(T.contact)}this.m_contactList=null;for(var B=this.m_world.m_broadPhase,I=this.m_fixtureList;I;I=I.m_next)for(var C=0;C<I.m_proxyCount;++C)B.touchProxy(I.m_proxies[C].proxyId)}},E.prototype.isBullet=function(){return this.m_bulletFlag},E.prototype.setBullet=function(_){this.m_bulletFlag=!!_},E.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},E.prototype.setSleepingAllowed=function(_){this.m_autoSleepFlag=!!_,this.m_autoSleepFlag==!1&&this.setAwake(!0)},E.prototype.isAwake=function(){return this.m_awakeFlag},E.prototype.setAwake=function(_){_?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},E.prototype.isActive=function(){return this.m_activeFlag},E.prototype.setActive=function(_){if(_!=this.m_activeFlag)if(this.m_activeFlag=!!_,this.m_activeFlag){for(var A=this.m_world.m_broadPhase,T=this.m_fixtureList;T;T=T.m_next)T.createProxies(A,this.m_xf);this.m_world.m_newFixture=!0}else{for(var A=this.m_world.m_broadPhase,T=this.m_fixtureList;T;T=T.m_next)T.destroyProxies(A);for(var B=this.m_contactList;B;){var I=B;B=B.next,this.m_world.destroyContact(I.contact)}this.m_contactList=null}},E.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},E.prototype.setFixedRotation=function(_){this.m_fixedRotationFlag!=_&&(this.m_fixedRotationFlag=!!_,this.m_angularVelocity=0,this.resetMassData())},E.prototype.getTransform=function(){return this.m_xf},E.prototype.setTransform=function(_,A){if(this.isWorldLocked()!=!0){this.m_xf.setNum(_,A),this.m_sweep.setTransform(this.m_xf);for(var T=this.m_world.m_broadPhase,B=this.m_fixtureList;B;B=B.m_next)B.synchronize(T,this.m_xf,this.m_xf);this.setAwake(!0)}},E.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},E.prototype.synchronizeFixtures=function(){this.m_sweep.getTransform(xf$2,0);for(var _=this.m_world.m_broadPhase,A=this.m_fixtureList;A;A=A.m_next)A.synchronize(_,xf$2,this.m_xf)},E.prototype.advance=function(_){this.m_sweep.advance(_),copyVec2(this.m_sweep.c,this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},E.prototype.getPosition=function(){return this.m_xf.p},E.prototype.setPosition=function(_){this.setTransform(_,this.m_sweep.a)},E.prototype.getAngle=function(){return this.m_sweep.a},E.prototype.setAngle=function(_){this.setTransform(this.m_xf.p,_)},E.prototype.getWorldCenter=function(){return this.m_sweep.c},E.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},E.prototype.getLinearVelocity=function(){return this.m_linearVelocity},E.prototype.getLinearVelocityFromWorldPoint=function(_){var A=Vec2.sub(_,this.m_sweep.c);return Vec2.add(this.m_linearVelocity,Vec2.crossNumVec2(this.m_angularVelocity,A))},E.prototype.getLinearVelocityFromLocalPoint=function(_){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(_))},E.prototype.setLinearVelocity=function(_){this.m_type!=STATIC&&(Vec2.dot(_,_)>0&&this.setAwake(!0),this.m_linearVelocity.setVec2(_))},E.prototype.getAngularVelocity=function(){return this.m_angularVelocity},E.prototype.setAngularVelocity=function(_){this.m_type!=STATIC&&(_*_>0&&this.setAwake(!0),this.m_angularVelocity=_)},E.prototype.getLinearDamping=function(){return this.m_linearDamping},E.prototype.setLinearDamping=function(_){this.m_linearDamping=_},E.prototype.getAngularDamping=function(){return this.m_angularDamping},E.prototype.setAngularDamping=function(_){this.m_angularDamping=_},E.prototype.getGravityScale=function(){return this.m_gravityScale},E.prototype.setGravityScale=function(_){this.m_gravityScale=_},E.prototype.getMass=function(){return this.m_mass},E.prototype.getInertia=function(){return this.m_I+this.m_mass*Vec2.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},E.prototype.getMassData=function(_){_.mass=this.m_mass,_.I=this.getInertia(),copyVec2(_.center,this.m_sweep.localCenter)},E.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,zeroVec2(this.m_sweep.localCenter),this.isStatic()||this.isKinematic()){copyVec2(this.m_sweep.c0,this.m_xf.p),copyVec2(this.m_sweep.c,this.m_xf.p),this.m_sweep.a0=this.m_sweep.a;return}zeroVec2(localCenter);for(var _=this.m_fixtureList;_;_=_.m_next)if(_.m_density!=0){var A={mass:0,center:vec2(0,0),I:0};_.getMassData(A),this.m_mass+=A.mass,plusScaleVec2(localCenter,A.mass,A.center),this.m_I+=A.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,scaleVec2(localCenter,this.m_invMass,localCenter)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&this.m_fixedRotationFlag==!1?(this.m_I-=this.m_mass*dotVec2(localCenter,localCenter),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0),copyVec2(oldCenter,this.m_sweep.c),this.m_sweep.setLocalCenter(localCenter,this.m_xf),subVec2(shift,this.m_sweep.c,oldCenter),crossNumVec2(temp$6,this.m_angularVelocity,shift),plusVec2(this.m_linearVelocity,temp$6)},E.prototype.setMassData=function(_){this.isWorldLocked()!=!0&&this.m_type==DYNAMIC&&(this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=_.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,_.I>0&&this.m_fixedRotationFlag==!1&&(this.m_I=_.I-this.m_mass*dotVec2(_.center,_.center),this.m_invI=1/this.m_I),copyVec2(oldCenter,this.m_sweep.c),this.m_sweep.setLocalCenter(_.center,this.m_xf),subVec2(shift,this.m_sweep.c,oldCenter),crossNumVec2(temp$6,this.m_angularVelocity,shift),plusVec2(this.m_linearVelocity,temp$6))},E.prototype.applyForce=function(_,A,T){T===void 0&&(T=!0),this.m_type==DYNAMIC&&(T&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(_),this.m_torque+=Vec2.crossVec2Vec2(Vec2.sub(A,this.m_sweep.c),_)))},E.prototype.applyForceToCenter=function(_,A){A===void 0&&(A=!0),this.m_type==DYNAMIC&&(A&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(_))},E.prototype.applyTorque=function(_,A){A===void 0&&(A=!0),this.m_type==DYNAMIC&&(A&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=_))},E.prototype.applyLinearImpulse=function(_,A,T){T===void 0&&(T=!0),this.m_type==DYNAMIC&&(T&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,_),this.m_angularVelocity+=this.m_invI*Vec2.crossVec2Vec2(Vec2.sub(A,this.m_sweep.c),_)))},E.prototype.applyAngularImpulse=function(_,A){A===void 0&&(A=!0),this.m_type==DYNAMIC&&(A&&this.m_awakeFlag==!1&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*_))},E.prototype.shouldCollide=function(_){if(this.m_type!=DYNAMIC&&_.m_type!=DYNAMIC)return!1;for(var A=this.m_jointList;A;A=A.next)if(A.other==_&&A.joint.m_collideConnected==!1)return!1;return!0},E.prototype._addFixture=function(_){if(this.isWorldLocked()==!0)return null;if(this.m_activeFlag){var A=this.m_world.m_broadPhase;_.createProxies(A,this.m_xf)}return _.m_next=this.m_fixtureList,this.m_fixtureList=_,_.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,_},E.prototype.createFixture=function(_,A){if(this.isWorldLocked()==!0)return null;var T=new Fixture(this,_,A);return this._addFixture(T),T},E.prototype.destroyFixture=function(_){if(this.isWorldLocked()!=!0){if(this.m_fixtureList===_)this.m_fixtureList=_.m_next;else for(var A=this.m_fixtureList;A!=null;){if(A.m_next===_){A.m_next=_.m_next;break}A=A.m_next}for(var T=this.m_contactList;T;){var B=T.contact;T=T.next;var I=B.getFixtureA(),C=B.getFixtureB();(_==I||_==C)&&this.m_world.destroyContact(B)}if(this.m_activeFlag){var R=this.m_world.m_broadPhase;_.destroyProxies(R)}_.m_body=null,_.m_next=null,this.m_world.publish("remove-fixture",_),this.resetMassData()}},E.prototype.getWorldPoint=function(_){return Transform.mulVec2(this.m_xf,_)},E.prototype.getWorldVector=function(_){return Rot.mulVec2(this.m_xf.q,_)},E.prototype.getLocalPoint=function(_){return Transform.mulTVec2(this.m_xf,_)},E.prototype.getLocalVector=function(_){return Rot.mulTVec2(this.m_xf.q,_)},E.STATIC="static",E.KINEMATIC="kinematic",E.DYNAMIC="dynamic",E}(),JointEdge=function(){function E(){this.other=null,this.joint=null,this.prev=null,this.next=null}return E}(),Joint=function(){function E(_,A,T){this.m_type="unknown-joint",this.m_prev=null,this.m_next=null,this.m_edgeA=new JointEdge,this.m_edgeB=new JointEdge,this.m_islandFlag=!1,this.style={},this.appData={},A="bodyA"in _?_.bodyA:A,T="bodyB"in _?_.bodyB:T,this.m_bodyA=A,this.m_bodyB=T,this.m_collideConnected=!!_.collideConnected,this.m_userData=_.userData}return E.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},E.prototype.getType=function(){return this.m_type},E.prototype.getBodyA=function(){return this.m_bodyA},E.prototype.getBodyB=function(){return this.m_bodyB},E.prototype.getNext=function(){return this.m_next},E.prototype.getUserData=function(){return this.m_userData},E.prototype.setUserData=function(_){this.m_userData=_},E.prototype.getCollideConnected=function(){return this.m_collideConnected},E.prototype.shiftOrigin=function(_){},E.prototype._resetAnchors=function(_){return this._reset(_)},E}(),stats={gjkCalls:0,gjkIters:0,gjkMaxIters:0,toiTime:0,toiMaxTime:0,toiCalls:0,toiIters:0,toiMaxIters:0,toiRootIters:0,toiMaxRootIters:0,toString:function(E){E=typeof E=="string"?E:`
`;var _="";for(var A in this)typeof this[A]!="function"&&typeof this[A]!="object"&&(_+=A+": "+this[A]+E);return _}},now=function(){return Date.now()},diff=function(E){return Date.now()-E},Timer={now,diff},math_max$4=Math.max,temp$5=vec2(0,0),normal$4=vec2(0,0),e12=vec2(0,0),e13=vec2(0,0),e23=vec2(0,0),temp1=vec2(0,0),temp2=vec2(0,0);stats.gjkCalls=0;stats.gjkIters=0;stats.gjkMaxIters=0;var DistanceInput=function(){function E(){this.proxyA=new DistanceProxy,this.proxyB=new DistanceProxy,this.transformA=Transform.identity(),this.transformB=Transform.identity(),this.useRadii=!1}return E.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.transformA.setIdentity(),this.transformB.setIdentity(),this.useRadii=!1},E}(),DistanceOutput=function(){function E(){this.pointA=vec2(0,0),this.pointB=vec2(0,0),this.distance=0,this.iterations=0}return E.prototype.recycle=function(){zeroVec2(this.pointA),zeroVec2(this.pointB),this.distance=0,this.iterations=0},E}(),SimplexCache=function(){function E(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}return E.prototype.recycle=function(){this.metric=0,this.indexA.length=0,this.indexB.length=0,this.count=0},E}(),Distance=function(E,_,A){++stats.gjkCalls;var T=A.proxyA,B=A.proxyB,I=A.transformA,C=A.transformB;simplex.recycle(),simplex.readCache(_,T,I,B,C);for(var R=simplex.m_v,L=SettingsInternal.maxDistanceIterations,D=[],V=[],U=0,z=0;z<L;){U=simplex.m_count;for(var W=0;W<U;++W)D[W]=R[W].indexA,V[W]=R[W].indexB;if(simplex.solve(),simplex.m_count===3)break;var Y=simplex.getSearchDirection();if(lengthSqrVec2(Y)<EPSILON*EPSILON)break;var K=R[simplex.m_count];K.indexA=T.getSupport(derotVec2(temp$5,I.q,scaleVec2(temp$5,-1,Y))),transformVec2(K.wA,I,T.getVertex(K.indexA)),K.indexB=B.getSupport(derotVec2(temp$5,C.q,Y)),transformVec2(K.wB,C,B.getVertex(K.indexB)),subVec2(K.w,K.wB,K.wA),++z,++stats.gjkIters;for(var J=!1,W=0;W<U;++W)if(K.indexA===D[W]&&K.indexB===V[W]){J=!0;break}if(J)break;++simplex.m_count}if(stats.gjkMaxIters=math_max$4(stats.gjkMaxIters,z),simplex.getWitnessPoints(E.pointA,E.pointB),E.distance=distVec2(E.pointA,E.pointB),E.iterations=z,simplex.writeCache(_),A.useRadii){var et=T.m_radius,it=B.m_radius;if(E.distance>et+it&&E.distance>EPSILON)E.distance-=et+it,subVec2(normal$4,E.pointB,E.pointA),normalizeVec2(normal$4),plusScaleVec2(E.pointA,et,normal$4),minusScaleVec2(E.pointB,it,normal$4);else{var rt=subVec2(temp$5,E.pointA,E.pointB);copyVec2(E.pointA,rt),copyVec2(E.pointB,rt),E.distance=0}}},DistanceProxy=function(){function E(){this.m_vertices=[],this.m_count=0,this.m_radius=0}return E.prototype.recycle=function(){this.m_vertices.length=0,this.m_count=0,this.m_radius=0},E.prototype.getVertexCount=function(){return this.m_count},E.prototype.getVertex=function(_){return this.m_vertices[_]},E.prototype.getSupport=function(_){for(var A=-1,T=-1/0,B=0;B<this.m_count;++B){var I=dotVec2(this.m_vertices[B],_);I>T&&(A=B,T=I)}return A},E.prototype.getSupportVertex=function(_){return this.m_vertices[this.getSupport(_)]},E.prototype.set=function(_,A){_.computeDistanceProxy(this,A)},E.prototype.setVertices=function(_,A,T){this.m_vertices=_,this.m_count=A,this.m_radius=T},E}(),SimplexVertex=function(){function E(){this.wA=vec2(0,0),this.indexA=0,this.wB=vec2(0,0),this.indexB=0,this.w=vec2(0,0),this.a=0}return E.prototype.recycle=function(){this.indexA=0,this.indexB=0,zeroVec2(this.wA),zeroVec2(this.wB),zeroVec2(this.w),this.a=0},E.prototype.set=function(_){this.indexA=_.indexA,this.indexB=_.indexB,copyVec2(this.wA,_.wA),copyVec2(this.wB,_.wB),copyVec2(this.w,_.w),this.a=_.a},E}(),searchDirection_reuse=vec2(0,0),closestPoint_reuse=vec2(0,0),Simplex=function(){function E(){this.m_v1=new SimplexVertex,this.m_v2=new SimplexVertex,this.m_v3=new SimplexVertex,this.m_v=[this.m_v1,this.m_v2,this.m_v3]}return E.prototype.recycle=function(){this.m_v1.recycle(),this.m_v2.recycle(),this.m_v3.recycle(),this.m_count=0},E.prototype.toString=function(){return this.m_count===3?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():this.m_count===2?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():this.m_count===1?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},E.prototype.readCache=function(_,A,T,B,I){this.m_count=_.count;for(var C=0;C<this.m_count;++C){var R=this.m_v[C];R.indexA=_.indexA[C],R.indexB=_.indexB[C];var L=A.getVertex(R.indexA),D=B.getVertex(R.indexB);transformVec2(R.wA,T,L),transformVec2(R.wB,I,D),subVec2(R.w,R.wB,R.wA),R.a=0}if(this.m_count>1){var V=_.metric,U=this.getMetric();(U<.5*V||2*V<U||U<EPSILON)&&(this.m_count=0)}if(this.m_count===0){var R=this.m_v[0];R.indexA=0,R.indexB=0;var L=A.getVertex(0),D=B.getVertex(0);transformVec2(R.wA,T,L),transformVec2(R.wB,I,D),subVec2(R.w,R.wB,R.wA),R.a=1,this.m_count=1}},E.prototype.writeCache=function(_){_.metric=this.getMetric(),_.count=this.m_count;for(var A=0;A<this.m_count;++A)_.indexA[A]=this.m_v[A].indexA,_.indexB[A]=this.m_v[A].indexB},E.prototype.getSearchDirection=function(){var _=this.m_v1,A=this.m_v2;switch(this.m_v3,this.m_count){case 1:return setVec2(searchDirection_reuse,-_.w.x,-_.w.y);case 2:{subVec2(e12,A.w,_.w);var T=-crossVec2Vec2(e12,_.w);return T>0?setVec2(searchDirection_reuse,-e12.y,e12.x):setVec2(searchDirection_reuse,e12.y,-e12.x)}default:return zeroVec2(searchDirection_reuse)}},E.prototype.getClosestPoint=function(){var _=this.m_v1,A=this.m_v2;switch(this.m_v3,this.m_count){case 0:return zeroVec2(closestPoint_reuse);case 1:return copyVec2(closestPoint_reuse,_.w);case 2:return combine2Vec2(closestPoint_reuse,_.a,_.w,A.a,A.w);case 3:return zeroVec2(closestPoint_reuse);default:return zeroVec2(closestPoint_reuse)}},E.prototype.getWitnessPoints=function(_,A){var T=this.m_v1,B=this.m_v2,I=this.m_v3;switch(this.m_count){case 0:break;case 1:copyVec2(_,T.wA),copyVec2(A,T.wB);break;case 2:combine2Vec2(_,T.a,T.wA,B.a,B.wA),combine2Vec2(A,T.a,T.wB,B.a,B.wB);break;case 3:combine3Vec2(_,T.a,T.wA,B.a,B.wA,I.a,I.wA),copyVec2(A,_);break}},E.prototype.getMetric=function(){switch(this.m_count){case 0:return 0;case 1:return 0;case 2:return distVec2(this.m_v1.w,this.m_v2.w);case 3:return crossVec2Vec2(subVec2(temp1,this.m_v2.w,this.m_v1.w),subVec2(temp2,this.m_v3.w,this.m_v1.w));default:return 0}},E.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break}},E.prototype.solve2=function(){var _=this.m_v1.w,A=this.m_v2.w;subVec2(e12,A,_);var T=-dotVec2(_,e12);if(T<=0){this.m_v1.a=1,this.m_count=1;return}var B=dotVec2(A,e12);if(B<=0){this.m_v2.a=1,this.m_count=1,this.m_v1.set(this.m_v2);return}var I=1/(B+T);this.m_v1.a=B*I,this.m_v2.a=T*I,this.m_count=2},E.prototype.solve3=function(){var _=this.m_v1.w,A=this.m_v2.w,T=this.m_v3.w;subVec2(e12,A,_);var B=dotVec2(_,e12),I=dotVec2(A,e12),C=I,R=-B;subVec2(e13,T,_);var L=dotVec2(_,e13),D=dotVec2(T,e13),V=D,U=-L;subVec2(e23,T,A);var z=dotVec2(A,e23),W=dotVec2(T,e23),Y=W,K=-z,J=crossVec2Vec2(e12,e13),et=J*crossVec2Vec2(A,T),it=J*crossVec2Vec2(T,_),rt=J*crossVec2Vec2(_,A);if(R<=0&&U<=0){this.m_v1.a=1,this.m_count=1;return}if(C>0&&R>0&&rt<=0){var st=1/(C+R);this.m_v1.a=C*st,this.m_v2.a=R*st,this.m_count=2;return}if(V>0&&U>0&&it<=0){var lt=1/(V+U);this.m_v1.a=V*lt,this.m_v3.a=U*lt,this.m_count=2,this.m_v2.set(this.m_v3);return}if(C<=0&&K<=0){this.m_v2.a=1,this.m_count=1,this.m_v1.set(this.m_v2);return}if(V<=0&&Y<=0){this.m_v3.a=1,this.m_count=1,this.m_v1.set(this.m_v3);return}if(Y>0&&K>0&&et<=0){var ct=1/(Y+K);this.m_v2.a=Y*ct,this.m_v3.a=K*ct,this.m_count=2,this.m_v1.set(this.m_v3);return}var at=1/(et+it+rt);this.m_v1.a=et*at,this.m_v2.a=it*at,this.m_v3.a=rt*at,this.m_count=3},E}(),simplex=new Simplex,input$1=new DistanceInput,cache$1=new SimplexCache,output$1=new DistanceOutput,testOverlap=function(E,_,A,T,B,I){return input$1.recycle(),input$1.proxyA.set(E,_),input$1.proxyB.set(A,T),copyTransform(input$1.transformA,B),copyTransform(input$1.transformB,I),input$1.useRadii=!0,output$1.recycle(),cache$1.recycle(),Distance(output$1,cache$1,input$1),output$1.distance<10*EPSILON};Distance.testOverlap=testOverlap;Distance.Input=DistanceInput;Distance.Output=DistanceOutput;Distance.Proxy=DistanceProxy;Distance.Cache=SimplexCache;(function(){function E(){this.proxyA=new DistanceProxy,this.proxyB=new DistanceProxy,this.transformA=Transform.identity(),this.transformB=Transform.identity(),this.translationB=Vec2.zero()}return E.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.transformA.setIdentity(),this.transformB.setIdentity(),zeroVec2(this.translationB)},E})();var math_abs$7=Math.abs,math_max$3=Math.max,TOIInput=function(){function E(){this.proxyA=new DistanceProxy,this.proxyB=new DistanceProxy,this.sweepA=new Sweep,this.sweepB=new Sweep}return E.prototype.recycle=function(){this.proxyA.recycle(),this.proxyB.recycle(),this.sweepA.recycle(),this.sweepB.recycle(),this.tMax=-1},E}(),TOIOutputState;(function(E){E[E.e_unset=-1]="e_unset",E[E.e_unknown=0]="e_unknown",E[E.e_failed=1]="e_failed",E[E.e_overlapped=2]="e_overlapped",E[E.e_touching=3]="e_touching",E[E.e_separated=4]="e_separated"})(TOIOutputState||(TOIOutputState={}));var TOIOutput=function(){function E(){this.state=TOIOutputState.e_unset,this.t=-1}return E.prototype.recycle=function(){this.state=TOIOutputState.e_unset,this.t=-1},E}();stats.toiTime=0;stats.toiMaxTime=0;stats.toiCalls=0;stats.toiIters=0;stats.toiMaxIters=0;stats.toiRootIters=0;stats.toiMaxRootIters=0;var distanceInput=new DistanceInput,distanceOutput=new DistanceOutput,cache=new SimplexCache,xfA$1=transform(0,0,0),xfB$1=transform(0,0,0),temp$4=vec2(0,0),pointA$2=vec2(0,0),pointB$2=vec2(0,0),normal$3=vec2(0,0),axisA=vec2(0,0),axisB=vec2(0,0),localPointA=vec2(0,0),localPointB=vec2(0,0),TimeOfImpact=function(E,_){var A=Timer.now();++stats.toiCalls,E.state=TOIOutputState.e_unknown,E.t=_.tMax;var T=_.proxyA,B=_.proxyB,I=_.sweepA,C=_.sweepB;I.normalize(),C.normalize();var R=_.tMax,L=T.m_radius+B.m_radius,D=math_max$3(SettingsInternal.linearSlop,L-3*SettingsInternal.linearSlop),V=.25*SettingsInternal.linearSlop,U=0,z=SettingsInternal.maxTOIIterations,W=0;for(cache.recycle(),distanceInput.proxyA.setVertices(T.m_vertices,T.m_count,T.m_radius),distanceInput.proxyB.setVertices(B.m_vertices,B.m_count,B.m_radius),distanceInput.useRadii=!1;;){if(I.getTransform(xfA$1,U),C.getTransform(xfB$1,U),copyTransform(distanceInput.transformA,xfA$1),copyTransform(distanceInput.transformB,xfB$1),Distance(distanceOutput,cache,distanceInput),distanceOutput.distance<=0){E.state=TOIOutputState.e_overlapped,E.t=0;break}if(distanceOutput.distance<D+V){E.state=TOIOutputState.e_touching,E.t=U;break}separationFunction.initialize(cache,T,I,B,C,U);for(var Y=!1,K=R,J=0;;){var et=separationFunction.findMinSeparation(K);if(et>D+V){E.state=TOIOutputState.e_separated,E.t=R,Y=!0;break}if(et>D-V){U=K;break}var it=separationFunction.evaluate(U);if(it<D-V){E.state=TOIOutputState.e_failed,E.t=U,Y=!0;break}if(it<=D+V){E.state=TOIOutputState.e_touching,E.t=U,Y=!0;break}for(var rt=0,st=U,lt=K;;){var ct=void 0;rt&1?ct=st+(D-it)*(lt-st)/(et-it):ct=.5*(st+lt),++rt,++stats.toiRootIters;var at=separationFunction.evaluate(ct);if(math_abs$7(at-D)<V){K=ct;break}if(at>D?(st=ct,it=at):(lt=ct,et=at),rt===50)break}if(stats.toiMaxRootIters=math_max$3(stats.toiMaxRootIters,rt),++J,J===SettingsInternal.maxPolygonVertices)break}if(++W,++stats.toiIters,Y)break;if(W===z){E.state=TOIOutputState.e_failed,E.t=U;break}}stats.toiMaxIters=math_max$3(stats.toiMaxIters,W);var ht=Timer.diff(A);stats.toiMaxTime=math_max$3(stats.toiMaxTime,ht),stats.toiTime+=ht,separationFunction.recycle()},SeparationFunctionType;(function(E){E[E.e_unset=-1]="e_unset",E[E.e_points=1]="e_points",E[E.e_faceA=2]="e_faceA",E[E.e_faceB=3]="e_faceB"})(SeparationFunctionType||(SeparationFunctionType={}));var SeparationFunction=function(){function E(){this.m_proxyA=null,this.m_proxyB=null,this.m_sweepA=null,this.m_sweepB=null,this.m_type=SeparationFunctionType.e_unset,this.m_localPoint=vec2(0,0),this.m_axis=vec2(0,0),this.indexA=-1,this.indexB=-1}return E.prototype.recycle=function(){this.m_proxyA=null,this.m_proxyB=null,this.m_sweepA=null,this.m_sweepB=null,this.m_type=SeparationFunctionType.e_unset,zeroVec2(this.m_localPoint),zeroVec2(this.m_axis),this.indexA=-1,this.indexB=-1},E.prototype.initialize=function(_,A,T,B,I,C){var R=_.count;if(this.m_proxyA=A,this.m_proxyB=B,this.m_sweepA=T,this.m_sweepB=I,this.m_sweepA.getTransform(xfA$1,C),this.m_sweepB.getTransform(xfB$1,C),R===1){this.m_type=SeparationFunctionType.e_points;var L=this.m_proxyA.getVertex(_.indexA[0]),D=this.m_proxyB.getVertex(_.indexB[0]);transformVec2(pointA$2,xfA$1,L),transformVec2(pointB$2,xfB$1,D),subVec2(this.m_axis,pointB$2,pointA$2);var V=normalizeVec2Length(this.m_axis);return V}else if(_.indexA[0]===_.indexA[1]){this.m_type=SeparationFunctionType.e_faceB;var U=B.getVertex(_.indexB[0]),z=B.getVertex(_.indexB[1]);crossVec2Num(this.m_axis,subVec2(temp$4,z,U),1),normalizeVec2(this.m_axis),rotVec2(normal$3,xfB$1.q,this.m_axis),combine2Vec2(this.m_localPoint,.5,U,.5,z),transformVec2(pointB$2,xfB$1,this.m_localPoint);var W=A.getVertex(_.indexA[0]),Y=Transform.mulVec2(xfA$1,W),V=dotVec2(Y,normal$3)-dotVec2(pointB$2,normal$3);return V<0&&(negVec2(this.m_axis),V=-V),V}else{this.m_type=SeparationFunctionType.e_faceA;var K=this.m_proxyA.getVertex(_.indexA[0]),J=this.m_proxyA.getVertex(_.indexA[1]);crossVec2Num(this.m_axis,subVec2(temp$4,J,K),1),normalizeVec2(this.m_axis),rotVec2(normal$3,xfA$1.q,this.m_axis),combine2Vec2(this.m_localPoint,.5,K,.5,J),transformVec2(pointA$2,xfA$1,this.m_localPoint);var et=this.m_proxyB.getVertex(_.indexB[0]);transformVec2(pointB$2,xfB$1,et);var V=dotVec2(pointB$2,normal$3)-dotVec2(pointA$2,normal$3);return V<0&&(negVec2(this.m_axis),V=-V),V}},E.prototype.compute=function(_,A){switch(this.m_sweepA.getTransform(xfA$1,A),this.m_sweepB.getTransform(xfB$1,A),this.m_type){case SeparationFunctionType.e_points:{_&&(derotVec2(axisA,xfA$1.q,this.m_axis),derotVec2(axisB,xfB$1.q,scaleVec2(temp$4,-1,this.m_axis)),this.indexA=this.m_proxyA.getSupport(axisA),this.indexB=this.m_proxyB.getSupport(axisB)),copyVec2(localPointA,this.m_proxyA.getVertex(this.indexA)),copyVec2(localPointB,this.m_proxyB.getVertex(this.indexB)),transformVec2(pointA$2,xfA$1,localPointA),transformVec2(pointB$2,xfB$1,localPointB);var T=dotVec2(pointB$2,this.m_axis)-dotVec2(pointA$2,this.m_axis);return T}case SeparationFunctionType.e_faceA:{rotVec2(normal$3,xfA$1.q,this.m_axis),transformVec2(pointA$2,xfA$1,this.m_localPoint),_&&(derotVec2(axisB,xfB$1.q,scaleVec2(temp$4,-1,normal$3)),this.indexA=-1,this.indexB=this.m_proxyB.getSupport(axisB)),copyVec2(localPointB,this.m_proxyB.getVertex(this.indexB)),transformVec2(pointB$2,xfB$1,localPointB);var T=dotVec2(pointB$2,normal$3)-dotVec2(pointA$2,normal$3);return T}case SeparationFunctionType.e_faceB:{rotVec2(normal$3,xfB$1.q,this.m_axis),transformVec2(pointB$2,xfB$1,this.m_localPoint),_&&(derotVec2(axisA,xfA$1.q,scaleVec2(temp$4,-1,normal$3)),this.indexB=-1,this.indexA=this.m_proxyA.getSupport(axisA)),copyVec2(localPointA,this.m_proxyA.getVertex(this.indexA)),transformVec2(pointA$2,xfA$1,localPointA);var T=dotVec2(pointA$2,normal$3)-dotVec2(pointB$2,normal$3);return T}default:return _&&(this.indexA=-1,this.indexB=-1),0}},E.prototype.findMinSeparation=function(_){return this.compute(!0,_)},E.prototype.evaluate=function(_){return this.compute(!1,_)},E}(),separationFunction=new SeparationFunction;TimeOfImpact.Input=TOIInput;TimeOfImpact.Output=TOIOutput;var math_abs$6=Math.abs,math_sqrt$3=Math.sqrt,math_min$5=Math.min,TimeStep=function(){function E(){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}return E.prototype.reset=function(_){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=_,this.inv_dt=_==0?0:1/_,this.dtRatio=_*this.inv_dt0},E}(),s_subStep=new TimeStep,c=vec2(0,0),v=vec2(0,0),translation=vec2(0,0),input=new TOIInput,output=new TOIOutput,backup=new Sweep,backup1=new Sweep,backup2=new Sweep,ContactImpulse=function(){function E(_){this.contact=_,this.normals=[],this.tangents=[]}return E.prototype.recycle=function(){this.normals.length=0,this.tangents.length=0},Object.defineProperty(E.prototype,"normalImpulses",{get:function(){var _=this.contact,A=this.normals;A.length=0;for(var T=0;T<_.v_points.length;++T)A.push(_.v_points[T].normalImpulse);return A},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"tangentImpulses",{get:function(){var _=this.contact,A=this.tangents;A.length=0;for(var T=0;T<_.v_points.length;++T)A.push(_.v_points[T].tangentImpulse);return A},enumerable:!1,configurable:!0}),E}(),Solver=function(){function E(_){this.m_world=_,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}return E.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},E.prototype.addBody=function(_){this.m_bodies.push(_)},E.prototype.addContact=function(_){this.m_contacts.push(_)},E.prototype.addJoint=function(_){this.m_joints.push(_)},E.prototype.solveWorld=function(_){for(var A=this.m_world,T=A.m_bodyList;T;T=T.m_next)T.m_islandFlag=!1;for(var B=A.m_contactList;B;B=B.m_next)B.m_islandFlag=!1;for(var I=A.m_jointList;I;I=I.m_next)I.m_islandFlag=!1;for(var C=this.m_stack,R=A.m_bodyList;R;R=R.m_next)if(!R.m_islandFlag&&!(R.isAwake()==!1||R.isActive()==!1)&&!R.isStatic()){for(this.clear(),C.push(R),R.m_islandFlag=!0;C.length>0;){var T=C.pop();if(this.addBody(T),T.m_awakeFlag=!0,!T.isStatic()){for(var L=T.m_contactList;L;L=L.next){var D=L.contact;if(!D.m_islandFlag&&!(D.isEnabled()==!1||D.isTouching()==!1)){var V=D.m_fixtureA.m_isSensor,U=D.m_fixtureB.m_isSensor;if(!(V||U)){this.addContact(D),D.m_islandFlag=!0;var z=L.other;z.m_islandFlag||(C.push(z),z.m_islandFlag=!0)}}}for(var W=T.m_jointList;W;W=W.next)if(W.joint.m_islandFlag!=!0){var z=W.other;z.isActive()!=!1&&(this.addJoint(W.joint),W.joint.m_islandFlag=!0,!z.m_islandFlag&&(C.push(z),z.m_islandFlag=!0))}}}this.solveIsland(_);for(var Y=0;Y<this.m_bodies.length;++Y){var T=this.m_bodies[Y];T.isStatic()&&(T.m_islandFlag=!1)}}},E.prototype.solveIsland=function(_){for(var A=this.m_world,T=A.m_gravity,B=A.m_allowSleep,I=_.dt,C=0;C<this.m_bodies.length;++C){var R=this.m_bodies[C];copyVec2(c,R.m_sweep.c);var L=R.m_sweep.a;copyVec2(v,R.m_linearVelocity);var D=R.m_angularVelocity;copyVec2(R.m_sweep.c0,R.m_sweep.c),R.m_sweep.a0=R.m_sweep.a,R.isDynamic()&&(plusScaleVec2(v,I*R.m_gravityScale,T),plusScaleVec2(v,I*R.m_invMass,R.m_force),D+=I*R.m_invI*R.m_torque,scaleVec2(v,1/(1+I*R.m_linearDamping),v),D*=1/(1+I*R.m_angularDamping)),copyVec2(R.c_position.c,c),R.c_position.a=L,copyVec2(R.c_velocity.v,v),R.c_velocity.w=D}for(var C=0;C<this.m_contacts.length;++C){var V=this.m_contacts[C];V.initConstraint(_)}for(var C=0;C<this.m_contacts.length;++C){var V=this.m_contacts[C];V.initVelocityConstraint(_)}if(_.warmStarting)for(var C=0;C<this.m_contacts.length;++C){var V=this.m_contacts[C];V.warmStartConstraint(_)}for(var C=0;C<this.m_joints.length;++C){var U=this.m_joints[C];U.initVelocityConstraints(_)}for(var C=0;C<_.velocityIterations;++C){for(var z=0;z<this.m_joints.length;++z){var U=this.m_joints[z];U.solveVelocityConstraints(_)}for(var z=0;z<this.m_contacts.length;++z){var V=this.m_contacts[z];V.solveVelocityConstraint(_)}}for(var C=0;C<this.m_contacts.length;++C){var V=this.m_contacts[C];V.storeConstraintImpulses(_)}for(var C=0;C<this.m_bodies.length;++C){var R=this.m_bodies[C];copyVec2(c,R.c_position.c);var L=R.c_position.a;copyVec2(v,R.c_velocity.v);var D=R.c_velocity.w;scaleVec2(translation,I,v);var W=lengthSqrVec2(translation);if(W>SettingsInternal.maxTranslationSquared){var Y=SettingsInternal.maxTranslation/math_sqrt$3(W);mulVec2(v,Y)}var K=I*D;if(K*K>SettingsInternal.maxRotationSquared){var Y=SettingsInternal.maxRotation/math_abs$6(K);D*=Y}plusScaleVec2(c,I,v),L+=I*D,copyVec2(R.c_position.c,c),R.c_position.a=L,copyVec2(R.c_velocity.v,v),R.c_velocity.w=D}for(var J=!1,C=0;C<_.positionIterations;++C){for(var et=0,z=0;z<this.m_contacts.length;++z){var V=this.m_contacts[z],it=V.solvePositionConstraint(_);et=math_min$5(et,it)}for(var rt=et>=-3*SettingsInternal.linearSlop,st=!0,z=0;z<this.m_joints.length;++z){var U=this.m_joints[z],lt=U.solvePositionConstraints(_);st=st&&lt}if(rt&&st){J=!0;break}}for(var C=0;C<this.m_bodies.length;++C){var R=this.m_bodies[C];copyVec2(R.m_sweep.c,R.c_position.c),R.m_sweep.a=R.c_position.a,copyVec2(R.m_linearVelocity,R.c_velocity.v),R.m_angularVelocity=R.c_velocity.w,R.synchronizeTransform()}if(this.postSolveIsland(),B){for(var ct=1/0,at=SettingsInternal.linearSleepToleranceSqr,ht=SettingsInternal.angularSleepToleranceSqr,C=0;C<this.m_bodies.length;++C){var R=this.m_bodies[C];R.isStatic()||(R.m_autoSleepFlag==!1||R.m_angularVelocity*R.m_angularVelocity>ht||lengthSqrVec2(R.m_linearVelocity)>at?(R.m_sleepTime=0,ct=0):(R.m_sleepTime+=I,ct=math_min$5(ct,R.m_sleepTime)))}if(ct>=SettingsInternal.timeToSleep&&J)for(var C=0;C<this.m_bodies.length;++C){var R=this.m_bodies[C];R.setAwake(!1)}}},E.prototype.solveWorldTOI=function(_){var A=this.m_world;if(A.m_stepComplete){for(var T=A.m_bodyList;T;T=T.m_next)T.m_islandFlag=!1,T.m_sweep.alpha0=0;for(var B=A.m_contactList;B;B=B.m_next)B.m_toiFlag=!1,B.m_islandFlag=!1,B.m_toiCount=0,B.m_toi=1}for(;;){for(var I=null,C=1,R=A.m_contactList;R;R=R.m_next)if(R.isEnabled()!=!1&&!(R.m_toiCount>SettingsInternal.maxSubSteps)){var L=1;if(R.m_toiFlag)L=R.m_toi;else{var D=R.getFixtureA(),V=R.getFixtureB();if(D.isSensor()||V.isSensor())continue;var U=D.getBody(),z=V.getBody(),W=U.isAwake()&&!U.isStatic(),Y=z.isAwake()&&!z.isStatic();if(W==!1&&Y==!1)continue;var K=U.isBullet()||!U.isDynamic(),J=z.isBullet()||!z.isDynamic();if(K==!1&&J==!1)continue;var et=U.m_sweep.alpha0;U.m_sweep.alpha0<z.m_sweep.alpha0?(et=z.m_sweep.alpha0,U.m_sweep.advance(et)):z.m_sweep.alpha0<U.m_sweep.alpha0&&(et=U.m_sweep.alpha0,z.m_sweep.advance(et));var it=R.getChildIndexA(),rt=R.getChildIndexB();U.m_sweep,z.m_sweep,input.proxyA.set(D.getShape(),it),input.proxyB.set(V.getShape(),rt),input.sweepA.set(U.m_sweep),input.sweepB.set(z.m_sweep),input.tMax=1,TimeOfImpact(output,input);var st=output.t;output.state==TOIOutputState.e_touching?L=math_min$5(et+(1-et)*st,1):L=1,R.m_toi=L,R.m_toiFlag=!0}L<C&&(I=R,C=L)}if(I==null||1-10*EPSILON<C){A.m_stepComplete=!0;break}var lt=I.getFixtureA(),ct=I.getFixtureB(),at=lt.getBody(),ht=ct.getBody();if(backup1.set(at.m_sweep),backup2.set(ht.m_sweep),at.advance(C),ht.advance(C),I.update(A),I.m_toiFlag=!1,++I.m_toiCount,I.isEnabled()==!1||I.isTouching()==!1){I.setEnabled(!1),at.m_sweep.set(backup1),ht.m_sweep.set(backup2),at.synchronizeTransform(),ht.synchronizeTransform();continue}at.setAwake(!0),ht.setAwake(!0),this.clear(),this.addBody(at),this.addBody(ht),this.addContact(I),at.m_islandFlag=!0,ht.m_islandFlag=!0,I.m_islandFlag=!0;for(var mt=[at,ht],yt=0;yt<mt.length;++yt){var Tt=mt[yt];if(Tt.isDynamic())for(var At=Tt.m_contactList;At;At=At.next){var pt=At.contact;if(!pt.m_islandFlag){var Et=At.other;if(!(Et.isDynamic()&&!Tt.isBullet()&&!Et.isBullet())){var Vt=pt.m_fixtureA.m_isSensor,Ot=pt.m_fixtureB.m_isSensor;if(!(Vt||Ot)){if(backup.set(Et.m_sweep),Et.m_islandFlag==!1&&Et.advance(C),pt.update(A),pt.isEnabled()==!1||pt.isTouching()==!1){Et.m_sweep.set(backup),Et.synchronizeTransform();continue}pt.m_islandFlag=!0,this.addContact(pt),!Et.m_islandFlag&&(Et.m_islandFlag=!0,Et.isStatic()||Et.setAwake(!0),this.addBody(Et))}}}}}s_subStep.reset((1-C)*_.dt),s_subStep.dtRatio=1,s_subStep.positionIterations=20,s_subStep.velocityIterations=_.velocityIterations,s_subStep.warmStarting=!1,this.solveIslandTOI(s_subStep,at,ht);for(var yt=0;yt<this.m_bodies.length;++yt){var Tt=this.m_bodies[yt];if(Tt.m_islandFlag=!1,!!Tt.isDynamic()){Tt.synchronizeFixtures();for(var At=Tt.m_contactList;At;At=At.next)At.contact.m_toiFlag=!1,At.contact.m_islandFlag=!1}}if(A.findNewContacts(),A.m_subStepping){A.m_stepComplete=!1;break}}},E.prototype.solveIslandTOI=function(_,A,T){for(var V=0;V<this.m_bodies.length;++V){var B=this.m_bodies[V];copyVec2(B.c_position.c,B.m_sweep.c),B.c_position.a=B.m_sweep.a,copyVec2(B.c_velocity.v,B.m_linearVelocity),B.c_velocity.w=B.m_angularVelocity}for(var V=0;V<this.m_contacts.length;++V){var I=this.m_contacts[V];I.initConstraint(_)}for(var V=0;V<_.positionIterations;++V){for(var C=0,R=0;R<this.m_contacts.length;++R){var I=this.m_contacts[R],L=I.solvePositionConstraintTOI(_,A,T);C=math_min$5(C,L)}var D=C>=-1.5*SettingsInternal.linearSlop;if(D)break}var V;copyVec2(A.m_sweep.c0,A.c_position.c),A.m_sweep.a0=A.c_position.a,copyVec2(T.m_sweep.c0,T.c_position.c),T.m_sweep.a0=T.c_position.a;for(var V=0;V<this.m_contacts.length;++V){var I=this.m_contacts[V];I.initVelocityConstraint(_)}for(var V=0;V<_.velocityIterations;++V)for(var R=0;R<this.m_contacts.length;++R){var I=this.m_contacts[R];I.solveVelocityConstraint(_)}for(var U=_.dt,V=0;V<this.m_bodies.length;++V){var B=this.m_bodies[V];copyVec2(c,B.c_position.c);var z=B.c_position.a;copyVec2(v,B.c_velocity.v);var W=B.c_velocity.w;scaleVec2(translation,U,v);var Y=lengthSqrVec2(translation);if(Y>SettingsInternal.maxTranslationSquared){var K=SettingsInternal.maxTranslation/math_sqrt$3(Y);mulVec2(v,K)}var J=U*W;if(J*J>SettingsInternal.maxRotationSquared){var K=SettingsInternal.maxRotation/math_abs$6(J);W*=K}plusScaleVec2(c,U,v),z+=U*W,copyVec2(B.c_position.c,c),B.c_position.a=z,copyVec2(B.c_velocity.v,v),B.c_velocity.w=W,copyVec2(B.m_sweep.c,c),B.m_sweep.a=z,copyVec2(B.m_linearVelocity,v),B.m_angularVelocity=W,B.synchronizeTransform()}this.postSolveIsland()},E.prototype.postSolveIsland=function(){for(var _=0;_<this.m_contacts.length;++_){var A=this.m_contacts[_];this.m_world.postSolve(A,A.m_impulse)}},E}();Solver.TimeStep=TimeStep;var Mat22=function(){function E(_,A,T,B){typeof _=="object"&&_!==null?(this.ex=Vec2.clone(_),this.ey=Vec2.clone(A)):typeof _=="number"?(this.ex=Vec2.neo(_,T),this.ey=Vec2.neo(A,B)):(this.ex=Vec2.zero(),this.ey=Vec2.zero())}return E.prototype.toString=function(){return JSON.stringify(this)},E.isValid=function(_){return _===null||typeof _>"u"?!1:Vec2.isValid(_.ex)&&Vec2.isValid(_.ey)},E.assert=function(_){},E.prototype.set=function(_,A,T,B){typeof _=="number"&&typeof A=="number"&&typeof T=="number"&&typeof B=="number"?(this.ex.setNum(_,T),this.ey.setNum(A,B)):typeof _=="object"&&typeof A=="object"?(this.ex.setVec2(_),this.ey.setVec2(A)):typeof _=="object"&&(this.ex.setVec2(_.ex),this.ey.setVec2(_.ey))},E.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},E.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},E.prototype.getInverse=function(){var _=this.ex.x,A=this.ey.x,T=this.ex.y,B=this.ey.y,I=_*B-A*T;I!==0&&(I=1/I);var C=new E;return C.ex.x=I*B,C.ey.x=-I*A,C.ex.y=-I*T,C.ey.y=I*_,C},E.prototype.solve=function(_){var A=this.ex.x,T=this.ey.x,B=this.ex.y,I=this.ey.y,C=A*I-T*B;C!==0&&(C=1/C);var R=Vec2.zero();return R.x=C*(I*_.x-T*_.y),R.y=C*(A*_.y-B*_.x),R},E.mul=function(_,A){if(A&&"x"in A&&"y"in A){var T=_.ex.x*A.x+_.ey.x*A.y,B=_.ex.y*A.x+_.ey.y*A.y;return Vec2.neo(T,B)}else if(A&&"ex"in A&&"ey"in A){var I=_.ex.x*A.ex.x+_.ey.x*A.ex.y,C=_.ex.x*A.ey.x+_.ey.x*A.ey.y,R=_.ex.y*A.ex.x+_.ey.y*A.ex.y,L=_.ex.y*A.ey.x+_.ey.y*A.ey.y;return new E(I,C,R,L)}},E.mulVec2=function(_,A){var T=_.ex.x*A.x+_.ey.x*A.y,B=_.ex.y*A.x+_.ey.y*A.y;return Vec2.neo(T,B)},E.mulMat22=function(_,A){var T=_.ex.x*A.ex.x+_.ey.x*A.ex.y,B=_.ex.x*A.ey.x+_.ey.x*A.ey.y,I=_.ex.y*A.ex.x+_.ey.y*A.ex.y,C=_.ex.y*A.ey.x+_.ey.y*A.ey.y;return new E(T,B,I,C)},E.mulT=function(_,A){if(A&&"x"in A&&"y"in A)return Vec2.neo(Vec2.dot(A,_.ex),Vec2.dot(A,_.ey));if(A&&"ex"in A&&"ey"in A){var T=Vec2.neo(Vec2.dot(_.ex,A.ex),Vec2.dot(_.ey,A.ex)),B=Vec2.neo(Vec2.dot(_.ex,A.ey),Vec2.dot(_.ey,A.ey));return new E(T,B)}},E.mulTVec2=function(_,A){return Vec2.neo(Vec2.dot(A,_.ex),Vec2.dot(A,_.ey))},E.mulTMat22=function(_,A){var T=Vec2.neo(Vec2.dot(_.ex,A.ex),Vec2.dot(_.ey,A.ex)),B=Vec2.neo(Vec2.dot(_.ex,A.ey),Vec2.dot(_.ey,A.ey));return new E(T,B)},E.abs=function(_){return new E(Vec2.abs(_.ex),Vec2.abs(_.ey))},E.add=function(_,A){return new E(Vec2.add(_.ex,A.ex),Vec2.add(_.ey,A.ey))},E}(),math_sqrt$2=Math.sqrt,pointA$1=vec2(0,0),pointB$1=vec2(0,0),temp$3=vec2(0,0),cA$1=vec2(0,0),cB$1=vec2(0,0),dist=vec2(0,0),planePoint$2=vec2(0,0),clipPoint$1=vec2(0,0),ManifoldType;(function(E){E[E.e_unset=-1]="e_unset",E[E.e_circles=0]="e_circles",E[E.e_faceA=1]="e_faceA",E[E.e_faceB=2]="e_faceB"})(ManifoldType||(ManifoldType={}));var ContactFeatureType;(function(E){E[E.e_unset=-1]="e_unset",E[E.e_vertex=0]="e_vertex",E[E.e_face=1]="e_face"})(ContactFeatureType||(ContactFeatureType={}));var PointState;(function(E){E[E.nullState=0]="nullState",E[E.addState=1]="addState",E[E.persistState=2]="persistState",E[E.removeState=3]="removeState"})(PointState||(PointState={}));var ClipVertex=function(){function E(){this.v=vec2(0,0),this.id=new ContactID}return E.prototype.set=function(_){copyVec2(this.v,_.v),this.id.set(_.id)},E.prototype.recycle=function(){zeroVec2(this.v),this.id.recycle()},E}(),Manifold=function(){function E(){this.localNormal=vec2(0,0),this.localPoint=vec2(0,0),this.points=[new ManifoldPoint,new ManifoldPoint],this.pointCount=0}return E.prototype.set=function(_){this.type=_.type,copyVec2(this.localNormal,_.localNormal),copyVec2(this.localPoint,_.localPoint),this.pointCount=_.pointCount,this.points[0].set(_.points[0]),this.points[1].set(_.points[1])},E.prototype.recycle=function(){this.type=ManifoldType.e_unset,zeroVec2(this.localNormal),zeroVec2(this.localPoint),this.pointCount=0,this.points[0].recycle(),this.points[1].recycle()},E.prototype.getWorldManifold=function(_,A,T,B,I){if(this.pointCount==0)return _;_=_||new WorldManifold,_.pointCount=this.pointCount;var C=_.normal,R=_.points,L=_.separations;switch(this.type){case ManifoldType.e_circles:{setVec2(C,1,0);var D=this.points[0];transformVec2(pointA$1,A,this.localPoint),transformVec2(pointB$1,B,D.localPoint),subVec2(dist,pointB$1,pointA$1);var V=lengthSqrVec2(dist);if(V>EPSILON*EPSILON){var U=math_sqrt$2(V);scaleVec2(C,1/U,dist)}combine2Vec2(cA$1,1,pointA$1,T,C),combine2Vec2(cB$1,1,pointB$1,-I,C),combine2Vec2(R[0],.5,cA$1,.5,cB$1),L[0]=dotVec2(subVec2(temp$3,cB$1,cA$1),C);break}case ManifoldType.e_faceA:{rotVec2(C,A.q,this.localNormal),transformVec2(planePoint$2,A,this.localPoint);for(var z=0;z<this.pointCount;++z){var D=this.points[z];transformVec2(clipPoint$1,B,D.localPoint),combine2Vec2(cA$1,1,clipPoint$1,T-dotVec2(subVec2(temp$3,clipPoint$1,planePoint$2),C),C),combine2Vec2(cB$1,1,clipPoint$1,-I,C),combine2Vec2(R[z],.5,cA$1,.5,cB$1),L[z]=dotVec2(subVec2(temp$3,cB$1,cA$1),C)}break}case ManifoldType.e_faceB:{rotVec2(C,B.q,this.localNormal),transformVec2(planePoint$2,B,this.localPoint);for(var z=0;z<this.pointCount;++z){var D=this.points[z];transformVec2(clipPoint$1,A,D.localPoint),combine2Vec2(cB$1,1,clipPoint$1,I-dotVec2(subVec2(temp$3,clipPoint$1,planePoint$2),C),C),combine2Vec2(cA$1,1,clipPoint$1,-T,C),combine2Vec2(R[z],.5,cA$1,.5,cB$1),L[z]=dotVec2(subVec2(temp$3,cA$1,cB$1),C)}negVec2(C);break}}return _},E.clipSegmentToLine=clipSegmentToLine,E.ClipVertex=ClipVertex,E.getPointStates=getPointStates,E.PointState=PointState,E}(),ManifoldPoint=function(){function E(){this.localPoint=vec2(0,0),this.normalImpulse=0,this.tangentImpulse=0,this.id=new ContactID}return E.prototype.set=function(_){copyVec2(this.localPoint,_.localPoint),this.normalImpulse=_.normalImpulse,this.tangentImpulse=_.tangentImpulse,this.id.set(_.id)},E.prototype.recycle=function(){zeroVec2(this.localPoint),this.normalImpulse=0,this.tangentImpulse=0,this.id.recycle()},E}(),ContactID=function(){function E(){this.key=-1,this.indexA=-1,this.indexB=-1,this.typeA=ContactFeatureType.e_unset,this.typeB=ContactFeatureType.e_unset}return E.prototype.setFeatures=function(_,A,T,B){this.indexA=_,this.indexB=T,this.typeA=A,this.typeB=B,this.key=this.indexA+this.indexB*4+this.typeA*16+this.typeB*64},E.prototype.set=function(_){this.indexA=_.indexA,this.indexB=_.indexB,this.typeA=_.typeA,this.typeB=_.typeB,this.key=this.indexA+this.indexB*4+this.typeA*16+this.typeB*64},E.prototype.swapFeatures=function(){var _=this.indexA,A=this.indexB,T=this.typeA,B=this.typeB;this.indexA=A,this.indexB=_,this.typeA=B,this.typeB=T,this.key=this.indexA+this.indexB*4+this.typeA*16+this.typeB*64},E.prototype.recycle=function(){this.indexA=0,this.indexB=0,this.typeA=ContactFeatureType.e_unset,this.typeB=ContactFeatureType.e_unset,this.key=-1},E}(),WorldManifold=function(){function E(){this.normal=vec2(0,0),this.points=[vec2(0,0),vec2(0,0)],this.separations=[0,0],this.pointCount=0}return E.prototype.recycle=function(){zeroVec2(this.normal),zeroVec2(this.points[0]),zeroVec2(this.points[1]),this.separations[0]=0,this.separations[1]=0,this.pointCount=0},E}();function getPointStates(E,_,A,T){for(var B=0;B<A.pointCount;++B){var I=A.points[B].id;E[B]=PointState.removeState;for(var C=0;C<T.pointCount;++C)if(T.points[C].id.key===I.key){E[B]=PointState.persistState;break}}for(var B=0;B<T.pointCount;++B){var I=T.points[B].id;_[B]=PointState.addState;for(var C=0;C<A.pointCount;++C)if(A.points[C].id.key===I.key){_[B]=PointState.persistState;break}}}function clipSegmentToLine(E,_,A,T,B){var I=0,C=dotVec2(A,_[0].v)-T,R=dotVec2(A,_[1].v)-T;if(C<=0&&E[I++].set(_[0]),R<=0&&E[I++].set(_[1]),C*R<0){var L=C/(C-R);combine2Vec2(E[I].v,1-L,_[0].v,L,_[1].v),E[I].id.setFeatures(B,ContactFeatureType.e_vertex,_[0].id.indexB,ContactFeatureType.e_face),++I}return I}var math_sqrt$1=Math.sqrt,math_max$2=Math.max,math_min$4=Math.min,contactPool=new Pool({create:function(){return new Contact},release:function(E){E.recycle()}}),oldManifold=new Manifold,worldManifold=new WorldManifold,ContactEdge=function(){function E(_){this.prev=null,this.next=null,this.other=null,this.contact=_}return E.prototype.recycle=function(){this.prev=null,this.next=null,this.other=null},E}();function mixFriction(E,_){return math_sqrt$1(E*_)}function mixRestitution(E,_){return E>_?E:_}var s_registers=[],VelocityConstraintPoint=function(){function E(){this.rA=vec2(0,0),this.rB=vec2(0,0),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}return E.prototype.recycle=function(){zeroVec2(this.rA),zeroVec2(this.rB),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0},E}(),cA=vec2(0,0),vA=vec2(0,0),cB=vec2(0,0),vB=vec2(0,0),tangent$1=vec2(0,0),xfA=transform(0,0,0),xfB=transform(0,0,0),pointA=vec2(0,0),pointB=vec2(0,0),clipPoint=vec2(0,0),planePoint$1=vec2(0,0),rA=vec2(0,0),rB=vec2(0,0),P$1=vec2(0,0),normal$2=vec2(0,0),point=vec2(0,0),dv=vec2(0,0),dv1=vec2(0,0),dv2=vec2(0,0),b=vec2(0,0),a=vec2(0,0),x=vec2(0,0),d=vec2(0,0),P1=vec2(0,0),P2=vec2(0,0),temp$2=vec2(0,0),Contact=function(){function E(){this.m_nodeA=new ContactEdge(this),this.m_nodeB=new ContactEdge(this),this.m_fixtureA=null,this.m_fixtureB=null,this.m_indexA=-1,this.m_indexB=-1,this.m_evaluateFcn=null,this.m_manifold=new Manifold,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_impulse=new ContactImpulse(this),this.v_points=[new VelocityConstraintPoint,new VelocityConstraintPoint],this.v_normal=vec2(0,0),this.v_normalMass=new Mat22,this.v_K=new Mat22,this.v_pointCount=0,this.v_tangentSpeed=0,this.v_friction=0,this.v_restitution=0,this.v_invMassA=0,this.v_invMassB=0,this.v_invIA=0,this.v_invIB=0,this.p_localPoints=[vec2(0,0),vec2(0,0)],this.p_localNormal=vec2(0,0),this.p_localPoint=vec2(0,0),this.p_localCenterA=vec2(0,0),this.p_localCenterB=vec2(0,0),this.p_type=ManifoldType.e_unset,this.p_radiusA=0,this.p_radiusB=0,this.p_pointCount=0,this.p_invMassA=0,this.p_invMassB=0,this.p_invIA=0,this.p_invIB=0}return E.prototype.initialize=function(_,A,T,B,I){this.m_fixtureA=_,this.m_fixtureB=T,this.m_indexA=A,this.m_indexB=B,this.m_evaluateFcn=I,this.m_friction=mixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=mixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},E.prototype.recycle=function(){this.m_nodeA.recycle(),this.m_nodeB.recycle(),this.m_fixtureA=null,this.m_fixtureB=null,this.m_indexA=-1,this.m_indexB=-1,this.m_evaluateFcn=null,this.m_manifold.recycle(),this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_impulse.recycle();for(var _=0,A=this.v_points;_<A.length;_++){var T=A[_];T.recycle()}zeroVec2(this.v_normal),this.v_normalMass.setZero(),this.v_K.setZero(),this.v_pointCount=0,this.v_tangentSpeed=0,this.v_friction=0,this.v_restitution=0,this.v_invMassA=0,this.v_invMassB=0,this.v_invIA=0,this.v_invIB=0;for(var B=0,I=this.p_localPoints;B<I.length;B++){var C=I[B];zeroVec2(C)}zeroVec2(this.p_localNormal),zeroVec2(this.p_localPoint),zeroVec2(this.p_localCenterA),zeroVec2(this.p_localCenterB),this.p_type=ManifoldType.e_unset,this.p_radiusA=0,this.p_radiusB=0,this.p_pointCount=0,this.p_invMassA=0,this.p_invMassB=0,this.p_invIA=0,this.p_invIB=0},E.prototype.initConstraint=function(_){var A=this.m_fixtureA,T=this.m_fixtureB;if(!(A===null||T===null)){var B=A.m_body,I=T.m_body;if(!(B===null||I===null)){var C=A.m_shape,R=T.m_shape;if(!(C===null||R===null)){var L=this.m_manifold,D=L.pointCount;this.v_invMassA=B.m_invMass,this.v_invMassB=I.m_invMass,this.v_invIA=B.m_invI,this.v_invIB=I.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=D,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=B.m_invMass,this.p_invMassB=I.m_invMass,this.p_invIA=B.m_invI,this.p_invIB=I.m_invI,copyVec2(this.p_localCenterA,B.m_sweep.localCenter),copyVec2(this.p_localCenterB,I.m_sweep.localCenter),this.p_radiusA=C.m_radius,this.p_radiusB=R.m_radius,this.p_type=L.type,copyVec2(this.p_localNormal,L.localNormal),copyVec2(this.p_localPoint,L.localPoint),this.p_pointCount=D;for(var V=0;V<SettingsInternal.maxManifoldPoints;++V)this.v_points[V].recycle(),zeroVec2(this.p_localPoints[V]);for(var V=0;V<D;++V){var U=L.points[V],z=this.v_points[V];_.warmStarting&&(z.normalImpulse=_.dtRatio*U.normalImpulse,z.tangentImpulse=_.dtRatio*U.tangentImpulse),copyVec2(this.p_localPoints[V],U.localPoint)}}}}},E.prototype.getManifold=function(){return this.m_manifold},E.prototype.getWorldManifold=function(_){var A=this.m_fixtureA,T=this.m_fixtureB;if(!(A===null||T===null)){var B=A.m_body,I=T.m_body;if(!(B===null||I===null)){var C=A.m_shape,R=T.m_shape;if(!(C===null||R===null))return this.m_manifold.getWorldManifold(_,B.getTransform(),C.m_radius,I.getTransform(),R.m_radius)}}},E.prototype.setEnabled=function(_){this.m_enabledFlag=!!_},E.prototype.isEnabled=function(){return this.m_enabledFlag},E.prototype.isTouching=function(){return this.m_touchingFlag},E.prototype.getNext=function(){return this.m_next},E.prototype.getFixtureA=function(){return this.m_fixtureA},E.prototype.getFixtureB=function(){return this.m_fixtureB},E.prototype.getChildIndexA=function(){return this.m_indexA},E.prototype.getChildIndexB=function(){return this.m_indexB},E.prototype.flagForFiltering=function(){this.m_filterFlag=!0},E.prototype.setFriction=function(_){this.m_friction=_},E.prototype.getFriction=function(){return this.m_friction},E.prototype.resetFriction=function(){var _=this.m_fixtureA,A=this.m_fixtureB;_===null||A===null||(this.m_friction=mixFriction(_.m_friction,A.m_friction))},E.prototype.setRestitution=function(_){this.m_restitution=_},E.prototype.getRestitution=function(){return this.m_restitution},E.prototype.resetRestitution=function(){var _=this.m_fixtureA,A=this.m_fixtureB;_===null||A===null||(this.m_restitution=mixRestitution(_.m_restitution,A.m_restitution))},E.prototype.setTangentSpeed=function(_){this.m_tangentSpeed=_},E.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},E.prototype.evaluate=function(_,A,T){var B=this.m_fixtureA,I=this.m_fixtureB;B===null||I===null||this.m_evaluateFcn(_,A,B,this.m_indexA,T,I,this.m_indexB)},E.prototype.update=function(_){var A=this.m_fixtureA,T=this.m_fixtureB;if(!(A===null||T===null)){var B=A.m_body,I=T.m_body;if(!(B===null||I===null)){var C=A.m_shape,R=T.m_shape;if(!(C===null||R===null)){this.m_enabledFlag=!0;var L=!1,D=this.m_touchingFlag,V=A.m_isSensor,U=T.m_isSensor,z=V||U,W=B.m_xf,Y=I.m_xf;if(z)L=testOverlap(C,this.m_indexA,R,this.m_indexB,W,Y),this.m_manifold.pointCount=0;else{oldManifold.recycle(),oldManifold.set(this.m_manifold),this.m_manifold.recycle(),this.evaluate(this.m_manifold,W,Y),L=this.m_manifold.pointCount>0;for(var K=0;K<this.m_manifold.pointCount;++K){var J=this.m_manifold.points[K];J.normalImpulse=0,J.tangentImpulse=0;for(var et=0;et<oldManifold.pointCount;++et){var it=oldManifold.points[et];if(it.id.key===J.id.key){J.normalImpulse=it.normalImpulse,J.tangentImpulse=it.tangentImpulse;break}}}L!==D&&(B.setAwake(!0),I.setAwake(!0))}this.m_touchingFlag=L;var rt=typeof _=="object"&&_!==null;!D&&L&&rt&&_.beginContact(this),D&&!L&&rt&&_.endContact(this),!z&&L&&rt&&oldManifold&&_.preSolve(this,oldManifold)}}}},E.prototype.solvePositionConstraint=function(_){return this._solvePositionConstraint(_,null,null)},E.prototype.solvePositionConstraintTOI=function(_,A,T){return this._solvePositionConstraint(_,A,T)},E.prototype._solvePositionConstraint=function(_,A,T){var B=A!==null&&T!==null,I=0,C=this.m_fixtureA,R=this.m_fixtureB;if(C===null||R===null)return I;var L=C.m_body,D=R.m_body;if(L===null||D===null)return I;L.c_velocity,D.c_velocity;var V=L.c_position,U=D.c_position,z=this.p_localCenterA,W=this.p_localCenterB,Y=0,K=0;(!B||L===A||L===T)&&(Y=this.p_invMassA,K=this.p_invIA);var J=0,et=0;(!B||D===A||D===T)&&(J=this.p_invMassB,et=this.p_invIB),copyVec2(cA,V.c);var it=V.a;copyVec2(cB,U.c);for(var rt=U.a,st=0;st<this.p_pointCount;++st){getTransform(xfA,z,cA,it),getTransform(xfB,W,cB,rt);var lt=void 0;switch(this.p_type){case ManifoldType.e_circles:{transformVec2(pointA,xfA,this.p_localPoint),transformVec2(pointB,xfB,this.p_localPoints[0]),subVec2(normal$2,pointB,pointA),normalizeVec2(normal$2),combine2Vec2(point,.5,pointA,.5,pointB),lt=dotVec2(pointB,normal$2)-dotVec2(pointA,normal$2)-this.p_radiusA-this.p_radiusB;break}case ManifoldType.e_faceA:{rotVec2(normal$2,xfA.q,this.p_localNormal),transformVec2(planePoint$1,xfA,this.p_localPoint),transformVec2(clipPoint,xfB,this.p_localPoints[st]),lt=dotVec2(clipPoint,normal$2)-dotVec2(planePoint$1,normal$2)-this.p_radiusA-this.p_radiusB,copyVec2(point,clipPoint);break}case ManifoldType.e_faceB:{rotVec2(normal$2,xfB.q,this.p_localNormal),transformVec2(planePoint$1,xfB,this.p_localPoint),transformVec2(clipPoint,xfA,this.p_localPoints[st]),lt=dotVec2(clipPoint,normal$2)-dotVec2(planePoint$1,normal$2)-this.p_radiusA-this.p_radiusB,copyVec2(point,clipPoint),negVec2(normal$2);break}default:return I}subVec2(rA,point,cA),subVec2(rB,point,cB),I=math_min$4(I,lt);var ct=B?SettingsInternal.toiBaugarte:SettingsInternal.baumgarte,at=SettingsInternal.linearSlop,ht=SettingsInternal.maxLinearCorrection,mt=clamp$1(ct*(lt+at),-ht,0),yt=crossVec2Vec2(rA,normal$2),Tt=crossVec2Vec2(rB,normal$2),At=Y+J+K*yt*yt+et*Tt*Tt,pt=At>0?-mt/At:0;scaleVec2(P$1,pt,normal$2),minusScaleVec2(cA,Y,P$1),it-=K*crossVec2Vec2(rA,P$1),plusScaleVec2(cB,J,P$1),rt+=et*crossVec2Vec2(rB,P$1)}return copyVec2(V.c,cA),V.a=it,copyVec2(U.c,cB),U.a=rt,I},E.prototype.initVelocityConstraint=function(_){var A=this.m_fixtureA,T=this.m_fixtureB;if(!(A===null||T===null)){var B=A.m_body,I=T.m_body;if(!(B===null||I===null)){var C=B.c_velocity,R=I.c_velocity,L=B.c_position,D=I.c_position,V=this.p_radiusA,U=this.p_radiusB,z=this.m_manifold,W=this.v_invMassA,Y=this.v_invMassB,K=this.v_invIA,J=this.v_invIB,et=this.p_localCenterA,it=this.p_localCenterB;copyVec2(cA,L.c);var rt=L.a;copyVec2(vA,C.v);var st=C.w;copyVec2(cB,D.c);var lt=D.a;copyVec2(vB,R.v);var ct=R.w;getTransform(xfA,et,cA,rt),getTransform(xfB,it,cB,lt),worldManifold.recycle(),z.getWorldManifold(worldManifold,xfA,V,xfB,U),copyVec2(this.v_normal,worldManifold.normal);for(var at=0;at<this.v_pointCount;++at){var ht=this.v_points[at],mt=worldManifold.points[at];subVec2(ht.rA,mt,cA),subVec2(ht.rB,mt,cB);var yt=crossVec2Vec2(ht.rA,this.v_normal),Tt=crossVec2Vec2(ht.rB,this.v_normal),At=W+Y+K*yt*yt+J*Tt*Tt;ht.normalMass=At>0?1/At:0,crossVec2Num(tangent$1,this.v_normal,1);var pt=crossVec2Vec2(ht.rA,tangent$1),Et=crossVec2Vec2(ht.rB,tangent$1),Vt=W+Y+K*pt*pt+J*Et*Et;ht.tangentMass=Vt>0?1/Vt:0,ht.velocityBias=0;var Ot=0;Ot+=dotVec2(this.v_normal,vB),Ot+=dotVec2(this.v_normal,crossNumVec2(temp$2,ct,ht.rB)),Ot-=dotVec2(this.v_normal,vA),Ot-=dotVec2(this.v_normal,crossNumVec2(temp$2,st,ht.rA)),Ot<-SettingsInternal.velocityThreshold&&(ht.velocityBias=-this.v_restitution*Ot)}if(this.v_pointCount==2&&_.blockSolve){var gt=this.v_points[0],bt=this.v_points[1],$t=crossVec2Vec2(gt.rA,this.v_normal),Lt=crossVec2Vec2(gt.rB,this.v_normal),St=crossVec2Vec2(bt.rA,this.v_normal),Ct=crossVec2Vec2(bt.rB,this.v_normal),_t=W+Y+K*$t*$t+J*Lt*Lt,wt=W+Y+K*St*St+J*Ct*Ct,Mt=W+Y+K*$t*St+J*Lt*Ct,Gt=1e3;if(_t*_t<Gt*(_t*wt-Mt*Mt)){this.v_K.ex.setNum(_t,Mt),this.v_K.ey.setNum(Mt,wt);var Jt=this.v_K.ex.x,he=this.v_K.ey.x,me=this.v_K.ex.y,ne=this.v_K.ey.y,Kt=Jt*ne-he*me;Kt!==0&&(Kt=1/Kt),this.v_normalMass.ex.x=Kt*ne,this.v_normalMass.ey.x=-Kt*he,this.v_normalMass.ex.y=-Kt*me,this.v_normalMass.ey.y=Kt*Jt}else this.v_pointCount=1}copyVec2(L.c,cA),L.a=rt,copyVec2(C.v,vA),C.w=st,copyVec2(D.c,cB),D.a=lt,copyVec2(R.v,vB),R.w=ct}}},E.prototype.warmStartConstraint=function(_){var A=this.m_fixtureA,T=this.m_fixtureB;if(!(A===null||T===null)){var B=A.m_body,I=T.m_body;if(!(B===null||I===null)){var C=B.c_velocity,R=I.c_velocity;B.c_position,I.c_position;var L=this.v_invMassA,D=this.v_invIA,V=this.v_invMassB,U=this.v_invIB;copyVec2(vA,C.v);var z=C.w;copyVec2(vB,R.v);var W=R.w;copyVec2(normal$2,this.v_normal),crossVec2Num(tangent$1,normal$2,1);for(var Y=0;Y<this.v_pointCount;++Y){var K=this.v_points[Y];combine2Vec2(P$1,K.normalImpulse,normal$2,K.tangentImpulse,tangent$1),z-=D*crossVec2Vec2(K.rA,P$1),minusScaleVec2(vA,L,P$1),W+=U*crossVec2Vec2(K.rB,P$1),plusScaleVec2(vB,V,P$1)}copyVec2(C.v,vA),C.w=z,copyVec2(R.v,vB),R.w=W}}},E.prototype.storeConstraintImpulses=function(_){for(var A=this.m_manifold,T=0;T<this.v_pointCount;++T)A.points[T].normalImpulse=this.v_points[T].normalImpulse,A.points[T].tangentImpulse=this.v_points[T].tangentImpulse},E.prototype.solveVelocityConstraint=function(_){var A=this.m_fixtureA,T=this.m_fixtureB;if(!(A===null||T===null)){var B=A.m_body,I=T.m_body;if(!(B===null||I===null)){var C=B.c_velocity;B.c_position;var R=I.c_velocity;I.c_position;var L=this.v_invMassA,D=this.v_invIA,V=this.v_invMassB,U=this.v_invIB;copyVec2(vA,C.v);var z=C.w;copyVec2(vB,R.v);var W=R.w;copyVec2(normal$2,this.v_normal),crossVec2Num(tangent$1,normal$2,1);for(var Y=this.v_friction,K=0;K<this.v_pointCount;++K){var J=this.v_points[K];zeroVec2(dv),plusVec2(dv,vB),plusVec2(dv,crossNumVec2(temp$2,W,J.rB)),minusVec2(dv,vA),minusVec2(dv,crossNumVec2(temp$2,z,J.rA));var et=dotVec2(dv,tangent$1)-this.v_tangentSpeed,it=J.tangentMass*-et,rt=Y*J.normalImpulse,st=clamp$1(J.tangentImpulse+it,-rt,rt);it=st-J.tangentImpulse,J.tangentImpulse=st,scaleVec2(P$1,it,tangent$1),minusScaleVec2(vA,L,P$1),z-=D*crossVec2Vec2(J.rA,P$1),plusScaleVec2(vB,V,P$1),W+=U*crossVec2Vec2(J.rB,P$1)}if(this.v_pointCount==1||_.blockSolve==!1)for(var lt=0;lt<this.v_pointCount;++lt){var J=this.v_points[lt];zeroVec2(dv),plusVec2(dv,vB),plusVec2(dv,crossNumVec2(temp$2,W,J.rB)),minusVec2(dv,vA),minusVec2(dv,crossNumVec2(temp$2,z,J.rA));var ct=dotVec2(dv,normal$2),it=-J.normalMass*(ct-J.velocityBias),st=math_max$2(J.normalImpulse+it,0);it=st-J.normalImpulse,J.normalImpulse=st,scaleVec2(P$1,it,normal$2),minusScaleVec2(vA,L,P$1),z-=D*crossVec2Vec2(J.rA,P$1),plusScaleVec2(vB,V,P$1),W+=U*crossVec2Vec2(J.rB,P$1)}else{var at=this.v_points[0],ht=this.v_points[1];setVec2(a,at.normalImpulse,ht.normalImpulse),zeroVec2(dv1),plusVec2(dv1,vB),plusVec2(dv1,crossNumVec2(temp$2,W,at.rB)),minusVec2(dv1,vA),minusVec2(dv1,crossNumVec2(temp$2,z,at.rA)),zeroVec2(dv2),plusVec2(dv2,vB),plusVec2(dv2,crossNumVec2(temp$2,W,ht.rB)),minusVec2(dv2,vA),minusVec2(dv2,crossNumVec2(temp$2,z,ht.rA));var mt=dotVec2(dv1,normal$2),yt=dotVec2(dv2,normal$2);for(setVec2(b,mt-at.velocityBias,yt-ht.velocityBias),b.x-=this.v_K.ex.x*a.x+this.v_K.ey.x*a.y,b.y-=this.v_K.ex.y*a.x+this.v_K.ey.y*a.y;;){if(zeroVec2(x),x.x=-(this.v_normalMass.ex.x*b.x+this.v_normalMass.ey.x*b.y),x.y=-(this.v_normalMass.ex.y*b.x+this.v_normalMass.ey.y*b.y),x.x>=0&&x.y>=0){subVec2(d,x,a),scaleVec2(P1,d.x,normal$2),scaleVec2(P2,d.y,normal$2),combine3Vec2(vA,-L,P1,-L,P2,1,vA),z-=D*(crossVec2Vec2(at.rA,P1)+crossVec2Vec2(ht.rA,P2)),combine3Vec2(vB,V,P1,V,P2,1,vB),W+=U*(crossVec2Vec2(at.rB,P1)+crossVec2Vec2(ht.rB,P2)),at.normalImpulse=x.x,ht.normalImpulse=x.y;break}if(x.x=-at.normalMass*b.x,x.y=0,mt=0,yt=this.v_K.ex.y*x.x+b.y,x.x>=0&&yt>=0){subVec2(d,x,a),scaleVec2(P1,d.x,normal$2),scaleVec2(P2,d.y,normal$2),combine3Vec2(vA,-L,P1,-L,P2,1,vA),z-=D*(crossVec2Vec2(at.rA,P1)+crossVec2Vec2(ht.rA,P2)),combine3Vec2(vB,V,P1,V,P2,1,vB),W+=U*(crossVec2Vec2(at.rB,P1)+crossVec2Vec2(ht.rB,P2)),at.normalImpulse=x.x,ht.normalImpulse=x.y;break}if(x.x=0,x.y=-ht.normalMass*b.y,mt=this.v_K.ey.x*x.y+b.x,yt=0,x.y>=0&&mt>=0){subVec2(d,x,a),scaleVec2(P1,d.x,normal$2),scaleVec2(P2,d.y,normal$2),combine3Vec2(vA,-L,P1,-L,P2,1,vA),z-=D*(crossVec2Vec2(at.rA,P1)+crossVec2Vec2(ht.rA,P2)),combine3Vec2(vB,V,P1,V,P2,1,vB),W+=U*(crossVec2Vec2(at.rB,P1)+crossVec2Vec2(ht.rB,P2)),at.normalImpulse=x.x,ht.normalImpulse=x.y;break}if(x.x=0,x.y=0,mt=b.x,yt=b.y,mt>=0&&yt>=0){subVec2(d,x,a),scaleVec2(P1,d.x,normal$2),scaleVec2(P2,d.y,normal$2),combine3Vec2(vA,-L,P1,-L,P2,1,vA),z-=D*(crossVec2Vec2(at.rA,P1)+crossVec2Vec2(ht.rA,P2)),combine3Vec2(vB,V,P1,V,P2,1,vB),W+=U*(crossVec2Vec2(at.rB,P1)+crossVec2Vec2(ht.rB,P2)),at.normalImpulse=x.x,ht.normalImpulse=x.y;break}break}}copyVec2(C.v,vA),C.w=z,copyVec2(R.v,vB),R.w=W}}},E.addType=function(_,A,T){s_registers[_]=s_registers[_]||{},s_registers[_][A]=T},E.create=function(_,A,T,B){var I=_.m_shape.m_type,C=T.m_shape.m_type,R=contactPool.allocate(),L;if(L=s_registers[I]&&s_registers[I][C])R.initialize(_,A,T,B,L);else if(L=s_registers[C]&&s_registers[C][I])R.initialize(T,B,_,A,L);else return null;_=R.m_fixtureA,T=R.m_fixtureB,A=R.getChildIndexA(),B=R.getChildIndexB();var D=_.m_body,V=T.m_body;return R.m_nodeA.contact=R,R.m_nodeA.other=V,R.m_nodeA.prev=null,R.m_nodeA.next=D.m_contactList,D.m_contactList!=null&&(D.m_contactList.prev=R.m_nodeA),D.m_contactList=R.m_nodeA,R.m_nodeB.contact=R,R.m_nodeB.other=D,R.m_nodeB.prev=null,R.m_nodeB.next=V.m_contactList,V.m_contactList!=null&&(V.m_contactList.prev=R.m_nodeB),V.m_contactList=R.m_nodeB,_.isSensor()==!1&&T.isSensor()==!1&&(D.setAwake(!0),V.setAwake(!0)),R},E.destroy=function(_,A){var T=_.m_fixtureA,B=_.m_fixtureB;if(!(T===null||B===null)){var I=T.m_body,C=B.m_body;I===null||C===null||(_.isTouching()&&A.endContact(_),_.m_nodeA.prev&&(_.m_nodeA.prev.next=_.m_nodeA.next),_.m_nodeA.next&&(_.m_nodeA.next.prev=_.m_nodeA.prev),_.m_nodeA==I.m_contactList&&(I.m_contactList=_.m_nodeA.next),_.m_nodeB.prev&&(_.m_nodeB.prev.next=_.m_nodeB.next),_.m_nodeB.next&&(_.m_nodeB.next.prev=_.m_nodeB.prev),_.m_nodeB==C.m_contactList&&(C.m_contactList=_.m_nodeB.next),_.m_manifold.pointCount>0&&!T.m_isSensor&&!B.m_isSensor&&(I.setAwake(!0),C.setAwake(!0)),contactPool.release(_))}},E}(),DEFAULTS$b={gravity:Vec2.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3},World=function(){function E(_){if(!(this instanceof E))return new E(_);this.s_step=new TimeStep,_?Vec2.isValid(_)&&(_={gravity:_}):_={},_=options(_,DEFAULTS$b),this.m_solver=new Solver(this),this.m_broadPhase=new BroadPhase,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=_.allowSleep,this.m_gravity=Vec2.clone(_.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=_.warmStarting,this.m_continuousPhysics=_.continuousPhysics,this.m_subStepping=_.subStepping,this.m_blockSolve=_.blockSolve,this.m_velocityIterations=_.velocityIterations,this.m_positionIterations=_.positionIterations,this.m_t=0}return E.prototype._serialize=function(){for(var _=[],A=[],T=this.getBodyList();T;T=T.getNext())_.push(T);for(var B=this.getJointList();B;B=B.getNext())typeof B._serialize=="function"&&A.push(B);return{gravity:this.m_gravity,bodies:_,joints:A}},E._deserialize=function(_,A,T){if(!_)return new E;var B=new E(_.gravity);if(_.bodies)for(var I=_.bodies.length-1;I>=0;I-=1)B._addBody(T(Body,_.bodies[I],B));if(_.joints)for(var I=_.joints.length-1;I>=0;I--)B.createJoint(T(Joint,_.joints[I],B));return B},E.prototype.getBodyList=function(){return this.m_bodyList},E.prototype.getJointList=function(){return this.m_jointList},E.prototype.getContactList=function(){return this.m_contactList},E.prototype.getBodyCount=function(){return this.m_bodyCount},E.prototype.getJointCount=function(){return this.m_jointCount},E.prototype.getContactCount=function(){return this.m_contactCount},E.prototype.setGravity=function(_){this.m_gravity.set(_)},E.prototype.getGravity=function(){return this.m_gravity},E.prototype.isLocked=function(){return this.m_locked},E.prototype.setAllowSleeping=function(_){if(_!=this.m_allowSleep&&(this.m_allowSleep=_,this.m_allowSleep==!1))for(var A=this.m_bodyList;A;A=A.m_next)A.setAwake(!0)},E.prototype.getAllowSleeping=function(){return this.m_allowSleep},E.prototype.setWarmStarting=function(_){this.m_warmStarting=_},E.prototype.getWarmStarting=function(){return this.m_warmStarting},E.prototype.setContinuousPhysics=function(_){this.m_continuousPhysics=_},E.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},E.prototype.setSubStepping=function(_){this.m_subStepping=_},E.prototype.getSubStepping=function(){return this.m_subStepping},E.prototype.setAutoClearForces=function(_){this.m_clearForces=_},E.prototype.getAutoClearForces=function(){return this.m_clearForces},E.prototype.clearForces=function(){for(var _=this.m_bodyList;_;_=_.getNext())_.m_force.setZero(),_.m_torque=0},E.prototype.queryAABB=function(_,A){var T=this.m_broadPhase;this.m_broadPhase.query(_,function(B){var I=T.getUserData(B);return A(I.fixture)})},E.prototype.rayCast=function(_,A,T){var B=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:_,p2:A},function(I,C){var R=B.getUserData(C),L=R.fixture,D=R.childIndex,V={},U=L.rayCast(V,I,D);if(U){var z=V.fraction,W=Vec2.add(Vec2.mulNumVec2(1-z,I.p1),Vec2.mulNumVec2(z,I.p2));return T(L,W,V.normal,z)}return I.maxFraction})},E.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},E.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},E.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},E.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},E.prototype.shiftOrigin=function(_){if(!this.m_locked){for(var A=this.m_bodyList;A;A=A.m_next)A.m_xf.p.sub(_),A.m_sweep.c0.sub(_),A.m_sweep.c.sub(_);for(var T=this.m_jointList;T;T=T.m_next)T.shiftOrigin(_);this.m_broadPhase.shiftOrigin(_)}},E.prototype._addBody=function(_){this.isLocked()||(_.m_prev=null,_.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=_),this.m_bodyList=_,++this.m_bodyCount)},E.prototype.createBody=function(_,A){if(this.isLocked())return null;var T={};_&&(Vec2.isValid(_)?T={position:_,angle:A}:typeof _=="object"&&(T=_));var B=new Body(this,T);return this._addBody(B),B},E.prototype.createDynamicBody=function(_,A){var T={};return _&&(Vec2.isValid(_)?T={position:_,angle:A}:typeof _=="object"&&(T=_)),T.type="dynamic",this.createBody(T)},E.prototype.createKinematicBody=function(_,A){var T={};return _&&(Vec2.isValid(_)?T={position:_,angle:A}:typeof _=="object"&&(T=_)),T.type="kinematic",this.createBody(T)},E.prototype.destroyBody=function(_){if(!this.isLocked()){if(_.m_destroyed)return!1;for(var A=_.m_jointList;A;){var T=A;A=A.next,this.publish("remove-joint",T.joint),this.destroyJoint(T.joint),_.m_jointList=A}_.m_jointList=null;for(var B=_.m_contactList;B;){var I=B;B=B.next,this.destroyContact(I.contact),_.m_contactList=B}_.m_contactList=null;for(var C=_.m_fixtureList;C;){var R=C;C=C.m_next,this.publish("remove-fixture",R),R.destroyProxies(this.m_broadPhase),_.m_fixtureList=C}return _.m_fixtureList=null,_.m_prev&&(_.m_prev.m_next=_.m_next),_.m_next&&(_.m_next.m_prev=_.m_prev),_==this.m_bodyList&&(this.m_bodyList=_.m_next),_.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",_),!0}},E.prototype.createJoint=function(_){if(this.isLocked())return null;if(_.m_prev=null,_.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=_),this.m_jointList=_,++this.m_jointCount,_.m_edgeA.joint=_,_.m_edgeA.other=_.m_bodyB,_.m_edgeA.prev=null,_.m_edgeA.next=_.m_bodyA.m_jointList,_.m_bodyA.m_jointList&&(_.m_bodyA.m_jointList.prev=_.m_edgeA),_.m_bodyA.m_jointList=_.m_edgeA,_.m_edgeB.joint=_,_.m_edgeB.other=_.m_bodyA,_.m_edgeB.prev=null,_.m_edgeB.next=_.m_bodyB.m_jointList,_.m_bodyB.m_jointList&&(_.m_bodyB.m_jointList.prev=_.m_edgeB),_.m_bodyB.m_jointList=_.m_edgeB,_.m_collideConnected==!1)for(var A=_.m_bodyB.getContactList();A;A=A.next)A.other==_.m_bodyA&&A.contact.flagForFiltering();return _},E.prototype.destroyJoint=function(_){if(!this.isLocked()){_.m_prev&&(_.m_prev.m_next=_.m_next),_.m_next&&(_.m_next.m_prev=_.m_prev),_==this.m_jointList&&(this.m_jointList=_.m_next);var A=_.m_bodyA,T=_.m_bodyB;if(A.setAwake(!0),T.setAwake(!0),_.m_edgeA.prev&&(_.m_edgeA.prev.next=_.m_edgeA.next),_.m_edgeA.next&&(_.m_edgeA.next.prev=_.m_edgeA.prev),_.m_edgeA==A.m_jointList&&(A.m_jointList=_.m_edgeA.next),_.m_edgeA.prev=null,_.m_edgeA.next=null,_.m_edgeB.prev&&(_.m_edgeB.prev.next=_.m_edgeB.next),_.m_edgeB.next&&(_.m_edgeB.next.prev=_.m_edgeB.prev),_.m_edgeB==T.m_jointList&&(T.m_jointList=_.m_edgeB.next),_.m_edgeB.prev=null,_.m_edgeB.next=null,--this.m_jointCount,_.m_collideConnected==!1)for(var B=T.getContactList();B;)B.other==A&&B.contact.flagForFiltering(),B=B.next;this.publish("remove-joint",_)}},E.prototype.step=function(_,A,T){if(this.publish("pre-step",_),(A|0)!==A&&(A=0),A=A||this.m_velocityIterations,T=T||this.m_positionIterations,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,this.s_step.reset(_),this.s_step.velocityIterations=A,this.s_step.positionIterations=T,this.s_step.warmStarting=this.m_warmStarting,this.s_step.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&_>0){this.m_solver.solveWorld(this.s_step);for(var B=this.m_bodyList;B;B=B.getNext())B.m_islandFlag!=!1&&(B.isStatic()||B.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&_>0&&this.m_solver.solveWorldTOI(this.s_step),this.m_clearForces&&this.clearForces(),this.m_locked=!1,this.publish("post-step",_)},E.prototype.findNewContacts=function(){var _=this;this.m_broadPhase.updatePairs(function(A,T){return _.createContact(A,T)})},E.prototype.createContact=function(_,A){var T=_.fixture,B=A.fixture,I=_.childIndex,C=A.childIndex,R=T.getBody(),L=B.getBody();if(R!=L){for(var D=L.getContactList();D;){if(D.other==R){var V=D.contact.getFixtureA(),U=D.contact.getFixtureB(),z=D.contact.getChildIndexA(),W=D.contact.getChildIndexB();if(V==T&&U==B&&z==I&&W==C||V==B&&U==T&&z==C&&W==I)return}D=D.next}if(L.shouldCollide(R)!=!1&&B.shouldCollide(T)!=!1){var Y=Contact.create(T,I,B,C);Y!=null&&(Y.m_prev=null,this.m_contactList!=null&&(Y.m_next=this.m_contactList,this.m_contactList.m_prev=Y),this.m_contactList=Y,++this.m_contactCount)}}},E.prototype.updateContacts=function(){for(var _,A=this.m_contactList;_=A;){A=_.getNext();var T=_.getFixtureA(),B=_.getFixtureB(),I=_.getChildIndexA(),C=_.getChildIndexB(),R=T.getBody(),L=B.getBody();if(_.m_filterFlag){if(L.shouldCollide(R)==!1){this.destroyContact(_);continue}if(B.shouldCollide(T)==!1){this.destroyContact(_);continue}_.m_filterFlag=!1}var D=R.isAwake()&&!R.isStatic(),V=L.isAwake()&&!L.isStatic();if(!(D==!1&&V==!1)){var U=T.m_proxies[I].proxyId,z=B.m_proxies[C].proxyId,W=this.m_broadPhase.testOverlap(U,z);if(W==!1){this.destroyContact(_);continue}_.update(this)}}},E.prototype.destroyContact=function(_){_.m_prev&&(_.m_prev.m_next=_.m_next),_.m_next&&(_.m_next.m_prev=_.m_prev),_==this.m_contactList&&(this.m_contactList=_.m_next),Contact.destroy(_,this),--this.m_contactCount},E.prototype.on=function(_,A){return typeof _!="string"||typeof A!="function"?this:(this._listeners||(this._listeners={}),this._listeners[_]||(this._listeners[_]=[]),this._listeners[_].push(A),this)},E.prototype.off=function(_,A){if(typeof _!="string"||typeof A!="function")return this;var T=this._listeners&&this._listeners[_];if(!T||!T.length)return this;var B=T.indexOf(A);return B>=0&&T.splice(B,1),this},E.prototype.publish=function(_,A,T,B){var I=this._listeners&&this._listeners[_];if(!I||!I.length)return 0;for(var C=0;C<I.length;C++)I[C].call(this,A,T,B);return I.length},E.prototype.beginContact=function(_){this.publish("begin-contact",_)},E.prototype.endContact=function(_){this.publish("end-contact",_)},E.prototype.preSolve=function(_,A){this.publish("pre-solve",_,A)},E.prototype.postSolve=function(_,A){this.publish("post-solve",_,A)},E}(),Vec3=function(){function E(_,A,T){if(!(this instanceof E))return new E(_,A,T);typeof _>"u"?(this.x=0,this.y=0,this.z=0):typeof _=="object"?(this.x=_.x,this.y=_.y,this.z=_.z):(this.x=_,this.y=A,this.z=T)}return E.prototype._serialize=function(){return{x:this.x,y:this.y,z:this.z}},E._deserialize=function(_){var A=Object.create(E.prototype);return A.x=_.x,A.y=_.y,A.z=_.z,A},E.neo=function(_,A,T){var B=Object.create(E.prototype);return B.x=_,B.y=A,B.z=T,B},E.zero=function(){var _=Object.create(E.prototype);return _.x=0,_.y=0,_.z=0,_},E.clone=function(_){return E.neo(_.x,_.y,_.z)},E.prototype.toString=function(){return JSON.stringify(this)},E.isValid=function(_){return _===null||typeof _>"u"?!1:Number.isFinite(_.x)&&Number.isFinite(_.y)&&Number.isFinite(_.z)},E.assert=function(_){},E.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},E.prototype.set=function(_,A,T){return this.x=_,this.y=A,this.z=T,this},E.prototype.add=function(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this},E.prototype.sub=function(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this},E.prototype.mul=function(_){return this.x*=_,this.y*=_,this.z*=_,this},E.areEqual=function(_,A){return _===A||typeof _=="object"&&_!==null&&typeof A=="object"&&A!==null&&_.x===A.x&&_.y===A.y&&_.z===A.z},E.dot=function(_,A){return _.x*A.x+_.y*A.y+_.z*A.z},E.cross=function(_,A){return new E(_.y*A.z-_.z*A.y,_.z*A.x-_.x*A.z,_.x*A.y-_.y*A.x)},E.add=function(_,A){return new E(_.x+A.x,_.y+A.y,_.z+A.z)},E.sub=function(_,A){return new E(_.x-A.x,_.y-A.y,_.z-A.z)},E.mul=function(_,A){return new E(A*_.x,A*_.y,A*_.z)},E.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},E.neg=function(_){return new E(-_.x,-_.y,-_.z)},E}(),v1$2=vec2(0,0),v2$1=vec2(0,0),EdgeShape=function(E){__extends(_,E);function _(A,T){var B=this;return B instanceof _?(B=E.call(this)||this,B.m_type=_.TYPE,B.m_radius=SettingsInternal.polygonRadius,B.m_vertex1=A?Vec2.clone(A):Vec2.zero(),B.m_vertex2=T?Vec2.clone(T):Vec2.zero(),B.m_vertex0=Vec2.zero(),B.m_vertex3=Vec2.zero(),B.m_hasVertex0=!1,B.m_hasVertex3=!1,B):new _(A,T)}return _.prototype._serialize=function(){return{type:this.m_type,vertex1:this.m_vertex1,vertex2:this.m_vertex2,vertex0:this.m_vertex0,vertex3:this.m_vertex3,hasVertex0:this.m_hasVertex0,hasVertex3:this.m_hasVertex3}},_._deserialize=function(A){var T=new _(A.vertex1,A.vertex2);return T.m_hasVertex0&&T.setPrevVertex(A.vertex0),T.m_hasVertex3&&T.setNextVertex(A.vertex3),T},_.prototype._reset=function(){},_.prototype.getRadius=function(){return this.m_radius},_.prototype.getType=function(){return this.m_type},_.prototype.setNext=function(A){return this.setNextVertex(A)},_.prototype.setNextVertex=function(A){return A?(this.m_vertex3.setVec2(A),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},_.prototype.getNextVertex=function(){return this.m_vertex3},_.prototype.setPrev=function(A){return this.setPrevVertex(A)},_.prototype.setPrevVertex=function(A){return A?(this.m_vertex0.setVec2(A),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},_.prototype.getPrevVertex=function(){return this.m_vertex0},_.prototype._set=function(A,T){return this.m_vertex1.setVec2(A),this.m_vertex2.setVec2(T),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},_.prototype._clone=function(){var A=new _;return A.m_type=this.m_type,A.m_radius=this.m_radius,A.m_vertex1.setVec2(this.m_vertex1),A.m_vertex2.setVec2(this.m_vertex2),A.m_vertex0.setVec2(this.m_vertex0),A.m_vertex3.setVec2(this.m_vertex3),A.m_hasVertex0=this.m_hasVertex0,A.m_hasVertex3=this.m_hasVertex3,A},_.prototype.getChildCount=function(){return 1},_.prototype.testPoint=function(A,T){return!1},_.prototype.rayCast=function(A,T,B,I){var C=Rot.mulTVec2(B.q,Vec2.sub(T.p1,B.p)),R=Rot.mulTVec2(B.q,Vec2.sub(T.p2,B.p)),L=Vec2.sub(R,C),D=this.m_vertex1,V=this.m_vertex2,U=Vec2.sub(V,D),z=Vec2.neo(U.y,-U.x);z.normalize();var W=Vec2.dot(z,Vec2.sub(D,C)),Y=Vec2.dot(z,L);if(Y==0)return!1;var K=W/Y;if(K<0||T.maxFraction<K)return!1;var J=Vec2.add(C,Vec2.mulNumVec2(K,L)),et=Vec2.sub(V,D),it=Vec2.dot(et,et);if(it==0)return!1;var rt=Vec2.dot(Vec2.sub(J,D),et)/it;return rt<0||1<rt?!1:(A.fraction=K,W>0?A.normal=Rot.mulVec2(B.q,z).neg():A.normal=Rot.mulVec2(B.q,z),!0)},_.prototype.computeAABB=function(A,T,B){transformVec2(v1$2,T,this.m_vertex1),transformVec2(v2$1,T,this.m_vertex2),AABB.combinePoints(A,v1$2,v2$1),AABB.extend(A,this.m_radius)},_.prototype.computeMass=function(A,T){A.mass=0,combine2Vec2(A.center,.5,this.m_vertex1,.5,this.m_vertex2),A.I=0},_.prototype.computeDistanceProxy=function(A){A.m_vertices[0]=this.m_vertex1,A.m_vertices[1]=this.m_vertex2,A.m_vertices.length=2,A.m_count=2,A.m_radius=this.m_radius},_.TYPE="edge",_}(Shape),Edge=EdgeShape,v1$1=vec2(0,0),v2=vec2(0,0),ChainShape=function(E){__extends(_,E);function _(A,T){var B=this;return B instanceof _?(B=E.call(this)||this,B.m_type=_.TYPE,B.m_radius=SettingsInternal.polygonRadius,B.m_vertices=[],B.m_count=0,B.m_prevVertex=null,B.m_nextVertex=null,B.m_hasPrevVertex=!1,B.m_hasNextVertex=!1,B.m_isLoop=!!T,A&&A.length&&(T?B._createLoop(A):B._createChain(A)),B):new _(A,T)}return _.prototype._serialize=function(){var A={type:this.m_type,vertices:this.m_vertices,isLoop:this.m_isLoop,hasPrevVertex:this.m_hasPrevVertex,hasNextVertex:this.m_hasNextVertex,prevVertex:null,nextVertex:null};return this.m_prevVertex&&(A.prevVertex=this.m_prevVertex),this.m_nextVertex&&(A.nextVertex=this.m_nextVertex),A},_._deserialize=function(A,T,B){var I=[];if(A.vertices)for(var C=0;C<A.vertices.length;C++)I.push(B(Vec2,A.vertices[C]));var R=new _(I,A.isLoop);return A.prevVertex&&R.setPrevVertex(A.prevVertex),A.nextVertex&&R.setNextVertex(A.nextVertex),R},_.prototype.getType=function(){return this.m_type},_.prototype.getRadius=function(){return this.m_radius},_.prototype._createLoop=function(A){if(!(A.length<3)){for(var T=1;T<A.length;++T)A[T-1],A[T];this.m_vertices=[],this.m_count=A.length+1;for(var T=0;T<A.length;++T)this.m_vertices[T]=Vec2.clone(A[T]);return this.m_vertices[A.length]=Vec2.clone(A[0]),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this}},_.prototype._createChain=function(A){for(var T=1;T<A.length;++T)A[T-1],A[T];this.m_count=A.length;for(var T=0;T<A.length;++T)this.m_vertices[T]=Vec2.clone(A[T]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},_.prototype._reset=function(){this.m_isLoop?this._createLoop(this.m_vertices):this._createChain(this.m_vertices)},_.prototype.setPrevVertex=function(A){this.m_prevVertex=A,this.m_hasPrevVertex=!0},_.prototype.getPrevVertex=function(){return this.m_prevVertex},_.prototype.setNextVertex=function(A){this.m_nextVertex=A,this.m_hasNextVertex=!0},_.prototype.getNextVertex=function(){return this.m_nextVertex},_.prototype._clone=function(){var A=new _;return A._createChain(this.m_vertices),A.m_type=this.m_type,A.m_radius=this.m_radius,A.m_prevVertex=this.m_prevVertex,A.m_nextVertex=this.m_nextVertex,A.m_hasPrevVertex=this.m_hasPrevVertex,A.m_hasNextVertex=this.m_hasNextVertex,A},_.prototype.getChildCount=function(){return this.m_count-1},_.prototype.getChildEdge=function(A,T){A.m_type=EdgeShape.TYPE,A.m_radius=this.m_radius,A.m_vertex1=this.m_vertices[T],A.m_vertex2=this.m_vertices[T+1],T>0?(A.m_vertex0=this.m_vertices[T-1],A.m_hasVertex0=!0):(A.m_vertex0=this.m_prevVertex,A.m_hasVertex0=this.m_hasPrevVertex),T<this.m_count-2?(A.m_vertex3=this.m_vertices[T+2],A.m_hasVertex3=!0):(A.m_vertex3=this.m_nextVertex,A.m_hasVertex3=this.m_hasNextVertex)},_.prototype.getVertex=function(A){return A<this.m_count?this.m_vertices[A]:this.m_vertices[0]},_.prototype.isLoop=function(){return this.m_isLoop},_.prototype.testPoint=function(A,T){return!1},_.prototype.rayCast=function(A,T,B,I){var C=new EdgeShape(this.getVertex(I),this.getVertex(I+1));return C.rayCast(A,T,B,0)},_.prototype.computeAABB=function(A,T,B){transformVec2(v1$1,T,this.getVertex(B)),transformVec2(v2,T,this.getVertex(B+1)),AABB.combinePoints(A,v1$1,v2)},_.prototype.computeMass=function(A,T){A.mass=0,zeroVec2(A.center),A.I=0},_.prototype.computeDistanceProxy=function(A,T){A.m_vertices[0]=this.getVertex(T),A.m_vertices[1]=this.getVertex(T+1),A.m_count=2,A.m_radius=this.m_radius},_.TYPE="chain",_}(Shape),math_max$1=Math.max,math_min$3=Math.min,temp$1=vec2(0,0),e$1=vec2(0,0),e1$1=vec2(0,0),e2$1=vec2(0,0),center=vec2(0,0),s=vec2(0,0),PolygonShape=function(E){__extends(_,E);function _(A){var T=this;return T instanceof _?(T=E.call(this)||this,T.m_type=_.TYPE,T.m_radius=SettingsInternal.polygonRadius,T.m_centroid=Vec2.zero(),T.m_vertices=[],T.m_normals=[],T.m_count=0,A&&A.length&&T._set(A),T):new _(A)}return _.prototype._serialize=function(){return{type:this.m_type,vertices:this.m_vertices}},_._deserialize=function(A,T,B){var I=[];if(A.vertices)for(var C=0;C<A.vertices.length;C++)I.push(B(Vec2,A.vertices[C]));var R=new _(I);return R},_.prototype.getType=function(){return this.m_type},_.prototype.getRadius=function(){return this.m_radius},_.prototype._clone=function(){var A=new _;A.m_type=this.m_type,A.m_radius=this.m_radius,A.m_count=this.m_count,A.m_centroid.setVec2(this.m_centroid);for(var T=0;T<this.m_count;T++)A.m_vertices.push(this.m_vertices[T].clone());for(var T=0;T<this.m_normals.length;T++)A.m_normals.push(this.m_normals[T].clone());return A},_.prototype.getChildCount=function(){return 1},_.prototype._reset=function(){this._set(this.m_vertices)},_.prototype._set=function(A){if(A.length<3){this._setAsBox(1,1);return}for(var T=math_min$3(A.length,SettingsInternal.maxPolygonVertices),B=[],I=0;I<T;++I){for(var C=A[I],R=!0,L=0;L<B.length;++L)if(Vec2.distanceSquared(C,B[L])<.25*SettingsInternal.linearSlopSquared){R=!1;break}R&&B.push(Vec2.clone(C))}if(T=B.length,T<3){this._setAsBox(1,1);return}for(var D=0,V=B[0].x,I=1;I<T;++I){var U=B[I].x;(U>V||U===V&&B[I].y<B[D].y)&&(D=I,V=U)}for(var z=[],W=0,Y=D;;){z[W]=Y;for(var K=0,L=1;L<T;++L){if(K===Y){K=L;continue}var J=Vec2.sub(B[K],B[z[W]]),C=Vec2.sub(B[L],B[z[W]]),et=Vec2.crossVec2Vec2(J,C);et<0&&(K=L),et===0&&C.lengthSquared()>J.lengthSquared()&&(K=L)}if(++W,Y=K,K===D)break}if(W<3){this._setAsBox(1,1);return}this.m_count=W,this.m_vertices=[];for(var I=0;I<W;++I)this.m_vertices[I]=B[z[I]];for(var I=0;I<W;++I){var it=I,rt=I+1<W?I+1:0,st=Vec2.sub(this.m_vertices[rt],this.m_vertices[it]);this.m_normals[I]=Vec2.crossVec2Num(st,1),this.m_normals[I].normalize()}this.m_centroid=computeCentroid(this.m_vertices,W)},_.prototype._setAsBox=function(A,T,B,I){if(this.m_vertices[0]=Vec2.neo(A,-T),this.m_vertices[1]=Vec2.neo(A,T),this.m_vertices[2]=Vec2.neo(-A,T),this.m_vertices[3]=Vec2.neo(-A,-T),this.m_normals[0]=Vec2.neo(1,0),this.m_normals[1]=Vec2.neo(0,1),this.m_normals[2]=Vec2.neo(-1,0),this.m_normals[3]=Vec2.neo(0,-1),this.m_count=4,B&&Vec2.isValid(B)){I=I||0,copyVec2(this.m_centroid,B);var C=Transform.identity();C.p.setVec2(B),C.q.setAngle(I);for(var R=0;R<this.m_count;++R)this.m_vertices[R]=Transform.mulVec2(C,this.m_vertices[R]),this.m_normals[R]=Rot.mulVec2(C.q,this.m_normals[R])}},_.prototype.testPoint=function(A,T){for(var B=detransformVec2(temp$1,A,T),I=0;I<this.m_count;++I){var C=dotVec2(this.m_normals[I],B)-dotVec2(this.m_normals[I],this.m_vertices[I]);if(C>0)return!1}return!0},_.prototype.rayCast=function(A,T,B,I){for(var C=Rot.mulTVec2(B.q,Vec2.sub(T.p1,B.p)),R=Rot.mulTVec2(B.q,Vec2.sub(T.p2,B.p)),L=Vec2.sub(R,C),D=0,V=T.maxFraction,U=-1,z=0;z<this.m_count;++z){var W=Vec2.dot(this.m_normals[z],Vec2.sub(this.m_vertices[z],C)),Y=Vec2.dot(this.m_normals[z],L);if(Y==0){if(W<0)return!1}else Y<0&&W<D*Y?(D=W/Y,U=z):Y>0&&W<V*Y&&(V=W/Y);if(V<D)return!1}return U>=0?(A.fraction=D,A.normal=Rot.mulVec2(B.q,this.m_normals[U]),!0):!1},_.prototype.computeAABB=function(A,T,B){for(var I=1/0,C=1/0,R=-1/0,L=-1/0,D=0;D<this.m_count;++D){var V=transformVec2(temp$1,T,this.m_vertices[D]);I=math_min$3(I,V.x),R=math_max$1(R,V.x),C=math_min$3(C,V.y),L=math_max$1(L,V.y)}setVec2(A.lowerBound,I-this.m_radius,C-this.m_radius),setVec2(A.upperBound,R+this.m_radius,L+this.m_radius)},_.prototype.computeMass=function(A,T){zeroVec2(center);var B=0,I=0;zeroVec2(s);for(var C=0;C<this.m_count;++C)plusVec2(s,this.m_vertices[C]);scaleVec2(s,1/this.m_count,s);for(var R=1/3,C=0;C<this.m_count;++C){subVec2(e1$1,this.m_vertices[C],s),C+1<this.m_count?subVec2(e2$1,this.m_vertices[C+1],s):subVec2(e2$1,this.m_vertices[0],s);var L=crossVec2Vec2(e1$1,e2$1),D=.5*L;B+=D,combine2Vec2(temp$1,D*R,e1$1,D*R,e2$1),plusVec2(center,temp$1);var V=e1$1.x,U=e1$1.y,z=e2$1.x,W=e2$1.y,Y=V*V+z*V+z*z,K=U*U+W*U+W*W;I+=.25*R*L*(Y+K)}A.mass=T*B,scaleVec2(center,1/B,center),addVec2(A.center,center,s),A.I=T*I,A.I+=A.mass*(dotVec2(A.center,A.center)-dotVec2(center,center))},_.prototype.validate=function(){for(var A=0;A<this.m_count;++A){var T=A,B=A<this.m_count-1?T+1:0,I=this.m_vertices[T];subVec2(e$1,this.m_vertices[B],I);for(var C=0;C<this.m_count;++C)if(!(C==T||C==B)){var R=crossVec2Vec2(e$1,subVec2(temp$1,this.m_vertices[C],I));if(R<0)return!1}}return!0},_.prototype.computeDistanceProxy=function(A){for(var T=0;T<this.m_count;++T)A.m_vertices[T]=this.m_vertices[T];A.m_vertices.length=this.m_count,A.m_count=this.m_count,A.m_radius=this.m_radius},_.TYPE="polygon",_}(Shape);function computeCentroid(E,_){for(var A=Vec2.zero(),T=0,B=Vec2.zero(),I,C=1/3,I=0;I<_;++I){var R=B,L=E[I],D=I+1<_?E[I+1]:E[0],V=Vec2.sub(L,R),U=Vec2.sub(D,R),z=Vec2.crossVec2Vec2(V,U),W=.5*z;T+=W,combine3Vec2(temp$1,1,R,1,L,1,D),plusScaleVec2(A,W*C,temp$1)}return A.mul(1/T),A}var math_sqrt=Math.sqrt,math_PI$4=Math.PI,temp=vec2(0,0),CircleShape=function(E){__extends(_,E);function _(A,T){var B=this;return B instanceof _?(B=E.call(this)||this,B.m_type=_.TYPE,B.m_p=Vec2.zero(),B.m_radius=1,typeof A=="object"&&Vec2.isValid(A)?(B.m_p.setVec2(A),typeof T=="number"&&(B.m_radius=T)):typeof A=="number"&&(B.m_radius=A),B):new _(A,T)}return _.prototype._serialize=function(){return{type:this.m_type,p:this.m_p,radius:this.m_radius}},_._deserialize=function(A){return new _(A.p,A.radius)},_.prototype._reset=function(){},_.prototype.getType=function(){return this.m_type},_.prototype.getRadius=function(){return this.m_radius},_.prototype.getCenter=function(){return this.m_p},_.prototype._clone=function(){var A=new _;return A.m_type=this.m_type,A.m_radius=this.m_radius,A.m_p=this.m_p.clone(),A},_.prototype.getChildCount=function(){return 1},_.prototype.testPoint=function(A,T){var B=transformVec2(temp,A,this.m_p);return distSqrVec2(T,B)<=this.m_radius*this.m_radius},_.prototype.rayCast=function(A,T,B,I){var C=Vec2.add(B.p,Rot.mulVec2(B.q,this.m_p)),R=Vec2.sub(T.p1,C),L=Vec2.dot(R,R)-this.m_radius*this.m_radius,D=Vec2.sub(T.p2,T.p1),V=Vec2.dot(R,D),U=Vec2.dot(D,D),z=V*V-U*L;if(z<0||U<EPSILON)return!1;var W=-(V+math_sqrt(z));return 0<=W&&W<=T.maxFraction*U?(W/=U,A.fraction=W,A.normal=Vec2.add(R,Vec2.mulNumVec2(W,D)),A.normal.normalize(),!0):!1},_.prototype.computeAABB=function(A,T,B){var I=transformVec2(temp,T,this.m_p);setVec2(A.lowerBound,I.x-this.m_radius,I.y-this.m_radius),setVec2(A.upperBound,I.x+this.m_radius,I.y+this.m_radius)},_.prototype.computeMass=function(A,T){A.mass=T*math_PI$4*this.m_radius*this.m_radius,copyVec2(A.center,this.m_p),A.I=A.mass*(.5*this.m_radius*this.m_radius+lengthSqrVec2(this.m_p))},_.prototype.computeDistanceProxy=function(A){A.m_vertices[0]=this.m_p,A.m_vertices.length=1,A.m_count=1,A.m_radius=this.m_radius},_.TYPE="circle",_}(Shape),Circle=CircleShape,math_abs$5=Math.abs,math_PI$3=Math.PI,DEFAULTS$a={frequencyHz:0,dampingRatio:0},DistanceJoint=function(E){__extends(_,E);function _(A,T,B,I,C){var R=this;if(!(R instanceof _))return new _(A,T,B,I,C);if(B&&I&&"m_type"in I&&"x"in B&&"y"in B){var L=B;B=I,I=L}return A=options(A,DEFAULTS$a),R=E.call(this,A,T,B)||this,T=R.m_bodyA,B=R.m_bodyB,R.m_type=_.TYPE,R.m_localAnchorA=Vec2.clone(I?T.getLocalPoint(I):A.localAnchorA||Vec2.zero()),R.m_localAnchorB=Vec2.clone(C?B.getLocalPoint(C):A.localAnchorB||Vec2.zero()),R.m_length=Number.isFinite(A.length)?A.length:Vec2.distance(T.getWorldPoint(R.m_localAnchorA),B.getWorldPoint(R.m_localAnchorB)),R.m_frequencyHz=A.frequencyHz,R.m_dampingRatio=A.dampingRatio,R.m_impulse=0,R.m_gamma=0,R.m_bias=0,R}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,length:this.m_length,impulse:this.m_impulse,gamma:this.m_gamma,bias:this.m_bias}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T);var I=new _(A);return I},_.prototype._reset=function(A){A.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(A.anchorA)):A.localAnchorA&&this.m_localAnchorA.setVec2(A.localAnchorA),A.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(A.anchorB)):A.localAnchorB&&this.m_localAnchorB.setVec2(A.localAnchorB),A.length>0?this.m_length=+A.length:A.length<0||(A.anchorA||A.anchorA||A.anchorA||A.anchorA)&&(this.m_length=Vec2.distance(this.m_bodyA.getWorldPoint(this.m_localAnchorA),this.m_bodyB.getWorldPoint(this.m_localAnchorB))),Number.isFinite(A.frequencyHz)&&(this.m_frequencyHz=A.frequencyHz),Number.isFinite(A.dampingRatio)&&(this.m_dampingRatio=A.dampingRatio)},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.setLength=function(A){this.m_length=A},_.prototype.getLength=function(){return this.m_length},_.prototype.setFrequency=function(A){this.m_frequencyHz=A},_.prototype.getFrequency=function(){return this.m_frequencyHz},_.prototype.setDampingRatio=function(A){this.m_dampingRatio=A},_.prototype.getDampingRatio=function(){return this.m_dampingRatio},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.mulNumVec2(this.m_impulse,this.m_u).mul(A)},_.prototype.getReactionTorque=function(A){return 0},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyA.c_velocity.v,C=this.m_bodyA.c_velocity.w,R=this.m_bodyB.c_position.c,L=this.m_bodyB.c_position.a,D=this.m_bodyB.c_velocity.v,V=this.m_bodyB.c_velocity.w,U=Rot.neo(B),z=Rot.neo(L);this.m_rA=Rot.mulVec2(U,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Rot.mulVec2(z,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=Vec2.sub(Vec2.add(R,this.m_rB),Vec2.add(T,this.m_rA));var W=this.m_u.length();W>SettingsInternal.linearSlop?this.m_u.mul(1/W):this.m_u.setNum(0,0);var Y=Vec2.crossVec2Vec2(this.m_rA,this.m_u),K=Vec2.crossVec2Vec2(this.m_rB,this.m_u),J=this.m_invMassA+this.m_invIA*Y*Y+this.m_invMassB+this.m_invIB*K*K;if(this.m_mass=J!=0?1/J:0,this.m_frequencyHz>0){var et=W-this.m_length,it=2*math_PI$3*this.m_frequencyHz,rt=2*this.m_mass*this.m_dampingRatio*it,st=this.m_mass*it*it,lt=A.dt;this.m_gamma=lt*(rt+lt*st),this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0,this.m_bias=et*lt*st*this.m_gamma,J+=this.m_gamma,this.m_mass=J!=0?1/J:0}else this.m_gamma=0,this.m_bias=0;if(A.warmStarting){this.m_impulse*=A.dtRatio;var ct=Vec2.mulNumVec2(this.m_impulse,this.m_u);I.subMul(this.m_invMassA,ct),C-=this.m_invIA*Vec2.crossVec2Vec2(this.m_rA,ct),D.addMul(this.m_invMassB,ct),V+=this.m_invIB*Vec2.crossVec2Vec2(this.m_rB,ct)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.setVec2(I),this.m_bodyA.c_velocity.w=C,this.m_bodyB.c_velocity.v.setVec2(D),this.m_bodyB.c_velocity.w=V},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=Vec2.add(T,Vec2.crossNumVec2(B,this.m_rA)),L=Vec2.add(I,Vec2.crossNumVec2(C,this.m_rB)),D=Vec2.dot(this.m_u,L)-Vec2.dot(this.m_u,R),V=-this.m_mass*(D+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=V;var U=Vec2.mulNumVec2(V,this.m_u);T.subMul(this.m_invMassA,U),B-=this.m_invIA*Vec2.crossVec2Vec2(this.m_rA,U),I.addMul(this.m_invMassB,U),C+=this.m_invIB*Vec2.crossVec2Vec2(this.m_rB,U),this.m_bodyA.c_velocity.v.setVec2(T),this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v.setVec2(I),this.m_bodyB.c_velocity.w=C},_.prototype.solvePositionConstraints=function(A){if(this.m_frequencyHz>0)return!0;var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyB.c_position.c,C=this.m_bodyB.c_position.a,R=Rot.neo(B),L=Rot.neo(C),D=Rot.mulSub(R,this.m_localAnchorA,this.m_localCenterA),V=Rot.mulSub(L,this.m_localAnchorB,this.m_localCenterB),U=Vec2.sub(Vec2.add(I,V),Vec2.add(T,D)),z=U.normalize(),W=clamp$1(z-this.m_length,-SettingsInternal.maxLinearCorrection,SettingsInternal.maxLinearCorrection),Y=-this.m_mass*W,K=Vec2.mulNumVec2(Y,U);return T.subMul(this.m_invMassA,K),B-=this.m_invIA*Vec2.crossVec2Vec2(D,K),I.addMul(this.m_invMassB,K),C+=this.m_invIB*Vec2.crossVec2Vec2(V,K),this.m_bodyA.c_position.c.setVec2(T),this.m_bodyA.c_position.a=B,this.m_bodyB.c_position.c.setVec2(I),this.m_bodyB.c_position.a=C,math_abs$5(W)<SettingsInternal.linearSlop},_.TYPE="distance-joint",_}(Joint),DEFAULTS$9={maxForce:0,maxTorque:0},FrictionJoint=function(E){__extends(_,E);function _(A,T,B,I){var C=this;return C instanceof _?(A=options(A,DEFAULTS$9),C=E.call(this,A,T,B)||this,T=C.m_bodyA,B=C.m_bodyB,C.m_type=_.TYPE,C.m_localAnchorA=Vec2.clone(I?T.getLocalPoint(I):A.localAnchorA||Vec2.zero()),C.m_localAnchorB=Vec2.clone(I?B.getLocalPoint(I):A.localAnchorB||Vec2.zero()),C.m_linearImpulse=Vec2.zero(),C.m_angularImpulse=0,C.m_maxForce=A.maxForce,C.m_maxTorque=A.maxTorque,C):new _(A,T,B,I)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T);var I=new _(A);return I},_.prototype._reset=function(A){A.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(A.anchorA)):A.localAnchorA&&this.m_localAnchorA.setVec2(A.localAnchorA),A.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(A.anchorB)):A.localAnchorB&&this.m_localAnchorB.setVec2(A.localAnchorB),Number.isFinite(A.maxForce)&&(this.m_maxForce=A.maxForce),Number.isFinite(A.maxTorque)&&(this.m_maxTorque=A.maxTorque)},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.setMaxForce=function(A){this.m_maxForce=A},_.prototype.getMaxForce=function(){return this.m_maxForce},_.prototype.setMaxTorque=function(A){this.m_maxTorque=A},_.prototype.getMaxTorque=function(){return this.m_maxTorque},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.mulNumVec2(A,this.m_linearImpulse)},_.prototype.getReactionTorque=function(A){return A*this.m_angularImpulse},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyA.c_position.a,B=this.m_bodyA.c_velocity.v,I=this.m_bodyA.c_velocity.w,C=this.m_bodyB.c_position.a,R=this.m_bodyB.c_velocity.v,L=this.m_bodyB.c_velocity.w,D=Rot.neo(T),V=Rot.neo(C);this.m_rA=Rot.mulVec2(D,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Rot.mulVec2(V,Vec2.sub(this.m_localAnchorB,this.m_localCenterB));var U=this.m_invMassA,z=this.m_invMassB,W=this.m_invIA,Y=this.m_invIB,K=new Mat22;if(K.ex.x=U+z+W*this.m_rA.y*this.m_rA.y+Y*this.m_rB.y*this.m_rB.y,K.ex.y=-W*this.m_rA.x*this.m_rA.y-Y*this.m_rB.x*this.m_rB.y,K.ey.x=K.ex.y,K.ey.y=U+z+W*this.m_rA.x*this.m_rA.x+Y*this.m_rB.x*this.m_rB.x,this.m_linearMass=K.getInverse(),this.m_angularMass=W+Y,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),A.warmStarting){this.m_linearImpulse.mul(A.dtRatio),this.m_angularImpulse*=A.dtRatio;var J=Vec2.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);B.subMul(U,J),I-=W*(Vec2.crossVec2Vec2(this.m_rA,J)+this.m_angularImpulse),R.addMul(z,J),L+=Y*(Vec2.crossVec2Vec2(this.m_rB,J)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=B,this.m_bodyA.c_velocity.w=I,this.m_bodyB.c_velocity.v=R,this.m_bodyB.c_velocity.w=L},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=this.m_invMassA,L=this.m_invMassB,D=this.m_invIA,V=this.m_invIB,U=A.dt;{var z=C-B,W=-this.m_angularMass*z,Y=this.m_angularImpulse,K=U*this.m_maxTorque;this.m_angularImpulse=clamp$1(this.m_angularImpulse+W,-K,K),W=this.m_angularImpulse-Y,B-=D*W,C+=V*W}{var z=Vec2.sub(Vec2.add(I,Vec2.crossNumVec2(C,this.m_rB)),Vec2.add(T,Vec2.crossNumVec2(B,this.m_rA))),W=Vec2.neg(Mat22.mulVec2(this.m_linearMass,z)),Y=this.m_linearImpulse;this.m_linearImpulse.add(W);var K=U*this.m_maxForce;this.m_linearImpulse.lengthSquared()>K*K&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(K)),W=Vec2.sub(this.m_linearImpulse,Y),T.subMul(R,W),B-=D*Vec2.crossVec2Vec2(this.m_rA,W),I.addMul(L,W),C+=V*Vec2.crossVec2Vec2(this.m_rB,W)}this.m_bodyA.c_velocity.v=T,this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v=I,this.m_bodyB.c_velocity.w=C},_.prototype.solvePositionConstraints=function(A){return!0},_.TYPE="friction-joint",_}(Joint),Mat33=function(){function E(_,A,T){typeof _=="object"&&_!==null?(this.ex=Vec3.clone(_),this.ey=Vec3.clone(A),this.ez=Vec3.clone(T)):(this.ex=Vec3.zero(),this.ey=Vec3.zero(),this.ez=Vec3.zero())}return E.prototype.toString=function(){return JSON.stringify(this)},E.isValid=function(_){return _===null||typeof _>"u"?!1:Vec3.isValid(_.ex)&&Vec3.isValid(_.ey)&&Vec3.isValid(_.ez)},E.assert=function(_){},E.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},E.prototype.solve33=function(_){var A=this.ey.y*this.ez.z-this.ey.z*this.ez.y,T=this.ey.z*this.ez.x-this.ey.x*this.ez.z,B=this.ey.x*this.ez.y-this.ey.y*this.ez.x,I=this.ex.x*A+this.ex.y*T+this.ex.z*B;I!==0&&(I=1/I);var C=new Vec3;return A=this.ey.y*this.ez.z-this.ey.z*this.ez.y,T=this.ey.z*this.ez.x-this.ey.x*this.ez.z,B=this.ey.x*this.ez.y-this.ey.y*this.ez.x,C.x=I*(_.x*A+_.y*T+_.z*B),A=_.y*this.ez.z-_.z*this.ez.y,T=_.z*this.ez.x-_.x*this.ez.z,B=_.x*this.ez.y-_.y*this.ez.x,C.y=I*(this.ex.x*A+this.ex.y*T+this.ex.z*B),A=this.ey.y*_.z-this.ey.z*_.y,T=this.ey.z*_.x-this.ey.x*_.z,B=this.ey.x*_.y-this.ey.y*_.x,C.z=I*(this.ex.x*A+this.ex.y*T+this.ex.z*B),C},E.prototype.solve22=function(_){var A=this.ex.x,T=this.ey.x,B=this.ex.y,I=this.ey.y,C=A*I-T*B;C!==0&&(C=1/C);var R=Vec2.zero();return R.x=C*(I*_.x-T*_.y),R.y=C*(A*_.y-B*_.x),R},E.prototype.getInverse22=function(_){var A=this.ex.x,T=this.ey.x,B=this.ex.y,I=this.ey.y,C=A*I-T*B;C!==0&&(C=1/C),_.ex.x=C*I,_.ey.x=-C*T,_.ex.z=0,_.ex.y=-C*B,_.ey.y=C*A,_.ey.z=0,_.ez.x=0,_.ez.y=0,_.ez.z=0},E.prototype.getSymInverse33=function(_){var A=Vec3.dot(this.ex,Vec3.cross(this.ey,this.ez));A!==0&&(A=1/A);var T=this.ex.x,B=this.ey.x,I=this.ez.x,C=this.ey.y,R=this.ez.y,L=this.ez.z;_.ex.x=A*(C*L-R*R),_.ex.y=A*(I*R-B*L),_.ex.z=A*(B*R-I*C),_.ey.x=_.ex.y,_.ey.y=A*(T*L-I*I),_.ey.z=A*(I*B-T*R),_.ez.x=_.ex.z,_.ez.y=_.ey.z,_.ez.z=A*(T*C-B*B)},E.mul=function(_,A){if(A&&"z"in A&&"y"in A&&"x"in A){var T=_.ex.x*A.x+_.ey.x*A.y+_.ez.x*A.z,B=_.ex.y*A.x+_.ey.y*A.y+_.ez.y*A.z,I=_.ex.z*A.x+_.ey.z*A.y+_.ez.z*A.z;return new Vec3(T,B,I)}else if(A&&"y"in A&&"x"in A){var T=_.ex.x*A.x+_.ey.x*A.y,B=_.ex.y*A.x+_.ey.y*A.y;return Vec2.neo(T,B)}},E.mulVec3=function(_,A){var T=_.ex.x*A.x+_.ey.x*A.y+_.ez.x*A.z,B=_.ex.y*A.x+_.ey.y*A.y+_.ez.y*A.z,I=_.ex.z*A.x+_.ey.z*A.y+_.ez.z*A.z;return new Vec3(T,B,I)},E.mulVec2=function(_,A){var T=_.ex.x*A.x+_.ey.x*A.y,B=_.ex.y*A.x+_.ey.y*A.y;return Vec2.neo(T,B)},E.add=function(_,A){return new E(Vec3.add(_.ex,A.ex),Vec3.add(_.ey,A.ey),Vec3.add(_.ez,A.ez))},E}(),math_abs$4=Math.abs,LimitState$2;(function(E){E[E.inactiveLimit=0]="inactiveLimit",E[E.atLowerLimit=1]="atLowerLimit",E[E.atUpperLimit=2]="atUpperLimit",E[E.equalLimits=3]="equalLimits"})(LimitState$2||(LimitState$2={}));var DEFAULTS$8={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1},RevoluteJoint=function(E){__extends(_,E);function _(A,T,B,I){var C,R,L,D,V,U,z=this;return z instanceof _?(A=A??{},z=E.call(this,A,T,B)||this,T=z.m_bodyA,B=z.m_bodyB,z.m_mass=new Mat33,z.m_limitState=LimitState$2.inactiveLimit,z.m_type=_.TYPE,Vec2.isValid(I)?z.m_localAnchorA=T.getLocalPoint(I):Vec2.isValid(A.localAnchorA)?z.m_localAnchorA=Vec2.clone(A.localAnchorA):z.m_localAnchorA=Vec2.zero(),Vec2.isValid(I)?z.m_localAnchorB=B.getLocalPoint(I):Vec2.isValid(A.localAnchorB)?z.m_localAnchorB=Vec2.clone(A.localAnchorB):z.m_localAnchorB=Vec2.zero(),Number.isFinite(A.referenceAngle)?z.m_referenceAngle=A.referenceAngle:z.m_referenceAngle=B.getAngle()-T.getAngle(),z.m_impulse=new Vec3,z.m_motorImpulse=0,z.m_lowerAngle=(C=A.lowerAngle)!==null&&C!==void 0?C:DEFAULTS$8.lowerAngle,z.m_upperAngle=(R=A.upperAngle)!==null&&R!==void 0?R:DEFAULTS$8.upperAngle,z.m_maxMotorTorque=(L=A.maxMotorTorque)!==null&&L!==void 0?L:DEFAULTS$8.maxMotorTorque,z.m_motorSpeed=(D=A.motorSpeed)!==null&&D!==void 0?D:DEFAULTS$8.motorSpeed,z.m_enableLimit=(V=A.enableLimit)!==null&&V!==void 0?V:DEFAULTS$8.enableLimit,z.m_enableMotor=(U=A.enableMotor)!==null&&U!==void 0?U:DEFAULTS$8.enableMotor,z):new _(A,T,B,I)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerAngle:this.m_lowerAngle,upperAngle:this.m_upperAngle,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T);var I=new _(A);return I},_.prototype._reset=function(A){A.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(A.anchorA)):A.localAnchorA&&this.m_localAnchorA.setVec2(A.localAnchorA),A.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(A.anchorB)):A.localAnchorB&&this.m_localAnchorB.setVec2(A.localAnchorB),Number.isFinite(A.referenceAngle)&&(this.m_referenceAngle=A.referenceAngle),A.enableLimit!==void 0&&(this.m_enableLimit=A.enableLimit),Number.isFinite(A.lowerAngle)&&(this.m_lowerAngle=A.lowerAngle),Number.isFinite(A.upperAngle)&&(this.m_upperAngle=A.upperAngle),Number.isFinite(A.maxMotorTorque)&&(this.m_maxMotorTorque=A.maxMotorTorque),Number.isFinite(A.motorSpeed)&&(this.m_motorSpeed=A.motorSpeed),A.enableMotor!==void 0&&(this.m_enableMotor=A.enableMotor)},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.getReferenceAngle=function(){return this.m_referenceAngle},_.prototype.getJointAngle=function(){var A=this.m_bodyA,T=this.m_bodyB;return T.m_sweep.a-A.m_sweep.a-this.m_referenceAngle},_.prototype.getJointSpeed=function(){var A=this.m_bodyA,T=this.m_bodyB;return T.m_angularVelocity-A.m_angularVelocity},_.prototype.isMotorEnabled=function(){return this.m_enableMotor},_.prototype.enableMotor=function(A){A!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=A)},_.prototype.getMotorTorque=function(A){return A*this.m_motorImpulse},_.prototype.setMotorSpeed=function(A){A!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=A)},_.prototype.getMotorSpeed=function(){return this.m_motorSpeed},_.prototype.setMaxMotorTorque=function(A){A!=this.m_maxMotorTorque&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=A)},_.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},_.prototype.isLimitEnabled=function(){return this.m_enableLimit},_.prototype.enableLimit=function(A){A!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=A,this.m_impulse.z=0)},_.prototype.getLowerLimit=function(){return this.m_lowerAngle},_.prototype.getUpperLimit=function(){return this.m_upperAngle},_.prototype.setLimits=function(A,T){(A!=this.m_lowerAngle||T!=this.m_upperAngle)&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=A,this.m_upperAngle=T)},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.neo(this.m_impulse.x,this.m_impulse.y).mul(A)},_.prototype.getReactionTorque=function(A){return A*this.m_impulse.z},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyA.c_position.a,B=this.m_bodyA.c_velocity.v,I=this.m_bodyA.c_velocity.w,C=this.m_bodyB.c_position.a,R=this.m_bodyB.c_velocity.v,L=this.m_bodyB.c_velocity.w,D=Rot.neo(T),V=Rot.neo(C);this.m_rA=Rot.mulVec2(D,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Rot.mulVec2(V,Vec2.sub(this.m_localAnchorB,this.m_localCenterB));var U=this.m_invMassA,z=this.m_invMassB,W=this.m_invIA,Y=this.m_invIB,K=W+Y===0;if(this.m_mass.ex.x=U+z+this.m_rA.y*this.m_rA.y*W+this.m_rB.y*this.m_rB.y*Y,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*W-this.m_rB.y*this.m_rB.x*Y,this.m_mass.ez.x=-this.m_rA.y*W-this.m_rB.y*Y,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=U+z+this.m_rA.x*this.m_rA.x*W+this.m_rB.x*this.m_rB.x*Y,this.m_mass.ez.y=this.m_rA.x*W+this.m_rB.x*Y,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=W+Y,this.m_motorMass=W+Y,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(this.m_enableMotor==!1||K)&&(this.m_motorImpulse=0),this.m_enableLimit&&K==!1){var J=C-T-this.m_referenceAngle;math_abs$4(this.m_upperAngle-this.m_lowerAngle)<2*SettingsInternal.angularSlop?this.m_limitState=LimitState$2.equalLimits:J<=this.m_lowerAngle?(this.m_limitState!=LimitState$2.atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=LimitState$2.atLowerLimit):J>=this.m_upperAngle?(this.m_limitState!=LimitState$2.atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=LimitState$2.atUpperLimit):(this.m_limitState=LimitState$2.inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=LimitState$2.inactiveLimit;if(A.warmStarting){this.m_impulse.mul(A.dtRatio),this.m_motorImpulse*=A.dtRatio;var et=Vec2.neo(this.m_impulse.x,this.m_impulse.y);B.subMul(U,et),I-=W*(Vec2.crossVec2Vec2(this.m_rA,et)+this.m_motorImpulse+this.m_impulse.z),R.addMul(z,et),L+=Y*(Vec2.crossVec2Vec2(this.m_rB,et)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=B,this.m_bodyA.c_velocity.w=I,this.m_bodyB.c_velocity.v=R,this.m_bodyB.c_velocity.w=L},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=this.m_invMassA,L=this.m_invMassB,D=this.m_invIA,V=this.m_invIB,U=D+V===0;if(this.m_enableMotor&&this.m_limitState!=LimitState$2.equalLimits&&U==!1){var z=C-B-this.m_motorSpeed,W=-this.m_motorMass*z,Y=this.m_motorImpulse,K=A.dt*this.m_maxMotorTorque;this.m_motorImpulse=clamp$1(this.m_motorImpulse+W,-K,K),W=this.m_motorImpulse-Y,B-=D*W,C+=V*W}if(this.m_enableLimit&&this.m_limitState!=LimitState$2.inactiveLimit&&U==!1){var J=Vec2.zero();J.addCombine(1,I,1,Vec2.crossNumVec2(C,this.m_rB)),J.subCombine(1,T,1,Vec2.crossNumVec2(B,this.m_rA));var et=C-B,z=new Vec3(J.x,J.y,et),W=Vec3.neg(this.m_mass.solve33(z));if(this.m_limitState==LimitState$2.equalLimits)this.m_impulse.add(W);else if(this.m_limitState==LimitState$2.atLowerLimit){var it=this.m_impulse.z+W.z;if(it<0){var rt=Vec2.combine(-1,J,this.m_impulse.z,Vec2.neo(this.m_mass.ez.x,this.m_mass.ez.y)),st=this.m_mass.solve22(rt);W.x=st.x,W.y=st.y,W.z=-this.m_impulse.z,this.m_impulse.x+=st.x,this.m_impulse.y+=st.y,this.m_impulse.z=0}else this.m_impulse.add(W)}else if(this.m_limitState==LimitState$2.atUpperLimit){var it=this.m_impulse.z+W.z;if(it>0){var rt=Vec2.combine(-1,J,this.m_impulse.z,Vec2.neo(this.m_mass.ez.x,this.m_mass.ez.y)),st=this.m_mass.solve22(rt);W.x=st.x,W.y=st.y,W.z=-this.m_impulse.z,this.m_impulse.x+=st.x,this.m_impulse.y+=st.y,this.m_impulse.z=0}else this.m_impulse.add(W)}var lt=Vec2.neo(W.x,W.y);T.subMul(R,lt),B-=D*(Vec2.crossVec2Vec2(this.m_rA,lt)+W.z),I.addMul(L,lt),C+=V*(Vec2.crossVec2Vec2(this.m_rB,lt)+W.z)}else{var z=Vec2.zero();z.addCombine(1,I,1,Vec2.crossNumVec2(C,this.m_rB)),z.subCombine(1,T,1,Vec2.crossNumVec2(B,this.m_rA));var W=this.m_mass.solve22(Vec2.neg(z));this.m_impulse.x+=W.x,this.m_impulse.y+=W.y,T.subMul(R,W),B-=D*Vec2.crossVec2Vec2(this.m_rA,W),I.addMul(L,W),C+=V*Vec2.crossVec2Vec2(this.m_rB,W)}this.m_bodyA.c_velocity.v=T,this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v=I,this.m_bodyB.c_velocity.w=C},_.prototype.solvePositionConstraints=function(A){var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyB.c_position.c,C=this.m_bodyB.c_position.a,R=Rot.neo(B),L=Rot.neo(C),D=0,V=0,U=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&this.m_limitState!=LimitState$2.inactiveLimit&&U==!1){var z=C-B-this.m_referenceAngle,W=0;if(this.m_limitState==LimitState$2.equalLimits){var Y=clamp$1(z-this.m_lowerAngle,-SettingsInternal.maxAngularCorrection,SettingsInternal.maxAngularCorrection);W=-this.m_motorMass*Y,D=math_abs$4(Y)}else if(this.m_limitState==LimitState$2.atLowerLimit){var Y=z-this.m_lowerAngle;D=-Y,Y=clamp$1(Y+SettingsInternal.angularSlop,-SettingsInternal.maxAngularCorrection,0),W=-this.m_motorMass*Y}else if(this.m_limitState==LimitState$2.atUpperLimit){var Y=z-this.m_upperAngle;D=Y,Y=clamp$1(Y-SettingsInternal.angularSlop,0,SettingsInternal.maxAngularCorrection),W=-this.m_motorMass*Y}B-=this.m_invIA*W,C+=this.m_invIB*W}{R.setAngle(B),L.setAngle(C);var K=Rot.mulVec2(R,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),J=Rot.mulVec2(L,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),Y=Vec2.zero();Y.addCombine(1,I,1,J),Y.subCombine(1,T,1,K),V=Y.length();var et=this.m_invMassA,it=this.m_invMassB,rt=this.m_invIA,st=this.m_invIB,lt=new Mat22;lt.ex.x=et+it+rt*K.y*K.y+st*J.y*J.y,lt.ex.y=-rt*K.x*K.y-st*J.x*J.y,lt.ey.x=lt.ex.y,lt.ey.y=et+it+rt*K.x*K.x+st*J.x*J.x;var ct=Vec2.neg(lt.solve(Y));T.subMul(et,ct),B-=rt*Vec2.crossVec2Vec2(K,ct),I.addMul(it,ct),C+=st*Vec2.crossVec2Vec2(J,ct)}return this.m_bodyA.c_position.c.setVec2(T),this.m_bodyA.c_position.a=B,this.m_bodyB.c_position.c.setVec2(I),this.m_bodyB.c_position.a=C,V<=SettingsInternal.linearSlop&&D<=SettingsInternal.angularSlop},_.TYPE="revolute-joint",_}(Joint),math_abs$3=Math.abs,math_max=Math.max,math_min$2=Math.min,LimitState$1;(function(E){E[E.inactiveLimit=0]="inactiveLimit",E[E.atLowerLimit=1]="atLowerLimit",E[E.atUpperLimit=2]="atUpperLimit",E[E.equalLimits=3]="equalLimits"})(LimitState$1||(LimitState$1={}));var DEFAULTS$7={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0},PrismaticJoint=function(E){__extends(_,E);function _(A,T,B,I,C){var R=this;return R instanceof _?(A=options(A,DEFAULTS$7),R=E.call(this,A,T,B)||this,T=R.m_bodyA,B=R.m_bodyB,R.m_type=_.TYPE,R.m_localAnchorA=Vec2.clone(I?T.getLocalPoint(I):A.localAnchorA||Vec2.zero()),R.m_localAnchorB=Vec2.clone(I?B.getLocalPoint(I):A.localAnchorB||Vec2.zero()),R.m_localXAxisA=Vec2.clone(C?T.getLocalVector(C):A.localAxisA||Vec2.neo(1,0)),R.m_localXAxisA.normalize(),R.m_localYAxisA=Vec2.crossNumVec2(1,R.m_localXAxisA),R.m_referenceAngle=Number.isFinite(A.referenceAngle)?A.referenceAngle:B.getAngle()-T.getAngle(),R.m_impulse=new Vec3,R.m_motorMass=0,R.m_motorImpulse=0,R.m_lowerTranslation=A.lowerTranslation,R.m_upperTranslation=A.upperTranslation,R.m_maxMotorForce=A.maxMotorForce,R.m_motorSpeed=A.motorSpeed,R.m_enableLimit=A.enableLimit,R.m_enableMotor=A.enableMotor,R.m_limitState=LimitState$1.inactiveLimit,R.m_axis=Vec2.zero(),R.m_perp=Vec2.zero(),R.m_K=new Mat33,R):new _(A,T,B,I,C)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,lowerTranslation:this.m_lowerTranslation,upperTranslation:this.m_upperTranslation,maxMotorForce:this.m_maxMotorForce,motorSpeed:this.m_motorSpeed,enableLimit:this.m_enableLimit,enableMotor:this.m_enableMotor,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA,referenceAngle:this.m_referenceAngle}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T),A.localAxisA=Vec2.clone(A.localAxisA);var I=new _(A);return I},_.prototype._reset=function(A){A.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(A.anchorA)):A.localAnchorA&&this.m_localAnchorA.setVec2(A.localAnchorA),A.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(A.anchorB)):A.localAnchorB&&this.m_localAnchorB.setVec2(A.localAnchorB),A.localAxisA&&(this.m_localXAxisA.setVec2(A.localAxisA),this.m_localYAxisA.setVec2(Vec2.crossNumVec2(1,A.localAxisA))),Number.isFinite(A.referenceAngle)&&(this.m_referenceAngle=A.referenceAngle),typeof A.enableLimit<"u"&&(this.m_enableLimit=!!A.enableLimit),Number.isFinite(A.lowerTranslation)&&(this.m_lowerTranslation=A.lowerTranslation),Number.isFinite(A.upperTranslation)&&(this.m_upperTranslation=A.upperTranslation),typeof A.enableMotor<"u"&&(this.m_enableMotor=!!A.enableMotor),Number.isFinite(A.maxMotorForce)&&(this.m_maxMotorForce=A.maxMotorForce),Number.isFinite(A.motorSpeed)&&(this.m_motorSpeed=A.motorSpeed)},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.getLocalAxisA=function(){return this.m_localXAxisA},_.prototype.getReferenceAngle=function(){return this.m_referenceAngle},_.prototype.getJointTranslation=function(){var A=this.m_bodyA.getWorldPoint(this.m_localAnchorA),T=this.m_bodyB.getWorldPoint(this.m_localAnchorB),B=Vec2.sub(T,A),I=this.m_bodyA.getWorldVector(this.m_localXAxisA),C=Vec2.dot(B,I);return C},_.prototype.getJointSpeed=function(){var A=this.m_bodyA,T=this.m_bodyB,B=Rot.mulVec2(A.m_xf.q,Vec2.sub(this.m_localAnchorA,A.m_sweep.localCenter)),I=Rot.mulVec2(T.m_xf.q,Vec2.sub(this.m_localAnchorB,T.m_sweep.localCenter)),C=Vec2.add(A.m_sweep.c,B),R=Vec2.add(T.m_sweep.c,I),L=Vec2.sub(R,C),D=Rot.mulVec2(A.m_xf.q,this.m_localXAxisA),V=A.m_linearVelocity,U=T.m_linearVelocity,z=A.m_angularVelocity,W=T.m_angularVelocity,Y=Vec2.dot(L,Vec2.crossNumVec2(z,D))+Vec2.dot(D,Vec2.sub(Vec2.addCrossNumVec2(U,W,I),Vec2.addCrossNumVec2(V,z,B)));return Y},_.prototype.isLimitEnabled=function(){return this.m_enableLimit},_.prototype.enableLimit=function(A){A!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=A,this.m_impulse.z=0)},_.prototype.getLowerLimit=function(){return this.m_lowerTranslation},_.prototype.getUpperLimit=function(){return this.m_upperTranslation},_.prototype.setLimits=function(A,T){(A!=this.m_lowerTranslation||T!=this.m_upperTranslation)&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=A,this.m_upperTranslation=T,this.m_impulse.z=0)},_.prototype.isMotorEnabled=function(){return this.m_enableMotor},_.prototype.enableMotor=function(A){A!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=A)},_.prototype.setMotorSpeed=function(A){A!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=A)},_.prototype.setMaxMotorForce=function(A){A!=this.m_maxMotorForce&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=A)},_.prototype.getMaxMotorForce=function(){return this.m_maxMotorForce},_.prototype.getMotorSpeed=function(){return this.m_motorSpeed},_.prototype.getMotorForce=function(A){return A*this.m_motorImpulse},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(A)},_.prototype.getReactionTorque=function(A){return A*this.m_impulse.y},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyA.c_velocity.v,C=this.m_bodyA.c_velocity.w,R=this.m_bodyB.c_position.c,L=this.m_bodyB.c_position.a,D=this.m_bodyB.c_velocity.v,V=this.m_bodyB.c_velocity.w,U=Rot.neo(B),z=Rot.neo(L),W=Rot.mulVec2(U,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),Y=Rot.mulVec2(z,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),K=Vec2.zero();K.addCombine(1,R,1,Y),K.subCombine(1,T,1,W);var J=this.m_invMassA,et=this.m_invMassB,it=this.m_invIA,rt=this.m_invIB;this.m_axis=Rot.mulVec2(U,this.m_localXAxisA),this.m_a1=Vec2.crossVec2Vec2(Vec2.add(K,W),this.m_axis),this.m_a2=Vec2.crossVec2Vec2(Y,this.m_axis),this.m_motorMass=J+et+it*this.m_a1*this.m_a1+rt*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass);{this.m_perp=Rot.mulVec2(U,this.m_localYAxisA),this.m_s1=Vec2.crossVec2Vec2(Vec2.add(K,W),this.m_perp),this.m_s2=Vec2.crossVec2Vec2(Y,this.m_perp),Vec2.crossVec2Vec2(W,this.m_perp);var st=J+et+it*this.m_s1*this.m_s1+rt*this.m_s2*this.m_s2,lt=it*this.m_s1+rt*this.m_s2,ct=it*this.m_s1*this.m_a1+rt*this.m_s2*this.m_a2,at=it+rt;at==0&&(at=1);var ht=it*this.m_a1+rt*this.m_a2,mt=J+et+it*this.m_a1*this.m_a1+rt*this.m_a2*this.m_a2;this.m_K.ex.set(st,lt,ct),this.m_K.ey.set(lt,at,ht),this.m_K.ez.set(ct,ht,mt)}if(this.m_enableLimit){var yt=Vec2.dot(this.m_axis,K);math_abs$3(this.m_upperTranslation-this.m_lowerTranslation)<2*SettingsInternal.linearSlop?this.m_limitState=LimitState$1.equalLimits:yt<=this.m_lowerTranslation?this.m_limitState!=LimitState$1.atLowerLimit&&(this.m_limitState=LimitState$1.atLowerLimit,this.m_impulse.z=0):yt>=this.m_upperTranslation?this.m_limitState!=LimitState$1.atUpperLimit&&(this.m_limitState=LimitState$1.atUpperLimit,this.m_impulse.z=0):(this.m_limitState=LimitState$1.inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=LimitState$1.inactiveLimit,this.m_impulse.z=0;if(this.m_enableMotor==!1&&(this.m_motorImpulse=0),A.warmStarting){this.m_impulse.mul(A.dtRatio),this.m_motorImpulse*=A.dtRatio;var Tt=Vec2.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),At=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,pt=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;I.subMul(J,Tt),C-=it*At,D.addMul(et,Tt),V+=rt*pt}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.setVec2(I),this.m_bodyA.c_velocity.w=C,this.m_bodyB.c_velocity.v.setVec2(D),this.m_bodyB.c_velocity.w=V},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=this.m_invMassA,L=this.m_invMassB,D=this.m_invIA,V=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!=LimitState$1.equalLimits){var U=Vec2.dot(this.m_axis,Vec2.sub(I,T))+this.m_a2*C-this.m_a1*B,z=this.m_motorMass*(this.m_motorSpeed-U),W=this.m_motorImpulse,Y=A.dt*this.m_maxMotorForce;this.m_motorImpulse=clamp$1(this.m_motorImpulse+z,-Y,Y),z=this.m_motorImpulse-W;var K=Vec2.mulNumVec2(z,this.m_axis),J=z*this.m_a1,et=z*this.m_a2;T.subMul(R,K),B-=D*J,I.addMul(L,K),C+=V*et}var it=Vec2.zero();if(it.x+=Vec2.dot(this.m_perp,I)+this.m_s2*C,it.x-=Vec2.dot(this.m_perp,T)+this.m_s1*B,it.y=C-B,this.m_enableLimit&&this.m_limitState!=LimitState$1.inactiveLimit){var rt=0;rt+=Vec2.dot(this.m_axis,I)+this.m_a2*C,rt-=Vec2.dot(this.m_axis,T)+this.m_a1*B;var U=new Vec3(it.x,it.y,rt),st=Vec3.clone(this.m_impulse),lt=this.m_K.solve33(Vec3.neg(U));this.m_impulse.add(lt),this.m_limitState==LimitState$1.atLowerLimit?this.m_impulse.z=math_max(this.m_impulse.z,0):this.m_limitState==LimitState$1.atUpperLimit&&(this.m_impulse.z=math_min$2(this.m_impulse.z,0));var ct=Vec2.combine(-1,it,-(this.m_impulse.z-st.z),Vec2.neo(this.m_K.ez.x,this.m_K.ez.y)),at=Vec2.add(this.m_K.solve22(ct),Vec2.neo(st.x,st.y));this.m_impulse.x=at.x,this.m_impulse.y=at.y,lt=Vec3.sub(this.m_impulse,st);var K=Vec2.combine(lt.x,this.m_perp,lt.z,this.m_axis),J=lt.x*this.m_s1+lt.y+lt.z*this.m_a1,et=lt.x*this.m_s2+lt.y+lt.z*this.m_a2;T.subMul(R,K),B-=D*J,I.addMul(L,K),C+=V*et}else{var lt=this.m_K.solve22(Vec2.neg(it));this.m_impulse.x+=lt.x,this.m_impulse.y+=lt.y;var K=Vec2.mulNumVec2(lt.x,this.m_perp),J=lt.x*this.m_s1+lt.y,et=lt.x*this.m_s2+lt.y;T.subMul(R,K),B-=D*J,I.addMul(L,K),C+=V*et}this.m_bodyA.c_velocity.v=T,this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v=I,this.m_bodyB.c_velocity.w=C},_.prototype.solvePositionConstraints=function(A){var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyB.c_position.c,C=this.m_bodyB.c_position.a,R=Rot.neo(B),L=Rot.neo(C),D=this.m_invMassA,V=this.m_invMassB,U=this.m_invIA,z=this.m_invIB,W=Rot.mulVec2(R,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),Y=Rot.mulVec2(L,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),K=Vec2.sub(Vec2.add(I,Y),Vec2.add(T,W)),J=Rot.mulVec2(R,this.m_localXAxisA),et=Vec2.crossVec2Vec2(Vec2.add(K,W),J),it=Vec2.crossVec2Vec2(Y,J),rt=Rot.mulVec2(R,this.m_localYAxisA),st=Vec2.crossVec2Vec2(Vec2.add(K,W),rt),lt=Vec2.crossVec2Vec2(Y,rt),ct=new Vec3,at=Vec2.zero();at.x=Vec2.dot(rt,K),at.y=C-B-this.m_referenceAngle;var ht=math_abs$3(at.x),mt=math_abs$3(at.y),yt=SettingsInternal.linearSlop,Tt=SettingsInternal.maxLinearCorrection,At=!1,pt=0;if(this.m_enableLimit){var Et=Vec2.dot(J,K);math_abs$3(this.m_upperTranslation-this.m_lowerTranslation)<2*yt?(pt=clamp$1(Et,-Tt,Tt),ht=math_max(ht,math_abs$3(Et)),At=!0):Et<=this.m_lowerTranslation?(pt=clamp$1(Et-this.m_lowerTranslation+yt,-Tt,0),ht=Math.max(ht,this.m_lowerTranslation-Et),At=!0):Et>=this.m_upperTranslation&&(pt=clamp$1(Et-this.m_upperTranslation-yt,0,Tt),ht=Math.max(ht,Et-this.m_upperTranslation),At=!0)}if(At){var Vt=D+V+U*st*st+z*lt*lt,Ot=U*st+z*lt,gt=U*st*et+z*lt*it,bt=U+z;bt==0&&(bt=1);var $t=U*et+z*it,Lt=D+V+U*et*et+z*it*it,St=new Mat33;St.ex.set(Vt,Ot,gt),St.ey.set(Ot,bt,$t),St.ez.set(gt,$t,Lt);var Ct=new Vec3;Ct.x=at.x,Ct.y=at.y,Ct.z=pt,ct=St.solve33(Vec3.neg(Ct))}else{var Vt=D+V+U*st*st+z*lt*lt,Ot=U*st+z*lt,bt=U+z;bt==0&&(bt=1);var St=new Mat22;St.ex.setNum(Vt,Ot),St.ey.setNum(Ot,bt);var _t=St.solve(Vec2.neg(at));ct.x=_t.x,ct.y=_t.y,ct.z=0}var wt=Vec2.combine(ct.x,rt,ct.z,J),Mt=ct.x*st+ct.y+ct.z*et,Gt=ct.x*lt+ct.y+ct.z*it;return T.subMul(D,wt),B-=U*Mt,I.addMul(V,wt),C+=z*Gt,this.m_bodyA.c_position.c=T,this.m_bodyA.c_position.a=B,this.m_bodyB.c_position.c=I,this.m_bodyB.c_position.a=C,ht<=SettingsInternal.linearSlop&&mt<=SettingsInternal.angularSlop},_.TYPE="prismatic-joint",_}(Joint),DEFAULTS$6={ratio:1},GearJoint=function(E){__extends(_,E);function _(A,T,B,I,C,R){var L=this;if(!(L instanceof _))return new _(A,T,B,I,C,R);A=options(A,DEFAULTS$6),L=E.call(this,A,T,B)||this,T=L.m_bodyA,B=L.m_bodyB,L.m_type=_.TYPE,L.m_joint1=I||A.joint1,L.m_joint2=C||A.joint2,L.m_ratio=Number.isFinite(R)?R:A.ratio,L.m_type1=L.m_joint1.getType(),L.m_type2=L.m_joint2.getType();var D,V;L.m_bodyC=L.m_joint1.getBodyA(),L.m_bodyA=L.m_joint1.getBodyB();var U=L.m_bodyA.m_xf,z=L.m_bodyA.m_sweep.a,W=L.m_bodyC.m_xf,Y=L.m_bodyC.m_sweep.a;if(L.m_type1===RevoluteJoint.TYPE){var K=L.m_joint1;L.m_localAnchorC=K.m_localAnchorA,L.m_localAnchorA=K.m_localAnchorB,L.m_referenceAngleA=K.m_referenceAngle,L.m_localAxisC=Vec2.zero(),D=z-Y-L.m_referenceAngleA}else{var J=L.m_joint1;L.m_localAnchorC=J.m_localAnchorA,L.m_localAnchorA=J.m_localAnchorB,L.m_referenceAngleA=J.m_referenceAngle,L.m_localAxisC=J.m_localXAxisA;var et=L.m_localAnchorC,it=Rot.mulTVec2(W.q,Vec2.add(Rot.mulVec2(U.q,L.m_localAnchorA),Vec2.sub(U.p,W.p)));D=Vec2.dot(it,L.m_localAxisC)-Vec2.dot(et,L.m_localAxisC)}L.m_bodyD=L.m_joint2.getBodyA(),L.m_bodyB=L.m_joint2.getBodyB();var rt=L.m_bodyB.m_xf,st=L.m_bodyB.m_sweep.a,lt=L.m_bodyD.m_xf,ct=L.m_bodyD.m_sweep.a;if(L.m_type2===RevoluteJoint.TYPE){var K=L.m_joint2;L.m_localAnchorD=K.m_localAnchorA,L.m_localAnchorB=K.m_localAnchorB,L.m_referenceAngleB=K.m_referenceAngle,L.m_localAxisD=Vec2.zero(),V=st-ct-L.m_referenceAngleB}else{var J=L.m_joint2;L.m_localAnchorD=J.m_localAnchorA,L.m_localAnchorB=J.m_localAnchorB,L.m_referenceAngleB=J.m_referenceAngle,L.m_localAxisD=J.m_localXAxisA;var at=L.m_localAnchorD,ht=Rot.mulTVec2(lt.q,Vec2.add(Rot.mulVec2(rt.q,L.m_localAnchorB),Vec2.sub(rt.p,lt.p)));V=Vec2.dot(ht,L.m_localAxisD)-Vec2.dot(at,L.m_localAxisD)}return L.m_constant=D+L.m_ratio*V,L.m_impulse=0,L}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,joint1:this.m_joint1,joint2:this.m_joint2,ratio:this.m_ratio}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T),A.joint1=B(Joint,A.joint1,T),A.joint2=B(Joint,A.joint2,T);var I=new _(A);return I},_.prototype._reset=function(A){Number.isFinite(A.ratio)&&(this.m_ratio=A.ratio)},_.prototype.getJoint1=function(){return this.m_joint1},_.prototype.getJoint2=function(){return this.m_joint2},_.prototype.setRatio=function(A){this.m_ratio=A},_.prototype.getRatio=function(){return this.m_ratio},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.mulNumVec2(this.m_impulse,this.m_JvAC).mul(A)},_.prototype.getReactionTorque=function(A){var T=this.m_impulse*this.m_JwA;return A*T},_.prototype.initVelocityConstraints=function(A){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var T=this.m_bodyA.c_position.a,B=this.m_bodyA.c_velocity.v,I=this.m_bodyA.c_velocity.w,C=this.m_bodyB.c_position.a,R=this.m_bodyB.c_velocity.v,L=this.m_bodyB.c_velocity.w,D=this.m_bodyC.c_position.a,V=this.m_bodyC.c_velocity.v,U=this.m_bodyC.c_velocity.w,z=this.m_bodyD.c_position.a,W=this.m_bodyD.c_velocity.v,Y=this.m_bodyD.c_velocity.w,K=Rot.neo(T),J=Rot.neo(C),et=Rot.neo(D),it=Rot.neo(z);if(this.m_mass=0,this.m_type1==RevoluteJoint.TYPE)this.m_JvAC=Vec2.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var rt=Rot.mulVec2(et,this.m_localAxisC),st=Rot.mulSub(et,this.m_localAnchorC,this.m_lcC),lt=Rot.mulSub(K,this.m_localAnchorA,this.m_lcA);this.m_JvAC=rt,this.m_JwC=Vec2.crossVec2Vec2(st,rt),this.m_JwA=Vec2.crossVec2Vec2(lt,rt),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==RevoluteJoint.TYPE)this.m_JvBD=Vec2.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{var rt=Rot.mulVec2(it,this.m_localAxisD),ct=Rot.mulSub(it,this.m_localAnchorD,this.m_lcD),at=Rot.mulSub(J,this.m_localAnchorB,this.m_lcB);this.m_JvBD=Vec2.mulNumVec2(this.m_ratio,rt),this.m_JwD=this.m_ratio*Vec2.crossVec2Vec2(ct,rt),this.m_JwB=this.m_ratio*Vec2.crossVec2Vec2(at,rt),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,A.warmStarting?(B.addMul(this.m_mA*this.m_impulse,this.m_JvAC),I+=this.m_iA*this.m_impulse*this.m_JwA,R.addMul(this.m_mB*this.m_impulse,this.m_JvBD),L+=this.m_iB*this.m_impulse*this.m_JwB,V.subMul(this.m_mC*this.m_impulse,this.m_JvAC),U-=this.m_iC*this.m_impulse*this.m_JwC,W.subMul(this.m_mD*this.m_impulse,this.m_JvBD),Y-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.setVec2(B),this.m_bodyA.c_velocity.w=I,this.m_bodyB.c_velocity.v.setVec2(R),this.m_bodyB.c_velocity.w=L,this.m_bodyC.c_velocity.v.setVec2(V),this.m_bodyC.c_velocity.w=U,this.m_bodyD.c_velocity.v.setVec2(W),this.m_bodyD.c_velocity.w=Y},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=this.m_bodyC.c_velocity.v,L=this.m_bodyC.c_velocity.w,D=this.m_bodyD.c_velocity.v,V=this.m_bodyD.c_velocity.w,U=Vec2.dot(this.m_JvAC,T)-Vec2.dot(this.m_JvAC,R)+Vec2.dot(this.m_JvBD,I)-Vec2.dot(this.m_JvBD,D);U+=this.m_JwA*B-this.m_JwC*L+(this.m_JwB*C-this.m_JwD*V);var z=-this.m_mass*U;this.m_impulse+=z,T.addMul(this.m_mA*z,this.m_JvAC),B+=this.m_iA*z*this.m_JwA,I.addMul(this.m_mB*z,this.m_JvBD),C+=this.m_iB*z*this.m_JwB,R.subMul(this.m_mC*z,this.m_JvAC),L-=this.m_iC*z*this.m_JwC,D.subMul(this.m_mD*z,this.m_JvBD),V-=this.m_iD*z*this.m_JwD,this.m_bodyA.c_velocity.v.setVec2(T),this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v.setVec2(I),this.m_bodyB.c_velocity.w=C,this.m_bodyC.c_velocity.v.setVec2(R),this.m_bodyC.c_velocity.w=L,this.m_bodyD.c_velocity.v.setVec2(D),this.m_bodyD.c_velocity.w=V},_.prototype.solvePositionConstraints=function(A){var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyB.c_position.c,C=this.m_bodyB.c_position.a,R=this.m_bodyC.c_position.c,L=this.m_bodyC.c_position.a,D=this.m_bodyD.c_position.c,V=this.m_bodyD.c_position.a,U=Rot.neo(B),z=Rot.neo(C),W=Rot.neo(L),Y=Rot.neo(V),K=0,J,et,it,rt,st,lt,ct,at,ht=0;if(this.m_type1==RevoluteJoint.TYPE)it=Vec2.zero(),st=1,ct=1,ht+=this.m_iA+this.m_iC,J=B-L-this.m_referenceAngleA;else{var mt=Rot.mulVec2(W,this.m_localAxisC),yt=Rot.mulSub(W,this.m_localAnchorC,this.m_lcC),Tt=Rot.mulSub(U,this.m_localAnchorA,this.m_lcA);it=mt,ct=Vec2.crossVec2Vec2(yt,mt),st=Vec2.crossVec2Vec2(Tt,mt),ht+=this.m_mC+this.m_mA+this.m_iC*ct*ct+this.m_iA*st*st;var At=Vec2.sub(this.m_localAnchorC,this.m_lcC),pt=Rot.mulTVec2(W,Vec2.add(Tt,Vec2.sub(T,R)));J=Vec2.dot(Vec2.sub(pt,At),this.m_localAxisC)}if(this.m_type2==RevoluteJoint.TYPE)rt=Vec2.zero(),lt=this.m_ratio,at=this.m_ratio,ht+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),et=C-V-this.m_referenceAngleB;else{var mt=Rot.mulVec2(Y,this.m_localAxisD),Et=Rot.mulSub(Y,this.m_localAnchorD,this.m_lcD),Vt=Rot.mulSub(z,this.m_localAnchorB,this.m_lcB);rt=Vec2.mulNumVec2(this.m_ratio,mt),at=this.m_ratio*Vec2.crossVec2Vec2(Et,mt),lt=this.m_ratio*Vec2.crossVec2Vec2(Vt,mt),ht+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*at*at+this.m_iB*lt*lt;var Ot=Vec2.sub(this.m_localAnchorD,this.m_lcD),gt=Rot.mulTVec2(Y,Vec2.add(Vt,Vec2.sub(I,D)));et=Vec2.dot(gt,this.m_localAxisD)-Vec2.dot(Ot,this.m_localAxisD)}var bt=J+this.m_ratio*et-this.m_constant,$t=0;return ht>0&&($t=-bt/ht),T.addMul(this.m_mA*$t,it),B+=this.m_iA*$t*st,I.addMul(this.m_mB*$t,rt),C+=this.m_iB*$t*lt,R.subMul(this.m_mC*$t,it),L-=this.m_iC*$t*ct,D.subMul(this.m_mD*$t,rt),V-=this.m_iD*$t*at,this.m_bodyA.c_position.c.setVec2(T),this.m_bodyA.c_position.a=B,this.m_bodyB.c_position.c.setVec2(I),this.m_bodyB.c_position.a=C,this.m_bodyC.c_position.c.setVec2(R),this.m_bodyC.c_position.a=L,this.m_bodyD.c_position.c.setVec2(D),this.m_bodyD.c_position.a=V,K<SettingsInternal.linearSlop},_.TYPE="gear-joint",_}(Joint),DEFAULTS$5={maxForce:1,maxTorque:1,correctionFactor:.3},MotorJoint=function(E){__extends(_,E);function _(A,T,B){var I=this;return I instanceof _?(A=options(A,DEFAULTS$5),I=E.call(this,A,T,B)||this,T=I.m_bodyA,B=I.m_bodyB,I.m_type=_.TYPE,I.m_linearOffset=Vec2.isValid(A.linearOffset)?Vec2.clone(A.linearOffset):T.getLocalPoint(B.getPosition()),I.m_angularOffset=Number.isFinite(A.angularOffset)?A.angularOffset:B.getAngle()-T.getAngle(),I.m_linearImpulse=Vec2.zero(),I.m_angularImpulse=0,I.m_maxForce=A.maxForce,I.m_maxTorque=A.maxTorque,I.m_correctionFactor=A.correctionFactor,I):new _(A,T,B)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,maxForce:this.m_maxForce,maxTorque:this.m_maxTorque,correctionFactor:this.m_correctionFactor,linearOffset:this.m_linearOffset,angularOffset:this.m_angularOffset}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T);var I=new _(A);return I},_.prototype._reset=function(A){Number.isFinite(A.angularOffset)&&(this.m_angularOffset=A.angularOffset),Number.isFinite(A.maxForce)&&(this.m_maxForce=A.maxForce),Number.isFinite(A.maxTorque)&&(this.m_maxTorque=A.maxTorque),Number.isFinite(A.correctionFactor)&&(this.m_correctionFactor=A.correctionFactor),Vec2.isValid(A.linearOffset)&&this.m_linearOffset.set(A.linearOffset)},_.prototype.setMaxForce=function(A){this.m_maxForce=A},_.prototype.getMaxForce=function(){return this.m_maxForce},_.prototype.setMaxTorque=function(A){this.m_maxTorque=A},_.prototype.getMaxTorque=function(){return this.m_maxTorque},_.prototype.setCorrectionFactor=function(A){this.m_correctionFactor=A},_.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},_.prototype.setLinearOffset=function(A){(A.x!=this.m_linearOffset.x||A.y!=this.m_linearOffset.y)&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset.set(A))},_.prototype.getLinearOffset=function(){return this.m_linearOffset},_.prototype.setAngularOffset=function(A){A!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=A)},_.prototype.getAngularOffset=function(){return this.m_angularOffset},_.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},_.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},_.prototype.getReactionForce=function(A){return Vec2.mulNumVec2(A,this.m_linearImpulse)},_.prototype.getReactionTorque=function(A){return A*this.m_angularImpulse},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyA.c_velocity.v,C=this.m_bodyA.c_velocity.w,R=this.m_bodyB.c_position.c,L=this.m_bodyB.c_position.a,D=this.m_bodyB.c_velocity.v,V=this.m_bodyB.c_velocity.w,U=Rot.neo(B),z=Rot.neo(L);this.m_rA=Rot.mulVec2(U,Vec2.sub(this.m_linearOffset,this.m_localCenterA)),this.m_rB=Rot.mulVec2(z,Vec2.neg(this.m_localCenterB));var W=this.m_invMassA,Y=this.m_invMassB,K=this.m_invIA,J=this.m_invIB,et=new Mat22;if(et.ex.x=W+Y+K*this.m_rA.y*this.m_rA.y+J*this.m_rB.y*this.m_rB.y,et.ex.y=-K*this.m_rA.x*this.m_rA.y-J*this.m_rB.x*this.m_rB.y,et.ey.x=et.ex.y,et.ey.y=W+Y+K*this.m_rA.x*this.m_rA.x+J*this.m_rB.x*this.m_rB.x,this.m_linearMass=et.getInverse(),this.m_angularMass=K+J,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=Vec2.zero(),this.m_linearError.addCombine(1,R,1,this.m_rB),this.m_linearError.subCombine(1,T,1,this.m_rA),this.m_angularError=L-B-this.m_angularOffset,A.warmStarting){this.m_linearImpulse.mul(A.dtRatio),this.m_angularImpulse*=A.dtRatio;var it=Vec2.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);I.subMul(W,it),C-=K*(Vec2.crossVec2Vec2(this.m_rA,it)+this.m_angularImpulse),D.addMul(Y,it),V+=J*(Vec2.crossVec2Vec2(this.m_rB,it)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=I,this.m_bodyA.c_velocity.w=C,this.m_bodyB.c_velocity.v=D,this.m_bodyB.c_velocity.w=V},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=this.m_invMassA,L=this.m_invMassB,D=this.m_invIA,V=this.m_invIB,U=A.dt,z=A.inv_dt;{var W=C-B+z*this.m_correctionFactor*this.m_angularError,Y=-this.m_angularMass*W,K=this.m_angularImpulse,J=U*this.m_maxTorque;this.m_angularImpulse=clamp$1(this.m_angularImpulse+Y,-J,J),Y=this.m_angularImpulse-K,B-=D*Y,C+=V*Y}{var W=Vec2.zero();W.addCombine(1,I,1,Vec2.crossNumVec2(C,this.m_rB)),W.subCombine(1,T,1,Vec2.crossNumVec2(B,this.m_rA)),W.addMul(z*this.m_correctionFactor,this.m_linearError);var Y=Vec2.neg(Mat22.mulVec2(this.m_linearMass,W)),K=Vec2.clone(this.m_linearImpulse);this.m_linearImpulse.add(Y);var J=U*this.m_maxForce;this.m_linearImpulse.clamp(J),Y=Vec2.sub(this.m_linearImpulse,K),T.subMul(R,Y),B-=D*Vec2.crossVec2Vec2(this.m_rA,Y),I.addMul(L,Y),C+=V*Vec2.crossVec2Vec2(this.m_rB,Y)}this.m_bodyA.c_velocity.v=T,this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v=I,this.m_bodyB.c_velocity.w=C},_.prototype.solvePositionConstraints=function(A){return!0},_.TYPE="motor-joint",_}(Joint),math_PI$2=Math.PI,DEFAULTS$4={maxForce:0,frequencyHz:5,dampingRatio:.7},MouseJoint=function(E){__extends(_,E);function _(A,T,B,I){var C=this;return C instanceof _?(A=options(A,DEFAULTS$4),C=E.call(this,A,T,B)||this,T=C.m_bodyA,B=C.m_bodyB,C.m_type=_.TYPE,Vec2.isValid(I)?C.m_targetA=Vec2.clone(I):Vec2.isValid(A.target)?C.m_targetA=Vec2.clone(A.target):C.m_targetA=Vec2.zero(),C.m_localAnchorB=Transform.mulTVec2(B.getTransform(),C.m_targetA),C.m_maxForce=A.maxForce,C.m_impulse=Vec2.zero(),C.m_frequencyHz=A.frequencyHz,C.m_dampingRatio=A.dampingRatio,C.m_beta=0,C.m_gamma=0,C.m_rB=Vec2.zero(),C.m_localCenterB=Vec2.zero(),C.m_invMassB=0,C.m_invIB=0,C.m_mass=new Mat22,C.m_C=Vec2.zero(),C):new _(A,T,B,I)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,target:this.m_targetA,maxForce:this.m_maxForce,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,_localAnchorB:this.m_localAnchorB}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T),A.target=Vec2.clone(A.target);var I=new _(A);return A._localAnchorB&&(I.m_localAnchorB=A._localAnchorB),I},_.prototype._reset=function(A){Number.isFinite(A.maxForce)&&(this.m_maxForce=A.maxForce),Number.isFinite(A.frequencyHz)&&(this.m_frequencyHz=A.frequencyHz),Number.isFinite(A.dampingRatio)&&(this.m_dampingRatio=A.dampingRatio)},_.prototype.setTarget=function(A){Vec2.areEqual(A,this.m_targetA)||(this.m_bodyB.setAwake(!0),this.m_targetA.set(A))},_.prototype.getTarget=function(){return this.m_targetA},_.prototype.setMaxForce=function(A){this.m_maxForce=A},_.prototype.getMaxForce=function(){return this.m_maxForce},_.prototype.setFrequency=function(A){this.m_frequencyHz=A},_.prototype.getFrequency=function(){return this.m_frequencyHz},_.prototype.setDampingRatio=function(A){this.m_dampingRatio=A},_.prototype.getDampingRatio=function(){return this.m_dampingRatio},_.prototype.getAnchorA=function(){return Vec2.clone(this.m_targetA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.mulNumVec2(A,this.m_impulse)},_.prototype.getReactionTorque=function(A){return A*0},_.prototype.shiftOrigin=function(A){this.m_targetA.sub(A)},_.prototype.initVelocityConstraints=function(A){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyB.c_position,B=this.m_bodyB.c_velocity,I=T.c,C=T.a,R=B.v,L=B.w,D=Rot.neo(C),V=this.m_bodyB.getMass(),U=2*math_PI$2*this.m_frequencyHz,z=2*V*this.m_dampingRatio*U,W=V*(U*U),Y=A.dt;this.m_gamma=Y*(z+Y*W),this.m_gamma!=0&&(this.m_gamma=1/this.m_gamma),this.m_beta=Y*W*this.m_gamma,this.m_rB=Rot.mulVec2(D,Vec2.sub(this.m_localAnchorB,this.m_localCenterB));var K=new Mat22;K.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,K.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,K.ey.x=K.ex.y,K.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=K.getInverse(),this.m_C.setVec2(I),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),L*=.98,A.warmStarting?(this.m_impulse.mul(A.dtRatio),R.addMul(this.m_invMassB,this.m_impulse),L+=this.m_invIB*Vec2.crossVec2Vec2(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),B.v.setVec2(R),B.w=L},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyB.c_velocity,B=Vec2.clone(T.v),I=T.w,C=Vec2.crossNumVec2(I,this.m_rB);C.add(B),C.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),C.neg();var R=Mat22.mulVec2(this.m_mass,C),L=Vec2.clone(this.m_impulse);this.m_impulse.add(R);var D=A.dt*this.m_maxForce;this.m_impulse.clamp(D),R=Vec2.sub(this.m_impulse,L),B.addMul(this.m_invMassB,R),I+=this.m_invIB*Vec2.crossVec2Vec2(this.m_rB,R),T.v.setVec2(B),T.w=I},_.prototype.solvePositionConstraints=function(A){return!0},_.TYPE="mouse-joint",_}(Joint),math_abs$2=Math.abs,DEFAULTS$3={collideConnected:!0},PulleyJoint=function(E){__extends(_,E);function _(A,T,B,I,C,R,L,D){var V=this;return V instanceof _?(A=options(A,DEFAULTS$3),V=E.call(this,A,T,B)||this,T=V.m_bodyA,B=V.m_bodyB,V.m_type=_.TYPE,V.m_groundAnchorA=Vec2.clone(I||A.groundAnchorA||Vec2.neo(-1,1)),V.m_groundAnchorB=Vec2.clone(C||A.groundAnchorB||Vec2.neo(1,1)),V.m_localAnchorA=Vec2.clone(R?T.getLocalPoint(R):A.localAnchorA||Vec2.neo(-1,0)),V.m_localAnchorB=Vec2.clone(L?B.getLocalPoint(L):A.localAnchorB||Vec2.neo(1,0)),V.m_lengthA=Number.isFinite(A.lengthA)?A.lengthA:Vec2.distance(R,I),V.m_lengthB=Number.isFinite(A.lengthB)?A.lengthB:Vec2.distance(L,C),V.m_ratio=Number.isFinite(D)?D:A.ratio,V.m_constant=V.m_lengthA+V.m_ratio*V.m_lengthB,V.m_impulse=0,V):new _(A,T,B,I,C,R,L,D)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,groundAnchorA:this.m_groundAnchorA,groundAnchorB:this.m_groundAnchorB,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,lengthA:this.m_lengthA,lengthB:this.m_lengthB,ratio:this.m_ratio}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T);var I=new _(A);return I},_.prototype._reset=function(A){Vec2.isValid(A.groundAnchorA)&&this.m_groundAnchorA.set(A.groundAnchorA),Vec2.isValid(A.groundAnchorB)&&this.m_groundAnchorB.set(A.groundAnchorB),Vec2.isValid(A.localAnchorA)?this.m_localAnchorA.set(A.localAnchorA):Vec2.isValid(A.anchorA)&&this.m_localAnchorA.set(this.m_bodyA.getLocalPoint(A.anchorA)),Vec2.isValid(A.localAnchorB)?this.m_localAnchorB.set(A.localAnchorB):Vec2.isValid(A.anchorB)&&this.m_localAnchorB.set(this.m_bodyB.getLocalPoint(A.anchorB)),Number.isFinite(A.lengthA)&&(this.m_lengthA=A.lengthA),Number.isFinite(A.lengthB)&&(this.m_lengthB=A.lengthB),Number.isFinite(A.ratio)&&(this.m_ratio=A.ratio)},_.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},_.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},_.prototype.getLengthA=function(){return this.m_lengthA},_.prototype.getLengthB=function(){return this.m_lengthB},_.prototype.getRatio=function(){return this.m_ratio},_.prototype.getCurrentLengthA=function(){var A=this.m_bodyA.getWorldPoint(this.m_localAnchorA),T=this.m_groundAnchorA;return Vec2.distance(A,T)},_.prototype.getCurrentLengthB=function(){var A=this.m_bodyB.getWorldPoint(this.m_localAnchorB),T=this.m_groundAnchorB;return Vec2.distance(A,T)},_.prototype.shiftOrigin=function(A){this.m_groundAnchorA.sub(A),this.m_groundAnchorB.sub(A)},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.mulNumVec2(this.m_impulse,this.m_uB).mul(A)},_.prototype.getReactionTorque=function(A){return 0},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyA.c_velocity.v,C=this.m_bodyA.c_velocity.w,R=this.m_bodyB.c_position.c,L=this.m_bodyB.c_position.a,D=this.m_bodyB.c_velocity.v,V=this.m_bodyB.c_velocity.w,U=Rot.neo(B),z=Rot.neo(L);this.m_rA=Rot.mulVec2(U,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Rot.mulVec2(z,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=Vec2.sub(Vec2.add(T,this.m_rA),this.m_groundAnchorA),this.m_uB=Vec2.sub(Vec2.add(R,this.m_rB),this.m_groundAnchorB);var W=this.m_uA.length(),Y=this.m_uB.length();W>10*SettingsInternal.linearSlop?this.m_uA.mul(1/W):this.m_uA.setZero(),Y>10*SettingsInternal.linearSlop?this.m_uB.mul(1/Y):this.m_uB.setZero();var K=Vec2.crossVec2Vec2(this.m_rA,this.m_uA),J=Vec2.crossVec2Vec2(this.m_rB,this.m_uB),et=this.m_invMassA+this.m_invIA*K*K,it=this.m_invMassB+this.m_invIB*J*J;if(this.m_mass=et+this.m_ratio*this.m_ratio*it,this.m_mass>0&&(this.m_mass=1/this.m_mass),A.warmStarting){this.m_impulse*=A.dtRatio;var rt=Vec2.mulNumVec2(-this.m_impulse,this.m_uA),st=Vec2.mulNumVec2(-this.m_ratio*this.m_impulse,this.m_uB);I.addMul(this.m_invMassA,rt),C+=this.m_invIA*Vec2.crossVec2Vec2(this.m_rA,rt),D.addMul(this.m_invMassB,st),V+=this.m_invIB*Vec2.crossVec2Vec2(this.m_rB,st)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=I,this.m_bodyA.c_velocity.w=C,this.m_bodyB.c_velocity.v=D,this.m_bodyB.c_velocity.w=V},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=Vec2.add(T,Vec2.crossNumVec2(B,this.m_rA)),L=Vec2.add(I,Vec2.crossNumVec2(C,this.m_rB)),D=-Vec2.dot(this.m_uA,R)-this.m_ratio*Vec2.dot(this.m_uB,L),V=-this.m_mass*D;this.m_impulse+=V;var U=Vec2.mulNumVec2(-V,this.m_uA),z=Vec2.mulNumVec2(-this.m_ratio*V,this.m_uB);T.addMul(this.m_invMassA,U),B+=this.m_invIA*Vec2.crossVec2Vec2(this.m_rA,U),I.addMul(this.m_invMassB,z),C+=this.m_invIB*Vec2.crossVec2Vec2(this.m_rB,z),this.m_bodyA.c_velocity.v=T,this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v=I,this.m_bodyB.c_velocity.w=C},_.prototype.solvePositionConstraints=function(A){var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyB.c_position.c,C=this.m_bodyB.c_position.a,R=Rot.neo(B),L=Rot.neo(C),D=Rot.mulVec2(R,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),V=Rot.mulVec2(L,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),U=Vec2.sub(Vec2.add(T,this.m_rA),this.m_groundAnchorA),z=Vec2.sub(Vec2.add(I,this.m_rB),this.m_groundAnchorB),W=U.length(),Y=z.length();W>10*SettingsInternal.linearSlop?U.mul(1/W):U.setZero(),Y>10*SettingsInternal.linearSlop?z.mul(1/Y):z.setZero();var K=Vec2.crossVec2Vec2(D,U),J=Vec2.crossVec2Vec2(V,z),et=this.m_invMassA+this.m_invIA*K*K,it=this.m_invMassB+this.m_invIB*J*J,rt=et+this.m_ratio*this.m_ratio*it;rt>0&&(rt=1/rt);var st=this.m_constant-W-this.m_ratio*Y,lt=math_abs$2(st),ct=-rt*st,at=Vec2.mulNumVec2(-ct,U),ht=Vec2.mulNumVec2(-this.m_ratio*ct,z);return T.addMul(this.m_invMassA,at),B+=this.m_invIA*Vec2.crossVec2Vec2(D,at),I.addMul(this.m_invMassB,ht),C+=this.m_invIB*Vec2.crossVec2Vec2(V,ht),this.m_bodyA.c_position.c=T,this.m_bodyA.c_position.a=B,this.m_bodyB.c_position.c=I,this.m_bodyB.c_position.a=C,lt<SettingsInternal.linearSlop},_.TYPE="pulley-joint",_}(Joint),math_min$1=Math.min,LimitState;(function(E){E[E.inactiveLimit=0]="inactiveLimit",E[E.atLowerLimit=1]="atLowerLimit",E[E.atUpperLimit=2]="atUpperLimit",E[E.equalLimits=3]="equalLimits"})(LimitState||(LimitState={}));var DEFAULTS$2={maxLength:0},RopeJoint=function(E){__extends(_,E);function _(A,T,B,I){var C=this;return C instanceof _?(A=options(A,DEFAULTS$2),C=E.call(this,A,T,B)||this,T=C.m_bodyA,B=C.m_bodyB,C.m_type=_.TYPE,C.m_localAnchorA=Vec2.clone(I?T.getLocalPoint(I):A.localAnchorA||Vec2.neo(-1,0)),C.m_localAnchorB=Vec2.clone(I?B.getLocalPoint(I):A.localAnchorB||Vec2.neo(1,0)),C.m_maxLength=A.maxLength,C.m_mass=0,C.m_impulse=0,C.m_length=0,C.m_state=LimitState.inactiveLimit,C):new _(A,T,B,I)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,maxLength:this.m_maxLength}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T);var I=new _(A);return I},_.prototype._reset=function(A){Number.isFinite(A.maxLength)&&(this.m_maxLength=A.maxLength)},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.setMaxLength=function(A){this.m_maxLength=A},_.prototype.getMaxLength=function(){return this.m_maxLength},_.prototype.getLimitState=function(){return this.m_state},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.mulNumVec2(this.m_impulse,this.m_u).mul(A)},_.prototype.getReactionTorque=function(A){return 0},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyA.c_velocity.v,C=this.m_bodyA.c_velocity.w,R=this.m_bodyB.c_position.c,L=this.m_bodyB.c_position.a,D=this.m_bodyB.c_velocity.v,V=this.m_bodyB.c_velocity.w,U=Rot.neo(B),z=Rot.neo(L);this.m_rA=Rot.mulSub(U,this.m_localAnchorA,this.m_localCenterA),this.m_rB=Rot.mulSub(z,this.m_localAnchorB,this.m_localCenterB),this.m_u=Vec2.zero(),this.m_u.addCombine(1,R,1,this.m_rB),this.m_u.subCombine(1,T,1,this.m_rA),this.m_length=this.m_u.length();var W=this.m_length-this.m_maxLength;if(W>0?this.m_state=LimitState.atUpperLimit:this.m_state=LimitState.inactiveLimit,this.m_length>SettingsInternal.linearSlop)this.m_u.mul(1/this.m_length);else{this.m_u.setZero(),this.m_mass=0,this.m_impulse=0;return}var Y=Vec2.crossVec2Vec2(this.m_rA,this.m_u),K=Vec2.crossVec2Vec2(this.m_rB,this.m_u),J=this.m_invMassA+this.m_invIA*Y*Y+this.m_invMassB+this.m_invIB*K*K;if(this.m_mass=J!=0?1/J:0,A.warmStarting){this.m_impulse*=A.dtRatio;var et=Vec2.mulNumVec2(this.m_impulse,this.m_u);I.subMul(this.m_invMassA,et),C-=this.m_invIA*Vec2.crossVec2Vec2(this.m_rA,et),D.addMul(this.m_invMassB,et),V+=this.m_invIB*Vec2.crossVec2Vec2(this.m_rB,et)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.setVec2(I),this.m_bodyA.c_velocity.w=C,this.m_bodyB.c_velocity.v.setVec2(D),this.m_bodyB.c_velocity.w=V},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=Vec2.addCrossNumVec2(T,B,this.m_rA),L=Vec2.addCrossNumVec2(I,C,this.m_rB),D=this.m_length-this.m_maxLength,V=Vec2.dot(this.m_u,Vec2.sub(L,R));D<0&&(V+=A.inv_dt*D);var U=-this.m_mass*V,z=this.m_impulse;this.m_impulse=math_min$1(0,this.m_impulse+U),U=this.m_impulse-z;var W=Vec2.mulNumVec2(U,this.m_u);T.subMul(this.m_invMassA,W),B-=this.m_invIA*Vec2.crossVec2Vec2(this.m_rA,W),I.addMul(this.m_invMassB,W),C+=this.m_invIB*Vec2.crossVec2Vec2(this.m_rB,W),this.m_bodyA.c_velocity.v=T,this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v=I,this.m_bodyB.c_velocity.w=C},_.prototype.solvePositionConstraints=function(A){var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyB.c_position.c,C=this.m_bodyB.c_position.a,R=Rot.neo(B),L=Rot.neo(C),D=Rot.mulSub(R,this.m_localAnchorA,this.m_localCenterA),V=Rot.mulSub(L,this.m_localAnchorB,this.m_localCenterB),U=Vec2.zero();U.addCombine(1,I,1,V),U.subCombine(1,T,1,D);var z=U.normalize(),W=z-this.m_maxLength;W=clamp$1(W,0,SettingsInternal.maxLinearCorrection);var Y=-this.m_mass*W,K=Vec2.mulNumVec2(Y,U);return T.subMul(this.m_invMassA,K),B-=this.m_invIA*Vec2.crossVec2Vec2(D,K),I.addMul(this.m_invMassB,K),C+=this.m_invIB*Vec2.crossVec2Vec2(V,K),this.m_bodyA.c_position.c.setVec2(T),this.m_bodyA.c_position.a=B,this.m_bodyB.c_position.c.setVec2(I),this.m_bodyB.c_position.a=C,z-this.m_maxLength<SettingsInternal.linearSlop},_.TYPE="rope-joint",_}(Joint),math_abs$1=Math.abs,math_PI$1=Math.PI,DEFAULTS$1={frequencyHz:0,dampingRatio:0},WeldJoint=function(E){__extends(_,E);function _(A,T,B,I){var C=this;return C instanceof _?(A=options(A,DEFAULTS$1),C=E.call(this,A,T,B)||this,T=C.m_bodyA,B=C.m_bodyB,C.m_type=_.TYPE,C.m_localAnchorA=Vec2.clone(I?T.getLocalPoint(I):A.localAnchorA||Vec2.zero()),C.m_localAnchorB=Vec2.clone(I?B.getLocalPoint(I):A.localAnchorB||Vec2.zero()),C.m_referenceAngle=Number.isFinite(A.referenceAngle)?A.referenceAngle:B.getAngle()-T.getAngle(),C.m_frequencyHz=A.frequencyHz,C.m_dampingRatio=A.dampingRatio,C.m_impulse=new Vec3,C.m_bias=0,C.m_gamma=0,C.m_rA,C.m_rB,C.m_localCenterA,C.m_localCenterB,C.m_invMassA,C.m_invMassB,C.m_invIA,C.m_invIB,C.m_mass=new Mat33,C):new _(A,T,B,I)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,referenceAngle:this.m_referenceAngle}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T);var I=new _(A);return I},_.prototype._reset=function(A){A.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(A.anchorA)):A.localAnchorA&&this.m_localAnchorA.setVec2(A.localAnchorA),A.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(A.anchorB)):A.localAnchorB&&this.m_localAnchorB.setVec2(A.localAnchorB),Number.isFinite(A.frequencyHz)&&(this.m_frequencyHz=A.frequencyHz),Number.isFinite(A.dampingRatio)&&(this.m_dampingRatio=A.dampingRatio)},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.getReferenceAngle=function(){return this.m_referenceAngle},_.prototype.setFrequency=function(A){this.m_frequencyHz=A},_.prototype.getFrequency=function(){return this.m_frequencyHz},_.prototype.setDampingRatio=function(A){this.m_dampingRatio=A},_.prototype.getDampingRatio=function(){return this.m_dampingRatio},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.neo(this.m_impulse.x,this.m_impulse.y).mul(A)},_.prototype.getReactionTorque=function(A){return A*this.m_impulse.z},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_bodyA.c_position.a,B=this.m_bodyA.c_velocity.v,I=this.m_bodyA.c_velocity.w,C=this.m_bodyB.c_position.a,R=this.m_bodyB.c_velocity.v,L=this.m_bodyB.c_velocity.w,D=Rot.neo(T),V=Rot.neo(C);this.m_rA=Rot.mulVec2(D,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=Rot.mulVec2(V,Vec2.sub(this.m_localAnchorB,this.m_localCenterB));var U=this.m_invMassA,z=this.m_invMassB,W=this.m_invIA,Y=this.m_invIB,K=new Mat33;if(K.ex.x=U+z+this.m_rA.y*this.m_rA.y*W+this.m_rB.y*this.m_rB.y*Y,K.ey.x=-this.m_rA.y*this.m_rA.x*W-this.m_rB.y*this.m_rB.x*Y,K.ez.x=-this.m_rA.y*W-this.m_rB.y*Y,K.ex.y=K.ey.x,K.ey.y=U+z+this.m_rA.x*this.m_rA.x*W+this.m_rB.x*this.m_rB.x*Y,K.ez.y=this.m_rA.x*W+this.m_rB.x*Y,K.ex.z=K.ez.x,K.ey.z=K.ez.y,K.ez.z=W+Y,this.m_frequencyHz>0){K.getInverse22(this.m_mass);var J=W+Y,et=J>0?1/J:0,it=C-T-this.m_referenceAngle,rt=2*math_PI$1*this.m_frequencyHz,st=2*et*this.m_dampingRatio*rt,lt=et*rt*rt,ct=A.dt;this.m_gamma=ct*(st+ct*lt),this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0,this.m_bias=it*ct*lt*this.m_gamma,J+=this.m_gamma,this.m_mass.ez.z=J!=0?1/J:0}else K.ez.z==0?(K.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(K.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(A.warmStarting){this.m_impulse.mul(A.dtRatio);var at=Vec2.neo(this.m_impulse.x,this.m_impulse.y);B.subMul(U,at),I-=W*(Vec2.crossVec2Vec2(this.m_rA,at)+this.m_impulse.z),R.addMul(z,at),L+=Y*(Vec2.crossVec2Vec2(this.m_rB,at)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=B,this.m_bodyA.c_velocity.w=I,this.m_bodyB.c_velocity.v=R,this.m_bodyB.c_velocity.w=L},_.prototype.solveVelocityConstraints=function(A){var T=this.m_bodyA.c_velocity.v,B=this.m_bodyA.c_velocity.w,I=this.m_bodyB.c_velocity.v,C=this.m_bodyB.c_velocity.w,R=this.m_invMassA,L=this.m_invMassB,D=this.m_invIA,V=this.m_invIB;if(this.m_frequencyHz>0){var U=C-B,z=-this.m_mass.ez.z*(U+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=z,B-=D*z,C+=V*z;var W=Vec2.zero();W.addCombine(1,I,1,Vec2.crossNumVec2(C,this.m_rB)),W.subCombine(1,T,1,Vec2.crossNumVec2(B,this.m_rA));var Y=Vec2.neg(Mat33.mulVec2(this.m_mass,W));this.m_impulse.x+=Y.x,this.m_impulse.y+=Y.y;var K=Vec2.clone(Y);T.subMul(R,K),B-=D*Vec2.crossVec2Vec2(this.m_rA,K),I.addMul(L,K),C+=V*Vec2.crossVec2Vec2(this.m_rB,K)}else{var W=Vec2.zero();W.addCombine(1,I,1,Vec2.crossNumVec2(C,this.m_rB)),W.subCombine(1,T,1,Vec2.crossNumVec2(B,this.m_rA));var U=C-B,J=new Vec3(W.x,W.y,U),et=Vec3.neg(Mat33.mulVec3(this.m_mass,J));this.m_impulse.add(et);var K=Vec2.neo(et.x,et.y);T.subMul(R,K),B-=D*(Vec2.crossVec2Vec2(this.m_rA,K)+et.z),I.addMul(L,K),C+=V*(Vec2.crossVec2Vec2(this.m_rB,K)+et.z)}this.m_bodyA.c_velocity.v=T,this.m_bodyA.c_velocity.w=B,this.m_bodyB.c_velocity.v=I,this.m_bodyB.c_velocity.w=C},_.prototype.solvePositionConstraints=function(A){var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyB.c_position.c,C=this.m_bodyB.c_position.a,R=Rot.neo(B),L=Rot.neo(C),D=this.m_invMassA,V=this.m_invMassB,U=this.m_invIA,z=this.m_invIB,W=Rot.mulVec2(R,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),Y=Rot.mulVec2(L,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),K,J,et=new Mat33;if(et.ex.x=D+V+W.y*W.y*U+Y.y*Y.y*z,et.ey.x=-W.y*W.x*U-Y.y*Y.x*z,et.ez.x=-W.y*U-Y.y*z,et.ex.y=et.ey.x,et.ey.y=D+V+W.x*W.x*U+Y.x*Y.x*z,et.ez.y=W.x*U+Y.x*z,et.ex.z=et.ez.x,et.ey.z=et.ez.y,et.ez.z=U+z,this.m_frequencyHz>0){var it=Vec2.zero();it.addCombine(1,I,1,Y),it.subCombine(1,T,1,W),K=it.length(),J=0;var rt=Vec2.neg(et.solve22(it));T.subMul(D,rt),B-=U*Vec2.crossVec2Vec2(W,rt),I.addMul(V,rt),C+=z*Vec2.crossVec2Vec2(Y,rt)}else{var it=Vec2.zero();it.addCombine(1,I,1,Y),it.subCombine(1,T,1,W);var st=C-B-this.m_referenceAngle;K=it.length(),J=math_abs$1(st);var lt=new Vec3(it.x,it.y,st),ct=new Vec3;if(et.ez.z>0)ct=Vec3.neg(et.solve33(lt));else{var at=Vec2.neg(et.solve22(it));ct.set(at.x,at.y,0)}var rt=Vec2.neo(ct.x,ct.y);T.subMul(D,rt),B-=U*(Vec2.crossVec2Vec2(W,rt)+ct.z),I.addMul(V,rt),C+=z*(Vec2.crossVec2Vec2(Y,rt)+ct.z)}return this.m_bodyA.c_position.c=T,this.m_bodyA.c_position.a=B,this.m_bodyB.c_position.c=I,this.m_bodyB.c_position.a=C,K<=SettingsInternal.linearSlop&&J<=SettingsInternal.angularSlop},_.TYPE="weld-joint",_}(Joint),math_abs=Math.abs,math_PI=Math.PI,DEFAULTS={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7},WheelJoint=function(E){__extends(_,E);function _(A,T,B,I,C){var R=this;return R instanceof _?(A=options(A,DEFAULTS),R=E.call(this,A,T,B)||this,T=R.m_bodyA,B=R.m_bodyB,R.m_ax=Vec2.zero(),R.m_ay=Vec2.zero(),R.m_type=_.TYPE,R.m_localAnchorA=Vec2.clone(I?T.getLocalPoint(I):A.localAnchorA||Vec2.zero()),R.m_localAnchorB=Vec2.clone(I?B.getLocalPoint(I):A.localAnchorB||Vec2.zero()),Vec2.isValid(C)?R.m_localXAxisA=T.getLocalVector(C):Vec2.isValid(A.localAxisA)?R.m_localXAxisA=Vec2.clone(A.localAxisA):Vec2.isValid(A.localAxis)?R.m_localXAxisA=Vec2.clone(A.localAxis):R.m_localXAxisA=Vec2.neo(1,0),R.m_localYAxisA=Vec2.crossNumVec2(1,R.m_localXAxisA),R.m_mass=0,R.m_impulse=0,R.m_motorMass=0,R.m_motorImpulse=0,R.m_springMass=0,R.m_springImpulse=0,R.m_maxMotorTorque=A.maxMotorTorque,R.m_motorSpeed=A.motorSpeed,R.m_enableMotor=A.enableMotor,R.m_frequencyHz=A.frequencyHz,R.m_dampingRatio=A.dampingRatio,R.m_bias=0,R.m_gamma=0,R):new _(A,T,B,I,C)}return _.prototype._serialize=function(){return{type:this.m_type,bodyA:this.m_bodyA,bodyB:this.m_bodyB,collideConnected:this.m_collideConnected,enableMotor:this.m_enableMotor,maxMotorTorque:this.m_maxMotorTorque,motorSpeed:this.m_motorSpeed,frequencyHz:this.m_frequencyHz,dampingRatio:this.m_dampingRatio,localAnchorA:this.m_localAnchorA,localAnchorB:this.m_localAnchorB,localAxisA:this.m_localXAxisA}},_._deserialize=function(A,T,B){A=__assign({},A),A.bodyA=B(Body,A.bodyA,T),A.bodyB=B(Body,A.bodyB,T);var I=new _(A);return I},_.prototype._reset=function(A){A.anchorA?this.m_localAnchorA.setVec2(this.m_bodyA.getLocalPoint(A.anchorA)):A.localAnchorA&&this.m_localAnchorA.setVec2(A.localAnchorA),A.anchorB?this.m_localAnchorB.setVec2(this.m_bodyB.getLocalPoint(A.anchorB)):A.localAnchorB&&this.m_localAnchorB.setVec2(A.localAnchorB),A.localAxisA&&(this.m_localXAxisA.setVec2(A.localAxisA),this.m_localYAxisA.setVec2(Vec2.crossNumVec2(1,A.localAxisA))),A.enableMotor!==void 0&&(this.m_enableMotor=A.enableMotor),Number.isFinite(A.maxMotorTorque)&&(this.m_maxMotorTorque=A.maxMotorTorque),Number.isFinite(A.motorSpeed)&&(this.m_motorSpeed=A.motorSpeed),Number.isFinite(A.frequencyHz)&&(this.m_frequencyHz=A.frequencyHz),Number.isFinite(A.dampingRatio)&&(this.m_dampingRatio=A.dampingRatio)},_.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},_.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},_.prototype.getLocalAxisA=function(){return this.m_localXAxisA},_.prototype.getJointTranslation=function(){var A=this.m_bodyA,T=this.m_bodyB,B=A.getWorldPoint(this.m_localAnchorA),I=T.getWorldPoint(this.m_localAnchorB),C=Vec2.sub(I,B),R=A.getWorldVector(this.m_localXAxisA),L=Vec2.dot(C,R);return L},_.prototype.getJointSpeed=function(){var A=this.m_bodyA.m_angularVelocity,T=this.m_bodyB.m_angularVelocity;return T-A},_.prototype.isMotorEnabled=function(){return this.m_enableMotor},_.prototype.enableMotor=function(A){A!=this.m_enableMotor&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=A)},_.prototype.setMotorSpeed=function(A){A!=this.m_motorSpeed&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=A)},_.prototype.getMotorSpeed=function(){return this.m_motorSpeed},_.prototype.setMaxMotorTorque=function(A){A!=this.m_maxMotorTorque&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=A)},_.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},_.prototype.getMotorTorque=function(A){return A*this.m_motorImpulse},_.prototype.setSpringFrequencyHz=function(A){this.m_frequencyHz=A},_.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},_.prototype.setSpringDampingRatio=function(A){this.m_dampingRatio=A},_.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(A){return Vec2.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(A)},_.prototype.getReactionTorque=function(A){return A*this.m_motorImpulse},_.prototype.initVelocityConstraints=function(A){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var T=this.m_invMassA,B=this.m_invMassB,I=this.m_invIA,C=this.m_invIB,R=this.m_bodyA.c_position.c,L=this.m_bodyA.c_position.a,D=this.m_bodyA.c_velocity.v,V=this.m_bodyA.c_velocity.w,U=this.m_bodyB.c_position.c,z=this.m_bodyB.c_position.a,W=this.m_bodyB.c_velocity.v,Y=this.m_bodyB.c_velocity.w,K=Rot.neo(L),J=Rot.neo(z),et=Rot.mulVec2(K,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),it=Rot.mulVec2(J,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),rt=Vec2.zero();if(rt.addCombine(1,U,1,it),rt.subCombine(1,R,1,et),this.m_ay=Rot.mulVec2(K,this.m_localYAxisA),this.m_sAy=Vec2.crossVec2Vec2(Vec2.add(rt,et),this.m_ay),this.m_sBy=Vec2.crossVec2Vec2(it,this.m_ay),this.m_mass=T+B+I*this.m_sAy*this.m_sAy+C*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=Rot.mulVec2(K,this.m_localXAxisA),this.m_sAx=Vec2.crossVec2Vec2(Vec2.add(rt,et),this.m_ax),this.m_sBx=Vec2.crossVec2Vec2(it,this.m_ax);var st=T+B+I*this.m_sAx*this.m_sAx+C*this.m_sBx*this.m_sBx;if(st>0){this.m_springMass=1/st;var lt=Vec2.dot(rt,this.m_ax),ct=2*math_PI*this.m_frequencyHz,at=2*this.m_springMass*this.m_dampingRatio*ct,ht=this.m_springMass*ct*ct,mt=A.dt;this.m_gamma=mt*(at+mt*ht),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=lt*mt*ht*this.m_gamma,this.m_springMass=st+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=I+C,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),A.warmStarting){this.m_impulse*=A.dtRatio,this.m_springImpulse*=A.dtRatio,this.m_motorImpulse*=A.dtRatio;var yt=Vec2.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),Tt=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,At=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;D.subMul(this.m_invMassA,yt),V-=this.m_invIA*Tt,W.addMul(this.m_invMassB,yt),Y+=this.m_invIB*At}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.setVec2(D),this.m_bodyA.c_velocity.w=V,this.m_bodyB.c_velocity.v.setVec2(W),this.m_bodyB.c_velocity.w=Y},_.prototype.solveVelocityConstraints=function(A){var T=this.m_invMassA,B=this.m_invMassB,I=this.m_invIA,C=this.m_invIB,R=this.m_bodyA.c_velocity.v,L=this.m_bodyA.c_velocity.w,D=this.m_bodyB.c_velocity.v,V=this.m_bodyB.c_velocity.w;{var U=Vec2.dot(this.m_ax,D)-Vec2.dot(this.m_ax,R)+this.m_sBx*V-this.m_sAx*L,z=-this.m_springMass*(U+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=z;var W=Vec2.mulNumVec2(z,this.m_ax),Y=z*this.m_sAx,K=z*this.m_sBx;R.subMul(T,W),L-=I*Y,D.addMul(B,W),V+=C*K}{var U=V-L-this.m_motorSpeed,z=-this.m_motorMass*U,J=this.m_motorImpulse,et=A.dt*this.m_maxMotorTorque;this.m_motorImpulse=clamp$1(this.m_motorImpulse+z,-et,et),z=this.m_motorImpulse-J,L-=I*z,V+=C*z}{var U=Vec2.dot(this.m_ay,D)-Vec2.dot(this.m_ay,R)+this.m_sBy*V-this.m_sAy*L,z=-this.m_mass*U;this.m_impulse+=z;var W=Vec2.mulNumVec2(z,this.m_ay),Y=z*this.m_sAy,K=z*this.m_sBy;R.subMul(T,W),L-=I*Y,D.addMul(B,W),V+=C*K}this.m_bodyA.c_velocity.v.setVec2(R),this.m_bodyA.c_velocity.w=L,this.m_bodyB.c_velocity.v.setVec2(D),this.m_bodyB.c_velocity.w=V},_.prototype.solvePositionConstraints=function(A){var T=this.m_bodyA.c_position.c,B=this.m_bodyA.c_position.a,I=this.m_bodyB.c_position.c,C=this.m_bodyB.c_position.a,R=Rot.neo(B),L=Rot.neo(C),D=Rot.mulVec2(R,Vec2.sub(this.m_localAnchorA,this.m_localCenterA)),V=Rot.mulVec2(L,Vec2.sub(this.m_localAnchorB,this.m_localCenterB)),U=Vec2.zero();U.addCombine(1,I,1,V),U.subCombine(1,T,1,D);var z=Rot.mulVec2(R,this.m_localYAxisA),W=Vec2.crossVec2Vec2(Vec2.add(U,D),z),Y=Vec2.crossVec2Vec2(V,z),K=Vec2.dot(U,z),J=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,et=J!=0?-K/J:0,it=Vec2.mulNumVec2(et,z),rt=et*W,st=et*Y;return T.subMul(this.m_invMassA,it),B-=this.m_invIA*rt,I.addMul(this.m_invMassB,it),C+=this.m_invIB*st,this.m_bodyA.c_position.c.setVec2(T),this.m_bodyA.c_position.a=B,this.m_bodyB.c_position.c.setVec2(I),this.m_bodyB.c_position.a=C,math_abs(K)<=SettingsInternal.linearSlop},_.TYPE="wheel-joint",_}(Joint),_a,SID=0,SERIALIZE_REF_TYPES={World,Body,Joint,Fixture,Shape},DESERIALIZE_BY_REF_TYPE={Vec2,Vec3,World,Body,Joint,Fixture,Shape},DESERIALIZE_BY_TYPE_FIELD=(_a={},_a[Body.STATIC]=Body,_a[Body.DYNAMIC]=Body,_a[Body.KINEMATIC]=Body,_a[ChainShape.TYPE]=ChainShape,_a[PolygonShape.TYPE]=PolygonShape,_a[EdgeShape.TYPE]=EdgeShape,_a[CircleShape.TYPE]=CircleShape,_a[DistanceJoint.TYPE]=DistanceJoint,_a[FrictionJoint.TYPE]=FrictionJoint,_a[GearJoint.TYPE]=GearJoint,_a[MotorJoint.TYPE]=MotorJoint,_a[MouseJoint.TYPE]=MouseJoint,_a[PrismaticJoint.TYPE]=PrismaticJoint,_a[PulleyJoint.TYPE]=PulleyJoint,_a[RevoluteJoint.TYPE]=RevoluteJoint,_a[RopeJoint.TYPE]=RopeJoint,_a[WeldJoint.TYPE]=WeldJoint,_a[WheelJoint.TYPE]=WheelJoint,_a),DEFAULT_OPTIONS={rootClass:World,preSerialize:function(E){return E},postSerialize:function(E,_){return E},preDeserialize:function(E){return E},postDeserialize:function(E,_){return E}},Serializer=function(){function E(_){var A=this;this.toJson=function(T){var B=A.options.preSerialize,I=A.options.postSerialize,C=[],R=[T],L={};function D(Y,K){if(Y.__sid=Y.__sid||++SID,!L[Y.__sid]){R.push(Y);var J=C.length+R.length,et={refIndex:J,refType:K};L[Y.__sid]=et}return L[Y.__sid]}function V(Y){Y=B(Y);var K=Y._serialize();return K=I(K,Y),K}function U(Y,K){if(K===void 0&&(K=!1),typeof Y!="object"||Y===null)return Y;if(typeof Y._serialize=="function"){if(!K){for(var J in SERIALIZE_REF_TYPES)if(Y instanceof SERIALIZE_REF_TYPES[J])return D(Y,J)}Y=V(Y)}if(Array.isArray(Y)){for(var et=[],it=0;it<Y.length;it++)et[it]=U(Y[it]);Y=et}else{var et={};for(var it in Y)Y.hasOwnProperty(it)&&(et[it]=U(Y[it]));Y=et}return Y}for(;R.length;){var z=R.shift(),W=U(z,!0);C.push(W)}return C},this.fromJson=function(T){var B=A.options.preDeserialize,I=A.options.postDeserialize,C=A.options.rootClass,R={};function L(U,z,W){(!U||!U._deserialize)&&(U=DESERIALIZE_BY_TYPE_FIELD[z.type]);var Y=U&&U._deserialize;if(Y){z=B(z);var K=U._deserialize,J=K(z,W,D);return J=I(J,z),J}}function D(U,z,W){var Y=z.refIndex&&z.refType;if(!Y)return L(U,z,W);var K=z;DESERIALIZE_BY_REF_TYPE[K.refType]&&(U=DESERIALIZE_BY_REF_TYPE[K.refType]);var J=K.refIndex;if(!R[J]){var et=T[J],it=L(U,et,W);R[J]=it}return R[J]}var V=L(C,T[0],null);return V},this.options=__assign(__assign({},DEFAULT_OPTIONS),_)}return E}(),worldSerializer=new Serializer({rootClass:World});Serializer.fromJson=worldSerializer.fromJson;Serializer.toJson=worldSerializer.toJson;(function(){function E(){this.width=80,this.height=60,this.x=0,this.y=-10,this.scaleY=-1,this.hz=60,this.speed=1,this.ratio=16,this.background="#222222",this.activeKeys={},this.step=function(_,A){},this.keydown=function(_,A){},this.keyup=function(_,A){},this.statusText="",this.statusMap={}}return E.mount=function(_){throw new Error("Not implemented")},E.start=function(_){var A=E.mount();return A.start(_),A},E.prototype.status=function(_,A){if(typeof A<"u"){var T=_,B=A;typeof B!="function"&&typeof B!="object"&&(this.statusMap[T]=B)}else if(_&&typeof _=="object")for(var I in _){var C=_[I];typeof C!="function"&&typeof C!="object"&&(this.statusMap[I]=C)}else typeof _=="string"&&(this.statusText=_);var R=`
`,L=this.statusText||"";for(var D in this.statusMap){var V=this.statusMap[D];typeof V!="function"&&(L+=(L&&R)+D+": "+V)}this._status(L)},E.prototype.info=function(_){this._info(_)},E.prototype.color=function(_,A,T){return _=_*256|0,A=A*256|0,T=T*256|0,"rgb("+_+", "+A+", "+T+")"},E})();var BoxShape=function(E){__extends(_,E);function _(A,T,B,I){var C=this;return C instanceof _?(C=E.call(this)||this,C._setAsBox(A,T,B,I),C):new _(A,T,B,I)}return _.TYPE="polygon",_}(PolygonShape),Box=BoxShape;Contact.addType(CircleShape.TYPE,CircleShape.TYPE,CircleCircleContact);function CircleCircleContact(E,_,A,T,B,I,C){CollideCircles(E,A.getShape(),_,I.getShape(),B)}var pA=vec2(0,0),pB=vec2(0,0),CollideCircles=function(E,_,A,T,B){E.pointCount=0,transformVec2(pA,A,_.m_p),transformVec2(pB,B,T.m_p);var I=distSqrVec2(pB,pA),C=_.m_radius,R=T.m_radius,L=C+R;I>L*L||(E.type=ManifoldType.e_circles,copyVec2(E.localPoint,_.m_p),zeroVec2(E.localNormal),E.pointCount=1,copyVec2(E.points[0].localPoint,T.m_p),E.points[0].id.setFeatures(0,ContactFeatureType.e_vertex,0,ContactFeatureType.e_vertex))};Contact.addType(EdgeShape.TYPE,CircleShape.TYPE,EdgeCircleContact);Contact.addType(ChainShape.TYPE,CircleShape.TYPE,ChainCircleContact);function EdgeCircleContact(E,_,A,T,B,I,C){var R=A.getShape(),L=I.getShape();CollideEdgeCircle(E,R,_,L,B)}function ChainCircleContact(E,_,A,T,B,I,C){var R=A.getShape(),L=new EdgeShape;R.getChildEdge(L,T);var D=L,V=I.getShape();CollideEdgeCircle(E,D,_,V,B)}var e=vec2(0,0),e1=vec2(0,0),e2=vec2(0,0),Q=vec2(0,0),P=vec2(0,0),n$2=vec2(0,0),CollideEdgeCircle=function(E,_,A,T,B){E.pointCount=0,retransformVec2(Q,B,A,T.m_p);var I=_.m_vertex1,C=_.m_vertex2;subVec2(e,C,I);var R=dotVec2(e,C)-dotVec2(e,Q),L=dotVec2(e,Q)-dotVec2(e,I),D=_.m_radius+T.m_radius;if(L<=0){copyVec2(P,I);var V=distSqrVec2(Q,I);if(V>D*D)return;if(_.m_hasVertex0){var U=_.m_vertex0,z=I;subVec2(e1,z,U);var W=dotVec2(e1,z)-dotVec2(e1,Q);if(W>0)return}E.type=ManifoldType.e_circles,zeroVec2(E.localNormal),copyVec2(E.localPoint,P),E.pointCount=1,copyVec2(E.points[0].localPoint,T.m_p),E.points[0].id.setFeatures(0,ContactFeatureType.e_vertex,0,ContactFeatureType.e_vertex);return}if(R<=0){copyVec2(P,C);var Y=distSqrVec2(Q,P);if(Y>D*D)return;if(_.m_hasVertex3){var K=_.m_vertex3,J=C;subVec2(e2,K,J);var et=dotVec2(e2,Q)-dotVec2(e2,J);if(et>0)return}E.type=ManifoldType.e_circles,zeroVec2(E.localNormal),copyVec2(E.localPoint,P),E.pointCount=1,copyVec2(E.points[0].localPoint,T.m_p),E.points[0].id.setFeatures(1,ContactFeatureType.e_vertex,0,ContactFeatureType.e_vertex);return}var it=lengthSqrVec2(e);combine2Vec2(P,R/it,I,L/it,C);var rt=distSqrVec2(Q,P);rt>D*D||(crossNumVec2(n$2,1,e),dotVec2(n$2,Q)-dotVec2(n$2,I)<0&&negVec2(n$2),normalizeVec2(n$2),E.type=ManifoldType.e_faceA,copyVec2(E.localNormal,n$2),copyVec2(E.localPoint,I),E.pointCount=1,copyVec2(E.points[0].localPoint,T.m_p),E.points[0].id.setFeatures(0,ContactFeatureType.e_face,0,ContactFeatureType.e_vertex))},incidentEdge=[new ClipVertex,new ClipVertex],clipPoints1$1=[new ClipVertex,new ClipVertex],clipPoints2$1=[new ClipVertex,new ClipVertex],clipSegmentToLineNormal=vec2(0,0),v1=vec2(0,0),n$1=vec2(0,0),xf$1=transform(0,0,0),v11=vec2(0,0),v12=vec2(0,0),localTangent=vec2(0,0),localNormal=vec2(0,0),planePoint=vec2(0,0),tangent=vec2(0,0),normal$1=vec2(0,0),normal1$1=vec2(0,0);Contact.addType(PolygonShape.TYPE,PolygonShape.TYPE,PolygonContact);function PolygonContact(E,_,A,T,B,I,C){CollidePolygons(E,A.getShape(),_,I.getShape(),B)}function findMaxSeparation(E,_,A,T,B){var I=E.m_count,C=A.m_count,R=E.m_normals,L=E.m_vertices,D=A.m_vertices;detransformTransform(xf$1,T,_);for(var V=0,U=-1/0,z=0;z<I;++z){rotVec2(n$1,xf$1.q,R[z]),transformVec2(v1,xf$1,L[z]);for(var W=1/0,Y=0;Y<C;++Y){var K=dotVec2(n$1,D[Y])-dotVec2(n$1,v1);K<W&&(W=K)}W>U&&(U=W,V=z)}B.maxSeparation=U,B.bestIndex=V}function findIncidentEdge(E,_,A,T,B,I){var C=_.m_normals,R=B.m_count,L=B.m_vertices,D=B.m_normals;rerotVec2(normal1$1,I.q,A.q,C[T]);for(var V=0,U=1/0,z=0;z<R;++z){var W=dotVec2(normal1$1,D[z]);W<U&&(U=W,V=z)}var Y=V,K=Y+1<R?Y+1:0;transformVec2(E[0].v,I,L[Y]),E[0].id.setFeatures(T,ContactFeatureType.e_face,Y,ContactFeatureType.e_vertex),transformVec2(E[1].v,I,L[K]),E[1].id.setFeatures(T,ContactFeatureType.e_face,K,ContactFeatureType.e_vertex)}var maxSeparation={maxSeparation:0,bestIndex:0},CollidePolygons=function(E,_,A,T,B){E.pointCount=0;var I=_.m_radius+T.m_radius;findMaxSeparation(_,A,T,B,maxSeparation);var C=maxSeparation.bestIndex,R=maxSeparation.maxSeparation;if(!(R>I)){findMaxSeparation(T,B,_,A,maxSeparation);var L=maxSeparation.bestIndex,D=maxSeparation.maxSeparation;if(!(D>I)){var V,U,z,W,Y,K,J=.1*SettingsInternal.linearSlop;D>R+J?(V=T,U=_,z=B,W=A,Y=L,E.type=ManifoldType.e_faceB,K=!0):(V=_,U=T,z=A,W=B,Y=C,E.type=ManifoldType.e_faceA,K=!1),incidentEdge[0].recycle(),incidentEdge[1].recycle(),findIncidentEdge(incidentEdge,V,z,Y,U,W);var et=V.m_count,it=V.m_vertices,rt=Y,st=Y+1<et?Y+1:0;copyVec2(v11,it[rt]),copyVec2(v12,it[st]),subVec2(localTangent,v12,v11),normalizeVec2(localTangent),crossVec2Num(localNormal,localTangent,1),combine2Vec2(planePoint,.5,v11,.5,v12),rotVec2(tangent,z.q,localTangent),crossVec2Num(normal$1,tangent,1),transformVec2(v11,z,v11),transformVec2(v12,z,v12);var lt=dotVec2(normal$1,v11),ct=-dotVec2(tangent,v11)+I,at=dotVec2(tangent,v12)+I;clipPoints1$1[0].recycle(),clipPoints1$1[1].recycle(),clipPoints2$1[0].recycle(),clipPoints2$1[1].recycle(),setVec2(clipSegmentToLineNormal,-tangent.x,-tangent.y);var ht=clipSegmentToLine(clipPoints1$1,incidentEdge,clipSegmentToLineNormal,ct,rt);if(!(ht<2)){setVec2(clipSegmentToLineNormal,tangent.x,tangent.y);var mt=clipSegmentToLine(clipPoints2$1,clipPoints1$1,clipSegmentToLineNormal,at,st);if(!(mt<2)){copyVec2(E.localNormal,localNormal),copyVec2(E.localPoint,planePoint);for(var yt=0,Tt=0;Tt<clipPoints2$1.length;++Tt){var At=dotVec2(normal$1,clipPoints2$1[Tt].v)-lt;if(At<=I){var pt=E.points[yt];detransformVec2(pt.localPoint,W,clipPoints2$1[Tt].v),pt.id.set(clipPoints2$1[Tt].id),K&&pt.id.swapFeatures(),++yt}}E.pointCount=yt}}}}};Contact.addType(PolygonShape.TYPE,CircleShape.TYPE,PolygonCircleContact);function PolygonCircleContact(E,_,A,T,B,I,C){CollidePolygonCircle(E,A.getShape(),_,I.getShape(),B)}var cLocal=vec2(0,0),faceCenter=vec2(0,0),CollidePolygonCircle=function(E,_,A,T,B){E.pointCount=0,retransformVec2(cLocal,B,A,T.m_p);for(var I=0,C=-1/0,R=_.m_radius+T.m_radius,L=_.m_count,D=_.m_vertices,V=_.m_normals,U=0;U<L;++U){var z=dotVec2(V[U],cLocal)-dotVec2(V[U],D[U]);if(z>R)return;z>C&&(C=z,I=U)}var W=I,Y=W+1<L?W+1:0,K=D[W],J=D[Y];if(C<EPSILON){E.pointCount=1,E.type=ManifoldType.e_faceA,copyVec2(E.localNormal,V[I]),combine2Vec2(E.localPoint,.5,K,.5,J),copyVec2(E.points[0].localPoint,T.m_p),E.points[0].id.setFeatures(0,ContactFeatureType.e_vertex,0,ContactFeatureType.e_vertex);return}var et=dotVec2(cLocal,J)-dotVec2(cLocal,K)-dotVec2(K,J)+dotVec2(K,K),it=dotVec2(cLocal,K)-dotVec2(cLocal,J)-dotVec2(J,K)+dotVec2(J,J);if(et<=0){if(distSqrVec2(cLocal,K)>R*R)return;E.pointCount=1,E.type=ManifoldType.e_faceA,subVec2(E.localNormal,cLocal,K),normalizeVec2(E.localNormal),copyVec2(E.localPoint,K),copyVec2(E.points[0].localPoint,T.m_p),E.points[0].id.setFeatures(0,ContactFeatureType.e_vertex,0,ContactFeatureType.e_vertex)}else if(it<=0){if(distSqrVec2(cLocal,J)>R*R)return;E.pointCount=1,E.type=ManifoldType.e_faceA,subVec2(E.localNormal,cLocal,J),normalizeVec2(E.localNormal),copyVec2(E.localPoint,J),copyVec2(E.points[0].localPoint,T.m_p),E.points[0].id.setFeatures(0,ContactFeatureType.e_vertex,0,ContactFeatureType.e_vertex)}else{combine2Vec2(faceCenter,.5,K,.5,J);var rt=dotVec2(cLocal,V[W])-dotVec2(faceCenter,V[W]);if(rt>R)return;E.pointCount=1,E.type=ManifoldType.e_faceA,copyVec2(E.localNormal,V[W]),copyVec2(E.localPoint,faceCenter),copyVec2(E.points[0].localPoint,T.m_p),E.points[0].id.setFeatures(0,ContactFeatureType.e_vertex,0,ContactFeatureType.e_vertex)}},math_min=Math.min;Contact.addType(EdgeShape.TYPE,PolygonShape.TYPE,EdgePolygonContact);Contact.addType(ChainShape.TYPE,PolygonShape.TYPE,ChainPolygonContact);function EdgePolygonContact(E,_,A,T,B,I,C){CollideEdgePolygon(E,A.getShape(),_,I.getShape(),B)}var edge_reuse=new EdgeShape;function ChainPolygonContact(E,_,A,T,B,I,C){var R=A.getShape();R.getChildEdge(edge_reuse,T),CollideEdgePolygon(E,edge_reuse,_,I.getShape(),B)}var EPAxisType;(function(E){E[E.e_unknown=-1]="e_unknown",E[E.e_edgeA=1]="e_edgeA",E[E.e_edgeB=2]="e_edgeB"})(EPAxisType||(EPAxisType={}));var VertexType;(function(E){E[E.e_isolated=0]="e_isolated",E[E.e_concave=1]="e_concave",E[E.e_convex=2]="e_convex"})(VertexType||(VertexType={}));var EPAxis=function(){function E(){}return E}(),TempPolygon=function(){function E(){this.vertices=[],this.normals=[],this.count=0;for(var _=0;_<SettingsInternal.maxPolygonVertices;_++)this.vertices.push(vec2(0,0)),this.normals.push(vec2(0,0))}return E}(),ReferenceFace=function(){function E(){this.v1=vec2(0,0),this.v2=vec2(0,0),this.normal=vec2(0,0),this.sideNormal1=vec2(0,0),this.sideNormal2=vec2(0,0)}return E.prototype.recycle=function(){zeroVec2(this.v1),zeroVec2(this.v2),zeroVec2(this.normal),zeroVec2(this.sideNormal1),zeroVec2(this.sideNormal2)},E}(),clipPoints1=[new ClipVertex,new ClipVertex],clipPoints2=[new ClipVertex,new ClipVertex],ie=[new ClipVertex,new ClipVertex],edgeAxis=new EPAxis,polygonAxis=new EPAxis,polygonBA=new TempPolygon,rf=new ReferenceFace,centroidB=vec2(0,0),edge0=vec2(0,0),edge1=vec2(0,0),edge2=vec2(0,0),xf=transform(0,0,0),normal=vec2(0,0),normal0=vec2(0,0),normal1=vec2(0,0),normal2=vec2(0,0),lowerLimit=vec2(0,0),upperLimit=vec2(0,0),perp=vec2(0,0),n=vec2(0,0),CollideEdgePolygon=function(E,_,A,T,B){detransformTransform(xf,A,B),transformVec2(centroidB,xf,T.m_centroid);var I=_.m_vertex0,C=_.m_vertex1,R=_.m_vertex2,L=_.m_vertex3,D=_.m_hasVertex0,V=_.m_hasVertex3;subVec2(edge1,R,C),normalizeVec2(edge1),setVec2(normal1,edge1.y,-edge1.x);var U=dotVec2(normal1,centroidB)-dotVec2(normal1,C),z=0,W=0,Y=!1,K=!1;zeroVec2(normal0),zeroVec2(normal2),D&&(subVec2(edge0,C,I),normalizeVec2(edge0),setVec2(normal0,edge0.y,-edge0.x),Y=crossVec2Vec2(edge0,edge1)>=0,z=Vec2.dot(normal0,centroidB)-Vec2.dot(normal0,I)),V&&(subVec2(edge2,L,R),normalizeVec2(edge2),setVec2(normal2,edge2.y,-edge2.x),K=Vec2.crossVec2Vec2(edge1,edge2)>0,W=Vec2.dot(normal2,centroidB)-Vec2.dot(normal2,R));var J;zeroVec2(normal),zeroVec2(lowerLimit),zeroVec2(upperLimit),D&&V?Y&&K?(J=z>=0||U>=0||W>=0,J?(copyVec2(normal,normal1),copyVec2(lowerLimit,normal0),copyVec2(upperLimit,normal2)):(scaleVec2(normal,-1,normal1),scaleVec2(lowerLimit,-1,normal1),scaleVec2(upperLimit,-1,normal1))):Y?(J=z>=0||U>=0&&W>=0,J?(copyVec2(normal,normal1),copyVec2(lowerLimit,normal0),copyVec2(upperLimit,normal1)):(scaleVec2(normal,-1,normal1),scaleVec2(lowerLimit,-1,normal2),scaleVec2(upperLimit,-1,normal1))):K?(J=W>=0||z>=0&&U>=0,J?(copyVec2(normal,normal1),copyVec2(lowerLimit,normal1),copyVec2(upperLimit,normal2)):(scaleVec2(normal,-1,normal1),scaleVec2(lowerLimit,-1,normal1),scaleVec2(upperLimit,-1,normal0))):(J=z>=0&&U>=0&&W>=0,J?(copyVec2(normal,normal1),copyVec2(lowerLimit,normal1),copyVec2(upperLimit,normal1)):(scaleVec2(normal,-1,normal1),scaleVec2(lowerLimit,-1,normal2),scaleVec2(upperLimit,-1,normal0))):D?Y?(J=z>=0||U>=0,J?(copyVec2(normal,normal1),copyVec2(lowerLimit,normal0),scaleVec2(upperLimit,-1,normal1)):(scaleVec2(normal,-1,normal1),copyVec2(lowerLimit,normal1),scaleVec2(upperLimit,-1,normal1))):(J=z>=0&&U>=0,J?(copyVec2(normal,normal1),copyVec2(lowerLimit,normal1),scaleVec2(upperLimit,-1,normal1)):(scaleVec2(normal,-1,normal1),copyVec2(lowerLimit,normal1),scaleVec2(upperLimit,-1,normal0))):V?K?(J=U>=0||W>=0,J?(copyVec2(normal,normal1),scaleVec2(lowerLimit,-1,normal1),copyVec2(upperLimit,normal2)):(scaleVec2(normal,-1,normal1),scaleVec2(lowerLimit,-1,normal1),copyVec2(upperLimit,normal1))):(J=U>=0&&W>=0,J?(copyVec2(normal,normal1),scaleVec2(lowerLimit,-1,normal1),copyVec2(upperLimit,normal1)):(scaleVec2(normal,-1,normal1),scaleVec2(lowerLimit,-1,normal2),copyVec2(upperLimit,normal1))):(J=U>=0,J?(copyVec2(normal,normal1),scaleVec2(lowerLimit,-1,normal1),scaleVec2(upperLimit,-1,normal1)):(scaleVec2(normal,-1,normal1),copyVec2(lowerLimit,normal1),copyVec2(upperLimit,normal1))),polygonBA.count=T.m_count;for(var et=0;et<T.m_count;++et)transformVec2(polygonBA.vertices[et],xf,T.m_vertices[et]),rotVec2(polygonBA.normals[et],xf.q,T.m_normals[et]);var it=T.m_radius+_.m_radius;E.pointCount=0;{edgeAxis.type=EPAxisType.e_edgeA,edgeAxis.index=J?0:1,edgeAxis.separation=1/0;for(var et=0;et<polygonBA.count;++et){var rt=polygonBA.vertices[et],st=dotVec2(normal,rt)-dotVec2(normal,C);st<edgeAxis.separation&&(edgeAxis.separation=st)}}if(edgeAxis.type!=EPAxisType.e_unknown&&!(edgeAxis.separation>it)){{polygonAxis.type=EPAxisType.e_unknown,polygonAxis.index=-1,polygonAxis.separation=-1/0,setVec2(perp,-normal.y,normal.x);for(var et=0;et<polygonBA.count;++et){scaleVec2(n,-1,polygonBA.normals[et]);var lt=dotVec2(n,polygonBA.vertices[et])-dotVec2(n,C),ct=dotVec2(n,polygonBA.vertices[et])-dotVec2(n,R),st=math_min(lt,ct);if(st>it){polygonAxis.type=EPAxisType.e_edgeB,polygonAxis.index=et,polygonAxis.separation=st;break}if(dotVec2(n,perp)>=0){if(dotVec2(n,normal)-dotVec2(upperLimit,normal)<-SettingsInternal.angularSlop)continue}else if(dotVec2(n,normal)-dotVec2(lowerLimit,normal)<-SettingsInternal.angularSlop)continue;st>polygonAxis.separation&&(polygonAxis.type=EPAxisType.e_edgeB,polygonAxis.index=et,polygonAxis.separation=st)}}if(!(polygonAxis.type!=EPAxisType.e_unknown&&polygonAxis.separation>it)){var at=.98,ht=.001,mt;if(polygonAxis.type==EPAxisType.e_unknown?mt=edgeAxis:polygonAxis.separation>at*edgeAxis.separation+ht?mt=polygonAxis:mt=edgeAxis,ie[0].recycle(),ie[1].recycle(),mt.type==EPAxisType.e_edgeA){E.type=ManifoldType.e_faceA;for(var yt=0,Tt=dotVec2(normal,polygonBA.normals[0]),et=1;et<polygonBA.count;++et){var At=dotVec2(normal,polygonBA.normals[et]);At<Tt&&(Tt=At,yt=et)}var pt=yt,Et=pt+1<polygonBA.count?pt+1:0;copyVec2(ie[0].v,polygonBA.vertices[pt]),ie[0].id.setFeatures(0,ContactFeatureType.e_face,pt,ContactFeatureType.e_vertex),copyVec2(ie[1].v,polygonBA.vertices[Et]),ie[1].id.setFeatures(0,ContactFeatureType.e_face,Et,ContactFeatureType.e_vertex),J?(rf.i1=0,rf.i2=1,copyVec2(rf.v1,C),copyVec2(rf.v2,R),copyVec2(rf.normal,normal1)):(rf.i1=1,rf.i2=0,copyVec2(rf.v1,R),copyVec2(rf.v2,C),scaleVec2(rf.normal,-1,normal1))}else E.type=ManifoldType.e_faceB,copyVec2(ie[0].v,C),ie[0].id.setFeatures(0,ContactFeatureType.e_vertex,mt.index,ContactFeatureType.e_face),copyVec2(ie[1].v,R),ie[1].id.setFeatures(0,ContactFeatureType.e_vertex,mt.index,ContactFeatureType.e_face),rf.i1=mt.index,rf.i2=rf.i1+1<polygonBA.count?rf.i1+1:0,copyVec2(rf.v1,polygonBA.vertices[rf.i1]),copyVec2(rf.v2,polygonBA.vertices[rf.i2]),copyVec2(rf.normal,polygonBA.normals[rf.i1]);setVec2(rf.sideNormal1,rf.normal.y,-rf.normal.x),setVec2(rf.sideNormal2,-rf.sideNormal1.x,-rf.sideNormal1.y),rf.sideOffset1=dotVec2(rf.sideNormal1,rf.v1),rf.sideOffset2=dotVec2(rf.sideNormal2,rf.v2),clipPoints1[0].recycle(),clipPoints1[1].recycle(),clipPoints2[0].recycle(),clipPoints2[1].recycle();var Vt=clipSegmentToLine(clipPoints1,ie,rf.sideNormal1,rf.sideOffset1,rf.i1);if(!(Vt<SettingsInternal.maxManifoldPoints)){var Ot=clipSegmentToLine(clipPoints2,clipPoints1,rf.sideNormal2,rf.sideOffset2,rf.i2);if(!(Ot<SettingsInternal.maxManifoldPoints)){mt.type==EPAxisType.e_edgeA?(copyVec2(E.localNormal,rf.normal),copyVec2(E.localPoint,rf.v1)):(copyVec2(E.localNormal,T.m_normals[rf.i1]),copyVec2(E.localPoint,T.m_vertices[rf.i1]));for(var gt=0,et=0;et<SettingsInternal.maxManifoldPoints;++et){var bt=dotVec2(rf.normal,clipPoints2[et].v)-dotVec2(rf.normal,rf.v1);if(bt<=it){var $t=E.points[gt];mt.type==EPAxisType.e_edgeA?(detransformVec2($t.localPoint,xf,clipPoints2[et].v),$t.id.set(clipPoints2[et].id)):(copyVec2($t.localPoint,clipPoints2[et].v),$t.id.set(clipPoints2[et].id),$t.id.swapFeatures()),++gt}}E.pointCount=gt}}}}};function _assertThisInitialized(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function _inheritsLoose(E,_){E.prototype=Object.create(_.prototype),E.prototype.constructor=E,E.__proto__=_}/*!
 * GSAP 3.12.4
 * https://gsap.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_suppressOverwrites,_reverting$1,_context,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString=function E(_){return typeof _=="string"},_isFunction=function E(_){return typeof _=="function"},_isNumber=function E(_){return typeof _=="number"},_isUndefined=function E(_){return typeof _>"u"},_isObject=function E(_){return typeof _=="object"},_isNotFalse=function E(_){return _!==!1},_windowExists$1=function E(){return typeof window<"u"},_isFuncOrString=function E(_){return _isFunction(_)||_isString(_)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$1,_coreInitted,_doc$1,_globals={},_installScope={},_coreReady,_install=function E(_){return(_installScope=_merge(_,_globals))&&gsap},_missingPlugin=function E(_,A){return console.warn("Invalid property",_,"set to",A,"Missing plugin? gsap.registerPlugin()")},_warn=function E(_,A){return!A&&console.warn(_)},_addGlobal=function E(_,A){return _&&(_globals[_]=A)&&_installScope&&(_installScope[_]=A)||_globals},_emptyFunc=function E(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function E(_){var A=_[0],T,B;if(_isObject(A)||_isFunction(A)||(_=[_]),!(T=(A._gsap||{}).harness)){for(B=_harnessPlugins.length;B--&&!_harnessPlugins[B].targetTest(A););T=_harnessPlugins[B]}for(B=_.length;B--;)_[B]&&(_[B]._gsap||(_[B]._gsap=new GSCache(_[B],T)))||_.splice(B,1);return _},_getCache=function E(_){return _._gsap||_harness(toArray(_))[0]._gsap},_getProperty=function E(_,A,T){return(T=_[A])&&_isFunction(T)?_[A]():_isUndefined(T)&&_.getAttribute&&_.getAttribute(A)||T},_forEachName=function E(_,A){return(_=_.split(",")).forEach(A)||_},_round=function E(_){return Math.round(_*1e5)/1e5||0},_roundPrecise=function E(_){return Math.round(_*1e7)/1e7||0},_parseRelative=function E(_,A){var T=A.charAt(0),B=parseFloat(A.substr(2));return _=parseFloat(_),T==="+"?_+B:T==="-"?_-B:T==="*"?_*B:_/B},_arrayContainsAny=function E(_,A){for(var T=A.length,B=0;_.indexOf(A[B])<0&&++B<T;);return B<T},_lazyRender=function E(){var _=_lazyTweens.length,A=_lazyTweens.slice(0),T,B;for(_lazyLookup={},_lazyTweens.length=0,T=0;T<_;T++)B=A[T],B&&B._lazy&&(B.render(B._lazy[0],B._lazy[1],!0)._lazy=0)},_lazySafeRender=function E(_,A,T,B){_lazyTweens.length&&!_reverting$1&&_lazyRender(),_.render(A,T,B||_reverting$1&&A<0&&(_._initted||_._startAt)),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function E(_){var A=parseFloat(_);return(A||A===0)&&(_+"").match(_delimitedValueExp).length<2?A:_isString(_)?_.trim():_},_passThrough=function E(_){return _},_setDefaults=function E(_,A){for(var T in A)T in _||(_[T]=A[T]);return _},_setKeyframeDefaults=function E(_){return function(A,T){for(var B in T)B in A||B==="duration"&&_||B==="ease"||(A[B]=T[B])}},_merge=function E(_,A){for(var T in A)_[T]=A[T];return _},_mergeDeep=function E(_,A){for(var T in A)T!=="__proto__"&&T!=="constructor"&&T!=="prototype"&&(_[T]=_isObject(A[T])?E(_[T]||(_[T]={}),A[T]):A[T]);return _},_copyExcluding=function E(_,A){var T={},B;for(B in _)B in A||(T[B]=_[B]);return T},_inheritDefaults=function E(_){var A=_.parent||_globalTimeline,T=_.keyframes?_setKeyframeDefaults(_isArray(_.keyframes)):_setDefaults;if(_isNotFalse(_.inherit))for(;A;)T(_,A.vars.defaults),A=A.parent||A._dp;return _},_arraysMatch=function E(_,A){for(var T=_.length,B=T===A.length;B&&T--&&_[T]===A[T];);return T<0},_addLinkedListItem=function E(_,A,T,B,I){T===void 0&&(T="_first"),B===void 0&&(B="_last");var C=_[B],R;if(I)for(R=A[I];C&&C[I]>R;)C=C._prev;return C?(A._next=C._next,C._next=A):(A._next=_[T],_[T]=A),A._next?A._next._prev=A:_[B]=A,A._prev=C,A.parent=A._dp=_,A},_removeLinkedListItem=function E(_,A,T,B){T===void 0&&(T="_first"),B===void 0&&(B="_last");var I=A._prev,C=A._next;I?I._next=C:_[T]===A&&(_[T]=C),C?C._prev=I:_[B]===A&&(_[B]=I),A._next=A._prev=A.parent=null},_removeFromParent=function E(_,A){_.parent&&(!A||_.parent.autoRemoveChildren)&&_.parent.remove&&_.parent.remove(_),_._act=0},_uncache=function E(_,A){if(_&&(!A||A._end>_._dur||A._start<0))for(var T=_;T;)T._dirty=1,T=T.parent;return _},_recacheAncestors=function E(_){for(var A=_.parent;A&&A.parent;)A._dirty=1,A.totalDuration(),A=A.parent;return _},_rewindStartAt=function E(_,A,T,B){return _._startAt&&(_reverting$1?_._startAt.revert(_revertConfigNoKill):_.vars.immediateRender&&!_.vars.autoRevert||_._startAt.render(A,!0,B))},_hasNoPausedAncestors=function E(_){return!_||_._ts&&E(_.parent)},_elapsedCycleDuration=function E(_){return _._repeat?_animationCycle(_._tTime,_=_.duration()+_._rDelay)*_:0},_animationCycle=function E(_,A){var T=Math.floor(_/=A);return _&&T===_?T-1:T},_parentToChildTotalTime=function E(_,A){return(_-A._start)*A._ts+(A._ts>=0?0:A._dirty?A.totalDuration():A._tDur)},_setEnd=function E(_){return _._end=_roundPrecise(_._start+(_._tDur/Math.abs(_._ts||_._rts||_tinyNum)||0))},_alignPlayhead=function E(_,A){var T=_._dp;return T&&T.smoothChildTiming&&_._ts&&(_._start=_roundPrecise(T._time-(_._ts>0?A/_._ts:((_._dirty?_.totalDuration():_._tDur)-A)/-_._ts)),_setEnd(_),T._dirty||_uncache(T,_)),_},_postAddChecks=function E(_,A){var T;if((A._time||!A._dur&&A._initted||A._start<_._time&&(A._dur||!A.add))&&(T=_parentToChildTotalTime(_.rawTime(),A),(!A._dur||_clamp(0,A.totalDuration(),T)-A._tTime>_tinyNum)&&A.render(T,!0)),_uncache(_,A)._dp&&_._initted&&_._time>=_._dur&&_._ts){if(_._dur<_.duration())for(T=_;T._dp;)T.rawTime()>=0&&T.totalTime(T._tTime),T=T._dp;_._zTime=-_tinyNum}},_addToTimeline=function E(_,A,T,B){return A.parent&&_removeFromParent(A),A._start=_roundPrecise((_isNumber(T)?T:T||_!==_globalTimeline?_parsePosition(_,T,A):_._time)+A._delay),A._end=_roundPrecise(A._start+(A.totalDuration()/Math.abs(A.timeScale())||0)),_addLinkedListItem(_,A,"_first","_last",_._sort?"_start":0),_isFromOrFromStart(A)||(_._recent=A),B||_postAddChecks(_,A),_._ts<0&&_alignPlayhead(_,_._tTime),_},_scrollTrigger=function E(_,A){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",A))&&_globals.ScrollTrigger.create(A,_)},_attemptInitTween=function E(_,A,T,B,I){if(_initTween(_,A,I),!_._initted)return 1;if(!T&&_._pt&&!_reverting$1&&(_._dur&&_.vars.lazy!==!1||!_._dur&&_.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(_),_._lazy=[I,B],1},_parentPlayheadIsBeforeStart=function E(_){var A=_.parent;return A&&A._ts&&A._initted&&!A._lock&&(A.rawTime()<0||E(A))},_isFromOrFromStart=function E(_){var A=_.data;return A==="isFromStart"||A==="isStart"},_renderZeroDurationTween=function E(_,A,T,B){var I=_.ratio,C=A<0||!A&&(!_._start&&_parentPlayheadIsBeforeStart(_)&&!(!_._initted&&_isFromOrFromStart(_))||(_._ts<0||_._dp._ts<0)&&!_isFromOrFromStart(_))?0:1,R=_._rDelay,L=0,D,V,U;if(R&&_._repeat&&(L=_clamp(0,_._tDur,A),V=_animationCycle(L,R),_._yoyo&&V&1&&(C=1-C),V!==_animationCycle(_._tTime,R)&&(I=1-C,_.vars.repeatRefresh&&_._initted&&_.invalidate())),C!==I||_reverting$1||B||_._zTime===_tinyNum||!A&&_._zTime){if(!_._initted&&_attemptInitTween(_,A,B,T,L))return;for(U=_._zTime,_._zTime=A||(T?_tinyNum:0),T||(T=A&&!U),_.ratio=C,_._from&&(C=1-C),_._time=0,_._tTime=L,D=_._pt;D;)D.r(C,D.d),D=D._next;A<0&&_rewindStartAt(_,A,T,!0),_._onUpdate&&!T&&_callback(_,"onUpdate"),L&&_._repeat&&!T&&_.parent&&_callback(_,"onRepeat"),(A>=_._tDur||A<0)&&_.ratio===C&&(C&&_removeFromParent(_,1),!T&&!_reverting$1&&(_callback(_,C?"onComplete":"onReverseComplete",!0),_._prom&&_._prom()))}else _._zTime||(_._zTime=A)},_findNextPauseTween=function E(_,A,T){var B;if(T>A)for(B=_._first;B&&B._start<=T;){if(B.data==="isPause"&&B._start>A)return B;B=B._next}else for(B=_._last;B&&B._start>=T;){if(B.data==="isPause"&&B._start<A)return B;B=B._prev}},_setDuration=function E(_,A,T,B){var I=_._repeat,C=_roundPrecise(A)||0,R=_._tTime/_._tDur;return R&&!B&&(_._time*=C/_._dur),_._dur=C,_._tDur=I?I<0?1e10:_roundPrecise(C*(I+1)+_._rDelay*I):C,R>0&&!B&&_alignPlayhead(_,_._tTime=_._tDur*R),_.parent&&_setEnd(_),T||_uncache(_.parent,_),_},_onUpdateTotalDuration=function E(_){return _ instanceof Timeline?_uncache(_):_setDuration(_,_._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function E(_,A,T){var B=_.labels,I=_._recent||_zeroPosition,C=_.duration()>=_bigNum$1?I.endTime(!1):_._dur,R,L,D;return _isString(A)&&(isNaN(A)||A in B)?(L=A.charAt(0),D=A.substr(-1)==="%",R=A.indexOf("="),L==="<"||L===">"?(R>=0&&(A=A.replace(/=/,"")),(L==="<"?I._start:I.endTime(I._repeat>=0))+(parseFloat(A.substr(1))||0)*(D?(R<0?I:T).totalDuration()/100:1)):R<0?(A in B||(B[A]=C),B[A]):(L=parseFloat(A.charAt(R-1)+A.substr(R+1)),D&&T&&(L=L/100*(_isArray(T)?T[0]:T).totalDuration()),R>1?E(_,A.substr(0,R-1),T)+L:C+L)):A==null?C:+A},_createTweenType=function E(_,A,T){var B=_isNumber(A[1]),I=(B?2:1)+(_<2?0:1),C=A[I],R,L;if(B&&(C.duration=A[1]),C.parent=T,_){for(R=C,L=T;L&&!("immediateRender"in R);)R=L.vars.defaults||{},L=_isNotFalse(L.vars.inherit)&&L.parent;C.immediateRender=_isNotFalse(R.immediateRender),_<2?C.runBackwards=1:C.startAt=A[I-1]}return new Tween(A[0],C,A[I+1])},_conditionalReturn=function E(_,A){return _||_===0?A(_):A},_clamp=function E(_,A,T){return T<_?_:T>A?A:T},getUnit=function E(_,A){return!_isString(_)||!(A=_unitExp.exec(_))?"":A[1]},clamp=function E(_,A,T){return _conditionalReturn(T,function(B){return _clamp(_,A,B)})},_slice=[].slice,_isArrayLike=function E(_,A){return _&&_isObject(_)&&"length"in _&&(!A&&!_.length||_.length-1 in _&&_isObject(_[0]))&&!_.nodeType&&_!==_win$1},_flatten=function E(_,A,T){return T===void 0&&(T=[]),_.forEach(function(B){var I;return _isString(B)&&!A||_isArrayLike(B,1)?(I=T).push.apply(I,toArray(B)):T.push(B)})||T},toArray=function E(_,A,T){return _context&&!A&&_context.selector?_context.selector(_):_isString(_)&&!T&&(_coreInitted||!_wake())?_slice.call((A||_doc$1).querySelectorAll(_),0):_isArray(_)?_flatten(_,T):_isArrayLike(_)?_slice.call(_,0):_?[_]:[]},selector=function E(_){return _=toArray(_)[0]||_warn("Invalid scope")||{},function(A){var T=_.current||_.nativeElement||_;return toArray(A,T.querySelectorAll?T:T===_?_warn("Invalid scope")||_doc$1.createElement("div"):_)}},shuffle=function E(_){return _.sort(function(){return .5-Math.random()})},distribute=function E(_){if(_isFunction(_))return _;var A=_isObject(_)?_:{each:_},T=_parseEase(A.ease),B=A.from||0,I=parseFloat(A.base)||0,C={},R=B>0&&B<1,L=isNaN(B)||R,D=A.axis,V=B,U=B;return _isString(B)?V=U={center:.5,edges:.5,end:1}[B]||0:!R&&L&&(V=B[0],U=B[1]),function(z,W,Y){var K=(Y||A).length,J=C[K],et,it,rt,st,lt,ct,at,ht,mt;if(!J){if(mt=A.grid==="auto"?0:(A.grid||[1,_bigNum$1])[1],!mt){for(at=-_bigNum$1;at<(at=Y[mt++].getBoundingClientRect().left)&&mt<K;);mt<K&&mt--}for(J=C[K]=[],et=L?Math.min(mt,K)*V-.5:B%mt,it=mt===_bigNum$1?0:L?K*U/mt-.5:B/mt|0,at=0,ht=_bigNum$1,ct=0;ct<K;ct++)rt=ct%mt-et,st=it-(ct/mt|0),J[ct]=lt=D?Math.abs(D==="y"?st:rt):_sqrt(rt*rt+st*st),lt>at&&(at=lt),lt<ht&&(ht=lt);B==="random"&&shuffle(J),J.max=at-ht,J.min=ht,J.v=K=(parseFloat(A.amount)||parseFloat(A.each)*(mt>K?K-1:D?D==="y"?K/mt:mt:Math.max(mt,K/mt))||0)*(B==="edges"?-1:1),J.b=K<0?I-K:I,J.u=getUnit(A.amount||A.each)||0,T=T&&K<0?_invertEase(T):T}return K=(J[z]-J.min)/J.max||0,_roundPrecise(J.b+(T?T(K):K)*J.v)+J.u}},_roundModifier=function E(_){var A=Math.pow(10,((_+"").split(".")[1]||"").length);return function(T){var B=_roundPrecise(Math.round(parseFloat(T)/_)*_*A);return(B-B%1)/A+(_isNumber(T)?0:getUnit(T))}},snap=function E(_,A){var T=_isArray(_),B,I;return!T&&_isObject(_)&&(B=T=_.radius||_bigNum$1,_.values?(_=toArray(_.values),(I=!_isNumber(_[0]))&&(B*=B)):_=_roundModifier(_.increment)),_conditionalReturn(A,T?_isFunction(_)?function(C){return I=_(C),Math.abs(I-C)<=B?I:C}:function(C){for(var R=parseFloat(I?C.x:C),L=parseFloat(I?C.y:0),D=_bigNum$1,V=0,U=_.length,z,W;U--;)I?(z=_[U].x-R,W=_[U].y-L,z=z*z+W*W):z=Math.abs(_[U]-R),z<D&&(D=z,V=U);return V=!B||D<=B?_[V]:C,I||V===C||_isNumber(C)?V:V+getUnit(C)}:_roundModifier(_))},random=function E(_,A,T,B){return _conditionalReturn(_isArray(_)?!A:T===!0?!!(T=0):!B,function(){return _isArray(_)?_[~~(Math.random()*_.length)]:(T=T||1e-5)&&(B=T<1?Math.pow(10,(T+"").length-2):1)&&Math.floor(Math.round((_-T/2+Math.random()*(A-_+T*.99))/T)*T*B)/B})},pipe=function E(){for(var _=arguments.length,A=new Array(_),T=0;T<_;T++)A[T]=arguments[T];return function(B){return A.reduce(function(I,C){return C(I)},B)}},unitize=function E(_,A){return function(T){return _(parseFloat(T))+(A||getUnit(T))}},normalize=function E(_,A,T){return mapRange(_,A,0,1,T)},_wrapArray=function E(_,A,T){return _conditionalReturn(T,function(B){return _[~~A(B)]})},wrap=function E(_,A,T){var B=A-_;return _isArray(_)?_wrapArray(_,E(0,_.length),A):_conditionalReturn(T,function(I){return(B+(I-_)%B)%B+_})},wrapYoyo=function E(_,A,T){var B=A-_,I=B*2;return _isArray(_)?_wrapArray(_,E(0,_.length-1),A):_conditionalReturn(T,function(C){return C=(I+(C-_)%I)%I||0,_+(C>B?I-C:C)})},_replaceRandom=function E(_){for(var A=0,T="",B,I,C,R;~(B=_.indexOf("random(",A));)C=_.indexOf(")",B),R=_.charAt(B+7)==="[",I=_.substr(B+7,C-B-7).match(R?_delimitedValueExp:_strictNumExp),T+=_.substr(A,B-A)+random(R?I:+I[0],R?0:+I[1],+I[2]||1e-5),A=C+1;return T+_.substr(A,_.length-A)},mapRange=function E(_,A,T,B,I){var C=A-_,R=B-T;return _conditionalReturn(I,function(L){return T+((L-_)/C*R||0)})},interpolate=function E(_,A,T,B){var I=isNaN(_+A)?0:function(W){return(1-W)*_+W*A};if(!I){var C=_isString(_),R={},L,D,V,U,z;if(T===!0&&(B=1)&&(T=null),C)_={p:_},A={p:A};else if(_isArray(_)&&!_isArray(A)){for(V=[],U=_.length,z=U-2,D=1;D<U;D++)V.push(E(_[D-1],_[D]));U--,I=function(Y){Y*=U;var K=Math.min(z,~~Y);return V[K](Y-K)},T=A}else B||(_=_merge(_isArray(_)?[]:{},_));if(!V){for(L in A)_addPropTween.call(R,_,L,"get",A[L]);I=function(Y){return _renderPropTweens(Y,R)||(C?_.p:_)}}}return _conditionalReturn(T,I)},_getLabelInDirection=function E(_,A,T){var B=_.labels,I=_bigNum$1,C,R,L;for(C in B)R=B[C]-A,R<0==!!T&&R&&I>(R=Math.abs(R))&&(L=C,I=R);return L},_callback=function E(_,A,T){var B=_.vars,I=B[A],C=_context,R=_._ctx,L,D,V;if(I)return L=B[A+"Params"],D=B.callbackScope||_,T&&_lazyTweens.length&&_lazyRender(),R&&(_context=R),V=L?I.apply(D,L):I.call(D),_context=C,V},_interrupt=function E(_){return _removeFromParent(_),_.scrollTrigger&&_.scrollTrigger.kill(!!_reverting$1),_.progress()<1&&_callback(_,"onInterrupt"),_},_quickTween,_registerPluginQueue=[],_createPlugin=function E(_){if(_windowExists$1()&&_){_=!_.name&&_.default||_;var A=_.name,T=_isFunction(_),B=A&&!T&&_.init?function(){this._props=[]}:_,I={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},C={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),_!==B){if(_plugins[A])return;_setDefaults(B,_setDefaults(_copyExcluding(_,I),C)),_merge(B.prototype,_merge(I,_copyExcluding(_,C))),_plugins[B.prop=A]=B,_.targetTest&&(_harnessPlugins.push(B),_reservedProps[A]=1),A=(A==="css"?"CSS":A.charAt(0).toUpperCase()+A.substr(1))+"Plugin"}_addGlobal(A,B),_.register&&_.register(gsap,B,PropTween)}else _&&_registerPluginQueue.push(_)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function E(_,A,T){return _+=_<0?1:_>1?-1:0,(_*6<1?A+(T-A)*_*6:_<.5?T:_*3<2?A+(T-A)*(2/3-_)*6:A)*_255+.5|0},splitColor=function E(_,A,T){var B=_?_isNumber(_)?[_>>16,_>>8&_255,_&_255]:0:_colorLookup.black,I,C,R,L,D,V,U,z,W,Y;if(!B){if(_.substr(-1)===","&&(_=_.substr(0,_.length-1)),_colorLookup[_])B=_colorLookup[_];else if(_.charAt(0)==="#"){if(_.length<6&&(I=_.charAt(1),C=_.charAt(2),R=_.charAt(3),_="#"+I+I+C+C+R+R+(_.length===5?_.charAt(4)+_.charAt(4):"")),_.length===9)return B=parseInt(_.substr(1,6),16),[B>>16,B>>8&_255,B&_255,parseInt(_.substr(7),16)/255];_=parseInt(_.substr(1),16),B=[_>>16,_>>8&_255,_&_255]}else if(_.substr(0,3)==="hsl"){if(B=Y=_.match(_strictNumExp),!A)L=+B[0]%360/360,D=+B[1]/100,V=+B[2]/100,C=V<=.5?V*(D+1):V+D-V*D,I=V*2-C,B.length>3&&(B[3]*=1),B[0]=_hue(L+1/3,I,C),B[1]=_hue(L,I,C),B[2]=_hue(L-1/3,I,C);else if(~_.indexOf("="))return B=_.match(_numExp),T&&B.length<4&&(B[3]=1),B}else B=_.match(_strictNumExp)||_colorLookup.transparent;B=B.map(Number)}return A&&!Y&&(I=B[0]/_255,C=B[1]/_255,R=B[2]/_255,U=Math.max(I,C,R),z=Math.min(I,C,R),V=(U+z)/2,U===z?L=D=0:(W=U-z,D=V>.5?W/(2-U-z):W/(U+z),L=U===I?(C-R)/W+(C<R?6:0):U===C?(R-I)/W+2:(I-C)/W+4,L*=60),B[0]=~~(L+.5),B[1]=~~(D*100+.5),B[2]=~~(V*100+.5)),T&&B.length<4&&(B[3]=1),B},_colorOrderData=function E(_){var A=[],T=[],B=-1;return _.split(_colorExp).forEach(function(I){var C=I.match(_numWithUnitExp)||[];A.push.apply(A,C),T.push(B+=C.length+1)}),A.c=T,A},_formatColors=function E(_,A,T){var B="",I=(_+B).match(_colorExp),C=A?"hsla(":"rgba(",R=0,L,D,V,U;if(!I)return _;if(I=I.map(function(z){return(z=splitColor(z,A,1))&&C+(A?z[0]+","+z[1]+"%,"+z[2]+"%,"+z[3]:z.join(","))+")"}),T&&(V=_colorOrderData(_),L=T.c,L.join(B)!==V.c.join(B)))for(D=_.replace(_colorExp,"1").split(_numWithUnitExp),U=D.length-1;R<U;R++)B+=D[R]+(~L.indexOf(R)?I.shift()||C+"0,0,0,0)":(V.length?V:I.length?I:T).shift());if(!D)for(D=_.split(_colorExp),U=D.length-1;R<U;R++)B+=D[R]+I[R];return B+D[U]},_colorExp=function(){var E="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",_;for(_ in _colorLookup)E+="|"+_+"\\b";return new RegExp(E+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function E(_){var A=_.join(" "),T;if(_colorExp.lastIndex=0,_colorExp.test(A))return T=_hslExp.test(A),_[1]=_formatColors(_[1],T),_[0]=_formatColors(_[0],T,_colorOrderData(_[1])),!0},_tickerActive,_ticker=function(){var E=Date.now,_=500,A=33,T=E(),B=T,I=1e3/240,C=I,R=[],L,D,V,U,z,W,Y=function K(J){var et=E()-B,it=J===!0,rt,st,lt,ct;if(et>_&&(T+=et-A),B+=et,lt=B-T,rt=lt-C,(rt>0||it)&&(ct=++U.frame,z=lt-U.time*1e3,U.time=lt=lt/1e3,C+=rt+(rt>=I?4:I-rt),st=1),it||(L=D(K)),st)for(W=0;W<R.length;W++)R[W](lt,z,ct,J)};return U={time:0,frame:0,tick:function(){Y(!0)},deltaRatio:function(J){return z/(1e3/(J||60))},wake:function(){_coreReady&&(!_coreInitted&&_windowExists$1()&&(_win$1=_coreInitted=window,_doc$1=_win$1.document||{},_globals.gsap=gsap,(_win$1.gsapVersions||(_win$1.gsapVersions=[])).push(gsap.version),_install(_installScope||_win$1.GreenSockGlobals||!_win$1.gsap&&_win$1||{}),V=_win$1.requestAnimationFrame,_registerPluginQueue.forEach(_createPlugin)),L&&U.sleep(),D=V||function(J){return setTimeout(J,C-U.time*1e3+1|0)},_tickerActive=1,Y(2))},sleep:function(){(V?_win$1.cancelAnimationFrame:clearTimeout)(L),_tickerActive=0,D=_emptyFunc},lagSmoothing:function(J,et){_=J||1/0,A=Math.min(et||33,_)},fps:function(J){I=1e3/(J||240),C=U.time*1e3+I},add:function(J,et,it){var rt=et?function(st,lt,ct,at){J(st,lt,ct,at),U.remove(rt)}:J;return U.remove(J),R[it?"unshift":"push"](rt),_wake(),rt},remove:function(J,et){~(et=R.indexOf(J))&&R.splice(et,1)&&W>=et&&W--},_listeners:R},U}(),_wake=function E(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function E(_){for(var A={},T=_.substr(1,_.length-3).split(":"),B=T[0],I=1,C=T.length,R,L,D;I<C;I++)L=T[I],R=I!==C-1?L.lastIndexOf(","):L.length,D=L.substr(0,R),A[B]=isNaN(D)?D.replace(_quotesExp,"").trim():+D,B=L.substr(R+1).trim();return A},_valueInParentheses=function E(_){var A=_.indexOf("(")+1,T=_.indexOf(")"),B=_.indexOf("(",A);return _.substring(A,~B&&B<T?_.indexOf(")",T+1):T)},_configEaseFromString=function E(_){var A=(_+"").split("("),T=_easeMap[A[0]];return T&&A.length>1&&T.config?T.config.apply(null,~_.indexOf("{")?[_parseObjectInString(A[1])]:_valueInParentheses(_).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(_)?_easeMap._CE("",_):T},_invertEase=function E(_){return function(A){return 1-_(1-A)}},_propagateYoyoEase=function E(_,A){for(var T=_._first,B;T;)T instanceof Timeline?E(T,A):T.vars.yoyoEase&&(!T._yoyo||!T._repeat)&&T._yoyo!==A&&(T.timeline?E(T.timeline,A):(B=T._ease,T._ease=T._yEase,T._yEase=B,T._yoyo=A)),T=T._next},_parseEase=function E(_,A){return _&&(_isFunction(_)?_:_easeMap[_]||_configEaseFromString(_))||A},_insertEase=function E(_,A,T,B){T===void 0&&(T=function(L){return 1-A(1-L)}),B===void 0&&(B=function(L){return L<.5?A(L*2)/2:1-A((1-L)*2)/2});var I={easeIn:A,easeOut:T,easeInOut:B},C;return _forEachName(_,function(R){_easeMap[R]=_globals[R]=I,_easeMap[C=R.toLowerCase()]=T;for(var L in I)_easeMap[C+(L==="easeIn"?".in":L==="easeOut"?".out":".inOut")]=_easeMap[R+"."+L]=I[L]}),I},_easeInOutFromOut=function E(_){return function(A){return A<.5?(1-_(1-A*2))/2:.5+_((A-.5)*2)/2}},_configElastic=function E(_,A,T){var B=A>=1?A:1,I=(T||(_?.3:.45))/(A<1?A:1),C=I/_2PI*(Math.asin(1/B)||0),R=function(V){return V===1?1:B*Math.pow(2,-10*V)*_sin((V-C)*I)+1},L=_==="out"?R:_==="in"?function(D){return 1-R(1-D)}:_easeInOutFromOut(R);return I=_2PI/I,L.config=function(D,V){return E(_,D,V)},L},_configBack=function E(_,A){A===void 0&&(A=1.70158);var T=function(C){return C?--C*C*((A+1)*C+A)+1:0},B=_==="out"?T:_==="in"?function(I){return 1-T(1-I)}:_easeInOutFromOut(T);return B.config=function(I){return E(_,I)},B};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(E,_){var A=_<5?_+1:_;_insertEase(E+",Power"+(A-1),_?function(T){return Math.pow(T,A)}:function(T){return T},function(T){return 1-Math.pow(1-T,A)},function(T){return T<.5?Math.pow(T*2,A)/2:1-Math.pow((1-T)*2,A)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(E,_){var A=1/_,T=2*A,B=2.5*A,I=function(R){return R<A?E*R*R:R<T?E*Math.pow(R-1.5/_,2)+.75:R<B?E*(R-=2.25/_)*R+.9375:E*Math.pow(R-2.625/_,2)+.984375};_insertEase("Bounce",function(C){return 1-I(1-C)},I)})(7.5625,2.75);_insertEase("Expo",function(E){return E?Math.pow(2,10*(E-1)):0});_insertEase("Circ",function(E){return-(_sqrt(1-E*E)-1)});_insertEase("Sine",function(E){return E===1?1:-_cos(E*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function E(_,A){_===void 0&&(_=1);var T=1/_,B=_+(A?0:1),I=A?1:0,C=1-_tinyNum;return function(R){return((B*_clamp(0,C,R)|0)+I)*T}}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(E){return _callbackNames+=E+","+E+"Params,"});var GSCache=function E(_,A){this.id=_gsID++,_._gsap=this,this.target=_,this.harness=A,this.get=A?A.get:_getProperty,this.set=A?A.getSetter:_getSetter},Animation=function(){function E(A){this.vars=A,this._delay=+A.delay||0,(this._repeat=A.repeat===1/0?-2:A.repeat||0)&&(this._rDelay=A.repeatDelay||0,this._yoyo=!!A.yoyo||!!A.yoyoEase),this._ts=1,_setDuration(this,+A.duration,1,1),this.data=A.data,_context&&(this._ctx=_context,_context.data.push(this)),_tickerActive||_ticker.wake()}var _=E.prototype;return _.delay=function(T){return T||T===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+T-this._delay),this._delay=T,this):this._delay},_.duration=function(T){return arguments.length?this.totalDuration(this._repeat>0?T+(T+this._rDelay)*this._repeat:T):this.totalDuration()&&this._dur},_.totalDuration=function(T){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?T:(T-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},_.totalTime=function(T,B){if(_wake(),!arguments.length)return this._tTime;var I=this._dp;if(I&&I.smoothChildTiming&&this._ts){for(_alignPlayhead(this,T),!I._dp||I.parent||_postAddChecks(I,this);I&&I.parent;)I.parent._time!==I._start+(I._ts>=0?I._tTime/I._ts:(I.totalDuration()-I._tTime)/-I._ts)&&I.totalTime(I._tTime,!0),I=I.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&T<this._tDur||this._ts<0&&T>0||!this._tDur&&!T)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==T||!this._dur&&!B||this._initted&&Math.abs(this._zTime)===_tinyNum||!T&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=T),_lazySafeRender(this,T,B)),this},_.time=function(T,B){return arguments.length?this.totalTime(Math.min(this.totalDuration(),T+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(T?this._dur:0),B):this._time},_.totalProgress=function(T,B){return arguments.length?this.totalTime(this.totalDuration()*T,B):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},_.progress=function(T,B){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-T:T)+_elapsedCycleDuration(this),B):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},_.iteration=function(T,B){var I=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(T-1)*I,B):this._repeat?_animationCycle(this._tTime,I)+1:1},_.timeScale=function(T,B){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===T)return this;var I=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+T||0,this._ts=this._ps||T===-_tinyNum?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this._tDur,I),B!==!1),_setEnd(this),_recacheAncestors(this)},_.paused=function(T){return arguments.length?(this._ps!==T&&(this._ps=T,T?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},_.startTime=function(T){if(arguments.length){this._start=T;var B=this.parent||this._dp;return B&&(B._sort||!this.parent)&&_addToTimeline(B,this,T-this._delay),this}return this._start},_.endTime=function(T){return this._start+(_isNotFalse(T)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},_.rawTime=function(T){var B=this.parent||this._dp;return B?T&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(B.rawTime(T),this):this._tTime:this._tTime},_.revert=function(T){T===void 0&&(T=_revertConfig);var B=_reverting$1;return _reverting$1=T,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(T),this.totalTime(-.01,T.suppressEvents)),this.data!=="nested"&&T.kill!==!1&&this.kill(),_reverting$1=B,this},_.globalTime=function(T){for(var B=this,I=arguments.length?T:B.rawTime();B;)I=B._start+I/(Math.abs(B._ts)||1),B=B._dp;return!this.parent&&this._sat?this._sat.globalTime(T):I},_.repeat=function(T){return arguments.length?(this._repeat=T===1/0?-2:T,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},_.repeatDelay=function(T){if(arguments.length){var B=this._time;return this._rDelay=T,_onUpdateTotalDuration(this),B?this.time(B):this}return this._rDelay},_.yoyo=function(T){return arguments.length?(this._yoyo=T,this):this._yoyo},_.seek=function(T,B){return this.totalTime(_parsePosition(this,T),_isNotFalse(B))},_.restart=function(T,B){return this.play().totalTime(T?-this._delay:0,_isNotFalse(B))},_.play=function(T,B){return T!=null&&this.seek(T,B),this.reversed(!1).paused(!1)},_.reverse=function(T,B){return T!=null&&this.seek(T||this.totalDuration(),B),this.reversed(!0).paused(!1)},_.pause=function(T,B){return T!=null&&this.seek(T,B),this.paused(!0)},_.resume=function(){return this.paused(!1)},_.reversed=function(T){return arguments.length?(!!T!==this.reversed()&&this.timeScale(-this._rts||(T?-_tinyNum:0)),this):this._rts<0},_.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},_.isActive=function(){var T=this.parent||this._dp,B=this._start,I;return!!(!T||this._ts&&this._initted&&T.isActive()&&(I=T.rawTime(!0))>=B&&I<this.endTime(!0)-_tinyNum)},_.eventCallback=function(T,B,I){var C=this.vars;return arguments.length>1?(B?(C[T]=B,I&&(C[T+"Params"]=I),T==="onUpdate"&&(this._onUpdate=B)):delete C[T],this):C[T]},_.then=function(T){var B=this;return new Promise(function(I){var C=_isFunction(T)?T:_passThrough,R=function(){var D=B.then;B.then=null,_isFunction(C)&&(C=C(B))&&(C.then||C===B)&&(B.then=D),I(C),B.then=D};B._initted&&B.totalProgress()===1&&B._ts>=0||!B._tTime&&B._ts<0?R():B._prom=R})},_.kill=function(){_interrupt(this)},E}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=function(E){_inheritsLoose(_,E);function _(T,B){var I;return T===void 0&&(T={}),I=E.call(this,T)||this,I.labels={},I.smoothChildTiming=!!T.smoothChildTiming,I.autoRemoveChildren=!!T.autoRemoveChildren,I._sort=_isNotFalse(T.sortChildren),_globalTimeline&&_addToTimeline(T.parent||_globalTimeline,_assertThisInitialized(I),B),T.reversed&&I.reverse(),T.paused&&I.paused(!0),T.scrollTrigger&&_scrollTrigger(_assertThisInitialized(I),T.scrollTrigger),I}var A=_.prototype;return A.to=function(B,I,C){return _createTweenType(0,arguments,this),this},A.from=function(B,I,C){return _createTweenType(1,arguments,this),this},A.fromTo=function(B,I,C,R){return _createTweenType(2,arguments,this),this},A.set=function(B,I,C){return I.duration=0,I.parent=this,_inheritDefaults(I).repeatDelay||(I.repeat=0),I.immediateRender=!!I.immediateRender,new Tween(B,I,_parsePosition(this,C),1),this},A.call=function(B,I,C){return _addToTimeline(this,Tween.delayedCall(0,B,I),C)},A.staggerTo=function(B,I,C,R,L,D,V){return C.duration=I,C.stagger=C.stagger||R,C.onComplete=D,C.onCompleteParams=V,C.parent=this,new Tween(B,C,_parsePosition(this,L)),this},A.staggerFrom=function(B,I,C,R,L,D,V){return C.runBackwards=1,_inheritDefaults(C).immediateRender=_isNotFalse(C.immediateRender),this.staggerTo(B,I,C,R,L,D,V)},A.staggerFromTo=function(B,I,C,R,L,D,V,U){return R.startAt=C,_inheritDefaults(R).immediateRender=_isNotFalse(R.immediateRender),this.staggerTo(B,I,R,L,D,V,U)},A.render=function(B,I,C){var R=this._time,L=this._dirty?this.totalDuration():this._tDur,D=this._dur,V=B<=0?0:_roundPrecise(B),U=this._zTime<0!=B<0&&(this._initted||!D),z,W,Y,K,J,et,it,rt,st,lt,ct,at;if(this!==_globalTimeline&&V>L&&B>=0&&(V=L),V!==this._tTime||C||U){if(R!==this._time&&D&&(V+=this._time-R,B+=this._time-R),z=V,st=this._start,rt=this._ts,et=!rt,U&&(D||(R=this._zTime),(B||!I)&&(this._zTime=B)),this._repeat){if(ct=this._yoyo,J=D+this._rDelay,this._repeat<-1&&B<0)return this.totalTime(J*100+B,I,C);if(z=_roundPrecise(V%J),V===L?(K=this._repeat,z=D):(K=~~(V/J),K&&K===V/J&&(z=D,K--),z>D&&(z=D)),lt=_animationCycle(this._tTime,J),!R&&this._tTime&&lt!==K&&this._tTime-lt*J-this._dur<=0&&(lt=K),ct&&K&1&&(z=D-z,at=1),K!==lt&&!this._lock){var ht=ct&&lt&1,mt=ht===(ct&&K&1);if(K<lt&&(ht=!ht),R=ht?0:V%D?D:V,this._lock=1,this.render(R||(at?0:_roundPrecise(K*J)),I,!D)._lock=0,this._tTime=V,!I&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!at&&(this.invalidate()._lock=1),R&&R!==this._time||et!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(D=this._dur,L=this._tDur,mt&&(this._lock=2,R=ht?D:-1e-4,this.render(R,!0),this.vars.repeatRefresh&&!at&&this.invalidate()),this._lock=0,!this._ts&&!et)return this;_propagateYoyoEase(this,at)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(it=_findNextPauseTween(this,_roundPrecise(R),_roundPrecise(z)),it&&(V-=z-(z=it._start))),this._tTime=V,this._time=z,this._act=!rt,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=B,R=0),!R&&z&&!I&&!K&&(_callback(this,"onStart"),this._tTime!==V))return this;if(z>=R&&B>=0)for(W=this._first;W;){if(Y=W._next,(W._act||z>=W._start)&&W._ts&&it!==W){if(W.parent!==this)return this.render(B,I,C);if(W.render(W._ts>0?(z-W._start)*W._ts:(W._dirty?W.totalDuration():W._tDur)+(z-W._start)*W._ts,I,C),z!==this._time||!this._ts&&!et){it=0,Y&&(V+=this._zTime=-_tinyNum);break}}W=Y}else{W=this._last;for(var yt=B<0?B:z;W;){if(Y=W._prev,(W._act||yt<=W._end)&&W._ts&&it!==W){if(W.parent!==this)return this.render(B,I,C);if(W.render(W._ts>0?(yt-W._start)*W._ts:(W._dirty?W.totalDuration():W._tDur)+(yt-W._start)*W._ts,I,C||_reverting$1&&(W._initted||W._startAt)),z!==this._time||!this._ts&&!et){it=0,Y&&(V+=this._zTime=yt?-_tinyNum:_tinyNum);break}}W=Y}}if(it&&!I&&(this.pause(),it.render(z>=R?0:-_tinyNum)._zTime=z>=R?1:-1,this._ts))return this._start=st,_setEnd(this),this.render(B,I,C);this._onUpdate&&!I&&_callback(this,"onUpdate",!0),(V===L&&this._tTime>=this.totalDuration()||!V&&R)&&(st===this._start||Math.abs(rt)!==Math.abs(this._ts))&&(this._lock||((B||!D)&&(V===L&&this._ts>0||!V&&this._ts<0)&&_removeFromParent(this,1),!I&&!(B<0&&!R)&&(V||R||!L)&&(_callback(this,V===L&&B>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(V<L&&this.timeScale()>0)&&this._prom())))}return this},A.add=function(B,I){var C=this;if(_isNumber(I)||(I=_parsePosition(this,I,B)),!(B instanceof Animation)){if(_isArray(B))return B.forEach(function(R){return C.add(R,I)}),this;if(_isString(B))return this.addLabel(B,I);if(_isFunction(B))B=Tween.delayedCall(0,B);else return this}return this!==B?_addToTimeline(this,B,I):this},A.getChildren=function(B,I,C,R){B===void 0&&(B=!0),I===void 0&&(I=!0),C===void 0&&(C=!0),R===void 0&&(R=-_bigNum$1);for(var L=[],D=this._first;D;)D._start>=R&&(D instanceof Tween?I&&L.push(D):(C&&L.push(D),B&&L.push.apply(L,D.getChildren(!0,I,C)))),D=D._next;return L},A.getById=function(B){for(var I=this.getChildren(1,1,1),C=I.length;C--;)if(I[C].vars.id===B)return I[C]},A.remove=function(B){return _isString(B)?this.removeLabel(B):_isFunction(B)?this.killTweensOf(B):(_removeLinkedListItem(this,B),B===this._recent&&(this._recent=this._last),_uncache(this))},A.totalTime=function(B,I){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?B/this._ts:(this.totalDuration()-B)/-this._ts))),E.prototype.totalTime.call(this,B,I),this._forcing=0,this):this._tTime},A.addLabel=function(B,I){return this.labels[B]=_parsePosition(this,I),this},A.removeLabel=function(B){return delete this.labels[B],this},A.addPause=function(B,I,C){var R=Tween.delayedCall(0,I||_emptyFunc,C);return R.data="isPause",this._hasPause=1,_addToTimeline(this,R,_parsePosition(this,B))},A.removePause=function(B){var I=this._first;for(B=_parsePosition(this,B);I;)I._start===B&&I.data==="isPause"&&_removeFromParent(I),I=I._next},A.killTweensOf=function(B,I,C){for(var R=this.getTweensOf(B,C),L=R.length;L--;)_overwritingTween!==R[L]&&R[L].kill(B,I);return this},A.getTweensOf=function(B,I){for(var C=[],R=toArray(B),L=this._first,D=_isNumber(I),V;L;)L instanceof Tween?_arrayContainsAny(L._targets,R)&&(D?(!_overwritingTween||L._initted&&L._ts)&&L.globalTime(0)<=I&&L.globalTime(L.totalDuration())>I:!I||L.isActive())&&C.push(L):(V=L.getTweensOf(R,I)).length&&C.push.apply(C,V),L=L._next;return C},A.tweenTo=function(B,I){I=I||{};var C=this,R=_parsePosition(C,B),L=I,D=L.startAt,V=L.onStart,U=L.onStartParams,z=L.immediateRender,W,Y=Tween.to(C,_setDefaults({ease:I.ease||"none",lazy:!1,immediateRender:!1,time:R,overwrite:"auto",duration:I.duration||Math.abs((R-(D&&"time"in D?D.time:C._time))/C.timeScale())||_tinyNum,onStart:function(){if(C.pause(),!W){var J=I.duration||Math.abs((R-(D&&"time"in D?D.time:C._time))/C.timeScale());Y._dur!==J&&_setDuration(Y,J,0,1).render(Y._time,!0,!0),W=1}V&&V.apply(Y,U||[])}},I));return z?Y.render(0):Y},A.tweenFromTo=function(B,I,C){return this.tweenTo(I,_setDefaults({startAt:{time:_parsePosition(this,B)}},C))},A.recent=function(){return this._recent},A.nextLabel=function(B){return B===void 0&&(B=this._time),_getLabelInDirection(this,_parsePosition(this,B))},A.previousLabel=function(B){return B===void 0&&(B=this._time),_getLabelInDirection(this,_parsePosition(this,B),1)},A.currentLabel=function(B){return arguments.length?this.seek(B,!0):this.previousLabel(this._time+_tinyNum)},A.shiftChildren=function(B,I,C){C===void 0&&(C=0);for(var R=this._first,L=this.labels,D;R;)R._start>=C&&(R._start+=B,R._end+=B),R=R._next;if(I)for(D in L)L[D]>=C&&(L[D]+=B);return _uncache(this)},A.invalidate=function(B){var I=this._first;for(this._lock=0;I;)I.invalidate(B),I=I._next;return E.prototype.invalidate.call(this,B)},A.clear=function(B){B===void 0&&(B=!0);for(var I=this._first,C;I;)C=I._next,this.remove(I),I=C;return this._dp&&(this._time=this._tTime=this._pTime=0),B&&(this.labels={}),_uncache(this)},A.totalDuration=function(B){var I=0,C=this,R=C._last,L=_bigNum$1,D,V,U;if(arguments.length)return C.timeScale((C._repeat<0?C.duration():C.totalDuration())/(C.reversed()?-B:B));if(C._dirty){for(U=C.parent;R;)D=R._prev,R._dirty&&R.totalDuration(),V=R._start,V>L&&C._sort&&R._ts&&!C._lock?(C._lock=1,_addToTimeline(C,R,V-R._delay,1)._lock=0):L=V,V<0&&R._ts&&(I-=V,(!U&&!C._dp||U&&U.smoothChildTiming)&&(C._start+=V/C._ts,C._time-=V,C._tTime-=V),C.shiftChildren(-V,!1,-1/0),L=0),R._end>I&&R._ts&&(I=R._end),R=D;_setDuration(C,C===_globalTimeline&&C._time>I?C._time:I,1,1),C._dirty=0}return C._tDur},_.updateRoot=function(B){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(B,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var I=_globalTimeline._first;if((!I||!I._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;I&&!I._ts;)I=I._next;I||_ticker.sleep()}}},_}(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function E(_,A,T,B,I,C,R){var L=new PropTween(this._pt,_,A,0,1,_renderComplexString,null,I),D=0,V=0,U,z,W,Y,K,J,et,it;for(L.b=T,L.e=B,T+="",B+="",(et=~B.indexOf("random("))&&(B=_replaceRandom(B)),C&&(it=[T,B],C(it,_,A),T=it[0],B=it[1]),z=T.match(_complexStringNumExp)||[];U=_complexStringNumExp.exec(B);)Y=U[0],K=B.substring(D,U.index),W?W=(W+1)%5:K.substr(-5)==="rgba("&&(W=1),Y!==z[V++]&&(J=parseFloat(z[V-1])||0,L._pt={_next:L._pt,p:K||V===1?K:",",s:J,c:Y.charAt(1)==="="?_parseRelative(J,Y)-J:parseFloat(Y)-J,m:W&&W<4?Math.round:0},D=_complexStringNumExp.lastIndex);return L.c=D<B.length?B.substring(D,B.length):"",L.fp=R,(_relExp.test(B)||et)&&(L.e=0),this._pt=L,L},_addPropTween=function E(_,A,T,B,I,C,R,L,D,V){_isFunction(B)&&(B=B(I||0,_,C));var U=_[A],z=T!=="get"?T:_isFunction(U)?D?_[A.indexOf("set")||!_isFunction(_["get"+A.substr(3)])?A:"get"+A.substr(3)](D):_[A]():U,W=_isFunction(U)?D?_setterFuncWithParam:_setterFunc:_setterPlain,Y;if(_isString(B)&&(~B.indexOf("random(")&&(B=_replaceRandom(B)),B.charAt(1)==="="&&(Y=_parseRelative(z,B)+(getUnit(z)||0),(Y||Y===0)&&(B=Y))),!V||z!==B||_forceAllPropTweens)return!isNaN(z*B)&&B!==""?(Y=new PropTween(this._pt,_,A,+z||0,B-(z||0),typeof U=="boolean"?_renderBoolean:_renderPlain,0,W),D&&(Y.fp=D),R&&Y.modifier(R,this,_),this._pt=Y):(!U&&!(A in _)&&_missingPlugin(A,B),_addComplexStringPropTween.call(this,_,A,z,B,W,L||_config.stringFilter,D))},_processVars=function E(_,A,T,B,I){if(_isFunction(_)&&(_=_parseFuncOrString(_,I,A,T,B)),!_isObject(_)||_.style&&_.nodeType||_isArray(_)||_isTypedArray(_))return _isString(_)?_parseFuncOrString(_,I,A,T,B):_;var C={},R;for(R in _)C[R]=_parseFuncOrString(_[R],I,A,T,B);return C},_checkPlugin=function E(_,A,T,B,I,C){var R,L,D,V;if(_plugins[_]&&(R=new _plugins[_]).init(I,R.rawVars?A[_]:_processVars(A[_],B,I,C,T),T,B,C)!==!1&&(T._pt=L=new PropTween(T._pt,I,_,0,1,R.render,R,0,R.priority),T!==_quickTween))for(D=T._ptLookup[T._targets.indexOf(I)],V=R._props.length;V--;)D[R._props[V]]=L;return R},_overwritingTween,_forceAllPropTweens,_initTween=function E(_,A,T){var B=_.vars,I=B.ease,C=B.startAt,R=B.immediateRender,L=B.lazy,D=B.onUpdate,V=B.runBackwards,U=B.yoyoEase,z=B.keyframes,W=B.autoRevert,Y=_._dur,K=_._startAt,J=_._targets,et=_.parent,it=et&&et.data==="nested"?et.vars.targets:J,rt=_._overwrite==="auto"&&!_suppressOverwrites,st=_.timeline,lt,ct,at,ht,mt,yt,Tt,At,pt,Et,Vt,Ot,gt;if(st&&(!z||!I)&&(I="none"),_._ease=_parseEase(I,_defaults.ease),_._yEase=U?_invertEase(_parseEase(U===!0?I:U,_defaults.ease)):0,U&&_._yoyo&&!_._repeat&&(U=_._yEase,_._yEase=_._ease,_._ease=U),_._from=!st&&!!B.runBackwards,!st||z&&!B.stagger){if(At=J[0]?_getCache(J[0]).harness:0,Ot=At&&B[At.prop],lt=_copyExcluding(B,_reservedProps),K&&(K._zTime<0&&K.progress(1),A<0&&V&&R&&!W?K.render(-1,!0):K.revert(V&&Y?_revertConfigNoKill:_startAtRevertConfig),K._lazy=0),C){if(_removeFromParent(_._startAt=Tween.set(J,_setDefaults({data:"isStart",overwrite:!1,parent:et,immediateRender:!0,lazy:!K&&_isNotFalse(L),startAt:null,delay:0,onUpdate:D&&function(){return _callback(_,"onUpdate")},stagger:0},C))),_._startAt._dp=0,_._startAt._sat=_,A<0&&(_reverting$1||!R&&!W)&&_._startAt.revert(_revertConfigNoKill),R&&Y&&A<=0&&T<=0){A&&(_._zTime=A);return}}else if(V&&Y&&!K){if(A&&(R=!1),at=_setDefaults({overwrite:!1,data:"isFromStart",lazy:R&&!K&&_isNotFalse(L),immediateRender:R,stagger:0,parent:et},lt),Ot&&(at[At.prop]=Ot),_removeFromParent(_._startAt=Tween.set(J,at)),_._startAt._dp=0,_._startAt._sat=_,A<0&&(_reverting$1?_._startAt.revert(_revertConfigNoKill):_._startAt.render(-1,!0)),_._zTime=A,!R)E(_._startAt,_tinyNum,_tinyNum);else if(!A)return}for(_._pt=_._ptCache=0,L=Y&&_isNotFalse(L)||L&&!Y,ct=0;ct<J.length;ct++){if(mt=J[ct],Tt=mt._gsap||_harness(J)[ct]._gsap,_._ptLookup[ct]=Et={},_lazyLookup[Tt.id]&&_lazyTweens.length&&_lazyRender(),Vt=it===J?ct:it.indexOf(mt),At&&(pt=new At).init(mt,Ot||lt,_,Vt,it)!==!1&&(_._pt=ht=new PropTween(_._pt,mt,pt.name,0,1,pt.render,pt,0,pt.priority),pt._props.forEach(function(bt){Et[bt]=ht}),pt.priority&&(yt=1)),!At||Ot)for(at in lt)_plugins[at]&&(pt=_checkPlugin(at,lt,_,Vt,mt,it))?pt.priority&&(yt=1):Et[at]=ht=_addPropTween.call(_,mt,at,"get",lt[at],Vt,it,0,B.stringFilter);_._op&&_._op[ct]&&_.kill(mt,_._op[ct]),rt&&_._pt&&(_overwritingTween=_,_globalTimeline.killTweensOf(mt,Et,_.globalTime(A)),gt=!_.parent,_overwritingTween=0),_._pt&&L&&(_lazyLookup[Tt.id]=1)}yt&&_sortPropTweensByPriority(_),_._onInit&&_._onInit(_)}_._onUpdate=D,_._initted=(!_._op||_._pt)&&!gt,z&&A<=0&&st.render(_bigNum$1,!0,!0)},_updatePropTweens=function E(_,A,T,B,I,C,R,L){var D=(_._pt&&_._ptCache||(_._ptCache={}))[A],V,U,z,W;if(!D)for(D=_._ptCache[A]=[],z=_._ptLookup,W=_._targets.length;W--;){if(V=z[W][A],V&&V.d&&V.d._pt)for(V=V.d._pt;V&&V.p!==A&&V.fp!==A;)V=V._next;if(!V)return _forceAllPropTweens=1,_.vars[A]="+=0",_initTween(_,R),_forceAllPropTweens=0,L?_warn(A+" not eligible for reset"):1;D.push(V)}for(W=D.length;W--;)U=D[W],V=U._pt||U,V.s=(B||B===0)&&!I?B:V.s+(B||0)+C*V.c,V.c=T-V.s,U.e&&(U.e=_round(T)+getUnit(U.e)),U.b&&(U.b=V.s+getUnit(U.b))},_addAliasesToVars=function E(_,A){var T=_[0]?_getCache(_[0]).harness:0,B=T&&T.aliases,I,C,R,L;if(!B)return A;I=_merge({},A);for(C in B)if(C in I)for(L=B[C].split(","),R=L.length;R--;)I[L[R]]=I[C];return I},_parseKeyframe=function E(_,A,T,B){var I=A.ease||B||"power1.inOut",C,R;if(_isArray(A))R=T[_]||(T[_]=[]),A.forEach(function(L,D){return R.push({t:D/(A.length-1)*100,v:L,e:I})});else for(C in A)R=T[C]||(T[C]=[]),C==="ease"||R.push({t:parseFloat(_),v:A[C],e:I})},_parseFuncOrString=function E(_,A,T,B,I){return _isFunction(_)?_.call(A,T,B,I):_isString(_)&&~_.indexOf("random(")?_replaceRandom(_):_},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(E){return _staggerPropsToSkip[E]=1});var Tween=function(E){_inheritsLoose(_,E);function _(T,B,I,C){var R;typeof B=="number"&&(I.duration=B,B=I,I=null),R=E.call(this,C?B:_inheritDefaults(B))||this;var L=R.vars,D=L.duration,V=L.delay,U=L.immediateRender,z=L.stagger,W=L.overwrite,Y=L.keyframes,K=L.defaults,J=L.scrollTrigger,et=L.yoyoEase,it=B.parent||_globalTimeline,rt=(_isArray(T)||_isTypedArray(T)?_isNumber(T[0]):"length"in B)?[T]:toArray(T),st,lt,ct,at,ht,mt,yt,Tt;if(R._targets=rt.length?_harness(rt):_warn("GSAP target "+T+" not found. https://gsap.com",!_config.nullTargetWarn)||[],R._ptLookup=[],R._overwrite=W,Y||z||_isFuncOrString(D)||_isFuncOrString(V)){if(B=R.vars,st=R.timeline=new Timeline({data:"nested",defaults:K||{},targets:it&&it.data==="nested"?it.vars.targets:rt}),st.kill(),st.parent=st._dp=_assertThisInitialized(R),st._start=0,z||_isFuncOrString(D)||_isFuncOrString(V)){if(at=rt.length,yt=z&&distribute(z),_isObject(z))for(ht in z)~_staggerTweenProps.indexOf(ht)&&(Tt||(Tt={}),Tt[ht]=z[ht]);for(lt=0;lt<at;lt++)ct=_copyExcluding(B,_staggerPropsToSkip),ct.stagger=0,et&&(ct.yoyoEase=et),Tt&&_merge(ct,Tt),mt=rt[lt],ct.duration=+_parseFuncOrString(D,_assertThisInitialized(R),lt,mt,rt),ct.delay=(+_parseFuncOrString(V,_assertThisInitialized(R),lt,mt,rt)||0)-R._delay,!z&&at===1&&ct.delay&&(R._delay=V=ct.delay,R._start+=V,ct.delay=0),st.to(mt,ct,yt?yt(lt,mt,rt):0),st._ease=_easeMap.none;st.duration()?D=V=0:R.timeline=0}else if(Y){_inheritDefaults(_setDefaults(st.vars.defaults,{ease:"none"})),st._ease=_parseEase(Y.ease||B.ease||"none");var At=0,pt,Et,Vt;if(_isArray(Y))Y.forEach(function(Ot){return st.to(rt,Ot,">")}),st.duration();else{ct={};for(ht in Y)ht==="ease"||ht==="easeEach"||_parseKeyframe(ht,Y[ht],ct,Y.easeEach);for(ht in ct)for(pt=ct[ht].sort(function(Ot,gt){return Ot.t-gt.t}),At=0,lt=0;lt<pt.length;lt++)Et=pt[lt],Vt={ease:Et.e,duration:(Et.t-(lt?pt[lt-1].t:0))/100*D},Vt[ht]=Et.v,st.to(rt,Vt,At),At+=Vt.duration;st.duration()<D&&st.to({},{duration:D-st.duration()})}}D||R.duration(D=st.duration())}else R.timeline=0;return W===!0&&!_suppressOverwrites&&(_overwritingTween=_assertThisInitialized(R),_globalTimeline.killTweensOf(rt),_overwritingTween=0),_addToTimeline(it,_assertThisInitialized(R),I),B.reversed&&R.reverse(),B.paused&&R.paused(!0),(U||!D&&!Y&&R._start===_roundPrecise(it._time)&&_isNotFalse(U)&&_hasNoPausedAncestors(_assertThisInitialized(R))&&it.data!=="nested")&&(R._tTime=-_tinyNum,R.render(Math.max(0,-V)||0)),J&&_scrollTrigger(_assertThisInitialized(R),J),R}var A=_.prototype;return A.render=function(B,I,C){var R=this._time,L=this._tDur,D=this._dur,V=B<0,U=B>L-_tinyNum&&!V?L:B<_tinyNum?0:B,z,W,Y,K,J,et,it,rt,st;if(!D)_renderZeroDurationTween(this,B,I,C);else if(U!==this._tTime||!B||C||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==V){if(z=U,rt=this.timeline,this._repeat){if(K=D+this._rDelay,this._repeat<-1&&V)return this.totalTime(K*100+B,I,C);if(z=_roundPrecise(U%K),U===L?(Y=this._repeat,z=D):(Y=~~(U/K),Y&&Y===_roundPrecise(U/K)&&(z=D,Y--),z>D&&(z=D)),et=this._yoyo&&Y&1,et&&(st=this._yEase,z=D-z),J=_animationCycle(this._tTime,K),z===R&&!C&&this._initted&&Y===J)return this._tTime=U,this;Y!==J&&(rt&&this._yEase&&_propagateYoyoEase(rt,et),this.vars.repeatRefresh&&!et&&!this._lock&&this._time!==D&&this._initted&&(this._lock=C=1,this.render(_roundPrecise(K*Y),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,V?B:z,C,I,U))return this._tTime=0,this;if(R!==this._time&&!(C&&this.vars.repeatRefresh&&Y!==J))return this;if(D!==this._dur)return this.render(B,I,C)}if(this._tTime=U,this._time=z,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=it=(st||this._ease)(z/D),this._from&&(this.ratio=it=1-it),z&&!R&&!I&&!Y&&(_callback(this,"onStart"),this._tTime!==U))return this;for(W=this._pt;W;)W.r(it,W.d),W=W._next;rt&&rt.render(B<0?B:!z&&et?-_tinyNum:rt._dur*rt._ease(z/this._dur),I,C)||this._startAt&&(this._zTime=B),this._onUpdate&&!I&&(V&&_rewindStartAt(this,B,I,C),_callback(this,"onUpdate")),this._repeat&&Y!==J&&this.vars.onRepeat&&!I&&this.parent&&_callback(this,"onRepeat"),(U===this._tDur||!U)&&this._tTime===U&&(V&&!this._onUpdate&&_rewindStartAt(this,B,!0,!0),(B||!D)&&(U===this._tDur&&this._ts>0||!U&&this._ts<0)&&_removeFromParent(this,1),!I&&!(V&&!R)&&(U||R||et)&&(_callback(this,U===L?"onComplete":"onReverseComplete",!0),this._prom&&!(U<L&&this.timeScale()>0)&&this._prom()))}return this},A.targets=function(){return this._targets},A.invalidate=function(B){return(!B||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(B),E.prototype.invalidate.call(this,B)},A.resetTo=function(B,I,C,R,L){_tickerActive||_ticker.wake(),this._ts||this.play();var D=Math.min(this._dur,(this._dp._time-this._start)*this._ts),V;return this._initted||_initTween(this,D),V=this._ease(D/this._dur),_updatePropTweens(this,B,I,C,R,V,D,L)?this.resetTo(B,I,C,R,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},A.kill=function(B,I){if(I===void 0&&(I="all"),!B&&(!I||I==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this;if(this.timeline){var C=this.timeline.totalDuration();return this.timeline.killTweensOf(B,I,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&C!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/C,0,1),this}var R=this._targets,L=B?toArray(B):R,D=this._ptLookup,V=this._pt,U,z,W,Y,K,J,et;if((!I||I==="all")&&_arraysMatch(R,L))return I==="all"&&(this._pt=0),_interrupt(this);for(U=this._op=this._op||[],I!=="all"&&(_isString(I)&&(K={},_forEachName(I,function(it){return K[it]=1}),I=K),I=_addAliasesToVars(R,I)),et=R.length;et--;)if(~L.indexOf(R[et])){z=D[et],I==="all"?(U[et]=I,Y=z,W={}):(W=U[et]=U[et]||{},Y=I);for(K in Y)J=z&&z[K],J&&((!("kill"in J.d)||J.d.kill(K)===!0)&&_removeLinkedListItem(this,J,"_pt"),delete z[K]),W!=="all"&&(W[K]=1)}return this._initted&&!this._pt&&V&&_interrupt(this),this},_.to=function(B,I){return new _(B,I,arguments[2])},_.from=function(B,I){return _createTweenType(1,arguments)},_.delayedCall=function(B,I,C,R){return new _(I,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:B,onComplete:I,onReverseComplete:I,onCompleteParams:C,onReverseCompleteParams:C,callbackScope:R})},_.fromTo=function(B,I,C){return _createTweenType(2,arguments)},_.set=function(B,I){return I.duration=0,I.repeatDelay||(I.repeat=0),new _(B,I)},_.killTweensOf=function(B,I,C){return _globalTimeline.killTweensOf(B,I,C)},_}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(E){Tween[E]=function(){var _=new Timeline,A=_slice.call(arguments,0);return A.splice(E==="staggerFromTo"?5:4,0,0),_[E].apply(_,A)}});var _setterPlain=function E(_,A,T){return _[A]=T},_setterFunc=function E(_,A,T){return _[A](T)},_setterFuncWithParam=function E(_,A,T,B){return _[A](B.fp,T)},_setterAttribute=function E(_,A,T){return _.setAttribute(A,T)},_getSetter=function E(_,A){return _isFunction(_[A])?_setterFunc:_isUndefined(_[A])&&_.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function E(_,A){return A.set(A.t,A.p,Math.round((A.s+A.c*_)*1e6)/1e6,A)},_renderBoolean=function E(_,A){return A.set(A.t,A.p,!!(A.s+A.c*_),A)},_renderComplexString=function E(_,A){var T=A._pt,B="";if(!_&&A.b)B=A.b;else if(_===1&&A.e)B=A.e;else{for(;T;)B=T.p+(T.m?T.m(T.s+T.c*_):Math.round((T.s+T.c*_)*1e4)/1e4)+B,T=T._next;B+=A.c}A.set(A.t,A.p,B,A)},_renderPropTweens=function E(_,A){for(var T=A._pt;T;)T.r(_,T.d),T=T._next},_addPluginModifier=function E(_,A,T,B){for(var I=this._pt,C;I;)C=I._next,I.p===B&&I.modifier(_,A,T),I=C},_killPropTweensOf=function E(_){for(var A=this._pt,T,B;A;)B=A._next,A.p===_&&!A.op||A.op===_?_removeLinkedListItem(this,A,"_pt"):A.dep||(T=1),A=B;return!T},_setterWithModifier=function E(_,A,T,B){B.mSet(_,A,B.m.call(B.tween,T,B.mt),B)},_sortPropTweensByPriority=function E(_){for(var A=_._pt,T,B,I,C;A;){for(T=A._next,B=I;B&&B.pr>A.pr;)B=B._next;(A._prev=B?B._prev:C)?A._prev._next=A:I=A,(A._next=B)?B._prev=A:C=A,A=T}_._pt=I},PropTween=function(){function E(A,T,B,I,C,R,L,D,V){this.t=T,this.s=I,this.c=C,this.p=B,this.r=R||_renderPlain,this.d=L||this,this.set=D||_setterPlain,this.pr=V||0,this._next=A,A&&(A._prev=this)}var _=E.prototype;return _.modifier=function(T,B,I){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=T,this.mt=I,this.tween=B},E}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(E){return _reservedProps[E]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config.stringFilter=_colorStringFilter;var _media=[],_listeners={},_emptyArray=[],_lastMediaTime=0,_contextID=0,_dispatch=function E(_){return(_listeners[_]||_emptyArray).map(function(A){return A()})},_onMediaChange=function E(){var _=Date.now(),A=[];_-_lastMediaTime>2&&(_dispatch("matchMediaInit"),_media.forEach(function(T){var B=T.queries,I=T.conditions,C,R,L,D;for(R in B)C=_win$1.matchMedia(B[R]).matches,C&&(L=1),C!==I[R]&&(I[R]=C,D=1);D&&(T.revert(),L&&A.push(T))}),_dispatch("matchMediaRevert"),A.forEach(function(T){return T.onMatch(T,function(B){return T.add(null,B)})}),_lastMediaTime=_,_dispatch("matchMedia"))},Context=function(){function E(A,T){this.selector=T&&selector(T),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,A&&this.add(A)}var _=E.prototype;return _.add=function(T,B,I){_isFunction(T)&&(I=B,B=T,T=_isFunction);var C=this,R=function(){var D=_context,V=C.selector,U;return D&&D!==C&&D.data.push(C),I&&(C.selector=selector(I)),_context=C,U=B.apply(C,arguments),_isFunction(U)&&C._r.push(U),_context=D,C.selector=V,C.isReverted=!1,U};return C.last=R,T===_isFunction?R(C,function(L){return C.add(null,L)}):T?C[T]=R:R},_.ignore=function(T){var B=_context;_context=null,T(this),_context=B},_.getTweens=function(){var T=[];return this.data.forEach(function(B){return B instanceof E?T.push.apply(T,B.getTweens()):B instanceof Tween&&!(B.parent&&B.parent.data==="nested")&&T.push(B)}),T},_.clear=function(){this._r.length=this.data.length=0},_.kill=function(T,B){var I=this;if(T?function(){for(var R=I.getTweens(),L=I.data.length,D;L--;)D=I.data[L],D.data==="isFlip"&&(D.revert(),D.getChildren(!0,!0,!1).forEach(function(V){return R.splice(R.indexOf(V),1)}));for(R.map(function(V){return{g:V._dur||V._delay||V._sat&&!V._sat.vars.immediateRender?V.globalTime(0):-1/0,t:V}}).sort(function(V,U){return U.g-V.g||-1/0}).forEach(function(V){return V.t.revert(T)}),L=I.data.length;L--;)D=I.data[L],D instanceof Timeline?D.data!=="nested"&&(D.scrollTrigger&&D.scrollTrigger.revert(),D.kill()):!(D instanceof Tween)&&D.revert&&D.revert(T);I._r.forEach(function(V){return V(T,I)}),I.isReverted=!0}():this.data.forEach(function(R){return R.kill&&R.kill()}),this.clear(),B)for(var C=_media.length;C--;)_media[C].id===this.id&&_media.splice(C,1)},_.revert=function(T){this.kill(T||{})},E}(),MatchMedia=function(){function E(A){this.contexts=[],this.scope=A}var _=E.prototype;return _.add=function(T,B,I){_isObject(T)||(T={matches:T});var C=new Context(0,I||this.scope),R=C.conditions={},L,D,V;_context&&!C.selector&&(C.selector=_context.selector),this.contexts.push(C),B=C.add("onMatch",B),C.queries=T;for(D in T)D==="all"?V=1:(L=_win$1.matchMedia(T[D]),L&&(_media.indexOf(C)<0&&_media.push(C),(R[D]=L.matches)&&(V=1),L.addListener?L.addListener(_onMediaChange):L.addEventListener("change",_onMediaChange)));return V&&B(C,function(U){return C.add(null,U)}),this},_.revert=function(T){this.kill(T||{})},_.kill=function(T){this.contexts.forEach(function(B){return B.kill(T,!0)})},E}(),_gsap={registerPlugin:function E(){for(var _=arguments.length,A=new Array(_),T=0;T<_;T++)A[T]=arguments[T];A.forEach(function(B){return _createPlugin(B)})},timeline:function E(_){return new Timeline(_)},getTweensOf:function E(_,A){return _globalTimeline.getTweensOf(_,A)},getProperty:function E(_,A,T,B){_isString(_)&&(_=toArray(_)[0]);var I=_getCache(_||{}).get,C=T?_passThrough:_numericIfPossible;return T==="native"&&(T=""),_&&(A?C((_plugins[A]&&_plugins[A].get||I)(_,A,T,B)):function(R,L,D){return C((_plugins[R]&&_plugins[R].get||I)(_,R,L,D))})},quickSetter:function E(_,A,T){if(_=toArray(_),_.length>1){var B=_.map(function(V){return gsap.quickSetter(V,A,T)}),I=B.length;return function(V){for(var U=I;U--;)B[U](V)}}_=_[0]||{};var C=_plugins[A],R=_getCache(_),L=R.harness&&(R.harness.aliases||{})[A]||A,D=C?function(V){var U=new C;_quickTween._pt=0,U.init(_,T?V+T:V,_quickTween,0,[_]),U.render(1,U),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:R.set(_,L);return C?D:function(V){return D(_,L,T?V+T:V,R,1)}},quickTo:function E(_,A,T){var B,I=gsap.to(_,_merge((B={},B[A]="+=0.1",B.paused=!0,B),T||{})),C=function(L,D,V){return I.resetTo(A,L,D,V)};return C.tween=I,C},isTweening:function E(_){return _globalTimeline.getTweensOf(_,!0).length>0},defaults:function E(_){return _&&_.ease&&(_.ease=_parseEase(_.ease,_defaults.ease)),_mergeDeep(_defaults,_||{})},config:function E(_){return _mergeDeep(_config,_||{})},registerEffect:function E(_){var A=_.name,T=_.effect,B=_.plugins,I=_.defaults,C=_.extendTimeline;(B||"").split(",").forEach(function(R){return R&&!_plugins[R]&&!_globals[R]&&_warn(A+" effect requires "+R+" plugin.")}),_effects[A]=function(R,L,D){return T(toArray(R),_setDefaults(L||{},I),D)},C&&(Timeline.prototype[A]=function(R,L,D){return this.add(_effects[A](R,_isObject(L)?L:(D=L)&&{},this),D)})},registerEase:function E(_,A){_easeMap[_]=_parseEase(A)},parseEase:function E(_,A){return arguments.length?_parseEase(_,A):_easeMap},getById:function E(_){return _globalTimeline.getById(_)},exportRoot:function E(_,A){_===void 0&&(_={});var T=new Timeline(_),B,I;for(T.smoothChildTiming=_isNotFalse(_.smoothChildTiming),_globalTimeline.remove(T),T._dp=0,T._time=T._tTime=_globalTimeline._time,B=_globalTimeline._first;B;)I=B._next,(A||!(!B._dur&&B instanceof Tween&&B.vars.onComplete===B._targets[0]))&&_addToTimeline(T,B,B._start-B._delay),B=I;return _addToTimeline(_globalTimeline,T,0),T},context:function E(_,A){return _?new Context(_,A):_context},matchMedia:function E(_){return new MatchMedia(_)},matchMediaRefresh:function E(){return _media.forEach(function(_){var A=_.conditions,T,B;for(B in A)A[B]&&(A[B]=!1,T=1);T&&_.revert()})||_onMediaChange()},addEventListener:function E(_,A){var T=_listeners[_]||(_listeners[_]=[]);~T.indexOf(A)||T.push(A)},removeEventListener:function E(_,A){var T=_listeners[_],B=T&&T.indexOf(A);B>=0&&T.splice(B,1)},utils:{wrap,wrapYoyo,distribute,random,snap,normalize,getUnit,clamp,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function E(){return _reverting$1},context:function E(_){return _&&_context&&(_context.data.push(_),_._ctx=_context),_context},suppressOverwrites:function E(_){return _suppressOverwrites=_}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(E){return _gsap[E]=Tween[E]});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function E(_,A){for(var T=_._pt;T&&T.p!==A&&T.op!==A&&T.fp!==A;)T=T._next;return T},_addModifiers=function E(_,A){var T=_._targets,B,I,C;for(B in A)for(I=T.length;I--;)C=_._ptLookup[I][B],C&&(C=C.d)&&(C._pt&&(C=_getPluginPropTween(C,B)),C&&C.modifier&&C.modifier(A[B],_,T[I],B))},_buildModifierPlugin=function E(_,A){return{name:_,rawVars:1,init:function(B,I,C){C._onInit=function(R){var L,D;if(_isString(I)&&(L={},_forEachName(I,function(V){return L[V]=1}),I=L),A){L={};for(D in I)L[D]=A(I[D]);I=L}_addModifiers(R,I)}}}},gsap=_gsap.registerPlugin({name:"attr",init:function E(_,A,T,B,I){var C,R,L;this.tween=T;for(C in A)L=_.getAttribute(C)||"",R=this.add(_,"setAttribute",(L||0)+"",A[C],B,I,0,0,C),R.op=C,R.b=L,this._props.push(C)},render:function E(_,A){for(var T=A._pt;T;)_reverting$1?T.set(T.t,T.p,T.b,T):T.r(_,T.d),T=T._next}},{name:"endArray",init:function E(_,A){for(var T=A.length;T--;)this.add(_,T,_[T]||0,A[T],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap.version="3.12.4";_coreReady=1;_windowExists$1()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.12.4
 * https://gsap.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _win,_doc,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists=function E(){return typeof window<"u"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function E(_,A){return A.set(A.t,A.p,Math.round((A.s+A.c*_)*1e4)/1e4+A.u,A)},_renderPropWithEnd=function E(_,A){return A.set(A.t,A.p,_===1?A.e:Math.round((A.s+A.c*_)*1e4)/1e4+A.u,A)},_renderCSSPropWithBeginning=function E(_,A){return A.set(A.t,A.p,_?Math.round((A.s+A.c*_)*1e4)/1e4+A.u:A.b,A)},_renderRoundedCSSProp=function E(_,A){var T=A.s+A.c*_;A.set(A.t,A.p,~~(T+(T<0?-.5:.5))+A.u,A)},_renderNonTweeningValue=function E(_,A){return A.set(A.t,A.p,_?A.e:A.b,A)},_renderNonTweeningValueOnlyAtEnd=function E(_,A){return A.set(A.t,A.p,_!==1?A.b:A.e,A)},_setterCSSStyle=function E(_,A,T){return _.style[A]=T},_setterCSSProp=function E(_,A,T){return _.style.setProperty(A,T)},_setterTransform=function E(_,A,T){return _._gsap[A]=T},_setterScale=function E(_,A,T){return _._gsap.scaleX=_._gsap.scaleY=T},_setterScaleWithRender=function E(_,A,T,B,I){var C=_._gsap;C.scaleX=C.scaleY=T,C.renderTransform(I,C)},_setterTransformWithRender=function E(_,A,T,B,I){var C=_._gsap;C[A]=T,C.renderTransform(I,C)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_saveStyle=function E(_,A){var T=this,B=this.target,I=B.style,C=B._gsap;if(_ in _transformProps&&I){if(this.tfm=this.tfm||{},_!=="transform")_=_propertyAliases[_]||_,~_.indexOf(",")?_.split(",").forEach(function(R){return T.tfm[R]=_get(B,R)}):this.tfm[_]=C.x?C[_]:_get(B,_),_===_transformOriginProp&&(this.tfm.zOrigin=C.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(R){return E.call(T,R,A)});if(this.props.indexOf(_transformProp)>=0)return;C.svg&&(this.svgo=B.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,A,"")),_=_transformProp}(I||A)&&this.props.push(_,A,I[_])},_removeIndependentTransforms=function E(_){_.translate&&(_.removeProperty("translate"),_.removeProperty("scale"),_.removeProperty("rotate"))},_revertStyle=function E(){var _=this.props,A=this.target,T=A.style,B=A._gsap,I,C;for(I=0;I<_.length;I+=3)_[I+1]?A[_[I]]=_[I+2]:_[I+2]?T[_[I]]=_[I+2]:T.removeProperty(_[I].substr(0,2)==="--"?_[I]:_[I].replace(_capsExp,"-$1").toLowerCase());if(this.tfm){for(C in this.tfm)B[C]=this.tfm[C];B.svg&&(B.renderTransform(),A.setAttribute("data-svg-origin",this.svgo||"")),I=_reverting(),(!I||!I.isStart)&&!T[_transformProp]&&(_removeIndependentTransforms(T),B.zOrigin&&T[_transformOriginProp]&&(T[_transformOriginProp]+=" "+B.zOrigin+"px",B.zOrigin=0,B.renderTransform()),B.uncache=1)}},_getStyleSaver=function E(_,A){var T={target:_,props:[],revert:_revertStyle,save:_saveStyle};return _._gsap||gsap.core.getCache(_),A&&A.split(",").forEach(function(B){return T.save(B)}),T},_supports3D,_createElement=function E(_,A){var T=_doc.createElementNS?_doc.createElementNS((A||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),_):_doc.createElement(_);return T&&T.style?T:_doc.createElement(_)},_getComputedProperty=function E(_,A,T){var B=getComputedStyle(_);return B[A]||B.getPropertyValue(A.replace(_capsExp,"-$1").toLowerCase())||B.getPropertyValue(A)||!T&&E(_,_checkPropPrefix(A)||A,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function E(_,A,T){var B=A||_tempDiv,I=B.style,C=5;if(_ in I&&!T)return _;for(_=_.charAt(0).toUpperCase()+_.substr(1);C--&&!(_prefixes[C]+_ in I););return C<0?null:(C===3?"ms":C>=0?_prefixes[C]:"")+_},_initCore=function E(){_windowExists()&&window.document&&(_win=window,_doc=_win.document,_docElement=_doc.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap.core.reverting,_pluginInitted=1)},_getBBoxHack=function E(_){var A=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),T=this.parentNode,B=this.nextSibling,I=this.style.cssText,C;if(_docElement.appendChild(A),A.appendChild(this),this.style.display="block",_)try{C=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=E}catch{}else this._gsapBBox&&(C=this._gsapBBox());return T&&(B?T.insertBefore(this,B):T.appendChild(this)),_docElement.removeChild(A),this.style.cssText=I,C},_getAttributeFallbacks=function E(_,A){for(var T=A.length;T--;)if(_.hasAttribute(A[T]))return _.getAttribute(A[T])},_getBBox=function E(_){var A;try{A=_.getBBox()}catch{A=_getBBoxHack.call(_,!0)}return A&&(A.width||A.height)||_.getBBox===_getBBoxHack||(A=_getBBoxHack.call(_,!0)),A&&!A.width&&!A.x&&!A.y?{x:+_getAttributeFallbacks(_,["x","cx","x1"])||0,y:+_getAttributeFallbacks(_,["y","cy","y1"])||0,width:0,height:0}:A},_isSVG=function E(_){return!!(_.getCTM&&(!_.parentNode||_.ownerSVGElement)&&_getBBox(_))},_removeProperty=function E(_,A){if(A){var T=_.style,B;A in _transformProps&&A!==_transformOriginProp&&(A=_transformProp),T.removeProperty?(B=A.substr(0,2),(B==="ms"||A.substr(0,6)==="webkit")&&(A="-"+A),T.removeProperty(B==="--"?A:A.replace(_capsExp,"-$1").toLowerCase())):T.removeAttribute(A)}},_addNonTweeningPT=function E(_,A,T,B,I,C){var R=new PropTween(_._pt,A,T,0,1,C?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return _._pt=R,R.b=B,R.e=I,_._props.push(T),R},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function E(_,A,T,B){var I=parseFloat(T)||0,C=(T+"").trim().substr((I+"").length)||"px",R=_tempDiv.style,L=_horizontalExp.test(A),D=_.tagName.toLowerCase()==="svg",V=(D?"client":"offset")+(L?"Width":"Height"),U=100,z=B==="px",W=B==="%",Y,K,J,et;if(B===C||!I||_nonConvertibleUnits[B]||_nonConvertibleUnits[C])return I;if(C!=="px"&&!z&&(I=E(_,A,T,"px")),et=_.getCTM&&_isSVG(_),(W||C==="%")&&(_transformProps[A]||~A.indexOf("adius")))return Y=et?_.getBBox()[L?"width":"height"]:_[V],_round(W?I/Y*U:I/100*Y);if(R[L?"width":"height"]=U+(z?C:B),K=~A.indexOf("adius")||B==="em"&&_.appendChild&&!D?_:_.parentNode,et&&(K=(_.ownerSVGElement||{}).parentNode),(!K||K===_doc||!K.appendChild)&&(K=_doc.body),J=K._gsap,J&&W&&J.width&&L&&J.time===_ticker.time&&!J.uncache)return _round(I/J.width*U);if(W&&(A==="height"||A==="width")){var it=_.style[A];_.style[A]=U+B,Y=_[V],it?_.style[A]=it:_removeProperty(_,A)}else(W||C==="%")&&!_nonStandardLayouts[_getComputedProperty(K,"display")]&&(R.position=_getComputedProperty(_,"position")),K===_&&(R.position="static"),K.appendChild(_tempDiv),Y=_tempDiv[V],K.removeChild(_tempDiv),R.position="absolute";return L&&W&&(J=_getCache(K),J.time=_ticker.time,J.width=K[V]),_round(z?Y*I/U:Y&&I?U/Y*I:0)},_get=function E(_,A,T,B){var I;return _pluginInitted||_initCore(),A in _propertyAliases&&A!=="transform"&&(A=_propertyAliases[A],~A.indexOf(",")&&(A=A.split(",")[0])),_transformProps[A]&&A!=="transform"?(I=_parseTransform(_,B),I=A!=="transformOrigin"?I[A]:I.svg?I.origin:_firstTwoOnly(_getComputedProperty(_,_transformOriginProp))+" "+I.zOrigin+"px"):(I=_.style[A],(!I||I==="auto"||B||~(I+"").indexOf("calc("))&&(I=_specialProps[A]&&_specialProps[A](_,A,T)||_getComputedProperty(_,A)||_getProperty(_,A)||(A==="opacity"?1:0))),T&&!~(I+"").trim().indexOf(" ")?_convertToUnit(_,A,I,T)+T:I},_tweenComplexCSSString=function E(_,A,T,B){if(!T||T==="none"){var I=_checkPropPrefix(A,_,1),C=I&&_getComputedProperty(_,I,1);C&&C!==T?(A=I,T=C):A==="borderColor"&&(T=_getComputedProperty(_,"borderTopColor"))}var R=new PropTween(this._pt,_.style,A,0,1,_renderComplexString),L=0,D=0,V,U,z,W,Y,K,J,et,it,rt,st,lt;if(R.b=T,R.e=B,T+="",B+="",B==="auto"&&(K=_.style[A],_.style[A]=B,B=_getComputedProperty(_,A)||B,K?_.style[A]=K:_removeProperty(_,A)),V=[T,B],_colorStringFilter(V),T=V[0],B=V[1],z=T.match(_numWithUnitExp)||[],lt=B.match(_numWithUnitExp)||[],lt.length){for(;U=_numWithUnitExp.exec(B);)J=U[0],it=B.substring(L,U.index),Y?Y=(Y+1)%5:(it.substr(-5)==="rgba("||it.substr(-5)==="hsla(")&&(Y=1),J!==(K=z[D++]||"")&&(W=parseFloat(K)||0,st=K.substr((W+"").length),J.charAt(1)==="="&&(J=_parseRelative(W,J)+st),et=parseFloat(J),rt=J.substr((et+"").length),L=_numWithUnitExp.lastIndex-rt.length,rt||(rt=rt||_config.units[A]||st,L===B.length&&(B+=rt,R.e+=rt)),st!==rt&&(W=_convertToUnit(_,A,K,rt)||0),R._pt={_next:R._pt,p:it||D===1?it:",",s:W,c:et-W,m:Y&&Y<4||A==="zIndex"?Math.round:0});R.c=L<B.length?B.substring(L,B.length):""}else R.r=A==="display"&&B==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(B)&&(R.e=0),this._pt=R,R},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function E(_){var A=_.split(" "),T=A[0],B=A[1]||"50%";return(T==="top"||T==="bottom"||B==="left"||B==="right")&&(_=T,T=B,B=_),A[0]=_keywordToPercent[T]||T,A[1]=_keywordToPercent[B]||B,A.join(" ")},_renderClearProps=function E(_,A){if(A.tween&&A.tween._time===A.tween._dur){var T=A.t,B=T.style,I=A.u,C=T._gsap,R,L,D;if(I==="all"||I===!0)B.cssText="",L=1;else for(I=I.split(","),D=I.length;--D>-1;)R=I[D],_transformProps[R]&&(L=1,R=R==="transformOrigin"?_transformOriginProp:_transformProp),_removeProperty(T,R);L&&(_removeProperty(T,_transformProp),C&&(C.svg&&T.removeAttribute("transform"),_parseTransform(T,1),C.uncache=1,_removeIndependentTransforms(B)))}},_specialProps={clearProps:function E(_,A,T,B,I){if(I.data!=="isFromStart"){var C=_._pt=new PropTween(_._pt,A,T,0,0,_renderClearProps);return C.u=B,C.pr=-10,C.tween=I,_._props.push(T),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function E(_){return _==="matrix(1, 0, 0, 1, 0, 0)"||_==="none"||!_},_getComputedTransformMatrixAsArray=function E(_){var A=_getComputedProperty(_,_transformProp);return _isNullTransform(A)?_identity2DMatrix:A.substr(7).match(_numExp).map(_round)},_getMatrix=function E(_,A){var T=_._gsap||_getCache(_),B=_.style,I=_getComputedTransformMatrixAsArray(_),C,R,L,D;return T.svg&&_.getAttribute("transform")?(L=_.transform.baseVal.consolidate().matrix,I=[L.a,L.b,L.c,L.d,L.e,L.f],I.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:I):(I===_identity2DMatrix&&!_.offsetParent&&_!==_docElement&&!T.svg&&(L=B.display,B.display="block",C=_.parentNode,(!C||!_.offsetParent)&&(D=1,R=_.nextElementSibling,_docElement.appendChild(_)),I=_getComputedTransformMatrixAsArray(_),L?B.display=L:_removeProperty(_,"display"),D&&(R?C.insertBefore(_,R):C?C.appendChild(_):_docElement.removeChild(_))),A&&I.length>6?[I[0],I[1],I[4],I[5],I[12],I[13]]:I)},_applySVGOrigin=function E(_,A,T,B,I,C){var R=_._gsap,L=I||_getMatrix(_,!0),D=R.xOrigin||0,V=R.yOrigin||0,U=R.xOffset||0,z=R.yOffset||0,W=L[0],Y=L[1],K=L[2],J=L[3],et=L[4],it=L[5],rt=A.split(" "),st=parseFloat(rt[0])||0,lt=parseFloat(rt[1])||0,ct,at,ht,mt;T?L!==_identity2DMatrix&&(at=W*J-Y*K)&&(ht=st*(J/at)+lt*(-K/at)+(K*it-J*et)/at,mt=st*(-Y/at)+lt*(W/at)-(W*it-Y*et)/at,st=ht,lt=mt):(ct=_getBBox(_),st=ct.x+(~rt[0].indexOf("%")?st/100*ct.width:st),lt=ct.y+(~(rt[1]||rt[0]).indexOf("%")?lt/100*ct.height:lt)),B||B!==!1&&R.smooth?(et=st-D,it=lt-V,R.xOffset=U+(et*W+it*K)-et,R.yOffset=z+(et*Y+it*J)-it):R.xOffset=R.yOffset=0,R.xOrigin=st,R.yOrigin=lt,R.smooth=!!B,R.origin=A,R.originIsAbsolute=!!T,_.style[_transformOriginProp]="0px 0px",C&&(_addNonTweeningPT(C,R,"xOrigin",D,st),_addNonTweeningPT(C,R,"yOrigin",V,lt),_addNonTweeningPT(C,R,"xOffset",U,R.xOffset),_addNonTweeningPT(C,R,"yOffset",z,R.yOffset)),_.setAttribute("data-svg-origin",st+" "+lt)},_parseTransform=function E(_,A){var T=_._gsap||new GSCache(_);if("x"in T&&!A&&!T.uncache)return T;var B=_.style,I=T.scaleX<0,C="px",R="deg",L=getComputedStyle(_),D=_getComputedProperty(_,_transformOriginProp)||"0",V,U,z,W,Y,K,J,et,it,rt,st,lt,ct,at,ht,mt,yt,Tt,At,pt,Et,Vt,Ot,gt,bt,$t,Lt,St,Ct,_t,wt,Mt;return V=U=z=K=J=et=it=rt=st=0,W=Y=1,T.svg=!!(_.getCTM&&_isSVG(_)),L.translate&&((L.translate!=="none"||L.scale!=="none"||L.rotate!=="none")&&(B[_transformProp]=(L.translate!=="none"?"translate3d("+(L.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(L.rotate!=="none"?"rotate("+L.rotate+") ":"")+(L.scale!=="none"?"scale("+L.scale.split(" ").join(",")+") ":"")+(L[_transformProp]!=="none"?L[_transformProp]:"")),B.scale=B.rotate=B.translate="none"),at=_getMatrix(_,T.svg),T.svg&&(T.uncache?(bt=_.getBBox(),D=T.xOrigin-bt.x+"px "+(T.yOrigin-bt.y)+"px",gt=""):gt=!A&&_.getAttribute("data-svg-origin"),_applySVGOrigin(_,gt||D,!!gt||T.originIsAbsolute,T.smooth!==!1,at)),lt=T.xOrigin||0,ct=T.yOrigin||0,at!==_identity2DMatrix&&(Tt=at[0],At=at[1],pt=at[2],Et=at[3],V=Vt=at[4],U=Ot=at[5],at.length===6?(W=Math.sqrt(Tt*Tt+At*At),Y=Math.sqrt(Et*Et+pt*pt),K=Tt||At?_atan2(At,Tt)*_RAD2DEG:0,it=pt||Et?_atan2(pt,Et)*_RAD2DEG+K:0,it&&(Y*=Math.abs(Math.cos(it*_DEG2RAD))),T.svg&&(V-=lt-(lt*Tt+ct*pt),U-=ct-(lt*At+ct*Et))):(Mt=at[6],_t=at[7],Lt=at[8],St=at[9],Ct=at[10],wt=at[11],V=at[12],U=at[13],z=at[14],ht=_atan2(Mt,Ct),J=ht*_RAD2DEG,ht&&(mt=Math.cos(-ht),yt=Math.sin(-ht),gt=Vt*mt+Lt*yt,bt=Ot*mt+St*yt,$t=Mt*mt+Ct*yt,Lt=Vt*-yt+Lt*mt,St=Ot*-yt+St*mt,Ct=Mt*-yt+Ct*mt,wt=_t*-yt+wt*mt,Vt=gt,Ot=bt,Mt=$t),ht=_atan2(-pt,Ct),et=ht*_RAD2DEG,ht&&(mt=Math.cos(-ht),yt=Math.sin(-ht),gt=Tt*mt-Lt*yt,bt=At*mt-St*yt,$t=pt*mt-Ct*yt,wt=Et*yt+wt*mt,Tt=gt,At=bt,pt=$t),ht=_atan2(At,Tt),K=ht*_RAD2DEG,ht&&(mt=Math.cos(ht),yt=Math.sin(ht),gt=Tt*mt+At*yt,bt=Vt*mt+Ot*yt,At=At*mt-Tt*yt,Ot=Ot*mt-Vt*yt,Tt=gt,Vt=bt),J&&Math.abs(J)+Math.abs(K)>359.9&&(J=K=0,et=180-et),W=_round(Math.sqrt(Tt*Tt+At*At+pt*pt)),Y=_round(Math.sqrt(Ot*Ot+Mt*Mt)),ht=_atan2(Vt,Ot),it=Math.abs(ht)>2e-4?ht*_RAD2DEG:0,st=wt?1/(wt<0?-wt:wt):0),T.svg&&(gt=_.getAttribute("transform"),T.forceCSS=_.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(_,_transformProp)),gt&&_.setAttribute("transform",gt))),Math.abs(it)>90&&Math.abs(it)<270&&(I?(W*=-1,it+=K<=0?180:-180,K+=K<=0?180:-180):(Y*=-1,it+=it<=0?180:-180)),A=A||T.uncache,T.x=V-((T.xPercent=V&&(!A&&T.xPercent||(Math.round(_.offsetWidth/2)===Math.round(-V)?-50:0)))?_.offsetWidth*T.xPercent/100:0)+C,T.y=U-((T.yPercent=U&&(!A&&T.yPercent||(Math.round(_.offsetHeight/2)===Math.round(-U)?-50:0)))?_.offsetHeight*T.yPercent/100:0)+C,T.z=z+C,T.scaleX=_round(W),T.scaleY=_round(Y),T.rotation=_round(K)+R,T.rotationX=_round(J)+R,T.rotationY=_round(et)+R,T.skewX=it+R,T.skewY=rt+R,T.transformPerspective=st+C,(T.zOrigin=parseFloat(D.split(" ")[2])||!A&&T.zOrigin||0)&&(B[_transformOriginProp]=_firstTwoOnly(D)),T.xOffset=T.yOffset=0,T.force3D=_config.force3D,T.renderTransform=T.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,T.uncache=0,T},_firstTwoOnly=function E(_){return(_=_.split(" "))[0]+" "+_[1]},_addPxTranslate=function E(_,A,T){var B=getUnit(A);return _round(parseFloat(A)+parseFloat(_convertToUnit(_,"x",T+"px",B)))+B},_renderNon3DTransforms=function E(_,A){A.z="0px",A.rotationY=A.rotationX="0deg",A.force3D=0,_renderCSSTransforms(_,A)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function E(_,A){var T=A||this,B=T.xPercent,I=T.yPercent,C=T.x,R=T.y,L=T.z,D=T.rotation,V=T.rotationY,U=T.rotationX,z=T.skewX,W=T.skewY,Y=T.scaleX,K=T.scaleY,J=T.transformPerspective,et=T.force3D,it=T.target,rt=T.zOrigin,st="",lt=et==="auto"&&_&&_!==1||et===!0;if(rt&&(U!==_zeroDeg||V!==_zeroDeg)){var ct=parseFloat(V)*_DEG2RAD,at=Math.sin(ct),ht=Math.cos(ct),mt;ct=parseFloat(U)*_DEG2RAD,mt=Math.cos(ct),C=_addPxTranslate(it,C,at*mt*-rt),R=_addPxTranslate(it,R,-Math.sin(ct)*-rt),L=_addPxTranslate(it,L,ht*mt*-rt+rt)}J!==_zeroPx&&(st+="perspective("+J+_endParenthesis),(B||I)&&(st+="translate("+B+"%, "+I+"%) "),(lt||C!==_zeroPx||R!==_zeroPx||L!==_zeroPx)&&(st+=L!==_zeroPx||lt?"translate3d("+C+", "+R+", "+L+") ":"translate("+C+", "+R+_endParenthesis),D!==_zeroDeg&&(st+="rotate("+D+_endParenthesis),V!==_zeroDeg&&(st+="rotateY("+V+_endParenthesis),U!==_zeroDeg&&(st+="rotateX("+U+_endParenthesis),(z!==_zeroDeg||W!==_zeroDeg)&&(st+="skew("+z+", "+W+_endParenthesis),(Y!==1||K!==1)&&(st+="scale("+Y+", "+K+_endParenthesis),it.style[_transformProp]=st||"translate(0, 0)"},_renderSVGTransforms=function E(_,A){var T=A||this,B=T.xPercent,I=T.yPercent,C=T.x,R=T.y,L=T.rotation,D=T.skewX,V=T.skewY,U=T.scaleX,z=T.scaleY,W=T.target,Y=T.xOrigin,K=T.yOrigin,J=T.xOffset,et=T.yOffset,it=T.forceCSS,rt=parseFloat(C),st=parseFloat(R),lt,ct,at,ht,mt;L=parseFloat(L),D=parseFloat(D),V=parseFloat(V),V&&(V=parseFloat(V),D+=V,L+=V),L||D?(L*=_DEG2RAD,D*=_DEG2RAD,lt=Math.cos(L)*U,ct=Math.sin(L)*U,at=Math.sin(L-D)*-z,ht=Math.cos(L-D)*z,D&&(V*=_DEG2RAD,mt=Math.tan(D-V),mt=Math.sqrt(1+mt*mt),at*=mt,ht*=mt,V&&(mt=Math.tan(V),mt=Math.sqrt(1+mt*mt),lt*=mt,ct*=mt)),lt=_round(lt),ct=_round(ct),at=_round(at),ht=_round(ht)):(lt=U,ht=z,ct=at=0),(rt&&!~(C+"").indexOf("px")||st&&!~(R+"").indexOf("px"))&&(rt=_convertToUnit(W,"x",C,"px"),st=_convertToUnit(W,"y",R,"px")),(Y||K||J||et)&&(rt=_round(rt+Y-(Y*lt+K*at)+J),st=_round(st+K-(Y*ct+K*ht)+et)),(B||I)&&(mt=W.getBBox(),rt=_round(rt+B/100*mt.width),st=_round(st+I/100*mt.height)),mt="matrix("+lt+","+ct+","+at+","+ht+","+rt+","+st+")",W.setAttribute("transform",mt),it&&(W.style[_transformProp]=mt)},_addRotationalPropTween=function E(_,A,T,B,I){var C=360,R=_isString(I),L=parseFloat(I)*(R&&~I.indexOf("rad")?_RAD2DEG:1),D=L-B,V=B+D+"deg",U,z;return R&&(U=I.split("_")[1],U==="short"&&(D%=C,D!==D%(C/2)&&(D+=D<0?C:-C)),U==="cw"&&D<0?D=(D+C*_bigNum)%C-~~(D/C)*C:U==="ccw"&&D>0&&(D=(D-C*_bigNum)%C-~~(D/C)*C)),_._pt=z=new PropTween(_._pt,A,T,B,D,_renderPropWithEnd),z.e=V,z.u="deg",_._props.push(T),z},_assign=function E(_,A){for(var T in A)_[T]=A[T];return _},_addRawTransformPTs=function E(_,A,T){var B=_assign({},T._gsap),I="perspective,force3D,transformOrigin,svgOrigin",C=T.style,R,L,D,V,U,z,W,Y;B.svg?(D=T.getAttribute("transform"),T.setAttribute("transform",""),C[_transformProp]=A,R=_parseTransform(T,1),_removeProperty(T,_transformProp),T.setAttribute("transform",D)):(D=getComputedStyle(T)[_transformProp],C[_transformProp]=A,R=_parseTransform(T,1),C[_transformProp]=D);for(L in _transformProps)D=B[L],V=R[L],D!==V&&I.indexOf(L)<0&&(W=getUnit(D),Y=getUnit(V),U=W!==Y?_convertToUnit(T,L,D,Y):parseFloat(D),z=parseFloat(V),_._pt=new PropTween(_._pt,R,L,U,z-U,_renderCSSProp),_._pt.u=Y||0,_._props.push(L));_assign(R,B)};_forEachName("padding,margin,Width,Radius",function(E,_){var A="Top",T="Right",B="Bottom",I="Left",C=(_<3?[A,T,B,I]:[A+I,A+T,B+T,B+I]).map(function(R){return _<2?E+R:"border"+R+E});_specialProps[_>1?"border"+E:E]=function(R,L,D,V,U){var z,W;if(arguments.length<4)return z=C.map(function(Y){return _get(R,Y,D)}),W=z.join(" "),W.split(z[0]).length===5?z[0]:W;z=(V+"").split(" "),W={},C.forEach(function(Y,K){return W[Y]=z[K]=z[K]||z[(K-1)/2|0]}),R.init(L,W,U)}});var CSSPlugin={name:"css",register:_initCore,targetTest:function E(_){return _.style&&_.nodeType},init:function E(_,A,T,B,I){var C=this._props,R=_.style,L=T.vars.startAt,D,V,U,z,W,Y,K,J,et,it,rt,st,lt,ct,at,ht;_pluginInitted||_initCore(),this.styles=this.styles||_getStyleSaver(_),ht=this.styles.props,this.tween=T;for(K in A)if(K!=="autoRound"&&(V=A[K],!(_plugins[K]&&_checkPlugin(K,A,T,B,_,I)))){if(W=typeof V,Y=_specialProps[K],W==="function"&&(V=V.call(T,B,_,I),W=typeof V),W==="string"&&~V.indexOf("random(")&&(V=_replaceRandom(V)),Y)Y(this,_,K,V,T)&&(at=1);else if(K.substr(0,2)==="--")D=(getComputedStyle(_).getPropertyValue(K)+"").trim(),V+="",_colorExp.lastIndex=0,_colorExp.test(D)||(J=getUnit(D),et=getUnit(V)),et?J!==et&&(D=_convertToUnit(_,K,D,et)+et):J&&(V+=J),this.add(R,"setProperty",D,V,B,I,0,0,K),C.push(K),ht.push(K,0,R[K]);else if(W!=="undefined"){if(L&&K in L?(D=typeof L[K]=="function"?L[K].call(T,B,_,I):L[K],_isString(D)&&~D.indexOf("random(")&&(D=_replaceRandom(D)),getUnit(D+"")||D==="auto"||(D+=_config.units[K]||getUnit(_get(_,K))||""),(D+"").charAt(1)==="="&&(D=_get(_,K))):D=_get(_,K),z=parseFloat(D),it=W==="string"&&V.charAt(1)==="="&&V.substr(0,2),it&&(V=V.substr(2)),U=parseFloat(V),K in _propertyAliases&&(K==="autoAlpha"&&(z===1&&_get(_,"visibility")==="hidden"&&U&&(z=0),ht.push("visibility",0,R.visibility),_addNonTweeningPT(this,R,"visibility",z?"inherit":"hidden",U?"inherit":"hidden",!U)),K!=="scale"&&K!=="transform"&&(K=_propertyAliases[K],~K.indexOf(",")&&(K=K.split(",")[0]))),rt=K in _transformProps,rt){if(this.styles.save(K),st||(lt=_._gsap,lt.renderTransform&&!A.parseTransform||_parseTransform(_,A.parseTransform),ct=A.smoothOrigin!==!1&&lt.smooth,st=this._pt=new PropTween(this._pt,R,_transformProp,0,1,lt.renderTransform,lt,0,-1),st.dep=1),K==="scale")this._pt=new PropTween(this._pt,lt,"scaleY",lt.scaleY,(it?_parseRelative(lt.scaleY,it+U):U)-lt.scaleY||0,_renderCSSProp),this._pt.u=0,C.push("scaleY",K),K+="X";else if(K==="transformOrigin"){ht.push(_transformOriginProp,0,R[_transformOriginProp]),V=_convertKeywordsToPercentages(V),lt.svg?_applySVGOrigin(_,V,0,ct,0,this):(et=parseFloat(V.split(" ")[2])||0,et!==lt.zOrigin&&_addNonTweeningPT(this,lt,"zOrigin",lt.zOrigin,et),_addNonTweeningPT(this,R,K,_firstTwoOnly(D),_firstTwoOnly(V)));continue}else if(K==="svgOrigin"){_applySVGOrigin(_,V,1,ct,0,this);continue}else if(K in _rotationalProperties){_addRotationalPropTween(this,lt,K,z,it?_parseRelative(z,it+V):V);continue}else if(K==="smoothOrigin"){_addNonTweeningPT(this,lt,"smooth",lt.smooth,V);continue}else if(K==="force3D"){lt[K]=V;continue}else if(K==="transform"){_addRawTransformPTs(this,V,_);continue}}else K in R||(K=_checkPropPrefix(K)||K);if(rt||(U||U===0)&&(z||z===0)&&!_complexExp.test(V)&&K in R)J=(D+"").substr((z+"").length),U||(U=0),et=getUnit(V)||(K in _config.units?_config.units[K]:J),J!==et&&(z=_convertToUnit(_,K,D,et)),this._pt=new PropTween(this._pt,rt?lt:R,K,z,(it?_parseRelative(z,it+U):U)-z,!rt&&(et==="px"||K==="zIndex")&&A.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=et||0,J!==et&&et!=="%"&&(this._pt.b=D,this._pt.r=_renderCSSPropWithBeginning);else if(K in R)_tweenComplexCSSString.call(this,_,K,D,it?it+V:V);else if(K in _)this.add(_,K,D||_[K],it?it+V:V,B,I);else if(K!=="parseTransform"){_missingPlugin(K,V);continue}rt||(K in R?ht.push(K,0,R[K]):ht.push(K,1,D||_[K])),C.push(K)}}at&&_sortPropTweensByPriority(this)},render:function E(_,A){if(A.tween._time||!_reverting())for(var T=A._pt;T;)T.r(_,T.d),T=T._next;else A.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function E(_,A,T){var B=_propertyAliases[A];return B&&B.indexOf(",")<0&&(A=B),A in _transformProps&&A!==_transformOriginProp&&(_._gsap.x||_get(_,"x"))?T&&_recentSetterPlugin===T?A==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=T||{})&&(A==="scale"?_setterScaleWithRender:_setterTransformWithRender):_.style&&!_isUndefined(_.style[A])?_setterCSSStyle:~A.indexOf("-")?_setterCSSProp:_getSetter(_,A)},core:{_removeProperty,_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix;gsap.core.getStyleSaver=_getStyleSaver;(function(E,_,A,T){var B=_forEachName(E+","+_+","+A,function(I){_transformProps[I]=1});_forEachName(_,function(I){_config.units[I]="deg",_rotationalProperties[I]=1}),_propertyAliases[B[13]]=E+","+_,_forEachName(T,function(I){var C=I.split(":");_propertyAliases[C[1]]=B[C[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(E){_config.units[E]="px"});gsap.registerPlugin(CSSPlugin);var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;gsapWithCSS.core.Tween;class CompositionEffect{constructor(){se(this,"duration",.15);se(this,"ease","back")}async upOrDown(_,A,T=!0){let B=_,I=A;const C=T?1:-1,R=_.dog.container.position,L=A.dog.container.position;equal(R.y,L.y)?(L.x-R.x)*C>0&&(B=A,I=_):(L.y-R.y)*C>0&&(B=A,I=_);const D=I.dog.container.position.x,V=I.dog.container.position.y;return await this.animate(B,D,V),I.dog.remove(),[D,V]}up(_,A){return this.upOrDown(_,A)}down(_,A){return this.upOrDown(_,A,!1)}async between(_,A){const T=_.dog.container.position,B=A.dog.container.position,I=(T.x+B.x)/2,C=(T.y+B.y)/2;return await Promise.all([this.animate(_,I,C),this.animate(A,I,C)]),[I,C]}animate(_,A,T){return new Promise(B=>{gsapWithCSS.to(_.dog.container.position,{x:A,y:T,duration:this.duration,ease:this.ease,onComplete(){_.dog.remove(),B(!0)}})})}}const compositionEffect=new CompositionEffect;class NewDogCommand{constructor(_=Dog.randomLevel(),A=innerWidth/2,T=positionY){se(this,"_dog");this._dog=new Dog(_,A,T,"normal")}async execute(_){await this._dog.build(),_.addNewDog(this._dog)}}class SynthesisDogCommand{constructor(_,A,T){se(this,"_dog");this._dog=new Dog(_,A,T,"synthesis")}async execute(_){await this._dog.build(0),_.addNewDog(this._dog),await this._dog.grow()}}class ReleaseDogCommand{async execute(_){_.releaseDog()}}const releaseDogCommand=new ReleaseDogCommand;var LevelOfDog=(E=>(E[E.l1=1]="l1",E[E.l2=2]="l2",E[E.l3=3]="l3",E[E.l4=4]="l4",E[E.l5=5]="l5",E[E.l6=6]="l6",E[E.l7=7]="l7",E[E.l8=8]="l8",E[E.l9=9]="l9",E[E.l10a=10]="l10a",E))(LevelOfDog||{});const scaleOfDog=[.3,.4,.5,.6,.7,.8,.8,.9,.9,1],positionY=200*ratioOfWidth,Ii=class Ii{constructor(_,A,T,B="normal"){se(this,"lastPos",null);se(this,"_level");se(this,"_x");se(this,"_y");se(this,"_game");se(this,"_dogContainer");se(this,"_body",null);se(this,"_composition");se(this,"status");se(this,"_hasCollided",!1);se(this,"innerFixture",null);se(this,"realRadius",null);se(this,"uuid");this._level=_,this._x=A,this._y=T,this.uuid=v4(),this.status=B,Ii.maxLevel<_&&(Ii.maxLevel=_);const C=(this._composition=new Composition).compositionContainer;this._game=new Game;const R=this._dogContainer=new Container;R.name="dogContainer",C.addChild(R),B!=="normal"&&(this.hasCollide=!0)}static reset(){this.maxLevel=-1,this.countOfDog=0}static randomLevel(){if(this.countOfDog<3)return this.countOfDog+=1,1;const _=clamp$2(5,7,this.maxLevel);return randomInt(1,_)}static canSynthesis(_,A){const T=_.dog,B=A.dog;return!(T._level!==B._level||T._level>=10||T.status!=="released"||B.status!=="released")}static async synthesis(_,A){_.dog.status="died",A.dog.status="died",_.setType("static"),A.setType("static");const T=Ii.typeOfCompositionEffect,[B,I]=await compositionEffect[T](_,A),C=Math.min(_.level+1,10);return new SynthesisDogCommand(C,B,I)}get level(){return this._level}get container(){return this._dogContainer}get hasCollide(){return this._hasCollided}set hasCollide(_){this._hasCollided=_}get radius(){var A;const _=((A=this.innerFixture)==null?void 0:A.getShape().getRadius())||0;return meterToPixel(_)}async build(_){var J;const A=await((J=this._game.resourceManager)==null?void 0:J.loadAsset("game-page","spriteOfDogs")),T=LevelOfDog[this._level],B=scaleOfDog[this._level-1],I=A.textures[`${T}.png`],C=new Sprite(I);C.anchor.set(.5),C.scale.set(B);const R=this._dogContainer;R.addChild(C),R.scale.set(ratioOfWidth);const L=this.realRadius=R.width/2;_=_??L;const D=this._x,V=this.status==="normal"?this._y-_:this._y;R.position.set(D,V),R.scale.set(ratioOfWidth*_/L);const U=pixelToMeter(D),z=pixelToMeter(V),W=pixelToMeter(_),Y=pixelToMeter(_+Ii.offset),K=this._body=this._composition.world.createBody({type:this.getType(),position:new Vec2(U,z),bullet:!0,gravityScale:1});K.setActive(!1),this.innerFixture=K.createFixture({shape:new Circle(W),density:1,friction:.5,filterCategoryBits:1,filterMaskBits:1}),K.createFixture({shape:new Circle(Y),filterGroupIndex:this.level,filterCategoryBits:2,filterMaskBits:1}),K.name="dog",K.uuid=this.uuid,K.level=this._level,K.dog=this}getType(){return this.status==="normal"?"static":"dynamic"}async grow(){const _=this.radius,A=this.realRadius,T=this._dogContainer,B=this._body;if(B===null)throw Error("è¯·å¨ build ä¹åï¼è°ç¨ grow");B.setActive(!0);const I={r:_};await new Promise(R=>{gsapWithCSS.to(I,{r:A,duration:.15,ease:"none",onUpdate(){const L=I.r;T.scale.set(ratioOfWidth*L/A);let D=B.getFixtureList();for(;D;){const z=D;D=z.getNext(),B.destroyFixture(z)}const V=pixelToMeter(L),U=pixelToMeter(L+Ii.offset);B.dog.innerFixture=B.createFixture({shape:new Circle(V),density:1,friction:.5,filterCategoryBits:1,filterMaskBits:1}),B.createFixture({shape:new Circle(U),filterGroupIndex:B.dog.level,filterCategoryBits:2,filterMaskBits:1}),B.synchronizeFixtures()},onComplete(){B.dog.status="released",R(!0)}})})}release(){const _=this._body;if(_===null)throw Error("è¯·å¨ build ä¹åï¼è°ç¨ release");_.setType("dynamic"),_.setActive(!0),this.status="released",this.lastPos=_.getPosition().clone()}move(_){const A=this._body;if(A===null)throw Error("è¯·å¨ build ä¹åï¼è°ç¨ move");const T=this.radius;_=clamp$2(T,innerWidth-T,_);const B=pixelToMeter(_),I=pixelToMeter(positionY-this.realRadius);A.setPosition(new Vec2(B,I))}update(){if(this.status!=="died"&&this._body){const _=this._body.getPosition(),A=this._body.getAngle();this._dogContainer.position=_.clone().mul(scale),this._dogContainer.rotation=A}}remove(){this._dogContainer.removeFromParent(),this._dogContainer.destroy();const _=this._body;if(_===null)throw Error("è¯·å¨ build ä¹åï¼è°ç¨ remove");this.status="died",this._composition.world.destroyBody(_)}sleep(){const _=this._body;if(_===null)throw Error("è¯·å¨ build ä¹åï¼è°ç¨ sleep");_.setAwake(!1)}wakeup(){if(this._body===null)throw Error("è¯·å¨ build ä¹åï¼è°ç¨ wakeup")}hasExceededCordon(){if(this.status!=="released")return!1;const _=this._body;if(_===null)throw Error("è¯·å¨ build ä¹åï¼è°ç¨ hasExceededCordon");const A=_.getPosition();return meterToPixel(A.y)-this.realRadius<positionY}applyForce(_){this.hasCollide||(this._hasCollided=!0,_.dog.hasCollide=!0)}bounce(){this.hasCollide||(this._hasCollided=!0,this.lastPos=null)}};se(Ii,"name","dog"),se(Ii,"impulse",5e3),se(Ii,"maxLevel",-1),se(Ii,"countOfDog",0),se(Ii,"typeOfCompositionEffect","down"),se(Ii,"offset",6*ratioOfWidth);let Dog=Ii;var stats_min$1={exports:{}};(function(E,_){(function(A,T){E.exports=T()})(commonjsGlobal,function(){var A=function(){function T(W){return C.appendChild(W.dom),W}function B(W){for(var Y=0;Y<C.children.length;Y++)C.children[Y].style.display=Y===W?"block":"none";I=W}var I=0,C=document.createElement("div");C.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",C.addEventListener("click",function(W){W.preventDefault(),B(++I%C.children.length)},!1);var R=(performance||Date).now(),L=R,D=0,V=T(new A.Panel("FPS","#0ff","#002")),U=T(new A.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var z=T(new A.Panel("MB","#f08","#201"));return B(0),{REVISION:16,dom:C,addPanel:T,showPanel:B,begin:function(){R=(performance||Date).now()},end:function(){D++;var W=(performance||Date).now();if(U.update(W-R,200),W>L+1e3&&(V.update(1e3*D/(W-L),100),L=W,D=0,z)){var Y=performance.memory;z.update(Y.usedJSHeapSize/1048576,Y.jsHeapSizeLimit/1048576)}return W},update:function(){R=this.end()},domElement:C,setMode:B}};return A.Panel=function(T,B,I){var C=1/0,R=0,L=Math.round,D=L(window.devicePixelRatio||1),V=80*D,U=48*D,z=3*D,W=2*D,Y=3*D,K=15*D,J=74*D,et=30*D,it=document.createElement("canvas");it.width=V,it.height=U,it.style.cssText="width:80px;height:48px";var rt=it.getContext("2d");return rt.font="bold "+9*D+"px Helvetica,Arial,sans-serif",rt.textBaseline="top",rt.fillStyle=I,rt.fillRect(0,0,V,U),rt.fillStyle=B,rt.fillText(T,z,W),rt.fillRect(Y,K,J,et),rt.fillStyle=I,rt.globalAlpha=.9,rt.fillRect(Y,K,J,et),{dom:it,update:function(st,lt){C=Math.min(C,st),R=Math.max(R,st),rt.fillStyle=I,rt.globalAlpha=1,rt.fillRect(0,0,V,K),rt.fillStyle=B,rt.fillText(L(st)+" "+T+" ("+L(C)+"-"+L(R)+")",z,W),rt.drawImage(it,Y+D,K,J-D,et,Y,K,J-D,et),rt.fillRect(Y+J-D,K,D,et),rt.fillStyle=I,rt.globalAlpha=.9,rt.fillRect(Y+J-D,K,D,L((1-st/lt)*et))}}},A})})(stats_min$1);var stats_minExports=stats_min$1.exports;const stats_min=getDefaultExportFromCjs(stats_minExports),Stats=_mergeNamespaces({__proto__:null,default:stats_min},[stats_minExports]),_r=class _r{constructor(){se(this,"hidden",!0);se(this,"timer",null);se(this,"_game");se(this,"_sprite",null);if(_r._instance)return _r._instance;_r._instance=this,this._game=new Game,this.twinkle=this.twinkle.bind(this)}async build(){var B;const _=await((B=this._game.resourceManager)==null?void 0:B.loadAsset("game-page","cordon")),A=this._sprite=new Sprite(_),T="cordon";return A.name=T,A.zIndex=-1,A.visible=!1,A.scale.set(ratioOfWidth),A.anchor.set(.5,0),A.position.set(innerWidth/2,positionY),A}show(){if(!this.hidden)return;this.hidden=!1;const _=this._sprite;if(_===null)throw Error("å¨è°ç¨ build ä¹åè°ç¨");_.visible=!0}twinkle(){if(this.hidden)return;const _=this._sprite;if(_===null)throw Error("å¨è°ç¨ build ä¹åè°ç¨");_.visible?_.visible=!1:_.visible=!0,this.timer=setTimeout(this.twinkle,150)}showAndTwinkle(){this.hidden&&(this.show(),this.twinkle())}cancelTwinkle(){this.timer&&clearTimeout(this.timer)}hide(){if(this.hidden)return;this.hidden=!0,this.cancelTwinkle();const _=this._sprite;if(_===null)throw Error("å¨è°ç¨ build ä¹åè°ç¨");_.visible=!1}};se(_r,"_instance");let Cordon=_r;const vr=class vr{constructor(){se(this,"_composition");if(vr._instance)return vr._instance;vr._instance=this,this._composition=new Composition}build(){const _=innerHeight/2,A=pixelToMeter(_),T=pixelToMeter(innerWidth),B=new Edge(new Vec2(0,-A),new Vec2(0,A));this._composition.world.createBody({type:"static",position:new Vec2(0,A)}).createFixture({shape:B,filterCategoryBits:1,filterMaskBits:1}),this._composition.world.createBody({type:"static",position:new Vec2(T,A)}).createFixture({shape:B,filterCategoryBits:1,filterMaskBits:1})}};se(vr,"_instance");let Wall=vr;const rr=class rr{constructor(){se(this,"_game");se(this,"_composition");if(rr._instance)return rr._instance;rr._instance=this,this._game=new Game,this._composition=new Composition}async build(){var W;const _=await((W=this._game.resourceManager)==null?void 0:W.loadAsset("game-page","grass")),A=new Sprite(_),T="grass";A.name=T,A.zIndex=-1,A.scale.set(ratioOfWidth),A.anchor.set(0,1),A.position.set(0,innerHeight);const B=A.height,I=innerWidth/2,C=innerHeight-B/2,R=pixelToMeter(I),L=pixelToMeter(C),D=pixelToMeter(I),V=pixelToMeter(B/2),U=this._composition.world.createBody({type:"static",position:new Vec2(R,L)}),z=new Box(D,V);return U.createFixture({shape:z,friction:.2,restitution:.1,filterCategoryBits:1,filterMaskBits:1}),U.name=T,A}};se(rr,"name","grass"),se(rr,"_instance");let Grass=rr;const gr=class gr{constructor(){se(this,"_game");se(this,"_compositionContainer");se(this,"_unreleasedDog",null);se(this,"_dogs",[]);se(this,"world");se(this,"canvas");se(this,"stats");se(this,"status","running");se(this,"cordon",null);se(this,"tolerence",0);se(this,"maxCountOfTolerence",10);se(this,"currentPoint",null);if(gr._instance)return gr._instance;gr._instance=this;const _=this._game=new Game,A=this._compositionContainer=new Container;A.name="compositionContainer",A.sortableChildren=!0;const T=_.rootContainer;T==null||T.addChild(A),this.world=new World({gravity:new Vec2(0,10),continuousPhysics:!1}),this.canvas=document.querySelector("canvas");const B=this.stats=new Stats;B.showPanel(1),document.body.appendChild(B.dom),this.handleCollisionStart(),this.handleMouseDown(),this.handleMouseMove(),this.handleMouseUp(),this.handleVisibilityChange(),this.judge=this.judge.bind(this),this.start=this.start.bind(this)}get compositionContainer(){return this._compositionContainer}hasUnreleasedDog(){return this._unreleasedDog!==null}removeDog(_){this._dogs=this._dogs.filter(A=>A.uuid!==_.uuid)}addNewDog(_){_.status==="normal"?this._unreleasedDog=_:this._dogs.push(_)}releaseDog(){const _=this._unreleasedDog;_&&(this._unreleasedDog=null,_.release(),this._dogs.push(_))}moveDog(_){const A=this._unreleasedDog;A&&(_||(_=randomInt(A.radius,innerWidth$1-A.radius)),A.move(_))}async build(){this.buildGrass(),this.buildWall(),this.buildCordon(),await this.start()}async start(){var _,A;this._dogs.forEach(T=>T.remove()),(_=this._unreleasedDog)==null||_.remove(),this._dogs=[],this._unreleasedDog=null,(A=this.cordon)==null||A.hide(),Dog.reset(),await delay(150),this.status="running",await this.next()}async buildGrass(){const A=await new Grass().build();this._compositionContainer.addChild(A)}buildWall(){new Wall().build()}async buildCordon(){const A=await(this.cordon=new Cordon).build();this._compositionContainer.addChild(A)}update(){var A,T,B;if(this.status!=="running")return;(A=this.stats)==null||A.begin();const _=Math.floor(((T=this._game.ticker)==null?void 0:T.FPS)||60);this.world.step(1/_,40,15),this._dogs.forEach(I=>{I.update()}),this.hasUnreleasedDog()&&this._unreleasedDog.update(),(B=this.stats)==null||B.end()}judge(){var A,T,B,I;if(this._dogs.length===0||this.status!=="running")return;this._dogs.some(C=>C.hasExceededCordon())?(this.tolerence++,(A=this.cordon)==null||A.showAndTwinkle(),this.tolerence>this.maxCountOfTolerence?((T=this.cordon)==null||T.cancelTwinkle(),(B=this.cordon)==null||B.show(),this.status="gameover",this.tolerence=0,alert("ç¹å»ç¡®è®¤æé®ï¼3ç§åèªå¨éæ°å¼å§æ¸¸æ"),setTimeout(this.start,3e3)):setTimeout(this.judge,200)):((I=this.cordon)==null||I.hide(),this.tolerence=0)}async next(){if(this.status==="gameover"||this.status==="paused")return;await new NewDogCommand().execute(this)}handleVisibilityChange(){document.addEventListener("visibilitychange",()=>{var _,A;document.hidden?(this.status="hidden",(_=this._game.ticker)==null||_.stop()):(this.status="running",(A=this._game.ticker)==null||A.start(),this.judge())})}handleMouseDown(){this.canvas.addEventListener("touchstart",_=>{if(this.status!=="running")return;const A=_.touches[0];A&&(this.currentPoint=A)},{passive:!0})}handleMouseMove(){this.canvas.addEventListener("touchmove",_=>{if(this.status!=="running")return;const A=_.touches[0];if(A){this.currentPoint=A;const T=A.pageX;if(this._unreleasedDog===null)return;this.moveDog(T)}},{passive:!0})}handleMouseUp(){this.canvas.addEventListener("touchend",async()=>{if(this.status!=="running")return;const _=this.currentPoint;if(_){const A=_.pageX;if(this._unreleasedDog===null)return;this.moveDog(A),releaseDogCommand.execute(this),this.judge(),await delay(800),this.next()}})}handleCollisionStart(){this.world.on("begin-contact",async _=>{const A=_.getFixtureA(),T=_.getFixtureB(),B=A.getBody(),I=T.getBody();if(B.name===Dog.name&&B.name===I.name&&Dog.canSynthesis(B,I)){const C=await Dog.synthesis(B,I);this.removeDog(B.dog),this.removeDog(I.dog),await C.execute(this),this.judge()}B.name===Grass.name&&(I.dog.hasCollide||I.dog.bounce()),I.name===Grass.name&&(B.dog.hasCollide||B.dog.bounce())})}};se(gr,"_instance");let Composition=gr;const scale=128;function pixelToMeter(E){return E/scale}function meterToPixel(E){return E*scale}const yr=class yr{constructor(){se(this,"rootContainer",null);se(this,"modalContainer",null);se(this,"resourceManager",null);se(this,"_composition",null);se(this,"ticker");var B,I;if(yr._instance)return yr._instance;yr._instance=this;const _=new AdDog,A=this.rootContainer=new Container;A.name="rootContainer",A.sortableChildren=!0,(B=_.app)==null||B.stage.addChild(this.rootContainer),this.resourceManager=new ResourceManager,this.update=this.update.bind(this);const T=this.ticker=(I=_.app)==null?void 0:I.ticker;T&&T.add(this.update)}async build(){await new Bg().build(),await(this._composition=new Composition).build()}update(){var _;(_=this._composition)==null||_.update()}};se(yr,"_instance",null);let Game=yr;const xr=class xr{constructor(){se(this,"_root",null);se(this,"_hasInit",!1);se(this,"_app",null);if(xr._instance)return xr._instance;xr._instance=this,this._root=document.querySelector("#app"),this.build(),this.handleOrientationChange()}get app(){return this._app}build(){var _;if(isPortrait()){if(this._hasInit)return;const T=(this._app=new Application({resizeTo:window,resolution:window.devicePixelRatio,autoDensity:!0,width:window.innerWidth,height:window.innerHeight,backgroundColor:"white"})).view;T.addEventListener("webglcontextlost",()=>{console.log("i am lost")}),(_=this._root)==null||_.appendChild(T),this._hasInit=!0,this.goToGame()}}handleOrientationChange(){window.addEventListener("orientationchange",()=>{this.build()})}goToGame(){new Game().build()}};se(xr,"_instance",null);let AdDog=xr;new VConsole;new AdDog;
